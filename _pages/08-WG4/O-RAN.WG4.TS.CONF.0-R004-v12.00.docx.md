---
title: O-RAN.WG4.TS.CONF.0-R004-v12.00.docx.md
author: O-RAN Alliance, WG4
layout: post
---

- View in [GitHub Mode]({{site.github_page_url}}/O-RAN.WG4.TS.CONF.0-R004-v12.00.docx.md).
- Go back to [Table of Contents]({{site.baseurl}}/).
- Download the [Original Document]({{site.download_url}}/O-RAN.WG4.TS.CONF.0-R004-v12.00.docx).

---

* toc
{:toc}

---

![webwxgetmsgimg (7).jpeg]({{site.baseurl}}/assets/images/9c69df009b87.jpg)O-RAN.WG4.TS.CONF.0-R004-v12.00

*Technical Specification*

**O-RAN Working Group 4 (Fronthaul Working Group) Conformance Test Specification**

Copyright (C) 2024 by the O-RAN ALLIANCE e.V.

The copying or incorporation into any other work of part or all of the material available in this specification in any form without the prior written permission of O-RAN ALLIANCE e.V. is prohibited, save that you may print or download extracts of the material of this specification for your personal use, or copy the material of this specification for the purpose of sending to individual third parties for their information provided that you acknowledge O-RAN ALLIANCE as the source of the material and that you inform the third party that these conditions apply to them and that they must comply with them.

O-RAN ALLIANCE e.V., Buschkauler Weg 27, 53347 Alfter, Germany

# Revision History

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Date** | **Revision** | **Description** |
| 2020.06.02 | 01.00 | Final Version 01.00 |
| 2020.10.25 | 01.00.01 | Integrate VIA-0001, KEY-0003, VIA-0002, KEY-0008 |
| 2020.10.25 | 01.00.02 | Integrate, KEY-0006 |
| 2020.11.01 | 01.00.03 | Integrate KEY-0011, KEY-0004, KEY-0005, SPL-0001 |
| 2020.11.02 | 01.00.04 | Integrate KEY-0007, KEY-0009, VIA.RDS-0001 |
| 2020.11.06 | 02.00 | Address all review comments and finalize release |
| 2021.02.04 | 02.00.06 | Include approved CRs versions 02.00.01-02.00.06: INT-0009, FJT- 0002, RNS-0001, VIA-0003 KEY-0010, KEY-0013, DCM-0009, KEY-0014, NEC-0007, NEC-0008, VIA-0004, KEY-0015, KEY- 0016, KEY-RNS-0019, KEY-0017, KEY-0018 and add new test  cases to the clause 1.2.4 Test Requirement Status table |
| 2021.03.01 | 02.00.07 | Fix missing changes 2 and 3 of CR DCM-0009 and included FJT- 0003, NEC-0008. |
| 2021.03.05 | 03.00.00 | All comments addressed and finalized |
| 2021.05.31 | 03.00.01 | Included approved CRs: FJT-0004, XLX-0001, KEY-0019, KEY- 0020, KEY-0021, KEY-0022, KEY-0023, KEY-0025 |
| 2021.06.23 | 03.00.02 | Included approved CRs: KEY-0024, KEY-0026, KEY-0027, KEY- 0028, NVI-0101, RNS-0002, RNS-0003, RNS-0004, RNS-0005 |
| 2021.07.11 | 04.00.00 | Final version 4 incorporatingall comments received after version 03.00.02 |
| 2022.03.08 | 04.00.01 | Includes initial typographical and similar corrections from the review spreadsheet and approved CRs RNS-0006, FJT-0005, RNS- 0008, RNS-0009, KEY-0029 KEY-0030 NEC-0013, FJT-0008, KEY-0031, KEY-0032, FJT-0009, FJT-0010, KEY-0030, KEY- 0033 |
| 2022.03.15 | 04.00.02 | Includes RNS-0010, FJT-0010 v4, KEY.CMC-0034, comments register items 1-33 |
| 2022.03.20 | 04.00.03 | Includes changes to address comments from FJT and NOK from Comments-Register-CONF-v05.00-r6.xlsx |
| 2022.03.24 | 05.00 | Include comments up to and including comment 56 in the comments register version 8. |
| 2022.07.14 | 05.00.01 | Include CRs KEY-CMCC-0002, KEY-0037, VIA-0005, CAL-0001,  VIA-0006, VIA-0007, CAL-0003 and comments register items 1-6 |
| 2022.07.14 | 05.00.02 | Include CRs FJT-0013, NEC-0015, EC-0016, NEC-0017, FJ-0014,  RNS-0011, RNS-0012 and comments register items 7-18 |
| 2022.07.15 | 05.00.03 | Include comments register items 19-60 |
| 2022.07.19 | 06.00 | Include comments 61-63 and update to version 06.00 |
| 2022.10.30 | 06.00.01 | Include CRs CAL-0002-r4, KEY-CUC-0001-r4, FJT-0015-r2, FJT- 0016, FJT-0017, KEY-0039 |
| 2022.11.03 | 06.00.02 | Include CRs KEY-0040, FJT-0018, VIA-0011 and all comments |
| 2022.11.12 | 07.00 | Final draft review comments included |
| 2023.02.26 | 07.00.01 | Include CRs FJT-0019, FJT-0020, CAL-0004, KEY-0041, KEY- 0042, KEY-0043, CAL-0005, KEY-0044, APOP-0003, APOP-0004, FJT-0021 |
| 2023.03.05 | 07.00.02 | KEY-0044-R2, Review comments 1-42 |
| 2023.03.12 | 08.00 | Final review comments |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Date** | **Revision** | **Description** |
| 2023.07.13 | 08.00.01 | Include CRs KEY-0045, KEY-0046, KEY-0047, CAL-0006, NOK- 0136, KEY-0048, FJT-0027, FJT-0028, FJT-0029, FJT-0030, CAL-  0007, CAL-0008 |
| 2023.07.17 | 08.00.02 | Update with comments spreadsheet |
| 2023.07.19 | 09.00 | Update with comments spreadsheet version 6 |
| 2024.03.12 | 09.00.01 | Include CRs NVD-0001, KEY-0049 |
| 2024.03.22 | 10.00 | Updated with all comments from v09.00.01 |
| 2024.06.25 | 10.01 | Include CR NOK-0174 |
| 2024.06.26 | 10.02 | Include CR CAL-0014, ERI-0114, NEC-0027 |
| 2024.06.27 | 10.03 | Include CR NEC-0028, NEC-0029. NEC-0030, NEC-0031, NEC- 0032, NEC-0033, NEC-0034, NEC-0035 |
| 2024.07.02 | 10.04 | Update with comments spreadsheet version v1.0 |
| 2024.07.03 | 10.05 | Include CR NOK-0175 |
| 2024.07.12 | 10.06 | Update with comments spreadsheet version v5.0 |
| 2024.07.18 | 10.07 | Update with comments spreadsheet version v8.0 |
| 2024.07.19 | 10.08 | Fix some references in the 3.3.3 chapter. |
| 2024.07.19 | 11.00 | Final version for publication. |
| 2024.11.6 | 11.01 | Include CR NEC-0037, NEC-0038, QCM-0087, KEY-0051, KEY- 0055, CAL-0020 |
| 2024.11.11 | 11.02 | Include CR CAL-0021, NOK-0194, KEY-0053, VIA-0012, VIA- 0013 |
| 2024.11.12 | 11.03 | Include CR NEC-0040, NEC-0041, NEC-0042, NEC-0043, NEC- 0044, NEC-0045, SAM-126, NOK-0197 |
| 2024.11.13 | 11.04 | Include CR NEC-0039, XNET-0001, NOK-0201, ERI-0131 |
| 2024.11.14 | 11.05 | Minor text format edits, changes to list type in D. Sections, changed word "Note :" to "NOTE :". |
| 2024.11.20 | 11.00.06 | Apply editorial changes in the NOK-NEC-Comments-Register- CONF-v11.05\_v2.0. Also include CR KEY-0056, SAM-0127, NOK-0198. |
| 2024.11.22 | 11.00.07 | Apply editorial changes in the NOK-NEC-ERI-Comments-Register- CONF-v11.00.06\_v3.0. |
| 2024.11.26 | 11.00.08 | Apply editorial changes in the NOK-NEC-ERI-SAM-Comments- Register-CONF-v11.00.06\_v4.0. |
| 2024.11.27 | 11.00.09 | Applied latest editorial comments from NOK-NEC-ERI-SAM- Comments-Register-CONF-v11.00.08\_v6.0 |
| 2024.11.29 | 12.00 | Final version for publication |

</div>

Table of Contents

Revision History 2

1. Introductory Material 7
   1. Foreword 7
   2. Scope 7
      1. General 7
      2. U-Plane and C-Plane Scope 7
      3. S-Plane 7
      4. Test Requirement Status 8
   3. References 21
   4. Definitions 22
   5. Abbreviations 23
2. Test Configuration 25
   1. Test Configuration for O-RU as the Device Under Test 25
   2. Test Configuration for O-DU as the Device Under Test 26
   3. Test Configuration for Shared Cell Configurations 27
      1. Test Configuration for FHM as the Device Under Test 27
3. Conformance Measurements 28
   1. M-Plane Measurements 28
      1. Transport and Handshake Test Scenarios 28

![]({{site.baseurl}}/assets/images/f28663faa7f9.png)Transport and Handshake in IPv4/SSH Environment (positive case) 28

![]({{site.baseurl}}/assets/images/f7fa156b1dba.png)Transport and Handshake in IPv4/SSH Environment (negative case) 30

![]({{site.baseurl}}/assets/images/7c66e49678a0.png)Transport and Handshake in IPv6/SSH Environment (positive case) 31

![]({{site.baseurl}}/assets/images/f12832dfcd5f.png)Transport and Handshake in IPv6/SSH Environment (negative case) 31

![]({{site.baseurl}}/assets/images/c0e7fd6f168c.png)Transport and Handshake in IPv4/TLS Environment (positive case) 31

![]({{site.baseurl}}/assets/images/d4d8e144f579.png)Transport and Handshake in IPv4/TLS Environment (negative case) 31

![]({{site.baseurl}}/assets/images/903d6b97df00.png)Transport and Handshake in IPv6/TLS Environment (positive case) 31

![]({{site.baseurl}}/assets/images/051e5ad0c41a.png)Transport and Handshake in IPv6/TLS Environment (negative case) 31

* + 1. Manage Alarm Requests 31

![]({{site.baseurl}}/assets/images/b6597d0b8d68.png)Subscription to Notifications 31

* + 1. M-Plane Connection Supervision 32

![]({{site.baseurl}}/assets/images/70e89ddf5848.png)M-Plane connection supervision (positive case) 32

![]({{site.baseurl}}/assets/images/c99d39da5ce5.png)M-Plane Connection Supervision (negative case) 33

* + 1. Retrieval of O-RU's information elements 34

![]({{site.baseurl}}/assets/images/8c50c4568545.png)Retrieval without Filter Applied 34

![]({{site.baseurl}}/assets/images/3936b13f5606.png)Retrieval with filter applied 35

* + 1. Fault Management 35

![]({{site.baseurl}}/assets/images/01c02082586e.png)O-RU Alarm Notification Generation 35

![]({{site.baseurl}}/assets/images/de68c084774b.png)Retrieval of Active Alarm List 37

* + 1. O-RU Software Update 38

![]({{site.baseurl}}/assets/images/9b95c0b11596.png)O-RU Software Update and Install (positive case) 38

![]({{site.baseurl}}/assets/images/e1b9343d280f.png)O-RU Software Update (negative case) 39

* + 1. O-RU Software Activation 41

![]({{site.baseurl}}/assets/images/30489d393fc4.png)Software Activation without Reset 41

![]({{site.baseurl}}/assets/images/36cd159bb420.png)Supplemental Reset after Software Activation 42

* + 1. Access Control 43

![]({{site.baseurl}}/assets/images/da77881fb773.png)Sudo on Hybrid M-plane Architecture (positive case) 43

![]({{site.baseurl}}/assets/images/75dfe5659c11.png)Access Control Sudo (negative case) 46

![]({{site.baseurl}}/assets/images/d20f77fc22b5.png)Access Control NMS (negative case) 48

![]({{site.baseurl}}/assets/images/0d159df6868c.png)Access Control FM-PM (negative case) 49

![]({{site.baseurl}}/assets/images/9829f67e949f.png)Access Control SWM (negative case) 50

![]({{site.baseurl}}/assets/images/bf64c06b660c.png)Sudo on Hierarchical M-plane architecture (positive case) 51

![]({{site.baseurl}}/assets/images/d748d141700b.png)Access Control SMO (negative case) 53

![]({{site.baseurl}}/assets/images/1696470e2aba.png)Access Control Hybrid-ODU (negative case) 54

![]({{site.baseurl}}/assets/images/e29b819c16cf.png)Access Control Carrier (negative case) 55

![]({{site.baseurl}}/assets/images/cf4f7757d54f.png)Access Control change own password 55

* + 1. External Input / Output Ports 56

![]({{site.baseurl}}/assets/images/885033fb6369.png)External Input Port State Detection 56

![]({{site.baseurl}}/assets/images/9d5782935bf9.png)External Output Port State Control 58

* + 1. O-RU Configurability 59

![]({{site.baseurl}}/assets/images/c4591ff2043e.png)O-RU Configurability Test (positive case) 59

![]({{site.baseurl}}/assets/images/ebb95af6acdc.png)O-RU Configurability Test (negative case) 61

* + 1. ALD Communications 62

![]({{site.baseurl}}/assets/images/f1cf399b6828.png)ALD Communications Test 62

* + 1. Log Management 66

![]({{site.baseurl}}/assets/images/85c8d0ef8d60.png)Troubleshooting Test 66

![]({{site.baseurl}}/assets/images/cce2e2a53072.png)Trace Test 67

* + 1. Connectivity Check 70

![]({{site.baseurl}}/assets/images/76e3ed93f374.png)Ethernet Connectivity Monitoring 70

![]({{site.baseurl}}/assets/images/52d4abf842da.png)UDP Echo Test 71

* + 1. Energy Savings 71

![]({{site.baseurl}}/assets/images/2f29d327ae1a.png)Carrier Deactivation and Energy Saving Configuration 71

![]({{site.baseurl}}/assets/images/67c11ae1551c.png)Carrier Activation 72

![]({{site.baseurl}}/assets/images/c93b051ab1d3.png)Subscription and Reporting of Energy, Power and Environmental (EPE) Statistics 73

![]({{site.baseurl}}/assets/images/4a4d673364eb.png)M-Plane based TRX control 75

![]({{site.baseurl}}/assets/images/b995bb4bea62.png)Deep-hibernate 79

![]({{site.baseurl}}/assets/images/2613320a2c8d.png)Data layer control 80

* 1. UC-Plane Measurements O-RU 82
     1. UC-Plane Standard Test Definitions 82

![]({{site.baseurl}}/assets/images/041342e94797.png)UC-Plane Measurements, O-RU TEST SCENARIO 82

* + 1. Minimum Capabilities of the TER for U-Plane and C-Plane Tests 93

![]({{site.baseurl}}/assets/images/913c1f1b15fd.png)Signal Analyzer 93

![]({{site.baseurl}}/assets/images/04492d0d1315.png)Signal Generator 93

![]({{site.baseurl}}/assets/images/684659b15384.png)CUSM-Plane Emulator (CUSM-E) 93

* + 1. FR1 FDD Conducted-Signal Tests 93

![]({{site.baseurl}}/assets/images/79131a25f317.png)UC-Plane O-RU Scenario Class NR testing Generic (NRG) 93

![]({{site.baseurl}}/assets/images/50866689c4b7.png)UC-Plane O-RU Scenario Class Beamforming (BFM) 140

![]({{site.baseurl}}/assets/images/9a0eaa26e68d.png)UC-Plane O-RU Scenario Class Compression (CMP) 171

![]({{site.baseurl}}/assets/images/0d13042d5a30.png)UC-Plane O-RU Scenario Class Delay Management (DLM) 197

![]({{site.baseurl}}/assets/images/eb4fb9353f1f.png)UC-Plane O-RU Scenario Class Transport (TRN) 205

![]({{site.baseurl}}/assets/images/9850cc974a1d.png)UC-Plane O-RU Scenario Class LAA (LAA) 205

![]({{site.baseurl}}/assets/images/dbe55be93a06.png)UC-Plane O-RU Scenario Class LTE (LTE) 208

![]({{site.baseurl}}/assets/images/470d69ed4d88.png)UC-Plane O-RU Scenario Class Section Type 3 (ST3) 215

* + 1. FR1 FDD Non-conducted OTA Signal Tests 219

![]({{site.baseurl}}/assets/images/78091085f2cf.png)UC-Plane O-RU Scenario Class NR testing Generic (NRG) 219

![]({{site.baseurl}}/assets/images/b5c9b70fad85.png)UC-Plane O-RU Scenario Class Beamforming (BFM) 219

![]({{site.baseurl}}/assets/images/a948c443666b.png)UC-Plane O-RU Scenario Class Compression (CMP) 233

![]({{site.baseurl}}/assets/images/4d00e853f9b2.png)UC-Plane O-RU Scenario Class Delay Management (DLM) 233

![]({{site.baseurl}}/assets/images/d471625524f3.png)UC-Plane O-RU Scenario Class Transport (TRN) 233

![]({{site.baseurl}}/assets/images/aad70c50fd76.png)UC-Plane O-RU Scenario Class LAA (LAA) 233

![]({{site.baseurl}}/assets/images/60378a5c7507.png)UC-Plane O-RU Scenario Class LTE (LTE) 233

![]({{site.baseurl}}/assets/images/3cfa25b73227.png)UC-Plane O-RU Scenario Class Section Type 3 (ST3) 241

* + 1. FR1 TDD Conducted Signal Tests 242

![]({{site.baseurl}}/assets/images/8c908d9af4c5.png)UC-Plane O-RU Scenario Class NR testing Generic (NRG) 242

![]({{site.baseurl}}/assets/images/774680c9b3db.png)UC-Plane O-RU Scenario Class Beamforming (BFM) 269

![]({{site.baseurl}}/assets/images/1164224daf1a.png)UC-Plane O-RU Scenario Class Compression (CMP) 298

![]({{site.baseurl}}/assets/images/e0fa9a517c6d.png)UC-Plane O-RU Scenario Class Delay Management (DLM) 322

![]({{site.baseurl}}/assets/images/00745ac4080e.png)UC-Plane O-RU Scenario Class Transport (TRN) 323

![]({{site.baseurl}}/assets/images/a5ee5dfd9e1e.png)UC-Plane O-RU Scenario Class LAA (LAA) 323

![]({{site.baseurl}}/assets/images/81ada38084c7.png)UC-Plane O-RU Scenario Class LTE (LTE) 323

![]({{site.baseurl}}/assets/images/45f22f47ccd7.png)UC-Plane O-RU Scenario Class Section Type 3 (ST3) 323

* + 1. FR1 and FR2 TDD Non-conducted OTA Signal Tests 324

![]({{site.baseurl}}/assets/images/754e391afbdf.png)UC-Plane O-RU Scenario Class NR testing Generic (NRG) 324

![]({{site.baseurl}}/assets/images/29b14fb53b2c.png)UC-Plane O-RU Scenario Class Beamforming (BFM) 349

![]({{site.baseurl}}/assets/images/5f3c334ab7d6.png)UC-Plane O-RU Scenario Class Compression (CMP) 361

![]({{site.baseurl}}/assets/images/aaa7adcf260d.png)UC-Plane O-RU Scenario Class Delay Management (DLM) 361

![]({{site.baseurl}}/assets/images/d9f521999695.png)UC-Plane O-RU Scenario Class Transport (TRN) 361

![]({{site.baseurl}}/assets/images/18c558ba9bca.png)UC-Plane O-RU Scenario Class LAA (LAA) 361

![]({{site.baseurl}}/assets/images/679b26915b36.png)UC-Plane O-RU Scenario Class LTE (LTE) 361

![]({{site.baseurl}}/assets/images/ae209c83a36b.png)UC-Plane O-RU Scenario Class Section Type 3 (ST3) 361

* + 1. Energy Savings 361

![]({{site.baseurl}}/assets/images/c23b07c7db00.png)C-Plane based TRX control 362

![]({{site.baseurl}}/assets/images/580ebaac55ee.png)Advanced Sleep Mode 371

![]({{site.baseurl}}/assets/images/9cc9249811bb.png)Mixed Sleep Modes and Overlapping Commands 379

* 1. S-Plane Conformance Tests 385
     1. Test Environment 387
     2. Functional test of O-RU using ITU-T G.8275.1 profile (LLS-C1/C2/C3) 390
     3. Performance test of O-RU using ITU-T G.8275.1 Profile (LLS-C1/C2/C3) 392
     4. Performance test of O-RU using LLS-C4 399
     5. Functional test of O-DU Synchronized from ITU-T G.8275.1 profile PRTC/T-GM (LLS- C1/C2/C3/C4) 399
     6. Functional test of O-DU Synchronized from Embedded or Local non-PTP PRTC (LLS- C1/C2/C3/C4) 403
     7. Performance test of O-DU Synchronized from either Local or Remote PRTC using ITU-T G.8275.1 PTP Profile (LLS-C1/C2/C3/C4) 404
     8. Performance test of O-DU Synchronized from Embedded GNSS receiver (LLS-C1/C2/C3/C4) 408
     9. Performance test of O-RU using ITU-T G.8275.1 Profile (LLS-C1/C2/C3), additional tests for cascaded O-RUs 409
  2. UC-Plane Measurements O-DU 410
     1. UC-Plane Tests 410
     2. UC-Plane Standard Test Definitions 410
     3. Minimum Capabilities of the TED for U-Plane and C-Plane Tests 410

![]({{site.baseurl}}/assets/images/5b24081902e6.png)Core + O-CU Emulator for Testing a Stand-alone O-DU DUT 410

![]({{site.baseurl}}/assets/images/f5a16259b15e.png)Core Emulator for Testing a Combined O-CU + O-DU DUT 411

![]({{site.baseurl}}/assets/images/2dda9d178aad.png)X2 Signalling Emulator for NSA 411

![]({{site.baseurl}}/assets/images/836049eee25b.png)O-RU Emulator 411

![]({{site.baseurl}}/assets/images/26a5603911a5.png)UE Emulator 411

![]({{site.baseurl}}/assets/images/5920a00858d2.png)Test Configurator through O1 or EMS Interface 411

* + 1. UC-Plane O-DU Test Scenarios 411

![]({{site.baseurl}}/assets/images/c0c0da693618.png)UC-Plane O-DU Scenario Class NR testing Generic (NRG) 411

![]({{site.baseurl}}/assets/images/09d5d4d44057.png)UC-Plane O-DU Scenario Class Beamforming (BFM) 412

![]({{site.baseurl}}/assets/images/181b2ca094e2.png)UC-Plane O-DU Scenario Class Compression (CMP) 416

![]({{site.baseurl}}/assets/images/7ee1e3e4bb4b.png)UC-Plane O-DU Scenario Class Delay Management (DLM) 419

* 1. Shared-Cell Test Scenarios 421
     1. FHM mode Tests 421

![]({{site.baseurl}}/assets/images/d67f5e47c8e5.png)FHM M-Plane Tests 421

![]({{site.baseurl}}/assets/images/5d550437a851.png)FHM UC-Plane Tests 434

# Introductory Material

### Foreword

This Technical Specification has been produced by the O-RAN Alliance.

The contents of the present document are subject to continuing work within O-RAN and may change following formal O-RAN approval. Should the O-RAN Alliance modify the contents of the present document, it will be re-released by O- RAN with an identifying change of release date and an increase in version number as follows:

Release x.y.z where:

1. the first digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc. (the initial approved document will have x=01).
2. the second digit is incremented when editorial only changes have been incorporated in the document.
3. the third digit included only in working versions of the document indicating incremental changes during the editing process.

### Scope

### General

The present document defines tests that validate the conformance to the protocols defined in [2] for the Lower Layer Split Option 7.2x interface between the O-RU and the O-DU. A guiding principle for these conformance tests is to use only standard interfaces that are defined by the specification [2] or relevant 3GPP specifications. The construction of these tests avoids the requirement for a device to include any special interfaces used solely for the purpose of these tests.

While these tests are not written to evaluate the performance of an O-DU or O-RU device, some tests require obtaining measurements and evaluating the success or failure of the device to process sample data correctly based on portion of the protocol being tested at the time.

In general, unless otherwise stated, the tests cover LTE (Stand-Alone), NR Non-Stand-Alone (NSA) and NR Stand- Alone (SA).

In the main body of this specification (in any "chapter") the information contained therein is normative meaning binding on any compliant system, unless explicitly described as informative (a capability described as "optional" may or may not be included in a compliant system but if it is included it must comply with the optional capability description). Information contained in an "Annex" to this specification is always informative.

### U-Plane and C-Plane Scope

This version of the Conformance Test specification defines tests which validate the conformance of an O-RU and O- DU. The tests are designed to cover a large number of optional functionalities defined in [2]. Therefore, for any given O-RU implementation, a subset of these tests may not be applicable. It is the responsibility of the tester to understand the applicability of each test to the feature provided by a particular O-RU.

### S-Plane

The Conformance Test specification defines tests for time synchronization of the O-RU and O-DU. The tests defined include both functional and performance tests. Functional tests validate the ability of the O-RU and O-DU to achieve the proper synchronization management state based on a variety of PTP, and optionally SyncE input conditions.

Performance tests validate the conformance of the recovered clock for the O-DU or O-RU.

Concerning the scope of the S-Plane, various synchronization options have been defined in the O-RAN CUS Specification [2] for distributing synchronization to the O-RU (LLS-C1, LLS-C2, LLS-C3 and LLS-C4). Depending on the specific O-RAN deployment being considered not all of them may be relevant. When testing the S-Plane, the tester

shall identify which of the test cases are relevant depending on the specific deployment scenarios addressed. As a general guideline the following applies:

* + - 1. Direct connection between O-DU and O-RU:
         1. LLS-C1 is generally the main sync option to be validated.
         2. LLS-C4 may be considered as alternative or as a complement to C1
      2. Synchronization network between O-DU and O-RU
      3. LLS-C2 for cases where the synchronization is delivered to the O-RU via the O-DU and over the bridged network. In this topology the PRTC synchronizing the O-DU may be local or remote.
      4. LLS-C3 for cases when the synchronization is distributed to the O-RU without involving the O-DU. In this case one or more PRTC may be remote and may also be local.
      5. LLS-C4 may be considered as alternative or as a complement to LLS-C2/C3

For LLS-C1 and LLS-C2, a local PRTC is either embedded in or co-located with the O-DU. A remote PRTC is located anywhere in the network (backhaul or fronthaul).

### Test Requirement Status

The following tables list each test in this conformance specification and status of the test as MANDATORY or CONDITIONAL MANDATORY. Note that tests that are MANDATORY are for those functions of the DUT that by specification are required to be supported. Optional functionality in a DUT implies that the corresponding conformance test is CONDITIONAL MANDATORY and is mandatory only if the DUT supports the optional functionality.

The M-Plane conformance tests are applicable to both the O-RU and the O-DU. Some of the M-Plane tests are specifically targeting the protocol conformance of the O-RU and are not necessary for conformance testing of a O-DU. Therefore, for M-Plane tests, the table below has two "Test Requirement" columns describing if the test is mandatory, conditional mandatory or optional for testing an O-RU or a O-DU. If a test is OPTIONAL, it does not need to be included in a conformance test of the device but could be included if desired.

**Table 1.2.4-1 List of M-PlaneTest Scenarios and Status**

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Test Number** | **O-RU Test Requirement** | **O-DU Test Requirement** | **Test Description** |
| **M-Plane** | | | |
| 3.1.1.1 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Transport and Handshake in IPv4/SSH Environment (positive  case) |
| 3.1.1.2 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Transport and Handshake in IPv4/SSH Environment (negative case) |
| 3.1.1.3 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Transport and Handshake in IPv6/SSH Environment (positive  case) |
| 3.1.1.4 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Transport and Handshake in IPv6/SSH Environment (negative case) |
| 3.1.1.5 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Transport and Handshake in  IPv4/TLS Environment (positive case) |
| 3.1.1.6 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Transport and Handshake in IPv4/TLS Environment (negative case) |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Test**  **Number** | **O-RU Test Requirement** | **O-DU Test Requirement** | **Test Description** |
| 3.1.1.7 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Transport and Handshake in IPv6/TLS Environment (positive  case) |
| 3.1.1.8 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Transport and Handshake in  IPv6/TLS Environment (negative case) |
| 3.1.2.1 | MANDATORY | MANDATORY | Subscription to Notifications |
| 3.1.3.1 | MANDATORY | MANDATORY | M-Plane Connection Supervision  (positive case) |
| 3.1.3.2 | MANDATORY | MANDATORY | M-Plane Connection Supervision  (negative case) |
| 3.1.4.1 | MANDATORY | MANDATORY | Retrieval without Filter Applied |
| 3.1.4.2 | MANDATORY | MANDATORY | Retrieval with Filter Applied |
| 3.1.5.1 | MANDATORY | OPTIONAL | O-RU Alarm Notification  Generation |
| 3.1.5.2 | MANDATORY | OPTIONAL | Retrieval of Active Alarm List |
| 3.1.6.1 | MANDATORY | MANDATORY | O-RU Software Update (positive  case) |
| 3.1.6.2 | MANDATORY | OPTIONAL | O-RU Software Update (negative  case) |
| 3.1.7.1 | MANDATORY | MANDATORY | Software Activation without  Reset |
| 3.1.7.2 | MANDATORY | OPTIONAL | Supplemental Reset after  Software Activation |
| 3.1.8.1 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Sudo on Hybrid M-plane  Architecture (positive case) |
| 3.1.8.2 | CONDITIONAL MANDATORY | OPTIONAL | Access Control Sudo (negative  case) |
| 3.1.8.3 | CONDITIONAL MANDATORY | OPTIONAL | Access Control NMS (negative  case) |
| 3.1.8.4 | CONDITIONAL MANDATORY | OPTIONAL | Access Control FM-PM  (negative case) |
| 3.1.8.5 | CONDITIONAL MANDATORY | OPTIONAL | Access Control SWM (negative  case) |
| 3.1.8.6 | MANDATORY | MANDATORY | Sudo on Hierarchical M-plane  architecture (positive case) |
| 3.1.8.7 | CONDITIONAL MANDATORY | OPTIONAL | Access Control SMO (negative  case) |
| 3.1.8.8 | CONDITIONAL MANDATORY | OPTIONAL | Access Control Hybrid-ODU  (negative case) |
| 3.1.8.9 | CONDITIONAL MANDATORY | OPTIONAL | Access Control Carrier (negative  case) |
| 3.1.8.10 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Access Control change own  password |
| 3.1.9.1 | CONDITIONAL MANDATORY | OPTIONAL | External Input / Output Ports |
| 3.1.9.2 | CONDITIONAL MANDATORY | OPTIONAL | External Output Port State  Control |
| 3.1.10.1 | MANDATORY | MANDATORY | O-RU configurability test  (positive case) |
| 3.1.10.2 | MANDATORY | OPTIONAL | O-RU configurability test  (negative case) |
| 3.1.11.1 | CONDITIONAL MANDATORY | OPTIONAL | ALD Communications Test |
| 3.1.12.1 | MANDATORY | MANDATORY | Troubleshooting Test |
| 3.1.12.2 | MANDATORY | MANDATORY | Trace Test |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Test Number** | **O-RU Test Requirement** | **O-DU Test Requirement** | **Test Description** |
| 3.1.13.1 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Ethernet Connectivity Monitoring |
| 3.1.13.2 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | UDP Echo Test |
| 3.1.14.1 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Carrier Deactivation And Energy Saving Configuration |
| 3.1.14.2 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Carrier Activation |
| 3.1.14.3 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Subscription and Reporting of  Energy, Power and Environmental (EPE) Statistics |
| 3.1.14.4 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | M-plane based TRX control |
| 3.1.14.5 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Deep-hibernate |
| 3.1.14.6 | CONDITIONAL MANDATORY | CONDITIONAL MANDATORY | Data layer control |

</div>

**Table 1.2.4-2 List of O-RU UC-Plane Test Scenarios and Status**

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test Number** | **O-RU Test Requirement** | **Test Description** |
| **UC-Plane: FR1 FDD Conducted-Signal Tests** | | |
| UC-Plane O-RU Scenario Class NR testing Generic (NRG) | | |
| 3.2.3.1.1 | MANDATORY | UC-Plane O-RU Scenario Class NR testing Generic (NRG) |
| 3.2.3.1.2 | MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource allocation |
| 3.2.3.1.3 | MANDATORY | Plane O-RU Base Class FDD Test UL |
| 3.2.3.1.4 | MANDATORY | UC-Plane O-RU Scenario Class Extended using RB Parameter 3GPP DL - Resource Allocation |
| 3.2.3.1.5 | MANDATORY | UC Plane O-RU Scenario Class Extended using RB Parameter 3GPP UL - Resource Allocation |
| 3.2.3.1.6 | CONDITIONAL MANDATORY | UC-Plane O-RU Scenario Class Extended using SymInc Parameter 3GPP DL - Resource Allocation |
| 3.2.3.1.7 | CONDITIONAL MANDATORY | UC Plane O-RU Scenario Class Extended using SymInc Parameter 3GPP UL - Resource Allocation |
| 3.2.3.1.8 | CONDITIONAL MANDATORY | UC-Plane O-RU Scenario Class Extended using reMask Parameter 3GPP DL - Resource Allocation |
| 3.2.3.1.9 | CONDITIONAL MANDATORY | UC Plane O-RU Scenario Class Extended using reMask Parameter 3GPP UL - Resource Allocation |
| 3.2.3.1.10 | CONDITIONAL MANDATORY | UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension 3GPP DL - Resource Allocation |
| 3.2.3.1.11 | CONDITIONAL MANDATORY | UC Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension 3GPP UL - Resource Allocation |
| 3.2.3.1.12 | CONDITIONAL MANDATORY | UC-Plane O-RU Scenario Class Section Extension 10 - Multiple Port Grouping DL - Resource allocation |
| 3.2.3.1.13 | CONDITIONAL MANDATORY | UC Plane O-RU Scenario Class Extended multiple port grouping using section extension 10 UL- Resource Allocation |
| 3.2.3.1.14 | CONDITIONAL MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource allocation - Coupling C and U plane via Frequency and Time |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test**  **Number** | **O-RU Test**  **Requirement** | **Test Description** |
| 3.2.3.1.15 | CONDITIONAL  MANDATORY | UC Plane O-RU Base Class FDD Test UL - Coupling C and U plane via  time and frequency |
| 3.2.3.1.16 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource allocation -  Section Description Priorities |
| 3.2.3.1.17 | N/A | (VOID) |
| 3.2.3.1.18 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation Section Extension 12 3GPP DL - Resource Allocation |
| 3.2.3.1.19 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation Section Extension 3GPP UL - Resource Allocation |
| 3.2.3.1.20 | CONDITIONAL  MANDATORY | UC Plane O-RU Base Class FDD Test UL - Static SRS allocation |
| 3.2.3.1.21 | CONDITIONAL  MANDATORY | UC Plane O-RU Base Class FDD Test UL - Static PRACH allocation |
| 3.2.3.1.22 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using section extension 13 for  frequency hopping UL - Resource Allocation |
|  |  |  |
| UC-Plane O-RU Scenario Class Beamforming (BFM) | | |
| 3.2.3.2.1 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - No Beamforming |
| 3.2.3.2.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - No Beamforming |
| 3.2.3.2.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam  Beamforming |
| 3.2.3.2.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Predefined-beam  Beamforming |
| 3.2.3.2.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based  Dynamic Beamforming |
| 3.2.3.2.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Weight-based  Dynamic Beamforming |
| 3.2.3.2.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based  Dynamic Beamforming |
| 3.2.3.2.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Attribute-based  Dynamic Beamforming |
| 3.2.3.2.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-  Information-based Beamforming |
| 3.2.3.2.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Channel-  Information-based Beamforming |
| 3.2.3.2.11 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Flexible  Predefined-beam Beamforming |
| 3.2.3.2.12 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Flexible  Predefined-beam Beamforming |
| 3.2.3.2.13 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Flexible Real  Time Weights Beamforming |
| 3.2.3.2.14 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Flexible Real  Time Weights Beamforming |
| 3.2.3.2.15 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Layer nulling  Beamforming |
| 3.2.3.2.16 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Layer nulling  Beamforming |
| 3.2.3.2.17 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-  Information-based Beamforming with mixed numerology |
| 3.2.3.2.18 | CONDITIONAL MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Bit masking for  antenna mapping in Channel-Information-based Beamforming in uplink direction |
| 3.2.3.2.19 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - User port  grouping in Channel-Information-based Beamforming in downlink direction |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test**  **Number** | **O-RU Test**  **Requirement** | **Test Description** |
| 3.2.3.2.20 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based  Beamforming |
|  |  |  |
| UC-Plane O-RU Scenario Class Compression (CMP) | | |
| 3.2.3.3.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Fixed-Point  (FP) |
| 3.2.3.3.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Floating Point (BFP) |
| 3.2.3.3.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Scaling |
| 3.2.3.3.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Mu-Law  (MLW) |
| 3.2.3.3.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF)  Modulation-Compression |
| 3.2.3.3.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Fixed-Point  (FPF) |
| 3.2.3.3.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block  Floating Point |
| 3.2.3.3.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block Scaling  (BSC) |
| 3.2.3.3.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Mu-Law  (MLW) |
| 3.2.3.3.11 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS)  Modulation-Compressed Format |
| 3.2.3.3.12 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Floating Point + Selective RE Format |
| 3.2.3.3.13 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) mod-compr  + Selective RE Format |
| 3.2.3.3.14 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) Block  Floating Point + Selective RE Format |
| 3.2.3.3.15 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) mod-  compr + Selective RE Format |
|  |  |  |
| UC-Plane O-RU Scenario Class Delay Management (DLM) | | |
| 3.2.3.4.1 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #1: Downlink - Positive testing |
| 3.2.3.4.2 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #2: Uplink - Positive testing |
| 3.2.3.4.3 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #3: Downlink - Negative testing |
| 3.2.3.4.4 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #4: Uplink - Negative Testing |
|  |  |  |
| UC-Plane O-RU Scenario Class LAA (LAA) | | |
| 3.2.3.6.1 | CONDITIONAL  MANDATORY | CU-DU-LAA-CWM Test #1: LBT PDSCH Configuration and Response |
|  |  |  |
| UC-Plane O-RU Scenario Class LTE (LTE) | | |
| 3.2.3.7.1 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Base 3GPP DL |
| 3.2.3.7.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource Allocation |
| 3.2.3.7.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP UL - Resource Allocation |
| 3.2.3.7.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using reMask parameter 3GPP DL  - Resource allocation |
| 3.2.3.7.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class With Precoding (WPR) TxD |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test**  **Number** | **O-RU Test**  **Requirement** | **Test Description** |
| 3.2.3.7.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class With Precoding (WPR) SM |
|  |  |  |
| UC-Plane O-RU Scenario Class Section Type 3 (ST3) | | |
| 3.2.3.8.1 | MANDATORY | UC-Plane O-RU Scenario Class ST3 Test #1: NR PRACH |
| 3.2.3.8.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class ST3 Test #2: LTE PRACH |
|  |  |  |
|  |  |  |
| **UC-Plane: FR1 FDD Non-conducted OTA Signal Tests** | | |
| UC-Plane O-RU Scenario Class NR testing Generic (NRG) | | |
| 3.2.4.1.1 | MANDATORY | UC-Plane O-RU Scenario Class NR testing Generic (NRG) |
| 3.2.4.1.2 | MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource allocation |
| 3.2.4.1.3 | MANDATORY | Plane O-RU Base Class FDD Test UL |
| 3.2.4.1.4 | MANDATORY | UC-Plane O-RU Scenario Class Extended using RB Parameter 3GPP DL -  Resource Allocation |
| 3.2.4.1.5 | MANDATORY | UC Plane O-RU Scenario Class Extended using RB Parameter 3GPP UL -  Resource Allocation |
| 3.2.4.1.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using SymInc Parameter 3GPP DL  - Resource Allocation |
| 3.2.4.1.7 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using SymInc Parameter 3GPP UL  - Resource Allocation |
| 3.2.4.1.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using reMask Parameter 3GPP DL  - Resource Allocation |
| 3.2.4.1.9 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using reMask Parameter 3GPP UL  - Resource Allocation |
| 3.2.4.1.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation Section Extension 3GPP DL - Resource Allocation |
| 3.2.4.1.11 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation Section Extension 3GPP UL - Resource Allocation |
| 3.2.4.1.12 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Section Extension 10 - Multiple Port  Grouping DL - Resource allocation |
| 3.2.4.1.13 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended multiple port grouping using  section extension 10 UL- Resource Allocation |
| 3.2.4.1.14 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource allocation -  Coupling C and U plane via Frequency and Time |
| 3.2.4.1.15 | CONDITIONAL  MANDATORY | UC Plane O-RU Base Class FDD Test UL - Coupling C and U plane via  time and frequency |
| 3.2.4.1.16 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource allocation -  Section Description Priorities |
| 3.2.4.1.17 | CONDITIONAL  MANDATORY | UC Plane O-RU Base Class FDD Test UL - Section Description Priorities |
| 3.2.4.1.18 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation Section Extension 12 3GPP DL - Resource Allocation |
| 3.2.4.1.19 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation Section Extension 3GPP UL - Resource Allocation |
| 3.2.4.1.20 | CONDITIONAL  MANDATORY | UC Plane O-RU Base Class FDD Test UL - Static SRS allocation |
| 3.2.4.1.21 | CONDITIONAL  MANDATORY | UC Plane O-RU Base Class FDD Test UL - Static PRACH allocation |
| 3.2.4.1.22 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using section extension 13 for  frequency hopping UL - Resource Allocation |
|  |  |  |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test**  **Number** | **O-RU Test**  **Requirement** | **Test Description** |
| UC-Plane O-RU Scenario Class Beamforming (BFM) | | |
| 3.2.4.2.1 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - No Beamforming |
| 3.2.4.2.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - No Beamforming |
| 3.2.4.2.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam  Beamforming |
| 3.2.4.2.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Predefined-beam  Beamforming |
| 3.2.4.2.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based  Dynamic Beamforming |
| 3.2.4.2.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Weight-based  Dynamic Beamforming |
| 3.2.4.2.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based  Dynamic Beamforming |
| 3.2.4.2.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Attribute-based  Dynamic Beamforming |
| 3.2.4.2.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-  Information-based Beamforming |
| 3.2.4.2.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Channel-  Information-based Beamforming |
|  |  |  |
| UC-Plane O-RU Scenario Class Compression (CMP) | | |
| 3.2.4.3.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Fixed-Point  (FP) |
| 3.2.4.3.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Floating Point (BFP) |
| 3.2.4.3.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Scaling |
| 3.2.4.3.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Mu-Law  (MLW) |
| 3.2.4.3.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF)  Modulation-Compression |
| 3.2.4.3.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Fixed-Point  (FPF) |
| 3.2.4.3.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block  Floating Point |
| 3.2.4.3.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block Scaling  (BSC) |
| 3.2.4.3.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Mu-Law  (MLW) |
| 3.2.4.3.11 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS)  Modulation-Compressed Format |
| 3.2.4.3.12 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Floating Point + Selective RE Format |
| 3.2.4.3.13 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) mod-compr  + Selective RE Format |
| 3.2.4.3.14 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) Block  Floating Point + Selective RE Format |
| 3.2.4.3.15 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) mod-  compr + Selective RE Format |
|  |  |  |
| UC-Plane O-RU Scenario Class Delay Management (DLM) | | |
| 3.2.4.4.1 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #1: Downlink - Positive testing |
| 3.2.4.4.2 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #2: Uplink - Positive testing |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test**  **Number** | **O-RU Test**  **Requirement** | **Test Description** |
| 3.2.4.4.3 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #3: Downlink - Negative testing |
| 3.2.4.4.4 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #4: Uplink - Negative Testing |
|  |  |  |
| UC-Plane O-RU Scenario Class LAA (LAA) | | |
| 3.2.4.6.1 | CONDITIONAL MANDATORY | CU-DU-LAA-CWM Test #1: LBT PDSCH Configuration and Response |
|  |  |  |
| UC-Plane O-RU Scenario Class LTE (LTE) | | |
| 3.2.4.7.1 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Base 3GPP DL |
| 3.2.4.7.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource Allocation |
| 3.2.4.7.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP UL - Resource Allocation |
| 3.2.4.7.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using reMask parameter 3GPP DL  - Resource allocation |
| 3.2.4.7.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class With Precoding (WPR) TxD |
| 3.2.4.7.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class With Precoding (WPR) SM |
|  |  |  |
| UC-Plane O-RU Scenario Class Section Type 3 (ST3) | | |
| 3.2.4.8.1 | MANDATORY | UC-Plane O-RU Scenario Class ST3 Test #1: NR PRACH |
| 3.2.4.8.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class ST3 Test #2: LTE PRACH |
|  |  |  |
| **UC-Plane: FR1 TDD Conducted Signal Tests** | | |
| UC-Plane O-RU Scenario Class NR testing Generic (NRG) | | |
| 3.2.5.1.1 | MANDATORY | UC-Plane O-RU Scenario Class Base 3GPP DL/UL |
| 3.2.5.1.2 | MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL/UL - Resource  Allocation |
| 3.2.5.1.3 | MANDATORY | UC-Plane O-RU Scenario Class Extended using RB parameter 3GPP DL/UL  - Resource Allocation |
| 3.2.5.1.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using SymInc parameter 3GPP  DL/UL - Resource Allocation |
| 3.2.5.1.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using reMask parameter 3GPP  DL/UL - Resource Allocation |
| 3.2.5.1.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation Section Extension 3GPP DL/UL - Resource Allocation |
| 3.2.5.1.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL/UL - Resource  Allocation - Coupling C and U plane via time and frequency |
| 3.2.5.1.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL/UL - Coupling C and U  plane via Time and Frequency and Section Description Priorities |
| 3.2.5.1.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation using section extension 12 3GPP DL/UL - Resource Allocation |
| 3.2.5.1.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Static SRS Allocation UL - Resource  Allocation |
| 3.2.5.1.11 | CONDITIONAL  MANDATORY | UC Plane O-RU Base Class TDD Test UL - Static PRACH allocation |
| 3.2.5.1.12 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using section extension 13 for  frequency hopping UL/DL - Resource Allocation |
|  |  |  |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test**  **Number** | **O-RU Test**  **Requirement** | **Test Description** |
| UC-Plane O-RU Scenario Class Beamforming (BFM) | | |
| 3.2.5.2.1 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - No Beamforming |
| 3.2.5.2.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - No Beamforming |
| 3.2.5.2.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam  Beamforming |
| 3.2.5.2.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Predefined-beam  Beamforming |
| 3.2.5.2.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based  Dynamic Beamforming |
| 3.2.5.2.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Weight-based  Dynamic Beamforming |
| 3.2.5.2.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based  Dynamic Beamforming |
| 3.2.5.2.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Attribute-based  Dynamic Beamforming |
| 3.2.5.2.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-  Information-based Beamforming |
| 3.2.5.2.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Channel-  Information-based Beamforming |
| 3.2.5.2.11 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based  Beamforming |
| 3.2.5.2.12 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based  Beamforming about Symbol reordering |
| 3.2.5.2.13 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using section 24 for DMRS-BF |
| 3.2.5.2.14 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class RRM Measurements for DMRS-BF |
| 3.2.5.2.15 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using section extension ST9 for  DMRS-BF |
| 3.2.5.2.16 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based  Beamforming using Frequency offset feedback |
| 3.2.5.2.17 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using section extension 27 for  DMRS-BF |
|  |  |  |
| UC-Plane O-RU Scenario Class Compression (CMP) | | |
| 3.2.5.3.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Fixed-Point  (FP) |
| 3.2.5.3.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Floating Point (BFP) |
| 3.2.5.3.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Scaling |
| 3.2.5.3.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Mu-Law  (MLW) |
| 3.2.5.3.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF)  Modulation-Compression |
| 3.2.5.3.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Fixed-Point  (FPF) |
| 3.2.5.3.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block  Floating Point |
| 3.2.5.3.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block Scaling  (BSC) |
| 3.2.5.3.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Mu-Law  (MLW) |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test**  **Number** | **O-RU Test**  **Requirement** | **Test Description** |
| 3.2.5.3.11 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS)  Modulation-Compressed Format |
| 3.2.5.3.12 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Floating Point + Selective RE Format |
| 3.2.5.3.13 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) mod-compr  + Selective RE Format |
| 3.2.5.3.14 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) Block  Floating Point + Selective RE Format |
| 3.2.5.3.15 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) mod-  compr + Selective RE Format |
|  |  |  |
| UC-Plane O-RU Scenario Class Delay Management (DLM) | | |
| 3.2.5.4.1 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #1: Downlink - Positive testing |
| 3.2.5.4.2 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #2: Uplink - Positive testing |
| 3.2.5.4.3 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #3: Downlink - Negative testing |
| 3.2.5.4.4 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #4: Uplink - Negative Testing |
|  |  |  |
| UC-Plane O-RU Scenario Class LAA (LAA) | | |
| 3.2.5.6.1 | CONDITIONAL  MANDATORY | CU-DU-LAA-CWM Test #1: LBT PDSCH Configuration and Response |
|  |  |  |
| UC-Plane O-RU Scenario Class LTE (LTE) | | |
| 3.2.5.7.1 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Base 3GPP DL |
| 3.2.5.7.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource Allocation |
| 3.2.5.7.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP UL - Resource Allocation |
| 3.2.5.7.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using reMask parameter 3GPP DL  - Resource allocation |
| 3.2.5.7.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class With Precoding (WPR) TxD |
| 3.2.5.7.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class With Precoding (WPR) SM |
|  |  |  |
| UC-Plane O-RU Scenario Class Section Type 3 (ST3) | | |
| 3.2.5.8.1 | MANDATORY | UC-Plane O-RU Scenario Class ST3 Test #1: NR PRACH |
| 3.2.5.8.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class ST3 Test #2: LTE PRACH |
|  |  |  |
| **UC-Plane: FR1 and FR2 TDD Non-conducted OTA Signal Tests** | | |
| UC-Plane O-RU Scenario Class NR testing Generic (NRG) | | |
| 3.2.6.1.1 | MANDATORY | UC-Plane O-RU Scenario Class Base 3GPP DL/UL |
| 3.2.6.1.2 | MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL/UL - Resource  Allocation |
| 3.2.6.1.3 | CONDITIONAL  MANDATORY | 3.2.6.1.3 UC-Plane O-RU Scenario Class Extended using SymInc parameter  3GPP DL/UL - Resource Allocation |
| 3.2.6.1.4 | CONDITIONAL  MANDATORY | 3.2.6.1.4 UC-Plane O-RU Scenario Class Extended using reMask parameter  3GPP DL/UL - Resource Allocation |
| 3.2.6.1.5 | MANDATORY | 3.2.6.1.5 UC-Plane O-RU Scenario Class Extended using RB parameter  3GPP DL/UL - Resource Allocation |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test**  **Number** | **O-RU Test**  **Requirement** | **Test Description** |
| 3.2.6.1.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation Section Extension 3GPP DL/UL - Resource Allocation |
| 3.2.6.1.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL/UL - Resource  Allocation - Coupling C and U plane via time and frequency |
| 3.2.6.1.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended 3GPP DL/UL - Coupling C and U  plane via Time and Frequency and Section Description Priorities |
| 3.2.6.1.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB  Allocation using section extension 12 3GPP DL/UL - Resource Allocation |
| 3.2.6.1.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Static SRS Allocation UL - Resource  Allocation |
| 3.2.6.1.11 | CONDITIONAL  MANDATORY | UC Plane O-RU Base Class TDD Test UL - Static PRACH allocation |
| 3.2.6.1.12 | CONDITIONAL  MANDATORY | UC Plane O-RU Scenario Class Extended using section extension 13 for  frequency hopping UL/DL - Resource Allocation |
|  |  |  |
| UC-Plane O-RU Scenario Class Beamforming (BFM) | | |
| 3.2.6.2.1 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - No Beamforming |
| 3.2.6.2.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - No Beamforming |
| 3.2.6.2.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam  Beamforming |
| 3.2.6.2.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Predefined-beam  Beamforming |
| 3.2.6.2.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based  Dynamic Beamforming |
| 3.2.6.2.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Weight-based  Dynamic Beamforming |
| 3.2.6.2.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based  Dynamic Beamforming |
| 3.2.6.2.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Attribute-based  Dynamic Beamforming |
| 3.2.6.2.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-  Information-based Beamforming |
| 3.2.6.2.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Channel-  Information-based Beamforming |
|  |  |  |
| UC-Plane O-RU Scenario Class Compression (CMP) | | |
| 3.2.6.3.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Fixed-Point  (FP) |
| 3.2.6.3.3 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Floating Point (BFP) |
| 3.2.6.3.4 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Block  Scaling |
| 3.2.6.3.5 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF) Mu-Law  (MLW) |
| 3.2.6.3.6 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (SF)  Modulation-Compression |
| 3.2.6.3.7 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Fixed-Point  (FPF) |
| 3.2.6.3.8 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block  Floating Point |
| 3.2.6.3.9 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block Scaling  (BSC) |
| 3.2.6.3.10 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static (NS) Mu-Law  (MLW) |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test**  **Number** | **O-RU Test**  **Requirement** | **Test Description** |
| 3.2.6.3.11 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS)  Modulation-Compressed Format |
| 3.2.6.3.12 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (NS) Block  Floating Point + Selective RE Format |
| 3.2.6.3.13 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Static Format (NS) mod-compr  + Selective RE Format |
| 3.2.6.3.14 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) Block  Floating Point + Selective RE Format |
| 3.2.6.3.15 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) mod-  compr + Selective RE Format |
|  |  |  |
| UC-Plane O-RU Scenario Class Delay Management (DLM) | | |
| 3.2.6.4.1 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #1: Downlink - Positive testing |
| 3.2.6.4.2 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #2: Uplink - Positive testing |
| 3.2.6.4.3 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #3: Downlink - Negative testing |
| 3.2.6.4.4 | MANDATORY | UC-Plane O-RU Scenario Class DLM Test #4: Uplink - Negative Testing |
|  |  |  |
| UC-Plane O-RU Scenario Class LAA (LAA) | | |
| 3.2.6.6.1 | CONDITIONAL  MANDATORY | CU-DU-LAA-CWM Test #1: LBT PDSCH Configuration and Response |
|  |  |  |
| UC-Plane O-RU Scenario Class LTE (LTE) | | |
| 3.2.6.7 | For Future Study |  |
|  |  |  |
| UC-Plane O-RU Scenario Class Section Type 3 (ST3) | | |
| 3.2.6.8.1 | MANDATORY | UC-Plane O-RU Scenario Class ST3 Test #1: NR PRACH |
| 3.2.6.8.2 | CONDITIONAL  MANDATORY | UC-Plane O-RU Scenario Class ST3 Test #2: LTE PRACH |
| **UC-Plane: Energy Savings** | | |
| UC-Plane C-Plane based TRX control | | |
| 3.2.7.1.1 | CONDITIONAL  MANDATORY | C-plane based TRX control (defined-duration sleep, guaranteed wake-up  duration) |
| 3.2.7.1.2 | CONDITIONAL  MANDATORY | C-plane based TRX control (defined-duration sleep, minimum wake-up  duration) |
| 3.2.7.1.3 | CONDITIONAL  MANDATORY | C-plane based TRX control (undefined-duration sleep, guaranteed wake-up  duration) |
| 3.2.7.1.4 | CONDITIONAL  MANDATORY | C-plane based TRX control (undefined-duration sleep, minimum wake-up  duration) |
| 3.2.7.1.5 | CONDITIONAL  MANDATORY | C-plane based TRX control (sleep extension) |
| 3.2.7.1.6 | CONDITIONAL  MANDATORY | C-plane based TRX control (Emergency wake-up) |
| UC-Plane Advanced Sleep Mode | | |
| 3.2.7.2.1 | CONDITIONAL  MANDATORY | Advanced sleep mode (defined-duration sleep, guaranteed wake-up duration) |
| 3.2.7.2.2 | CONDITIONAL  MANDATORY | Advanced sleep mode (defined-duration sleep, minimum wake-up duration) |
| 3.2.7.2.3 | CONDITIONAL  MANDATORY | Advanced sleep mode (undefined-duration sleep, guaranteed wake-up  duration) |
| 3.2.7.2.4 | CONDITIONAL  MANDATORY | Advanced sleep mode (undefined-duration sleep, minimum wake-up  duration) |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Test Number** | **O-RU Test Requirement** | **Test Description** |
| 3.2.7.2.5 | CONDITIONAL MANDATORY | Advanced sleep mode (sleep extension) |
| 3.2.7.2.6 | CONDITIONAL MANDATORY | Advanced sleep mode (Emergency wake-up) |
| UC-Plane Mixed sleep modes and overlapping commands | | |
| 3.2.7.3.1 | CONDITIONAL MANDATORY | ASM overlapping commands |
| 3.2.7.3.2 | CONDITIONAL MANDATORY | C-plane based TRX Control overlapping sleep modes |
| 3.2.7.3.3 | CONDITIONAL MANDATORY | ASM and C-Plane based TRX control overlapping commands |

</div>

**Table 1.2.4-3 List of O-RU or O-DU S-Plane Test Scenarios and Status**

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **S-Plane Conformance Tests** | | |
| **Test Number** | **O-RU or O-DU**  **Test Requirement** | **Test Description** |
| 3.3.2 | MANDATORY | Functional test of O-RU using ITU-T G.8275.1 Profile (LLS-C1/C2/C3) |
| 3.3.3 | MANDATORY | Performance test of O-RU using ITU-T G.8275.1 Profile (LLS-C1/C2/C3) |
| 3.3.4 | For Future Study | Performance test of O-RU using LLS-C4 |
| 3.3.5 | MANDATORY | Functional test of O-DU Synchronized from ITU-T G.8275.1 profile PRTC/T-GM (LLS-C1/C2/C3/C4) |
| 3.3.6 | CONDITIONAL MANDATORY | Functional test of O-DU Synchronized from Embedded or Local non-PTP PRTC (LLS-C1/C2/C3/C4) |
| 3.3.7 | CONDITIONAL MANDATORY | Performance test of O-DU Synchronized from either Local or Remote PRTC using ITU-T G.8275.1 PTP Profile (LLS-C1/C2/C3/C4) |
| 3.3.8 | CONDITIONAL MANDATORY | Performance test of O-DU Synchronized from Embedded GNSS receiver (LLS-C1/C2/C3/C4) |

</div>

**Table 1.2.4-4 List of O-DU UC-Plane Test Scenarios and Status**

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **UC-Plane Measurements O-DU** | | |
| **Test Number** | **O-DU Test Requirement** | **Test Description** |
| 3.4.4.1.1 | MANDATORY | UC-Plane O-DU Scenario Class NR testing Generic (NRG) |
| 3.4.4.1.2 | MANDATORY | UC-Plane O-DU Scenario Class Base CAT-B O-RU |
| 3.4.4.2.1 | MANDATORY | UC-Plane O-DU Scenario Class Beamforming 3GPP - Predefined-beam Beamforming |
| 3.4.4.2.2 | CONDITIONAL MANDATORY | UC-Plane O-DU Scenario Class Beamforming 3GPP - Weight-based Beamforming |
| 3.4.4.2.3 | CONDITIONAL MANDATORY | UC-Plane O-DU Scenario Class Beamforming 3GPP - DMRS-BF-NEQ |
| 3.4.4.2.4 | CONDITIONAL MANDATORY | UC-Plane O-DU Scenario Class Beamforming 3GPP - DMRS-BF-EQ |
| 3.4.4.3.1 | MANDATORY | Static Format Fixed-Point (FP) Uncompressed |
| 3.4.4.3.2 | CONDITIONAL MANDATORY | UC-Plane O-DU Scenario Class Compression (CMP) Static Format Block Floating Point |
| 3.4.4.4.1 | MANDATORY | Delay Management On-time arrival |
| 3.4.4.4.2 | MANDATORY | Delay Management Early Arrival and Late Arrival |

</div>

**Table 1.2.4-5 List of FHM Test Scenarios and Status**

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **FHM M-Plane Measurements** | | |
| See Table 3.5.1.1-1 for FHM M-Plane Test Requirements | | |
| **FHM UC-Plane Measurements** | | |
| **Test Number** | **FHM Test Requirement** | **Test Description** |
| 3.5.1.2.1 | MANDATORY | UC-Plane FHM Scenario Class Base 3GPP DL Same Cell Scenario |
| 3.5.1.2.2 | MANDATORY | UC-Plane FHM Scenario Class Base 3GPP UL |

</div>

### References

The following documents contain provisions which, through reference in this text, constitute provisions of the present document.

* References are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.
* For a specific reference, subsequent revisions do not apply.
* For a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document.

1. ETSI TR 21.905, "Vocabulary for 3GPP Specifications"
2. O-RAN WG4 Control, User and Synchronization Specification version 17.00
3. O-RAN WG4 Management Plane Specification version 17.00
4. O-RAN Management Plane Yang Models version 17.00
5. Recommendation ITU-T G.8275.1 (Amendment 2) (03/2018): "Precision time protocol telecom profile for phase/time synchronization with full timing support from the network"
6. Recommendation ITU-T G.8275.2 (Amendment 2) (03/2018): Precision time protocol telecom profile for phase/time synchronization with partial timing support from the network"
7. Recommendation ITU-T G.8271.1 (Amendment 1) (03/2018): "Network limits for time synchronization in packet networks"
8. Recommendation ITU-T G.8271.2 (Amendment 1) (03/2018): "Network limits for time synchronization in packet networks with partial timing support from the network"
9. Recommendation ITU-T G.8273(03/2018): "Framework of phase and time clocks"
10. Recommendation ITU-T G.8261(08/2013): "Timing and synchronization aspects in packet networks"
11. eCPRI Specification v2.0 "Common Public Radio Interface: eCPRI Interface Specification", May 2019
12. ETSI TS 136.104, "Evolved Universal Terrestrial Radio Access (E-UTRA); Base Station (BS) radio transmission and reception"
13. ETSI TS 138.104, "NR; Base Station (BS) radio transmission and reception"
14. ETSI TS 136.211, "Evolved Universal Terrestrial Radio Access (E-UTRA) Physical channels and modulation"
15. ETSI TS 138.211, "NR; Physical channels and modulation", (Release 15), 3GPP
16. ETSI TS 136.331, "Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC)",

Release 15, 3GPP

1. ETSI TS 138.331, "NR; Radio Resource Control (RRC); Protocol specification", (Release 15), 3GPP
2. ETSI TS 136.141, "Evolved Universal Terrestrial Radio Access (E-UTRA); Base Station (BS) conformance testing", (Release 15), 3GPP
3. ETSI TS 138.141-1, "NR; Base Station (BS) conformance testing Part 1: Conducted conformance testing (Release 15)", 3GPP
4. ETSI TS 138.141-2, "NR; Base Station (BS) conformance testing Part 2: Radiated conformance testing" (Release 15), 3GPP
5. ETSI TS 123.401, "General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access", 3GPP
6. ETSI TS 123.502, "Procedures for the 5G System (5GS)", (Release 15), 3GPP
7. ETSI TS 137.340, "Evolved Universal Terrestrial Radio Access (E-UTRA) and NR; Multi-connectivity", (Release 15), 3GPP
8. ETSI TS 138.214, "NR; Physical layer procedures for data", (Release 15), 3GPP
9. O-RAN WG4 Fronthaul Interoperability Test Specification (IOT) version 07.00
10. Recommendation ITU-T G.8273.2/Y.1368.2 (06/2023): "Timing characteristics of telecom boundary clocks and telecom time slave clocks"
11. O-RAN WG5 O1 Interface specification for O-DU
12. Recommendation ITU-T G.8273.3 (10/2020): "Timing characteristics of telecom transparent clocks for use with full timing support from the network"
13. Recommendation ITU-T G.8262 (11/2018) "Timing characteristics of a synchronous equipment slave clock"
14. Recommendation ITU-T G.8262.1 (11/2022): "Timing characteristics of enhanced synchronous equipment slave clock"
15. Recommendation ITU-T G.8271 (03/2020): "Time and phase synchronization aspects of telecommunication networks"
16. IEEE Std 1588-2008, "Standard for a Precision Clock Synchronization Protocol for Networked Measurement and Control Systems"
17. IEEE Std 802.1CM-2018, "Standard for a Precision Clock Synchronization Protocol for Networked Measurement and Control Systems"
18. Recommendation ITU-T G.703 (04/2016): "Physical/electrical characteristics of hierarchical digital interfaces"
19. Recommendation ITU-T G.8272 (11/2018): "Timing characteristics of primary reference time clocks"
20. Recommendation ITU-T G.8264 (08/2017): "Distribution of timing information through packet networks"
21. Recommendation ITU-T G.803 (03/2000): "Architecture of transport networks based on the synchronous digital hierarchy (SDH)"

### Definitions

For the purposes of the present document, the terms and definitions given in ETSI TR 21.905, "Vocabulary for 3GPP [Specifications"1]and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in [1]

C-Plane Control Plane: refers specifically to real-time control between O-DU and O-RU, and should not be confused with the UE's control plane

DL DownLink: data flow towards the radiating antenna

DMRS-BF-EQ Demodulation Reference Signal-based beamforming with equalization in the O-RU. DMRS-BF-NEQ Demodulation Reference Signal-based beamforming without equalization in the O-RU. eNB eNodeB (applies to LTE) <E-UTRAN NodeB / Evolved NodeB>

EVM Error Vector Magnitude - see clause 6.5.2 Modulation quality in ETSI TS 138.104 fm-pm Fault Management, Performance Management role

gNB gNodeB (applies to NR) <Next Generation NodeB>

M-Plane Management Plane: refers to non-real-time management operations between the O-DU and the O- RU

NETCONF Network Configuration Protocol. For details see: RFC 6241, "Network Configuration Protocol (NETCONF)", IETF, June 2011

NSA Non-Stand-Alone network mode that supports operation of SgNB attached to MeNB

O-CU O-RAN Central Unit - a logical node hosting PDCP, RRC, SDAP and other control functions O-DU O-RAN Distributed Unit: a logical node hosting RLC/MAC/High-PHY layers based on a lower

layer functional split. O-DU in addition hosts an M-Plane instance.

O-RU O-RAN Radio Unit <O-RAN Radio Unit: a logical node hosting Low-PHY layer and RF processing based on a lower layer functional split. This is similar to 3GPP's "TRP" or "RRH" but more specific in including the Low-PHY layer (FFT/iFFT, PRACH extraction).>. O-RU in addition hosts M-Plane instance.

PTP Precision Time Protocol (PTP) is a protocol for distributing precise time and frequency over packet networks. PTP is defined in the IEEE Standard 1588.

PDCCH Physical Downlink Control Channel applies for LTE and NR air interface PBCH Physical Broadcast Channel applies for LTE and NR air interface

SA Stand-Alone network mode that supports operation of gNB attached to a 5G Core Network SCS OFDM Sub Carrier Spacing

SSB Synchronization Signal Block, in 5G PBCH and synchronization signal are packaged as a single block

subordinate The term "subordinate" is used as a replacement for "slave" and is consistent with its use in CUS specification. When consensus emerges on how to eliminate the use of the term "slave" in the referenced standards organization, that approach will be applied to this specification

sudo Super-User Do role

S-Plane Synchronization Plane: Data flow for synchronization and timing information between nodes SyncE Synchronous Ethernet, is an ITU-T standard for computer networking that facilitates distribution

of clock signals over the Ethernet physical layer

T-BC Telecom Boundary Clock

TWAMP Two-Way Active Measurement Protocol UDP User Datagram Protocol

UE User Equipment terminology for a mobile device in LTE and NR

UL UpLink: data flow from the UE towards the core network, that is from the O-RU towards in the O- DU in a Fronthaul context.

### Abbreviations

For the purposes of the present document, the following abbreviations apply.

C-Plane Control Plane: refers specifically to real-time control between O-DU and O-RU, and should not be confused with the UE's control plane

CUSM-E C-Plane, U-Plane, S-Plane and M-plane emulator - test equipment capable of sending and receiving required messages for all of these protocol planes when the Radio Unit is the device under test

DL DownLink: data flow towards the radiating antenna

DUT Device Under Test

eNB e NodeB (applies to LTE) <E-UTRAN NodeB / Evolved NodeB> gNB g NodeB (applies to NR) <Next Generation NodeB>

M-Plane Management Plane: refers to non-real-time management operations between the O-DU and the O- RU

NETCONF Network Configuration Protocol. For details see RFC 6241, "Network Configuration Protocol (NETCONF)", IETF, June 2011

O-DU O-RAN Distributed Unit <O-RAN Distributed Unit: a logical node hosting PDCP/RLC/MAC/High-PHY layers based on a lower layer functional split.>

O-RU O-RAN Radio Unit <O-RAN Radio Unit: a logical node hosting Low-PHY layer and RF processing based on a lower layer functional split. This is similar to 3GPP's "TRP" or "RRH" but more specific in including the Low-PHY layer (FFT/iFFT, PRACH extraction).>

SMO Service Management and Orchestration S-Plane Synchronization Plane: refers to traffic between the O-RU or O-DU to a synchronization controller which is generally an IEEE-1588 Grand Master (however, Grand Master functionality may be embedded in the O-DU).

TED Test Equipment, O-DU - test equipment used to validate the O-DU TER Test Equipment, O-RU - test equipment used to validate the O-RU UL UpLink: data flow away from the radiating antenna

U-Plane User Plane: refers to IQ sample data transferred between O-DU and O-RU

# Test Configuration

The conformance tests described in this document require test equipment with specific capabilities to support the testing of each protocol including the M-Plane, U-Plane, C-Plane and S-Plane. In addition, the tests define a specific connectivity between the test equipment and the device under test. This clause describes the test equipment requirements at a high level. Details are included in each test.

As noted in the introduction in the Scope paragraphs, the initial focus of the M-Plane, C-Plane and U-Plane conformance tests is the O-RU. Version 2.00 and later include S-Plane tests for the O-DU in addition to the S-Plane tests for the O-RU. The initial test configuration description below is focused on the test equipment and configuration required to test the O-RU. O-DU test configuration descriptions for the S-Plane are covered in the S-Plane clause of this document.

### Test Configuration for O-RU as the Device Under Test

When testing the O-RU, it is connected to test equipment called Test Equipment O-RU (TER). The TER is shown in Figure 2.1-1 below. TER surrounds the DUT and connects to both the fronthaul interface itself and the radio interface. At the radio interface, the TER collects RF signals from the DUT (downlink) and sends RF signals to the DUT receiver (uplink). Thus, the TER is made up of three main components, a CUSM-Plane Emulator (CUSM-E), a signal analyzer and a signal generator as shown in Figure 2.1-1. The RF test interface is described in TS 136.141 for LTE, TS 138.141- 1 for NR conducted, and TS 138.141-2 for non-conducted tests. The fronthaul interface is standard Ethernet as described above. In this case, the DL data flow is evaluated based on what is received by the signal analyzer in the RF domain as radiated by the O-RU, and the UL data flow is evaluated based on what is emitted by the signal generator in the RF domain and received by the CUSM-E.

**When the O-RU is the Device Under Test (DUT), there is Test Equipment, RU ("TER") that is used to connect to the DUT, run the test**

**and evaluate the test result.**

**The Test Equipment, RU ("TER") provides everything needed**

**to operate the test, including:**

* **M-Plane commands to collect O-RU capabilities and configure the O-RU**

?

?

?

**Synchronization via G.8275.1 (Mandatory for O-RU)**

**C-Plane and U-Plane data flow to the O-RU**

**Collection of RF energy to determine if the O-RU reacted correctly to the DL C-Plane and U-Plane data**

* **Radiation of RF energy to be received by the O-RU (note: this could be actually radiated, or conveyed through multiple RF cabled connections)**
* **Collection of O-RU UL fronthaul data flows and evaluating it for correctness based on the supplied RF energy to the O-RU antennas or RF connectors**

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| CUSM-Plane Emulator | | |
|  | **fronthaul connection** | |
| Test | **DUT = O-RU** | |
| Equipment, RU  (TER) | **RF connection or**  **antenna array(s)** | |
|  | Signal Analyser | Signal Generator |

</div>

###### Figure 2.1-1 Test Setup, DUT = O-RU

While M-Plane conformance tests do not generally require all the functions shown for a TER in Figure 2.1-1, the intent of this description is to show the general capabilities required for all tests on the O-RU as the DUT including U-Plane, C-Plane and S-Plane tests. If tests are restricted to only the M-Plane, the required test equipment configuration may also refer to Figure 2.1-2.

**When the O-RU is the Device Under Test (DUT), there is Test Equipment, RU ("TER") that is used to connect to the DUT, run the test**

**and evaluate the test result.**

**The M-Plane Conformance Test Equipment, RU ("TER") provides**

**everything needed to operate the test, including:**

* **M-Plane commands to collect O-RU capabilities, configure the O-RU and send all commands needed for the testing of M-plane**

?

?

?

?

**Supply power to the O-RU and measure power consumption.**

**Synchronization via G.8275.1 and C-Plane and U-Plane generation**

**Collection of RF energy and analysis**

**RS-485 sniffer / injector is required to validate the ALD communications protocol and operation of the O-RU for ALD Communications Test. (This test is CONDITIONAL MANDATORY : only needed if the DUT supports ALD port)**

* **Supplementary circuitry is required to force a change of logical state of input lines and confirm voltage of an output lines for External Input / Output Port Test. (This test is CONDITIONAL MANDATORY : only needed if the DUT supports External Input / Output Port)**

![]({{site.baseurl}}/assets/images/d1e1b917468a.png)**Figure 2.1-2 M-Plane Test Setup, DUT = O-RU**

### Test Configuration for O-DU as the Device Under Test

When testing the open fronthaul interface of the O-DU, it is connected to test equipment called Test Equipment O-DU (TED). The TED is shown below with the following two cases:

1. Stand-alone O-DU as the DUT - In this case the TED wraps around the O-DU DUT via its F1 interface towards the Core + O-CU Emulator (and additionally X2 signalling emulator in NSA), the front haul interface towards the O-RU+UE Emulator, and the O1 or EMS interface towards the test configuration entity.
2. Combined O-CU+O-DU (from the same vendor) as the DUT - In this case the TED wraps around the combined O-CU + O-DU DUT via the NG (SA) or S1 and X2 (NSA) interfaces towards the Core Emulator (additionally the X2 signalling emulator in NSA), the front haul interface towards the O-RU+UE Emulator, and the O1 or EMS interface towards the test configuration entity.

![]({{site.baseurl}}/assets/images/573564482e13.png)

###### Figure 2.2- 1 Test Setup, DUT = O-DU

It is important to note that the tests assume production grade DUTs which should not be placed into any special test modes nor require any special test ports. At the front haul interface, the O-RU+UE Emulator is expected to perform the following functions:

1. Exchange of front haul data as required to exercise the feature under test. This entails emulating the necessary front haul signals as seen by the O-DU DUT as if it were connected to an actual O-RU with an actual UE (or multiple UEs in the case of beamforming tests) performing an actual connection with the base station.
2. Detailed observation and analysis of the front haul data stream of the O-DU DUT in order to ascertain compliance to the specifications.

Note that in addition to the C-, U-, and M-plane signals in the fronthaul, this also includes the necessary S-plane for synchronizing the O-DU DUT with the O-RU+UE Emulator.

Since the O-DU is meant to support various classes of O-RU with different feature sets, e.g. CAT-A or CAT-B, FR1 or FR2, different beamforming methods to multiple UEs, different compression schemes, etc., it is important that the O- RU+UE Emulator has the flexibility to effectively emulate the various scenarios in a robust and repeatable manner in order to test the various features. Similarly, the Core+O-CU emulator (with the addition of an X2 signalling emulator for NSA mode) shall likewise emulate and observe the appropriate signals at the F1 or NG (or S1 and X2 for NSA) interfaces to effectively wrap-around the O-DU or O-CU+O-DU DUT. Note that the Core, O-CU, eNB, O-RU, and UE emulator functionalities required in the TED are those that place the O-DU or O-CU+O-DU DUT into a state that allows it to perform an actual connection(s) to a UE(s) to exercise the various open fronthaul features under test, and are thus not required to fully emulate the full functionality of their commercial equivalents. Conversely, this specification does not preclude the use of the commercial equivalent elements instead of emulators, but must support a level of configurability and repeatability to ensure that the required features in the O-DU front-haul are effectively and repeatably exercised. With use of either node emulators or commercial equivalents, the required test outcomes and reports must be effectively and repeatably reproduced.

In order to cover the various potential optional features, Section Types, and section extensions for the O-DU DUT, the TED should use the O1 (if available) or EMS interface to provision the O-DU or O-CU+O-DU DUT in order to place it into the appropriate modes to exercise the specific features to test, which is then coordinated with the O-RU+UE Emulator in order to elicit the appropriate front-haul interface behavior.

While M-Plane conformance tests do not generally require all the functions shown for a TED in Figure 2.1-1, the intent of this description is to show the general capabilities required for all tests on the O-DU as the DUT including U-Plane, C-Plane and S-Plane tests. If tests are restricted to only the M-Plane, the required test equipment configuration may be simplified.

### Test Configuration for Shared Cell Configurations

There are two Shared Cell configurations defined as Shared Cell modes in [2]. These configurations are FHM mode and Cascade mode. FHM mode includes a device called the Fronthaul Multiplexor (FHM). The Cascade mode does not include the FHM.

### Test Configuration for FHM as the Device Under Test

When testing the Fronthaul Multiplexor (FHM), it is connected to test equipment called Test Equipment Fronthaul Multiplexor (TEM). The TEM is shown in Figure 2.3-1 below. TEM surrounds the DUT and connects to both the northbound port and southbound ports of FHM.

At the northbound interface, TEM acts as a O-DU-Emulator, connecting to the DUT through the fronthaul interface, with necessary CUSM-Plane capabilities to conduct the test cases described in clause 3.5 of the present specification. At the southbound interface, TEM acts as O-RU+UE Emulator, emulating multiple O-RUs. In the present specification, only the same cell scenario is considered. The TEM also supports multiple UEs attached to each of the emulated O-RUs. TEM connects to multiple physical ports (a minimum of 3) of the DUT. Each of these physical ports is an eCPRI Ethernet link with necessary CUSM-Plane capabilities to conduct the test cases described in chapter 3.5 of this document.

![]({{site.baseurl}}/assets/images/476f9e8f3e96.png)

**Figure 2.3-1 Test Setup, DUT = FHM**

# Conformance Measurements

### M-Plane Measurements

The O-RAN Fronthaul management plane (M-Plane) protocol conformance tests are described in this clause. The M- Plane is based on the NETCONF network element management protocol and YANG data modeling language. The NETCONF protocol uses a client and server model for all exchanges of information and execution of RPCs. Every NETCONF transaction is a 2-way exchange involving the client and the server. A O-DU must support a NETCONF client. A O-RU must support a NETCONF server. A FHM must support a NETCONF server. Any M-Plane conformance test will require both a NETCONF client and a NETCONF server. Because many YANG models are shared by all applicable fronthaul devices including the O-DU, O-RU and FHM, most M-Plane conformance tests apply to all of these fronthaul devices. However, because some YANG models are applicable only with a O-RU as a NETCONF server and some applicable only to a FHM NETCONF server, FHM M-Plane test cases are described within the FHM clauses of the present specification.

The following clauses describe Conformance Tests for the M-Plane for a O-RU or O-DU as the device under test. While all of these M-Plane conformance tests could apply to both the O-DU and the O-RU, some tests are focused primarily on the O-RU NETCONF server capabilities and functions. Therefore, each test below is identified as a conformance test for the O-DU, the O-RU or both. Table 1.2.4-1 lists all M-Plane test cases and whether they are applicable to one or both of the O-DU and O-RU for conformance testing.

### Transport and Handshake Test Scenarios

### ![]({{site.baseurl}}/assets/images/27034226e40f.png) Transport and Handshake in IPv4/SSH Environment (positive case)

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY for a O-RU or O-DU that declares support for IPv4.

This scenario validates that the O-RU properly executes the session establishment procedure with VLANs and a DHCPv4 server. This test is applicable to IPv4 environments.

This scenario corresponds to the following clause in [3]:

* + 6.2 Management Plane Transport aspects
  + 6.3 NETCONF Call Home to O-RU Controller(s)

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU

###### Test Methodology

1. **Initial Conditions**
   1. The O-RU is powered on and has an ethernet connection to the DHCP-server
   2. The configured DHCPv4 server is reachable by the O-RU NETCONF Server through the VLAN configured for M-Plane.
   3. Default SSH credentials (sudo) are used by both the O-RU NETCONF Server and the TER NETCONF Client
   4. IP details for test purposes are pre-defined and fixed (applies to the DHCP server).

###### Procedure

* 1. The O-RU NETCONF Server can be preconfigured with no VLAN (known in 802.1Q as native ethernet or an untagged VLAN), a VLAN ID or may optionally perform a VLAN scan by issuing DHCP Discover trying to reach the DHCP Server
  2. The O-RU NETCONF Server continues the DHCPv4 procedure on the preconfigured VLAN or first VLAN where the Offer from DHCP Server / Relay is received if the scan method is used
  3. O-RU NETCONF Server retrieves IP details and the IP address of the controlling TER NETCONF Client from the DHCP Server. NOTE: RFC 2131 is followed for DHCPv4
  4. The O-RU NETCONF Server establishes TCP connection and performs a Call Home procedure towards the NETCONF Client using the IP details obtained in step 3
  5. The TER NETCONF Client establishes a SSH session with the O-RU NETCONF Server. Proper credentials are used.
  6. The O-RU NETCONF Server accepts the SSH session establishment from the TER NETCONF Client
  7. The TER NETCONF Client and O-RU NETCONF Server exchange capabilities through NETCONF

<hello> messages. The following is an abbreviated example of the capabilities exchange. A typical capabilities exchange will have far more parameters included.

NOTE: RFC 6241 is followed for NETCONF communication.

Server (O-RU) initiates Hello message .

<hello xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<capabilities>

<capability>urn:ietf:params:netconf:base:1.0</capability>

<capability>urn:ietf:params:netconf:base:1.1</capability>

<capability>urn:ietf:params:netconf:capability:writable- running:1.0</capability>

<capability>urn:ietf:params:netconf:capability:notification:1.0</capabilit y>

<capability>urn:ietf:params:netconf:capability:interleave:1.0</capability>

<capability>[http://org/openroadm/user-mgmt?module=org-openroadm-user-](http://org/openroadm/user-mgmt?module=org-openroadm-user-mgmt&amp%3Bamp%3Bamp%3Brevision=2017-12-15%3c/capability) [mgmt&amp;amp;amp;revision=2017-12-15</capability](http://org/openroadm/user-mgmt?module=org-openroadm-user-mgmt&amp%3Bamp%3Bamp%3Brevision=2017-12-15%3c/capability)>

......

</capabilities>

<session-id>1</session-id>

</hello>

Client (DU) responds with Hello message ...

<hello xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<capabilities>

<capability>urn:ietf:params:netconf:base:1.0</capability>

<capability>urn:ietf:params:netconf:base:1.1</capability>

</capabilities>

</hello>

###### Test Requirement (expected result)

Test scenario step [7] is performed successfully.

### ![]({{site.baseurl}}/assets/images/cb1a9a092656.png) Transport and Handshake in IPv4/SSH Environment (negative case)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for both O-RU and O-DU Tests.

This scenario validates that the O-RU properly executes the session establishment procedure with VLANs and a DHCPv4 server. This test is applicable to IPv4 environments. Two negative flows are included in this test:

* + The TER NETCONF Client does not trigger a SSH session establishment in reaction to Call Home initiated by THE O-RU NETCONF Server.
  + The TER NETCONF Client uses improper credentials when trying to establish a SSH session with the O- RU NETCONF Server.

This scenario corresponds to the following clause in [3]:

* + 6.2 Management Plane Transport aspects
  + 6.3 NETCONF Call Home to O-RU Controller(s)

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. O-RU is powered on and has an ethernet connection to the DHCP-server
   2. Configured DHCPv4 server is reachable for O-RU NETCONF Server through the VLAN configured for M-Plane.
   3. Default SSH credentials (sudo) are used by both O-RU NETCONF Server and NETCONF Client
   4. IP details for test purposes are pre-defined and fixed (applies to DHCP server).

###### Procedure

1. **Flow 1**
   1. The O-RU NETCONF Server can be preconfigured with no VLAN (known in 802.1Q as native ethernet or an untagged VLAN), a VLAN ID or may optionally perform a VLAN scan by issuing a DHCP Discover trying to reach DHCP Server
   2. The O-RU NETCONF Server continues the DHCPv4 procedure on the preconfigured VLAN or first VLAN where the Offer from the DHCP Server / Relay is received if the scan method is used
   3. The O-RU NETCONF Server retrieves IP details and the IP address of controlling TER NETCONF Client from the DHCP Server. NOTE: RFC 2131 is followed for DHCPv4
   4. The O-RU NETCONF Server establishes TCP connection and performs Call Home procedure with the TER NETCONF Client using IP details obtained in step 3
   5. The TER NETCONF Client does not initiate the SSH session establishment procedure.
   6. The O-RU NETCONF Server periodically repeats the Call Home towards TER NETCONF Client.

###### Flow 2

* 1. The O-RU NETCONF Server can be preconfigured with a VLAN ID or may optionally perform a VLAN scan by issuing a DHCP Discover trying to reach the DHCP Server
  2. The O-RU NETCONF Server continues the DHCPv4 procedure on the preconfigured VLAN or first VLAN where the Offer from the DHCP Server / Relay is received if the scan method is used
  3. The O-RU NETCONF Server retrieves IP details and the IP address of the controlling TER NETCONF Client from DHCP Server. NOTE: RFC 2131 is followed for DHCPv4
  4. The O-RU NETCONF Server establishes a TCP connection and performs the Call Home procedure with the TER NETCONF Client using IP details obtained in step 3
  5. The TER NETCONF Client initiates the SSH session establishment procedure with improper credentials.
  6. Due to the incorrect SSH credentials, the O-RU NETCONF Server rejects the SSH session establishment from the TER NETCONF Client.
  7. The O-RU NETCONF Server starts periodic Call Home procedure towards the TER NETCONF Client.

###### Test Requirement (expected result)

1. Flow 1: Scenario reaches step 6. The O-RU NETCONF Server falls into Call Home procedure loop.
2. Flow 2: Scenario reaches step 7. The O-RU NETCONF Server falls into Call Home procedure loop.

### ![]({{site.baseurl}}/assets/images/1fdada0ffe63.png) Transport and Handshake in IPv6/SSH Environment (positive case)

The test description, applicability, entrance criteria, methodology and requirements are the same as in clause 3.1.1.1, Transport and Handshake in IPv4/SSH Environment (positive case). The only difference is that this test is applicable to IPv6 environments including DHCPv6. This test is CONDITIONAL MANDATORY.

### ![]({{site.baseurl}}/assets/images/b4f64a9b9c9d.png) Transport and Handshake in IPv6/SSH Environment (negative case)

The test description, applicability, entrance criteria, methodology and requirements are the same as in clause 3.1.1.2, Transport and Handshake in IPv4/SSH Environment (negative case). The only difference is that this test is applicable to IPv6 environments including DHCPv6. This test is CONDITIONAL MANDATORY.

### ![]({{site.baseurl}}/assets/images/8d561420c250.png) Transport and Handshake in IPv4/TLS Environment (positive case)

The test description, applicability, entrance criteria, methodology and requirements are the same as in clause 3.1.1.1, Transport and Handshake in IPv4/SSH Environment (positive case). The only difference is that this test is applicable to IPv4 and TLS environments including DHCPv4. This test is CONDITIONAL MANDATORY.

### ![]({{site.baseurl}}/assets/images/e3162e92a815.png) Transport and Handshake in IPv4/TLS Environment (negative case)

The test description, applicability, entrance criteria, methodology and requirements are the same as in clause 3.1.1.2, Transport and Handshake in IPv4/SSH Environment (negative case). The only difference is that this test is applicable to IPv4 and TLS environments including DHCPv4. This test is CONDITIONAL MANDATORY.

### ![]({{site.baseurl}}/assets/images/d111bc24c6b3.png) Transport and Handshake in IPv6/TLS Environment (positive case)

The test description, applicability, entrance criteria, methodology and requirements are the same as in clause 3.1.1.1, Transport and Handshake in IPv4/SSH Environment (positive case). The only difference is that this test is applicable to IPv6 and TLS environments including DHCPv6. This test is CONDITIONAL MANDATORY.

### ![]({{site.baseurl}}/assets/images/b55afedff34f.png) Transport and Handshake in IPv6/TLS Environment (negative case)

The test description, applicability, entrance criteria, methodology and requirements are the same as in clause 3.1.1.2, Transport and Handshake in IPv4/SSH Environment (negative case). The only difference is that this test is applicable to IPv6 and TLS environments including DHCPv6. This test is CONDITIONAL MANDATORY.

### Manage Alarm Requests

### ![]({{site.baseurl}}/assets/images/5abd71d5ae9d.png) Subscription to Notifications

###### Test Description and Applicability

This scenario is MANDATORY for both O-RU and O-DU Tests.

This test validates that the O-RU properly handles a NETCONF subscription to notifications. This scenario corresponds to the following clause in [3]:

11.3 Manage Alarms Request to NETCONF Clients

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU

###### Test Methodology

* 1. **Initial Conditions**
     1. The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or

3.1.1.7 (IPv6/TLS) is successfully completed.

###### Procedure

* + 1. The TER NETCONF Client triggers the subscription:

<rpc><create-subscription><stream>NETCONF</stream></create- subscription></rpc>

to the O-RU NETCONF Server to subscribe to notifications related to the supervision process. NOTE:

<stream>NETCONF</stream> is intentional, meaning that the TER NETCONF Client subscribes to all notifications that the O-RU NETCONF Server can generate (including alarm notifications).

* + 1. The O-RU NETCONF Server responds with

<rpc-reply><ok/></rpc-reply>

to the TER NETCONF Client.

NOTE: RFC 6241 is followed for NETCONF communication.

###### Test Requirement (expected result)

Test scenario step 2 is performed successfully.

### M-Plane Connection Supervision

### ![]({{site.baseurl}}/assets/images/4380d5cd92a5.png) M-Plane connection supervision (positive case)

###### Test Description and Applicability

This scenario is MANDATORY for both O-RU and O-DU Tests.

This test validates that the O-RU manages the connection supervision process correctly. This scenario corresponds to the following clause in [3]:

* + 6.7 Monitoring NETCONF connectivity

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or

3.1.1.7 (IPv6/TLS) is successfully completed.

###### Procedure

* 1. The O-RU NETCONF Server notification timer expires
  2. The O-RU NETCONF Server sends a supervision notification message to the TER NETCONF Client. Note that the time in this example is shown generically and will be the current time during this test.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<supervision-notification xmlns="urn:o-ran:supervision:1.0"/>

</notification>

NOTE: For the O-RU that supports feature SUPERVISION-WITH-SESSION-ID, these supervision- notification messages shall indicate the NETCONF session-id associated with the subscription to the event notification, as specified in clause 6.7 of [3].

* 1. The TER NETCONF Client responds with

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="20">

<supervision-watchdog-reset xmlns="urn:o-ran:supervision:1.0">

<supervision-notification-interval>60</supervision- notification-interval>

<guard-timer-overhead>10</guard-timer-overhead>

</supervision-watchdog-reset>

</rpc>

to the O-RU NETCONF Server.

* 1. The O-RU NETCONF Server sends a reply to the TER NETCONF Client

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="20">

<next-update-at xmlns="urn:o-ran:supervision:1.0">2020-10- YYYY-MM- DDTHH:MM:SS.FZ </next-update-at>

</rpc-reply>

Note that the TER NETCONF Client can change the value of the supervision timer in the supervision watchdog reset message. The O-RU NETCONF server must adjust the timer accordingly if this optional test is performed.

* 1. The O-RU NETCONF Server sends a supervision notification towards the TER NETCONF Client with respect to time-date sent in rpc-reply in step 4.
  2. Steps 1 to 5 are looped for a total of 30 iterations including the first pass through steps 1 to 5. NOTE: RFC 6241 is followed for NETCONF communication.

###### Test Requirement (expected result)

Test scenario step 6 is performed successfully in all iterations.

### ![]({{site.baseurl}}/assets/images/f135b71d31c2.png) M-Plane Connection Supervision (negative case)

###### Test Description and Applicability

This scenario is MANDATORY for both O-RU and O-DU Tests.

This test validates that the O-RU manages the connection supervision process correctly. This scenario corresponds to the following clause in [3]:

* + 6.7 Monitoring NETCONF connectivity

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or

3.1.1.7 (IPv6/TLS) is successfully completed.

###### Procedure

* 1. The O-RU NETCONF Server notification timer expires
  2. The O-RU NETCONF Server sends a supervision notification message to the TER NETCONF Client
  3. The TER NETCONF Client responds with

<rpc supervision-watchdog-reset></rpc> to the O-RU NETCONF Server.

* 1. The O-RU NETCONF Server sends a reply to the TER NETCONF Client

<rpc-reply><next-update-at>date-time</next-update-at></rpc-reply>

Note that the TER NETCONF Client can change the value of the supervision timer in the supervision watchdog reset message. The O-RU NETCONF server must adjust the timer accordingly if this optional test is performed.

* 1. The O-RU NETCONF Server sends a supervision notification towards the TER NETCONF Client with respect to time-date sent in rpc-reply in step 4.
  2. The TER NETCONF Client does not issue <rpc supervision-watchdog-reset></rpc> to the O-RU NETCONF Server and causes the supervision timer to expire on the O-RU.
  3. The O-RU NETCONF Server enters the Supervision failure scenario. For details, please see O-RAN M- Plane Specification [3], chapter 14.1.

###### Test Requirement (expected result)

Test scenario step 7 is performed successfully.

### Retrieval of O-RU's information elements

### ![]({{site.baseurl}}/assets/images/3486a88b390b.png) Retrieval without Filter Applied

###### Test Description and Applicability

This scenario is MANDATORY for both O-RU and O-DU Tests.

This scenario validates that the O-RU NETCONF Server properly executes a general get command.

This is a general-purpose high-level test related to NETCONF implementation. There is no direct relationship to a specific chapter in [3]:

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

* 1. **Initial Conditions**
     1. The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or

3.1.1.7 (IPv6/TLS) is successfully completed.

###### Procedure

* + 1. The TER NETCONF Client triggers <rpc><get> towards the O-RU NETCONF Server.
    2. The O-RU NETCONF Server responds with <rpc-reply><data> where <data> contains all information elements that the O-RU NETCONF Server is able to expose

###### Test Requirement (expected result)

Test step 2 is performed successfully.

### ![]({{site.baseurl}}/assets/images/2025fdb8d82d.png) Retrieval with filter applied

###### Test Description and Applicability

This scenario is MANDATORY

This scenario validates that the O-RU NETCONF Server properly executes a get command with a filter applied.

This is a general-purpose high-level test related to NETCONF implementation. There is no direct relationship to a specific chapter in [3]:

###### Minimum Requirements

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

* 1. **Initial Conditions**
     1. The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or

3.1.1.7 (IPv6/TLS) respectively is successfully completed.

###### Procedure

* + 1. The TER NETCONF Client triggers <rpc><get><filter> towards NETCONF Server. The <filter> argument contains a regular expression that the O-RU NETCONF Server shall apply as a filter. For example, a filter that filters all low-level-rx-endpoints:

<rpc message-id="101" xmlns="urn:o-ran:uplane-conf:1.0" >

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter type = "subtree">

<user-plane-configuration xmlns="urn:o-ran:uplane-conf:1.0">

<low-level-rx-endpoints>

</low-level-rx-endpoints>

</user-plane-configuration>

</top>

</filter>

</get>

* + 1. The O-RU NETCONF Server responds with <rpc-reply><data> where <data> contains details for objects as conforming to the <filter> (as per the above example filter: all low-level-rx-endpoints)

###### Test Requirement (expected result)

Test step 2 is performed successfully.

### Fault Management

### ![]({{site.baseurl}}/assets/images/90b5aa9d659e.png) O-RU Alarm Notification Generation

###### Test Description and Applicability

This scenario is MANDATORY for O-RU tests and OPTIONAL for O-DU tests.

This scenario validates that the O-RU NETCONF Server properly sends and alarm notification. This scenario corresponds to the following clause in [3]:

* + 11.2 Alarm Notification

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.2.1 for Subscription to Notifications is successfully completed.
   2. Testing with S-plane: Ensure that the alarm for fault id 17 is not already raised in the system.
   3. Testing without S-plane: Ensure that the alarm for fault id which is triggered using a maintenance tool or debug command is not already raised in system.

###### Procedure

1. **Testing with S-Plane:**
   1. The TER NETCONF Client periodically tests O-RU's sync-status until the LOCKED state is reached.

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter type="subtree">

<sync xmlns="urn:o-ran:sync:1.0">

<sync-status/>

</sync>

</filter>

</get>

* 1. Disable the Sync signal on the TER.
  2. After a while (time depends on implementation) the O-RU NETCONF SERVER sends a notification for an alarm related to synchronization failure, e.g. alarm 17: No external sync source" or another vendor specific alarm. The format of alarm notification follows RFC5277. Note that the time in this example is shown generically and will be the current time during this test.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<alarm-notif xmlns="urn:o-ran:fm:1.0">

<fault-id>17</fault-id>

<fault-source>sync</fault-source>

<affected-objects>

<name>syncE</name>

</affected-objects>

<fault-severity>MAJOR</fault-severity>

<is-cleared>false</is-cleared>

<fault-text>No external sync source</fault-text>

<event-time> YYYY-MM-DDTHH:MM:SS.FZ </event-time>

</alarm-notif>

</notification>

###### Testing without S-Plane:

NOTE: Since this validation is for O-RU NETCONF Server properly sending the alarm notification, this is an alternative test method to testing with S-Plane.

* 1. Raise alarm notification using vendor specific maintenance tool or debug command. The debug command will generate a pseudo fault in the O-RU. The O-RU will add a new alarm caused by detecting the pseudo fault to the active alarm list and send the alarm

notification.

The O-RU NETCONF SERVER sends a notification for alarm. The format of alarm notification follows RFC5277. Note that the time in this example is shown generically and will be the current time during this test. The details related to fault in this example notification message is shown generically and will be the details for alarm which is triggered using maintenance tool or debug command.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<alarm-notif xmlns="urn:o-ran:fm:1.0">

<fault-id>2</fault-id>

<fault-source>Module</fault-source>

<affected-objects>

<name>HW</name>

</affected-objects>

<fault-severity>CRITICAL</fault-severity>

<is-cleared>false</is-cleared>

<fault-text> Unit dangerously overheating</fault-text>

<event-time> YYYY-MM-DDTHH:MM:SS.FZ </event-time>

</alarm-notif>

</notification>

###### Test Requirement (expected result)

1. With S-plane: Test step 3 is performed successfully.
2. Without S-plane: Test step 2 is performed successfully.

### ![]({{site.baseurl}}/assets/images/2f134e8c098f.png) Retrieval of Active Alarm List

###### Test Description and Applicability

This scenario is MANDATORY for O-RU tests and OPTIONAL for O-DU tests.

This scenario validates that the O-RU NETCONF Server can send an active alarms list to the TER NETCONF Client.

This scenario corresponds to the following clause in [3]:

* + 11. Fault Management

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**

The test procedure described in clause 3.1.2.1 for Subscription to Notifications is successfully completed.

###### Procedure

* 1. The TER NETCONF Client sends the O-RU NETCONF Server a command to get the active-alarm-list.

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter type="subtree">

<active-alarm-list xmlns="urn:o-ran:fm:1.0">

</active-alarm-list>

</filter>

</get>

* 1. The O-RU NETCONF Server responds with <rpc-reply><data> where <data> contains at least the same alarm as reported in measurement 3.1.5.1 for the procedure with S-Plane or without S-Plane.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="11">

<data xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<active-alarm-list xmlns="urn:o-ran:fm:1.0">

<active-alarms>

<fault-id>17</fault-id>

<fault-source>sync</fault-source>

<affected-objects>

<name>syncE</name>

</affected-objects>

<fault-severity>MAJOR</fault-severity>

<is-cleared>false</is-cleared>

<fault-text>No external sync source</fault-text>

<event-time> YYYY-MM-DDTHH:MM:SS.FZ </event-time>

</active-alarms>

</active-alarm-list>

</data>

</rpc-reply>

Note - There can be more than one Active Alarm in the reply from O-RU. The details related to fault in this example notification message is shown generically and will be the details for alarm which is triggered using maintenance tool or debug command.

###### Test Requirement (expected result)

Test step 2 is performed successfully.

### O-RU Software Update

### ![]({{site.baseurl}}/assets/images/c568796b7ba7.png) O-RU Software Update and Install (positive case)

###### Test Description and Applicability

This scenario is MANDATORY for both O-RU and O-DU Tests.

This test validates that the O-RU can successfully perform a software download and software install procedure. This scenario corresponds to the following clause in [3]:

* + 8. Software Management

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.4.1 is successfully completed.
   2. A correct and internally consistent SW package is available for test purposes.
   3. The O-RU provides at least one slot available for SW update procedure. The status of this slot is assumed to be {active = False, running = False, access = READ-WRITE}
   4. A sFTP/FTPES server is available with an account for the SW update procedure on the TER, using FTPES if the O-RU controller is using NETCONF/TLS to configure the O-RU.

###### Procedure

* 1. The TER NETCONF Client triggers <rpc><software-download>. The O-RU NETCONF Server responds with <rpc-reply><software-download>

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="13">

<software-download xmlns="urn:o-ran:software-management:1.0">

<remote-file- path>sftp://oranuser@192.168.3.13:22/software.zip</remote-file-path>

</software-download>

</rpc>

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="13">

<status xmlns="urn:o-ran:software-management:1.0">STARTED</status>

</rpc-reply>

* 1. The O-RU NETCONF Server performs a software download procedure. When the download is completed, the O-RU NETCONF Server sends <notification><download-event> with status COMPLETED to TER NETCONF Client

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<download-event xmlns="urn:o-ran:software-management:1.0">

<file-name>sftp://oranuser@192.168.3.13:22/software.zip</file-name>

<status>COMPLETED</status>

</download-event>

</notification>

* 1. The TER NETCONF Client triggers <rpc><software-install> informing the O-RU NETCONF Client about the desired slot for installation. This slot must have the attributes active = FALSE, running = FALSE, access = READ-WRITE. The O-RU NETCONF Server responds with <rpc-reply><software- install> with status STARTED.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="14">

<software-install xmlns="urn:o-ran:software-management:1.0">

<slot-name>"SLOT0"</slot-name>

<file-names>"testpkg"</file-names>

</software-install>

</rpc>

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="14">

<status xmlns="urn:o-ran:software-management:1.0">STARTED</status>

</rpc-reply>

* 1. The O-RU NETCONF Server examines the downloaded software. The files are error free by design in this test. The O-RU NETCONF Server installs the new software files to the desired slot.
  2. The O-RU NETCONF Server sends <notification><install-event><status> to the TER NETCONF Client. Field <status> contains the value COMPLETED to indicate the successful installation of software to the desired slot.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<install-event xmlns="urn:o-ran:software-management:1.0">

<slot-name>"SLOT0"</slot-name>

<status>COMPLETED</status>

</install-event>

</notification>

###### Test Requirement (expected result)

1. Test step 5 completed with notification that indicates successful installation of the downloaded software.
2. Status of SW slot used for SW installation is set to VALID. Other parameters of software slot shall not be changed.

### ![]({{site.baseurl}}/assets/images/b483efe9069c.png) O-RU Software Update (negative case)

###### Test Description and Applicability

This scenario is MANDATORY for O-RU tests and OPTIONAL for O-DU tests. This scenario corresponds the following chapters in [3]:

* + 8. Software Management

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.2.1 and 3.1.4.1 is successfully completed.
   2. A modified software package is available for test purposes (proper content of manifest.xml, but fake/invalid content of software files)
   3. The O-RU provides at least one slot available for the software update procedure (status != INVALID, active = False, running = False, access = READ-WRITE)
   4. A sFTP/FTPES server is available with an account dedicated for the software update procedure, using FTPES if the O-RU controller is using NETCONF/TLS to configure the O-RU.

###### Procedure

Based on how the software package is modified, the failure can be related to software-install or software- download, and is implementation dependent. Flow 1 is given for a failure related to software-download and Flow 2 is given for a failure related to software-install.

###### Flow 1

* 1. The TER NETCONF Client triggers <rpc><software-download>. The O-RU NETCONF Server responds with <rpc-reply><software-download>

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="13">

<software-download xmlns="urn:o-ran:software-management:1.0">

<remote-file- path>sftp://oranuser@192.168.3.13:22/software.zip</remote-file-path>

</software-download>

</rpc>

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="13">

<status xmlns="urn:o-ran:software-management:1.0">STARTED</status>

</rpc-reply>

* 1. The O-RU NETCONF Server determines that the software file is invalid and sends

<notification><download-event><status> to the TER NETCONF Client The field <status> is correctly updated with AUTHENTICATION\_ERROR or PROTOCOL\_ERROR or FILE\_NOT\_FOUND or APPLICATION\_ERROR or TIMEOUT.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<download-event xmlns="urn:o-ran:software-management:1.0">

<slot-name>"SLOT0"</slot-name>

<status> APPLICATION\_ERROR </status>

</download-event>

</notification>

###### Flow 2

* 1. The TER NETCONF Client triggers <rpc><software-download>. The O-RU NETCONF Server responds with <rpc-reply><software-download>

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="13">

<software-download xmlns="urn:o-ran:software-management:1.0">

<remote-file- path>sftp://oranuser@192.168.3.13:22/software.zip</remote-file-path>

</software-download>

</rpc>

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="13">

<status xmlns="urn:o-ran:software-management:1.0">STARTED</status>

</rpc-reply>

* 1. The O-RU NETCONF Server performs the software download procedure. When the download is complete, the O-RU NETCONF Server sends <notification><download-event> with status COMPLETED to the TER NETCONF Client

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<download-event xmlns="urn:o-ran:software-management:1.0">

<file-name>sftp://oranuser@192.168.3.13:22/software.zip</file- name>

<status>COMPLETED</status>

</download-event>

</notification>

* 1. The TER NETCONF Client triggers <rpc><software-install> informing the O-RU NETCONF Server about desired slot the software shall be installed to. The O-RU NETCONF Server respond with

<rpc-reply><software-install> with status STARTED.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="14">

<software-install xmlns="urn:o-ran:software-management:1.0">

<slot-name>"SLOT0"</slot-name>

<file-names>"testpkg"</file-names>

</software-install>

</rpc>

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="14">

<status xmlns="urn:o-ran:software-management:1.0">STARTED</status>

</rpc-reply>

* 1. The O-RU NETCONF Server determines that the software file is invalid and sends

<notification><install-event><status> to the TER NETCONF Client. The Field <status> is correctly updated with one of the following status: FILE\_ERROR or INTEGRITY\_ERROR or APPLICATION\_ERROR.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<install-event xmlns="urn:o-ran:software-management:1.0">

<slot-name>"SLOT0"</slot-name>

<status> FILE\_ERROR </status>

</install-event>

</notification>

###### Test Requirement (expected result)

1. Flow 1: The test scenario reaches step 2. The O-RU NETCONF Server indicates failure with the Software Download procedure.

Flow 2:

The test scenario reaches step 4. The O-RU NETCONF Server indicates failure with the Install procedure. The Status of the Software Slot used for software installation is set to INVALID. Other parameters of the Software Slot shall not be changed.

1. Test step 4 completed a described.
2. Status of SW slot used for SW installation is set to INVALID. Other parameters of software slot shall not be changed.

### O-RU Software Activation

### ![]({{site.baseurl}}/assets/images/5f9a7098c02c.png) Software Activation without Reset

###### Test Description and Applicability

This scenario is MANDATORY for both O-RU and O-DU Tests.

This test validates that the O-RU can successfully activate software in a specific slot on the O-RU. This scenario corresponds to the following clause in [3]:

* + 8. Software Management

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.6.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client triggers <rpc><software-activate> towards the O-RU NETCONF Server.

The name of a slot containing a valid software installation to be activated is provided as a parameter in the RPC.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="15">

<software-activate xmlns="urn:o-ran:software-management:1.0">

<slot-name>"SLOT0"</slot-name>

</software-activate>

</rpc>

* 1. The O-RU NETCONF Server responds with <rpc-reply><software-activate><status>. The parameter "status" is set to STARTED.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="15">

<status xmlns="urn:o-ran:software-management:1.0">STARTED</status>

</rpc-reply>

* 1. The O-RU NETCONF Server performs a software activation procedure. When the procedure is completed, the O-RU NETCONF Server sends <notification><activation-event> with a status COMPLETED and the slot-name in the activation event corresponds to the slot-name used in the software-activate RPC to the TER NETCONF Client.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<activation-event xmlns="urn:o-ran:software-management:1.0">

<slot-name>"SLOT0"</slot-name>

<status>COMPLETED</status>

</activation-event>

</notification>

###### Test Requirement (expected result)

1. In step 3 of this test, the status of the software slot used for software activation is set to VALID and the parameter "active" is set to "True". The parameter "running" remains "False".
2. Status of the software slot containing the software still used by device remains VALID, the parameter "active" is set to False. The parameter "running" is True.

NOTE: O-RU reset is required to complete SW activation sequence - meaning: to force device to start with the software just activated.

### ![]({{site.baseurl}}/assets/images/28cee5559a24.png) Supplemental Reset after Software Activation

###### Test Description and Applicability

This scenario is MANDATORY for O-RU tests and OPTIONAL for O-DU tests. This test validates that the O-RU can successfully start up with activated software.

This scenario corresponds to the following clause in [3]:

* + 8. Software Management

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.6.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client sends <rpc><reset></rpc> to the O-RU NETCONF Server.

<reset xmlns="urn:o-ran:operations:1.0"> </reset>

* 1. The O-RU NETCONF Server responds with rpc-reply.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="2"><ok/></rpc-reply>

* 1. The O-RU restarts with a new software version running matching the version activated in test 3.1.7.1.

###### Test Requirement (expected result)

1. In step 3 of this test, the status of the software slot used for software activation remains VALID (it is unchanged) and the parameter "active" remains "True". The parameter "running" is set to True.
2. Status of the software slot containing the previous version of software used by device remains VALID, the parameter "active" remains False. The parameter "running" is set to False.

### Access Control

### ![]({{site.baseurl}}/assets/images/6ab77ed1ced5.png) Sudo on Hybrid M-plane Architecture (positive case)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for an O-RU and O-DU supporting the Hybrid M-plane architecture model.

NOTE: To configure a user account with "carrier" privileges, the O-RU should support the multi-operator shared O-RU feature, as specified in clause 19 of [3].

This test validates that user management model can be used to add users to the O-RU This scenario corresponds to the following clauses in [3]:

* + 6.4 NETCONF Connection Establishment
  + 6.5 NETCONF Access Control

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or

3.1.1.7 (IPv6/TLS) is successfully completed.

###### Procedure

* 1. The TER NETCONF Client establishes a connection with the O-RU NETCONF Server
  2. The TER NETCONF Client configures seven new user accounts in addition to the default sudo account already present and passwords for these seven accounts using o-ran-user.mgmt.yang.

Note 1: For new user accounts which are <account-type>CERTIFICATE</account-type>, <password> leaf shall not be present.

Note 2: In this message, the user account with "carrier" privileges may be associated with Shared Resource Operator IDs (sro-id), as specified in clause 19 of [3].

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="16">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<users xmlns="urn:o-ran:user-mgmt:1.0">

<user>

<name>MPLANEUSER0</name>

<account-type>PASSWORD</account-type>

<password>12345678</password>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER1</name>

<account-type>PASSWORD</account-type>

<password>12345678</password>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER2</name>

<account-type>PASSWORD</account-type>

<password>12345678</password>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER3</name>

<account-type>PASSWORD</account-type>

<password>12345678</password>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER4</name>

<account-type>PASSWORD</account-type>

<password>12345678</password>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER5</name>

<account-type>PASSWORD</account-type>

<password>12345678</password>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER6</name>

<account-type>PASSWORD</account-type>

<password>12345678</password>

<enabled>true</enabled>

<sro-id>22110</sro-id>

</user>

</users>

</config>

</edit-config>

</rpc>

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="16">

<ok/>

</rpc-reply>

* 1. The TER NETCONF Client configures user account to group mappings for the seven new accounts using ietf-netconf-acm.yang respectively one with "sudo", one with "nms", one with "fm-pm", one with "swm", one with "smo", one with "hybrid-odu" and one with "carrier" privilege.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="15">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<nacm xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-acm">

<groups>

<group>

<name>sudo</name>

<user-name>MPLANEUSER0</user-name>

</group>

<groups>

<group>

<name>swm</name>

<user-name>MPLANEUSER1</user-name>

</group>

<group>

<name>nms</name>

<user-name>MPLANEUSER2</user-name>

</group>

<group>

<name>fm-pm</name>

<user-name>MPLANEUSER3</user-name>

</group>

<group>

<name>smo</name>

<user-name>MPLANEUSER4</user-name>

</group>

<group>

<name>hybrid-odu</name>

<user-name>MPLANEUSER5</user-name>

</group>

<group>

<name>carrier</name>

<user-name>MPLANEUSER6</user-name>

</group>

</groups>

</nacm>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server confirms the operations for the above transactions
  2. The TER NETCONF Client retrieves a list of users from O-RU NETCONF Server. The newly created user accounts and mappings are validated. The password leaf shall not be present.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="17">

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter xmlns:o-ran-usermgmt="urn:o-ran:user-mgmt:1.0" type="xpath" select="/o-ran-usermgmt:\*//."/>

<with-defaults xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf- with-defaults">report-all</with-defaults>

</get>

</rpc>

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="17">

<data xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<users xmlns="urn:o-ran:user-mgmt:1.0">

<user>

<name>oranuser</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>xranuser</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER0</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER1</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER2</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER3</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER4</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER5</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER6</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

<sro-id>22110</sro-id>

</user>

</users>

</data>

</rpc-reply>

###### Test Requirement (expected result)

Step 5 is correctly validated.

### ![]({{site.baseurl}}/assets/images/f82222574356.png) Access Control Sudo (negative case)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for an O-RU supporting the Hybrid M-plane architecture model and OPTIONAL for O-DU tests.

NOTE 1: This test is only valid for "Password authentication" because "account-type CERTIFICATE" does not set

<password>.

NOTE 2: To configure a user account with "carrier" privileges, the O-RU should support the multi-operator shared O-RU feature, as specified in clause 19 of [3].

This test validates that the O-RU correctly implements NETCONF Access Control security aspects. The scenario corresponds to the following clauses in [3]:

* + 6.4 NETCONF Connection Establishment
  + 6.5 NETCONF Access Control

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.8.1 is successfully completed.
   2. Seven user accounts are provisioned on the O-RU NETCONF Server with the following groupings: sudo, nms, fm-pm, swm, smo, hybrid-odu, carrier.

###### Procedure

* 1. The TER NETCONF Client establishes a connection using a user account with sudo privileges.
  2. The TER NETCONF Client gets the password leaves from the user-mgmt.yang model.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="17">

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter xmlns:o-ran-usermgmt="urn:o-ran:user-mgmt:1.0" type="xpath" select="/o-ran-usermgmt:\*//."/>

<with-defaults xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf- with-defaults">report-all</with-defaults>

</get>

</rpc>

* 1. The O-RU NETCONF Server replies by silently omitting data nodes and their descendants to which the client does not have read access from the <rpc-reply> message.

NOTE: In this message, the user account with "carrier" privileges may be associated with Shared Resource Operator IDs (sro-id), as specified in clause 19 of [3].

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="17">

<data xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<users xmlns="urn:o-ran:user-mgmt:1.0">

<user>

<name>MPLANEUSER0</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER1</name>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER2</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER3</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER4</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER5</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>MPLANEUSER6</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

<sro-id>22110</sro-id>

</user>

</users>

</data>

</rpc-reply>

###### Test Requirement (expected result)

Test step 3 is performed successfully.

### ![]({{site.baseurl}}/assets/images/653080bf4862.png) Access Control NMS (negative case)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for an O-RU supporting the Hybrid M-plane architecture model and OPTIONAL for O-DU tests.

This test validates that the O-RU correctly implements NETCONF Access Control user privileges. The scenario corresponds to the following clauses in [3]:

* + 6.5 NETCONF Access Control

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.8.1 is successfully completed.
   2. A nms privileged user account is provisioned on the O-RU NETCONF Server.

###### Procedure

* 1. The TER NETCONF Client establishes a connection. Instead of using the default SUDO account, the NETCONF Client uses a user account with NMS privileges.
  2. The TER NETCONF Client attempts to configure a new user/password account on the NETCONF Server using the user-mgmt.yang model.

NOTE: For new user accounts which are <account-type>CERTIFICATE</account-type>, <password> leaf shall not be configured.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="16">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<users xmlns="urn:o-ran:user-mgmt:1.0">

<user>

<name>MPLANEUSER</name>

<account-type>PASSWORD</account-type>

<password>12345678</password>

<enabled>true</enabled>

</user>

</config>

</edit-config>

</rpc>

* 1. The NETCONF Server replies rejecting the protocol operation with an "access-denied" error.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="16">

<rpc-error>

<error-type>protocol</error-type>

<error-tag>access-denied</error-tag>

<error-severity>error</error-severity>

</rpc-error>

</rpc-reply>

###### Test Requirement (expected result)

Test step 3 is performed successfully.

### ![]({{site.baseurl}}/assets/images/a8de5c7e6094.png) Access Control FM-PM (negative case)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for an O-RU supporting the Hybrid M-plane architecture model and OPTIONAL for O-DU tests.

This test validates that the O-RU correctly implements NETCONF Access Control user privileges. The scenario corresponds to the following clause in [3]:

* + 6.5 NETCONF Access Control

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.8.1 is successfully completed.
   2. A fm-pm privileged user account is provisioned on the O-RU NETCONF Server.

###### Procedure

* 1. The TER NETCONF Client establishes a connection. Instead of using the default SUDO account, the NETCONF Client uses a user account with fm-pm privileges.
  2. The TER NETCONF Client attempts to configure a new processing-element on the NETCONF Server using the o-ran-processing-element yang model

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="19">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config><processing-elements xmlns="urn:o-ran:processing- element:1.0">

<transport-session-type>ETH-INTERFACE</transport-session-type>

<ru-elements>

<name>HD-BDE\_00000600\_processing-element01</name>

<transport-flow>

<interface-name>HD-BDE\_00000600\_uc-vlan0</interface-name>

<eth-flow>

<ru-mac-address>00:03:A2:0A:00:00</ru-mac-address>

<vlan-id>2</vlan-id>

<o-du-mac-address>38:AF:D7:D5:CE:9B</o-du-mac-address>

</eth-flow>

</transport-flow>

</ru-elements>

</processing-elements>

</config>

</edit-config>

</rpc>

* 1. The NETCONF Server replies rejecting the protocol operation with an "access-denied" error.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="19">

<rpc-error>

<error-type>protocol</error-type>

<error-tag>access-denied</error-tag>

<error-severity>error</error-severity>

</rpc-error>

</rpc-reply>

###### Test Requirement (expected result)

Test step 3 is performed successfully.

### ![]({{site.baseurl}}/assets/images/4c39b63a1d75.png) Access Control SWM (negative case)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for an O-RU supporting the Hybrid M-plane architecture model and OPTIONAL for O-DU tests.

This test validates that the O-RU correctly implements NETCONF Access Control user privileges. The scenario corresponds to the following clause in [3]:

* + 6.5 NETCONF Access Control

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.8.1 is successfully completed.
   2. A swm privileged user account is provisioned on the O-RU NETCONF Server.

###### Procedure

* 1. The TER NETCONF Client establishes a connection. Instead of using the default SUDO account, the NETCONF Client uses a user account with swm privileges.
  2. The TER NETCONF Client attempts to get the configuration of the o-ran-fm.yang model

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="11">

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter xmlns:o-ran-fm="urn:o-ran:fm:1.0" type="xpath" select="/o- ran-fm:\*//."/>

<with-defaults xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf- with-defaults">report-all</with-defaults>

</get>

</rpc>

* 1. The NETCONF Server replies by silently ignoring the read access initiated by the <get> request done in step 2. No error or warning will be reported.

NOTE: a reply rejecting the protocol operation with an "access-denied" error only occurs for a write request.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="0"><data xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"/>

</rpc-reply>

###### Test Requirement (expected result)

Test step 3 is performed successfully.

### ![]({{site.baseurl}}/assets/images/06ceea1da885.png) Sudo on Hierarchical M-plane architecture (positive case)

###### Test Description and Applicability

This scenario is MANDATORY for an O-RU and O-DU supporting the Hierarchical M-plane architecture model.

NOTE: To configure a user account with "carrier" privileges, the O-RU should support the multi-operator shared O-RU feature, as specified in clause 19 of [3].

This test validates that user management model can be used to add users to the O-RU This scenario corresponds to the following clause in [3]:

* + 6.4 NETCONF Connection Establishment
  + 6.5 NETCONF Access Control
  + 6.8 Closing a NETCONF Session

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or

3.1.1.7 (IPv6/TLS) is successfully completed.

###### Procedure

* 1. The TER NETCONF Client establishes connection and creates two new user accounts using o-ran-user- mgmt.yang

NOTE 1: For new user accounts which are <account-type>CERTIFICATE</account-type>, <password> leaf shall not be present.

NOTE 2: In this message, the user account with "carrier" privileges may be associated with Shared Resource Operator IDs (sro-id), as specified in clause 19 of [3].

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="35">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target><running/></target>

<default-operation>merge</default-operation>

<config>

<users xmlns="urn:o-ran:user-mgmt:1.0">

<user>

<name>oranuser2</name>

<account-type>PASSWORD</account-type>

<password>o-ran-password</password>

<enabled>true</enabled>

</user>

<user>

<name>oranuser3</name>

<account-type>PASSWORD</account-type>

<password>12345678</password>

<enabled>true</enabled>

<sro-id>22110</sro-id>

</user>

</users>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server confirms the operation

<rpc-reply message-id="35" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<ok/>

</rpc-reply>

* 1. The TER NETCONF Client configures user account to group mappings for the two new accounts using ietf-netconf-acm.yang respectively one with "sudo" and one with "carrier" privilege.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="15">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<nacm xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-acm">

<groups>

<group>

<name>sudo</name>

<user-name> oranuser2</user-name>

</group>

<group>

<name>carrier</name>

<user-name>oranuser3</user-name>

</group>

</groups>

</nacm>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server confirms the operations for the above transactions.
  2. The TER NETCONF Client retrieves a list of users from O-RU NETCONF Server. The account for the user created in step 1 is validated in this list. The password leaf shall not be present

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="36">

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter xmlns:o-ran-usermgmt="urn:o-ran:user-mgmt:1.0" type="xpath" select="/o-ran-usermgmt:\*//."/>

<with-defaults xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf- with-defaults">report-all</with-defaults>

</get>

</rpc>

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="36">

<data xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<users xmlns="urn:o-ran:user-mgmt:1.0">

<user>

<name>oranuser</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>oranuser2</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

</user>

<user>

<name>oranuser3</name>

<account-type>PASSWORD</account-type>

<enabled>true</enabled>

<sro-id>22110</sro-id>

</user>

</users>

</data>

</rpc-reply>

* 1. The TER NETCONF Client closes the NETCONF session.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="37">

<close-session xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"/>

</rpc>

* 1. The O-RU NETCONF Server establishes a TCP connection and performs the Call Home procedure to the TER NETCONF Client using the same IP and VLAN.
  2. The TER NETCONF Client establishes a SSH session / TLS connection towards the NETCONF Server. The user account created in step 1 is used (oranuser2).
  3. The O-RU NETCONF Server accepts the SSH session / TLS connection establishment from TER NETCONF Client
  4. The TER NETCONF Client and O-RU NETCONF Server exchange capabilities through the NETCONF

<hello> messages.

* 1. Repeat from step 6 to step 10, using oranuser3.

###### Test Requirement (expected result)

Each step above is correctly validated.

### ![]({{site.baseurl}}/assets/images/28d2ea9b04ab.png) Access Control SMO (negative case)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for an O-RU supporting the Hybrid M-plane architecture model and OPTIONAL for O-DU tests.

This test validates that the O-RU correctly implements NETCONF Access Control user privileges. The scenario corresponds to the following clause in [3]:

* + 6.5 NETCONF Access Control

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.8.1 is successfully completed.
   2. A smo privileged user account is provisioned on the O-RU NETCONF Server.

###### Procedure

* 1. The TER NETCONF Client establishes a connection. Instead of using the default SUDO account, the NETCONF Client uses a user account with smo privileges.
  2. The TER NETCONF Client attempts to send rpc supervision-watchdog-reset towards the NETCONF Server using the o-ran-supervision yang model.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="20">

<supervision-watchdog-reset xmlns="urn:o-ran:supervision:1.0">

<supervision-notification-interval>60</supervision- notification-interval>

<guard-timer-overhead>10</guard-timer-overhead>

</supervision-watchdog-reset>

</rpc>

* 1. The NETCONF Server replies rejecting the protocol operation with an "access-denied" error.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="20">

<rpc-error>

<error-type>protocol</error-type>

<error-tag>access-denied</error-tag>

<error-severity>error</error-severity>

</rpc-error>

</rpc-reply>

###### Test Requirement (expected result)

Test step 3 is performed successfully.

### ![]({{site.baseurl}}/assets/images/ab39bbccef15.png) Access Control Hybrid-ODU (negative case)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for an O-RU supporting the Hybrid M-plane architecture model and OPTIONAL for O-DU tests.

This test validates that the O-RU correctly implements NETCONF Access Control user privileges. The scenario corresponds to the following clause in [3]:

* + 6.5 NETCONF Access Control

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.8.1 is successfully completed.
   2. A hybrid-odu privileged user account is provisioned on the O-RU NETCONF Server.

###### Procedure

* 1. The TER NETCONF Client establishes a connection. Instead of using the default SUDO account, the NETCONF Client uses a user account with hybrid-odu privileges.
  2. The TER NETCONF Client attempts to send rpc retrieve-file-list towards the NETCONF Server using the o-ran-file-management yang model

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="20">

<retrieve-file-list xmlns="urn:o-ran:file-management:1.0">

<input>

<logical-path>O-RAN/log/</logical-path>

</input>

</rpc>

* 1. The NETCONF Server replies rejecting the protocol operation with an "access-denied" error.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="20">

<rpc-error>

<error-type>protocol</error-type>

<error-tag>access-denied</error-tag>

<error-severity>error</error-severity>

</rpc-error>

</rpc-reply>

###### Test Requirement (expected result)

Test step 3 is performed successfully.

### ![]({{site.baseurl}}/assets/images/06160f0f2c52.png) Access Control Carrier (negative case)

The test description, applicability, entrance criteria, methodology and requirements are the same as in clause 3.1.8.8, Access Control Hybrid-ODU (negative case).

This test is applicable to the O-RU supporting the multi-operator shared O-RU feature, as specified in clause 19 of [3]. The only difference from clause 3.1.8.8 is this test provisions the carrier privileged user account instead of hybrid-odu user account on the O-RU NETCONF Server.

This scenario is CONDITIONAL MANDATORY for an O-RU supporting the Hybrid M-plane architecture model and OPTIONAL for O-DU tests.

### ![]({{site.baseurl}}/assets/images/9b9fbb1bc736.png) Access Control change own password

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for an O-RU and O-DU supporting the Hybrid M-plane architecture model.

NOTE: This test is only valid for "Password authentication" because "account-type CERTIFICATE" does not set

<password>.

This test validates that the user management model can change password for 'carrier', 'swm', 'nms', 'fm-pm' access groups.

This scenario corresponds to the following clauses in [3]:

* + 6.4 NETCONF Connection Establishment
  + 6.5 NETCONF Access Control

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.8.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client establishes connection and changes a password for **carrier** user using o-ran- usermgmt

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="20">

<chg-password xmlns="urn:o-ran-usermgmt:1.0">

<currentPassword>12345678</currentPassword>

<newPassword>23456789</newPassword>

<newPasswordConfirm>23456789</newPasswordConfirm>

</chg-password>

</rpc>

* 1. The O-RU NETCONF Server confirms the operation

<rpc-reply message-id="20" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<status>Successful</status>

<status-message>Current user's password is changed successfully</status-message>

</rpc-reply>

* 1. The TER NETCONF Client closes the NETCONF session.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="37">

<close-session xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"/>

</rpc>

* 1. The O-RU NETCONF Server establishes a TCP connection and performs the Call Home procedure to the TER NETCONF Client using the same IP and VLAN.
  2. The TER NETCONF Client establishes a SSH session towards the NETCONF Server. The user password which is configured in step 1 is used.
  3. The O-RU NETCONF Server accepts the SSH session establishment from TER NETCONF Client
  4. The TER NETCONF Client and O-RU NETCONF Server exchange capabilities through the NETCONF

<hello> messages.

* 1. Repeat this test from step1 with 'swm', 'nms', 'fm-pm' access groups instead of using 'carrier' access group.

###### Test Requirement (expected result)

Each step above is correctly validated.

### External Input / Output Ports

### ![]({{site.baseurl}}/assets/images/1e4726e88a70.png) External Input Port State Detection

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY. The test is applicable only for O-RUs supporting logical input ports. This test is OPTIONAL for O-DU tests.

This test validates proper handling of logical input ports. This scenario corresponds to the following clause in [3]:

* + 14.5.2 External input

###### Test Entrance Criteria

* + The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.
  + Supplementary circuitry is required to force a change of logical state of input lines belonging to an input port. It is assumed that logical input ports are internally pulled to logical high state by O-RU, therefore supplementary circuitry shall only allow to change the input port to a logical low. To determine a physical input line for this test, one shall read the customer documentation applicable for the O-RU being tested.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.4.1 is successfully completed.

###### Procedure

* 1. The External Input Ports are left in their normal, default state. For the purposes of this test, these input ports are assumed to be a logical high.
  2. The TER NETCONF Client retrieves state of chosen input port by issuing <rpc><get><filter type="subtree"><external-io xml...><input><port-in></port-in></input></external- io></filter></get></rpc>

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="7">

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter type="subtree">

<external-io xmlns:o-ran-io="urn:o-ran:external-io:1.0">

<input> <port-in/> </input>

</external-io>

</filter>

<with-defaults xmlns="urn:ietf:params:xml:ns:yang:ietf- netconf-with-defaults">report-all</with-defaults>

</get>

</rpc>

* 1. The O-RU NETCONF Server provides the state of every line-in belonging to the input port under test to the TER NETCONF Client. For all input lines, the state is TRUE, indicating open circuit (no shortage to ground is detected by input lines)

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="7">

<data xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<external-io xmlns="urn:o-ran:external-io:1.0">

<input>

<name>PORT0</name>

<port-in>0</port-in>

<line-in>TRUE</line-in>

</input>

</external-io>

</data>

</rpc-reply>

* 1. The TER supplementary circuitry randomly shorts one or more input lines to the ground. Changes shall occur with a periodicity greater than 30 seconds.
  2. For every change the O-RU NETCONF Server sends notification <external-input-change> to the TER NETCONF Client. The notification contains updated states of input lines belonging to the port under test. A state FALSE indicates shortage to ground detected by particular input line.

notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<external-input-change xmlns="urn:o-ran:external-io:1.0" >

<current-input-notification >

<external-input >

<name > PORT0</name>

<line-in >FALSE</line-in>

</external-input>

</current-input-notification>

</external-input-change>

</notification>

* 1. This test scenario is looped to step 4 for a total of 10 iterations including the first pass through steps 1 to 4.

###### Test Requirement (expected result)

Step 5 is correctly validated for each of the total of 10 iterations of the test.

### ![]({{site.baseurl}}/assets/images/46db82fbdacf.png) External Output Port State Control

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY. The test is applicable only for O-RUs supporting logical output ports. This test is OPTIONAL for O-DU tests.

This test validates proper handling of logical output ports. This scenario corresponds to the following clause in [3]:

* + 14.5.3 External output

###### Test Entrance Criteria

* + The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.
  + Supplementary circuitry is required to measure voltage of an output port signal. To determine the mapping of physical output lines to ports, one shall read customer documentation for the O-RU being tested. The definition of voltage levels served by output lines of output ports and the maximum allowed current sourced by single an output line shall be validated against the TER capabilities.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.4.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client issues :<rpc><edit-config> to the O-RU NETCONF Server requesting all output lines belonging to output port to be set to FALSE.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="56">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target><running/></target>

<default-operation>merge</default-operation>

<config>

<external-io xmlns="urn:o-ran:external-io:1.0">

<output-setting>

<name>External-Output-0</name>

<line-out>false</line-out>

</output-setting>

</external-io>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server sets logical LOW state to output lines corresponding to step 1 and responds to TER NETCONF Client with <rpc-reply>

<rpc-reply message-id="56" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<ok/>

</rpc-reply>

* 1. The TER supplementary circuitry shows that all output lines of the target output port are set to logical LOW state.
  2. The TER NETCONF Client issues :<rpc><edit-config> towards NETCONF Server requesting a random change of states of output lines belonging to target output port. Changes shall occur with a periodicity greater than 30 seconds.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="58">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target><running/></target>

<default-operation>merge</default-operation>

<config>

<external-io xmlns="urn:o-ran:external-io:1.0">

<output-setting>

<name>External-Output-0</name>

<line-out>true</line-out>

</output-setting>

</external-io>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server sets the requested states of output lines for the states defined by step 4 and responds to NETCONF Client with <rpc-reply>. The TER supplementary circuitry validates the change.

<rpc-reply message-id="58" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<ok/>

</rpc-reply>

* 1. This test scenario is looped to step 5 for a total of 10 iterations including the first pass through steps 1 to 4.

###### Test Requirement (expected result)

Step 5 is correctly validated for each of the total of 10 iterations of the test.

### O-RU Configurability

### ![]({{site.baseurl}}/assets/images/72daad2a1872.png) O-RU Configurability Test (positive case)

###### Test Description and Applicability

This scenario is MANDATORY for both O-RU and O-DU Tests.

This test validates eAxC configuration and validation. The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design.

This scenario corresponds to the following clauses in [3]:

* + 9 Configuration Management
  + 15.2 User plane message routing

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane is operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.4.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client assigns unique eAxC\_IDs to low-level-rx-endpoints. The same set of eAxC\_IDs is also assigned to low-level-tx-endpoints. The TER NETCONF Client uses <rpc><edit- config>. NOTE: The following is an example and is expected to vary for different equipment or configurations.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="23">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<user-plane-configuration xmlns="urn:o-ran:uplane-

conf:1.0">

<low-level-tx-endpoints>

<name>Low-Level-Tx-Endpoint-0</name>

<compression>

<compression-type>STATIC</compression-type>

<iq-bitwidth>14</iq-bitwidth>

<exponent>4</exponent>

</compression>

<frame-structure>193</frame-structure>

<cp-type>NORMAL</cp-type>

<cp-length>88</cp-length>

<cp-length-other>72</cp-length-other>

<offset-to-absolute-frequency-center>-3276</offset-to-absolute- frequency-center>

<number-of-prb-per-scs>

<scs>KHZ\_30</scs>

<number-of-prb>273</number-of-prb>

</number-of-prb-per-scs>

<e-axcid>

<o-du-port-bitmask>49152</o-du-port-bitmask>

<band-sector-bitmask>16128</band-sector-bitmask>

<ccid-bitmask>240</ccid-bitmask>

<ru-port-bitmask>15</ru-port-bitmask>

<eaxc-id>0</eaxc-id>

</e-axcid>

....

<name>Low-Level-Rx-Endpoint-0</name>

<compression>

<compression-type>STATIC</compression-type>

<bitwidth>14</bitwidth>

<exponent>4</exponent>

</compression>

<frame-structure>193</frame-structure>

<cp-type>NORMAL</cp-type>

<cp-length>88</cp-length>

<cp-length-other>72</cp-length-other>

<offset-to-absolute-frequency-center>-3276</offset-to-absolute-

frequency-center>

<number-of-prb-per-scs>

<scs>KHZ\_30</scs>

<number-of-prb>273</number-of-prb>

</number-of-prb-per-scs>

<ul-fft-sampling-offsets>

<scs>KHZ\_30</scs>

<ul-fft-sampling-offset>21</ul-fft-sampling-offset>

</ul-fft-sampling-offsets>

<e-axcid>

<o-du-port-bitmask>49152</o-du-port-bitmask>

<band-sector-bitmask>16128</band-sector-bitmask>

<ccid-bitmask>240</ccid-bitmask>

<ru-port-bitmask>15</ru-port-bitmask>

<eaxc-id>0</eaxc-id>

</e-axcid>

<non-time-managed-delay-enabled>false</non-time-managed-delay- enabled>

</low-level-rx-endpoints>

....

</user-plane-configuration>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Sever responds with a <rpc-reply> message indicating successful completion of requested procedure

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="23">

<ok/>

</rpc-reply>

* 1. Netconf config change notification is generated from O-RU.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<netconf-config-change xmlns="urn:ietf:params:xml:ns:yang:ietf- netconf-notifications">

<changed-by>

<session-id>2</session-id>

<username>oranuser</username>

</changed-by>

<datastore>running</datastore>

<edit>

<target xmlns:o-ran-uplane-conf="urn:o-ran:uplane-conf:1.0">/o- ran-uplane-conf:user-plane-configuration</target>

<operation>merge</operation>

</edit>

</netconf-config-change>

</notification>

###### Test Requirement (expected result)

Test step 3 is performed successfully.

### ![]({{site.baseurl}}/assets/images/2bd82e5ab8dc.png) O-RU Configurability Test (negative case)

###### Test Description and Applicability

This scenario is MANDATORY for O-RU tests and OPTIONAL for O-DU tests.

The test scenario is intentionally limited to scope that shall be testable without a need to modify test scenario according to O-RU's hardware design.

This test verifies that the O-RU NETCONF Server supports configurability with validation. This scenario corresponds to the following clauses in [3]:

* + 9 Configuration Management
  + 15.2 User plane message routing

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.4.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client assigns eAxC\_IDs to low-level-rx-endpoints. The same eAxC\_ID is assigned to more than one low-level-tx-endpoint or/and more than one low-level-rx-endpoint. The NETCONF Client uses <rpc><edit-config>.
  2. The O-RU NETCONF Sever responds with the <rpc-reply> message indicating rejection of the requested procedure.

###### Test Requirement (expected result)

Test step 2 is performed successfully.

### ALD Communications

### ![]({{site.baseurl}}/assets/images/37d85bdc1402.png) ALD Communications Test

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for a O-RU equipped with a RET port (regardless of whether this is a raw RS-485 port or OOK modem coupled internally to antenna connector(s)). This scenario shall be performed against each ALD port exposed by the O-RU. This test is OPTIONAL for O-DU tests.

The purpose of the test is to validate the ALD communications protocol and operation of the O-RU. The following functions are validated in this test.

* + Proper transmission of the content if RPC <ald-communication> towards desired ALD port
  + Proper calculation of FCS
  + Proper application of basic transparency to content to be transmitted
  + Proper addition of start / stop flags
  + Proper reception of payload injected to ALD port
  + Proper removal of start / stop flags
  + Proper application of basic transparency to content received from ALD port
  + Proper validation of FCS in data received from ALD port.

This scenario corresponds to the following clause in [3]:

* + - 14.4 Operational aspects of Antenna Line Devices

###### Test Entrance Criteria

* + The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.
  + It is assumed, that O-RU being a subject of this conformance test scenario is proven to be compliant to the following specifications:

1. ISO/IEC 13239:2002 "High-level data link control (HDLC) procedures"
2. ETSI TS 125.460 "UTRAN Iuant Interface: General aspects and principles"
3. ETSI TS 125.461 "UTRAN Iuant Interface: Layer 1"
4. ETSI TS 125.462 "UTRAN Iuant Interface: Signalling Transport"
5. ETSI TS 125.466 "UTRAN Iuant Interface: Application Part"
   * The O-RU uses a 9.6 kbps data rate on its ALD port(s) for transmission and reception, regardless of connector supported by particular ALD port.

###### Test Methodology

As O-RU does not verify correctness of the payload that is exchanged between NETCONF Client and ALD (except FCS for traffic coming from ALD) - any payload can be used in test vector, under condition, that test vectors are compliant to referenced above set of specification documents (e.g. length is not smaller than minimum size of real message).

RS-485 sniffer / injector is needed for this test. Such a device shall be connected either to O-RU's RS-485 port or to RS-485 port of Smart BiasT connected to O-RU with coaxial cable (depending on O-RU construction)

Unless not specified otherwise - RS-485 sniffer / injector shall be connected to ALD port corresponding to record "port-id" used in RPC <ald-communication>.

In case O-RU exposes ALD port as antenna port, test environment should utilize Smart BiasT for conversion between OOK modulation at antenna port and RS-485 signaling that RS-485 sniffer / injector can handle. DC voltage for Smart BiasT device shall be provided by O-RU through antenna feeder.

If not specified otherwise, for test purposes RS-485 sniffer / injector is connected to ALD port which will be addressed in RPC <ald-communication> within the scenario.

As this test is intended to verify O-RU functions and there will be no real ALD connected - compliance to the required HDLC message structure is required, whilst the AISG payload can be artificial (unless otherwise specified in test case). The O-RU does not verify if messaging is correct, hence, for test simplicity and ease of test result verification, artificial test vectors can be used.

###### Initial Conditions

* 1. The test procedure described in clause 3.1.4.1 is successfully completed.

###### Procedure

1. **Test Case 1: Transmission towards ALD (positive scenario)**

Scope: CRC calculation, transparency algorithm application, start / stop flag addition, datagram transmission using desired ALD port

* 1. NETCONF Client sends regular RPC <ald-communication> message containing bytes 0x7D and 0x7E in "ald-req-msg" record.
  2. O-RU calculates FCS, adds it to datagram provided in record "ald-req-msg", applies basic transparency (replaces every occurrence of byte "0x7E" with two bytes "0x7D 0x5E", respectively, replace byte "0x7D" with two bytes "0x7D 0x5D") and add start/stop flags 0x7E.
  3. O-RU sends payload calculated in step 2 through ALD port mentioned in record "port-id" of RPC.
  4. RS-485 sniffer / injector receives payload sent by O-RU. Received payload is subject of analysis for scenario success / failure classification

###### Test Case 1 Test Requirement (expected result)

Content received by RS-485 listener / injector is compared with content of RPC <ald-communication>.

1. payload shall be sent by desired ALD port of O-RU
2. FCS shall be properly calculated
3. basic transparency shall be properly applied
4. start / stop flags shall be added to payload that has been received by RS-485 sniffer / injector Test scenario is considered as completed with success in case all mentioned above conditions are satisfied. Any deviation means test scenario is failed.

###### Test Case 2: Reception from ALD (positive case)

Scope: datagram reception, start / stop flag detection and removal, transparency algorithm applications, CRC verification

NOTE: Test case 2 shall be performed just after Test case 1 so that content injected by RS-485 sniffer / injector is considered by O-RU as ALD's response to message sent towards ALD in Test case 1. Timing between Test case 1 and Test case 2 shall follow 3GPP specifications mentioned above.

* 1. RS485 sniffer / injector sends properly formatted (start / stop flags, FCS and min / max payload size) message containing strings "0x7D 0x5E" and "0x7D 0x5D" towards O-RU's ALD port used in Test case 1.
  2. O-RU receives the content.
  3. O-RU removes start / stop flags, performs basic transparency (replaces "0x7D 0x5E" with "0x7E" and "0x7D 0x5D" with "0x7D"), makes sure if FCS is correct according content of datagram.
  4. O-RU sends "ald-resp-msg" towards NETCONF Client. In the response parameter "status" contains value "ACCEPTED".

###### Test Case 2 Requirement (expected result)

Content received by NETCONF Client is compared with content injected by RS-485 sniffer / injector.

1. record "ald-port" shall indicate proper O-RU's ALD port as source of the payload
2. basic transparency is properly applied
3. counter of received octets is properly incremented
4. counters of frames with wrong FCS (CRC) and frames without stop flags are not incremented

Test scenario is considered as completed with success in case all mentioned above conditions are satisfied. Any deviation means test scenario is failed.

###### Test Case 3: Reception from ALD (negative case - wrong FCS)

Scope: datagram reception, start / stop flag detection and removal, transparency algorithm application, CRC verification

NOTE: Test case 3 shall be performed just after Test case 1 so that content injected by RS-485 sniffer / injector is considered by O-RU as ALD's response to message sent towards ALD in Test case 1. Timing between Test case 1 and Test case 3 shall follow 3GPP specifications mentioned above.

* 1. RS-485 sniffer / injector sends message containing wrong FCS towards O-RU's ALD port used in Test case 1.
  2. O-RU receives the content.
  3. O-RU removes start / stop flags, performs basic transparency (replaces "0x7D 0x5E" with "0x7E" and "0x7D 0x5D" with "0x7D") and detects, that FCS is incorrect according content of received datagram.
  4. O-RU sends "ald-resp-msg" towards NETCONF Client. In the response parameter "status" contains value "ACCEPTED".

###### Test Case 3 Requirement (expected result)

Content received by NETCONF Client is compared with content injected by RS-485 sniffer / injector.

1. record "ald-port" shall indicate proper O-RU's ALD port as source of the payload
2. record "ald-resp-msg" is empty
3. counter of frames without stop flags is not incremented
4. counter of received octet and counter of frames with wrong FCS (CRC) are incremented

Test scenario is considered as completed with success in case all mentioned above conditions are satisfied. Any deviation means test scenario is failed.

###### Test Case 4: Reception from ALD (negative case - no stop flag)

Scope: datagram reception, start / stop flag detection

NOTE: Test case 4 shall be performed just after Test case 1 so that content injected by RS-485 sniffer / injector is considered by O-RU as ALD's response to message sent towards ALD in Test case 1. Timing between Test case 1 and Test case 4 shall follow 3GPP specifications mentioned above.

* 1. RS-485 sniffer / injector sends message not terminated by stop flag "0x7E" towards O-RU's ALD port used in Test case 1.
  2. O-RU receives the content.
  3. O-RU reaches the end of reception window without receiving stop flag that would terminate the datagram.
  4. O-RU sends "ald-resp-msg" towards NETCONF Client. In the response parameter "status" contains value "ACCEPTED".

###### Test Case 4 Requirement (expected result)

Content received by NETCONF Client is compared with content injected by RS-485 sniffer / injector.

1. record "ald-port" shall indicate proper O-RU's ALD port as source of the payload
2. record "ald-resp-msg" is empty
3. counter of frames with wrong FCS (CRC) is not incremented
4. counter of received octets and counter of frames without stop flags are incremented

Test scenario is considered as completed with success in case all mentioned above conditions are satisfied. Any deviation means test scenario is failed.

###### Test case 5: Transmission towards ALD (negative scenario - wrong ALD port)

Scope: CRC calculation, transparency algorithm application, start / stop flag addition, datagram transmission using desired ALD port (ports are not used by the same HDLC Primary Device)

Scenario is applicable only in case O-RU supports more than one ALD port and under condition that ALD ports do not share single modem.

IMPORTANT: In this scenario RS-485 sniffer / injector shall be connected to ALD port different from than the one indicated in record "port-id" of RPC <ald-communication>.

* 1. NETCONF Client sends regular RPC <ald-communication> message.
  2. O-RU performs the content processing and sends the content towards ALD port that corresponds to content of record "port-id" of RPC
  3. RS-485 sniffer / injector does not receive payload sent by O-RU.

###### Test Requirement (expected result)

Test scenario is considered as completed with success in case RS-485 sniffer / injector does not receive payload in step 3. Any deviation is considered as failed test case.

###### Test case 6: Transmission towards ALD (negative scenario - non-existing ALD port)

Scope: datagram reception

* 1. NETCONF Client sends regular RPC <ald-communication> message. Parameter <port-id> used in RPC does not point to existing ALD port.
  2. O-RU sends <rpc-error> to NETCONF Client. In the response parameter "error-tag" contains value "data-missing".
  3. NETCONF Client receives the <rpc-error> message as described above.

###### Test Requirement (expected result)

Test scenario is considered as completed with success in case step 3) is reached.

### Log Management

### ![]({{site.baseurl}}/assets/images/8594375aa5ea.png) Troubleshooting Test

###### Test Description and Applicability

This scenario is MANDATORY for both O-RU and O-DU Tests.

This test validates the capability of the O-RU to upload troubleshooting logs including alarm information. This scenario corresponds to the following clause in [3]:

* + 14.2.2 Troubleshooting Log Management

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.4.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client sends <rpc><start-troubleshooting-logs> to the O-RU NETCONF Server. The O-RU NETCONF Server responds with <rpc-reply>< troubleshooting-status-grouping >.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="56">

<start-troubleshooting-logs xmlns="urn:o- ran:troubleshooting:1.0"/>

</rpc>

<rpc-reply message-id="56" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<status xmlns="urn:o-ran:troubleshooting:1.0">SUCCESS</status>

</rpc-reply>

* 1. The O-RU NETCONF Server starts generating one or more file(s) containing troubleshooting logs. When the generation of the log file(s) are completed, the O-RU NETCONF Server sends

<notification><troubleshooting-log-generated> with a list of one or more log file names to the TER NETCONF Client.

NOTE: It is assumed that the generated log file(s) contains troubleshooting logs related to alarm 17 measured in 3.1.5.2 or a vendor specific alarm, but the content and format are not specified.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<troubleshooting-log-generated xmlns="urn:o- ran:troubleshooting:1.0">

<log-file-name>o-ran/log/Troubleshootinglog.gz</log-file-name>

</troubleshooting-log-generated>

</notification>

* 1. The TER NETCONF Client sends <rpc><file-upload>log-file-name</file-upload></rpc> to the O-RU NETCONF Server to start uploading the log file(s). The O-RU NETCONF Server responds with <rpc- reply><file-upload> with status SUCCESS.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="57">

<file-upload xmlns="urn:o-ran:file-management:1.0">

<local-logical-file-path>o-ran/log/Troubleshootinglog.gz</local- logical-file-path>

<remote-file- path>sftp://oranuser@192.168.3.13:22/local/log</remote-file-path>

<password>

<password>1234</password>

</password>

</file-upload>

</rpc>

<rpc-reply message-id="57" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<status xmlns="urn:o-ran:file-management:1.0">SUCCESS</status>

</rpc-reply>

* 1. The O-RU NETCONF Server uploads the log file(s) to NETCONF Client by sFTP/FTPES, using FTPES if the O-RU controller is using NETCONF/TLS to configure the O-RU. When file upload is completed, the O-RU NETCONF Server sends <notification><upload-notification> with status SUCCESS.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<file-upload-notification xmlns="urn:o-ran:file-management:1.0">

<local-logical-file-path>o-ran/log/Troubleshootinglog.gz</local- logical-file-path>

<remote-file-path>sftp://oranuser@192.168.3.13:22/local/log

</remote-file-path>

<status>SUCCESS</status>

</file-upload-notification>

</notification>

###### Test Requirement (expected result)

Test step 4 is performed successfully.

NOTE: The O-RU vendor may check the contents of the uploaded log file in detail for the reported alarm 17, but as noted, the content and format of troubleshooting logs are not defined.

### ![]({{site.baseurl}}/assets/images/0db32e08f86b.png) Trace Test

###### Test Description and Applicability

This scenario is MANDATORY for both O-RU and O-DU Tests. This test validates the capability of the O-RU to upload trace logs.

This scenario corresponds to the following clause in [3]:

* + 14.3 Trace

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.4.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client sends <rpc><start-trace-logs> to the O-RU NETCONF Server. The O-RU NETCONF Server responds with <rpc-reply> <start-trace-logs>.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="57">

<start-trace-logs xmlns="urn:o-ran:trace:1.0"/>

</rpc>

<rpc-reply message-id="57" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<status xmlns="urn:o-ran:trace:1.0">SUCCESS</status>

</rpc-reply>

* 1. The O-RU NETCONF Server starts generating one or more file(s) containing trace logs. When the generation of the log file(s) are completed, the O-RU NETCONF Server sends <notification><trace-log- generated> and <is-notification-last> set as false with a list of one or more log file names to the TER NETCONF Client.

NOTE: It is assumed that the generated log file(s) contains trace logs related to O-RU Vendor specific, but the content and format are not specified.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<trace-log-generated xmlns="urn:o-ran:trace:1.0">

<log-file-name>o-ran/log/Tracelog.gz</log-file-name>

<is-notification-last>false</is-notification-last>

</trace-log-generated>

</notification>

* 1. The TER NETCONF Client sends <rpc><file-upload>log-file-name</file-upload></rpc> to the O-RU NETCONF Server to start uploading the log file(s). The O-RU NETCONF Server responds with <rpc- reply><file-upload> with status SUCCESS.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="58">

<file-upload xmlns="urn:o-ran:file-management:1.0">

<local-logical-file-path>o-ran/log/TraceLog.gz</local- logical-file-path>

<remote-file-path>sftp:// oranuser@192.168.3.13:22/local/log</remote-file-path>

<password>

<password>1234</password>

</password>

</file-upload>

</rpc>

<rpc-reply message-id="58" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<status xmlns="urn:o-ran:file management:1.0">SUCCESS</status>

</rpc-reply>

* 1. The O-RU NETCONF Server uploads the log file(s) to NETCONF Client by sFTP/FTPES, using FTPES if the O-RU controller is using NETCONF/TLS to configure the O-RU. When file upload is completed, the O-RU NETCONF Server sends <notification><upload-notification> with status SUCCESS.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<file-upload-notification xmlns="urn:o-ran:file- management:1.0">

<local-logical-file-path>o-ran/log/Tracelog.gz</local- logical-file-path>

<remote-file-path>sftp://oranuser@192.168.3.13:22/local/ log</remote-file-path>

<status>SUCCESS</status>

</file-upload-notification>

</notification>

* 1. The TER NETCONF Client sends <rpc><stop-trace-logs> to the O-RU NETCONF Server. The O-RU NETCONF Server responds with <rpc-reply> <stop-trace-logs>.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="59">

<stop-trace-logs xmlns="urn:o-ran:trace:1.0"/>

</rpc>

<rpc-reply message-id="59" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<status xmlns="urn:o-ran:trace:1.0">SUCCESS</status>

</rpc-reply>

* 1. The TER NETCONF Client can wait for the notification from the O-RU NETCONF Server. The O-RU NETCONF Server sends <notification> and set <is-notification-last> to true.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime> YYYY-MM-DDTHH:MM:SS.FZ </eventTime>

<trace-log-generated xmlns="urn:o-ran:trace:1.0">

<log-file-name>o-ran/log/Tracelog.gz</log-file-name>

<is-notification-last>true</is-notification-last>

</trace-log-generated>

* 1. The TER NETCONF Client sends <rpc><file-upload>log-file-name</file-upload></rpc> to the O-RU NETCONF Server to start uploading the remaining log file(s). The O-RU NETCONF Server responds with <rpc-reply><file-upload> with status SUCCESS.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="58">

<file-upload xmlns="urn:o-ran:file-management:1.0">

<local-logical-file-path>o-ran/log/TraceLog.gz</local- logical-file-path>

<remote-file-path>sftp:// oranuser@192.168.3.13:22/local/log</remote-file-path>

<password>

<password>1234</password>

</password>

</file-upload>

</rpc>

<rpc-reply message-id="58" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<status xmlns="urn:o-ran:file management:1.0">SUCCESS</status>

</rpc-reply>

* 1. The O-RU NETCONF Server uploads the remaining log file(s) to NETCONF Client by sFTP/FTPES, using FTPES if the O-RU controller is using NETCONF/TLS to configure the O-RU. When file upload is completed, the O-RU NETCONF Server sends <notification><upload-notification> with status SUCCESS.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<file-upload-notification xmlns="urn:o-ran:file- management:1.0">

<local-logical-file-path>o-ran/log/Tracelog.gz</local- logical-file-path>

<remote-file-path>sftp://oranuser@192.168.3.13:22/local/ log</remote-file-path>

<status>SUCCESS</status>

</file-upload-notification>

</notification>

###### Test Requirement (expected result)

Test step 4 and 8 are performed successfully.

NOTE: The O-RU vendor may check the contents of the uploaded log file in detail for the reported trace logs, but as noted, the content and format of trace logs are not defined.

### Connectivity Check

### ![]({{site.baseurl}}/assets/images/b29b43973b60.png) Ethernet Connectivity Monitoring

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY if the O-RU or O-DU supports C-Plane and U-Plane connectivity over Ethernet.

This test validates the proper operation of LBM on the O-RU. This scenario corresponds to the following clauses in [3]:

* + 7.3 C/U Plane VLAN configuration
  + 7.5 Definition of processing elements
  + 7.6.1 C/U-Plane transport connectivity verification

###### Test Entrance Criteria

1. The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.
2. Result validation of this test requires TER capabilities such as a network sniffer that allows for traffic analysis over ETH frames between O-RU and O-DU.

###### Test Methodology

1. **Initial Conditions**

The test procedure described in clause 3.1.4.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client configures the O-RU NETCONF Server with a vlan-id for the C-Plane and U-Plane interfaces.
  2. The TER NETCONF Client configures a transport-flow in the O-RU processing element: a combination of VLAN identity, O-DU MAC address and O-RU MAC address.
  3. The TER sends loopback message to the O-RU MAC address configured for the processing element.
  4. The O-RU sends loopback responses to the O-DU MAC Address of the loopback message.

###### Test Requirement (expected result)

Packets are sent correctly in step 3 and 4, as validated via the TER.

### ![]({{site.baseurl}}/assets/images/60946211e7da.png) UDP Echo Test

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY. The test is applicable only if the O-RU or O-DU supports C- Plane and U-Plane sessions over IP.

This test validates the proper operation UDP Echo on the O-RU for continuous verification of connectivity. This scenario corresponds to the following clauses in [3]:

* + 7.4 O-RU C/U Plane IP Address Assignment
  + 7.5 Definition of processing elements
  + 7.6 O-DU Verification of C/U Plane Transport Connectivity

###### Test Entrance Criteria

1. The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.
2. Result validation of this test requires TER capabilities such as a network sniffer that allows for traffic analysis over ETH frames between O-RU and O-DU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.4.1 is successfully completed.

###### Procedure

* 1. The TER NETCONF Client configures IP information and udpip-flow in the O-RU processing element for the C-Plane and U-Plane communications.
  2. The TER NETCONF Client configures the enable-udp-echo leaf = true in the udp-echo YANG model to be enabled operation of the UDP echo server in the O-RU.
  3. The TER NETCONF Client sends a UDP datagram to UDP port number:7 of the O-RU NETCONF Server.
  4. The O-RU NETCONF Server sends back the UDP datagram to the TER NETCONF Client.
  5. The TER NETCONF Client configures the enable-udp-echo leaf = false in the udp-echo YANG model to be disabled operation of the UDP echo server in the O-RU.

###### Test Requirement (expected result)

Packets are sent correctly in step 3 and 4 as validated by the TER with sniffer capability.

### Energy Savings

### ![]({{site.baseurl}}/assets/images/fe62bead3a47.png) Carrier Deactivation and Energy Saving Configuration

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for O-RU and O-DU. This test validates carrier deactivation and energy saving configuration.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports energy-saving.

This scenario corresponds to the following clause in [3]:

* + 15.3.2 Activation, deactivation and sleep
  + 20.2 Carrier deactivation for energy saving
  + 10.2 Measurement activation and de-activation

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.10.1 is successfully completed so that O-RU is configured to receive, process and output the test signal defined in initial condition 4.
   2. Leaf active is ACTIVE in the tx-array-carrier and rx-array-carrier elements for the carriers under test.
   3. The TER NETCONF Client subscribes to notifications of the measurement-object power, with the measurement-interval of 60 sec.
   4. CUSM Emulator generates proper C/U plane stimulus for 3GPP test waveform with 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in section 3GPP 38.141 -1 NR-FR1-TM1.1 and section

3.2.1.1.5 of this document. If the radio does not support the bandwidth and/or numerology defined here, it will be up to the test developer to modify these parameters in the test waveform to adapt to the O-RU capabilities.

###### Procedure

* 1. The TER NETCONF Client retrieves subscribed notifications from the O-RU NETCONF Server on the power consumption performance measurement.
  2. The TER measures the AC or DC power consumption of the O-RU using power meter.
  3. The TER compares the difference between the reported power consumption by the O-RU NETCONF Server and the measured power consumption in step 2 to validate it is within acceptable range, e.g. +- 10%.
  4. The TER NETCONF Client sets the value of the leaf active at tx-array-carrier element / rx-array-carrier element to INACTIVE.
  5. The O-RU NETCONF Server responds with a <rpc-reply> message indicating successful completion of requested procedure.
  6. The TER NETCONF Client waits for at least two continuous Notifications of INACTIVE from the O-RU NETCONF Server to ensure a full cycle of INACTIVE state for power measurements is past.
  7. The TER performs the DC or AC power consumption measurement with the power meter.
  8. The TER verifies the transmission from the O-RU is turned OFF using a signal analyzer.
  9. The TER compares the difference between the reported power consumption by the O-RU NETCONF Server and the measured in step 7 to validate it is within acceptable range, e.g. +- 10%. The power consumption should be smaller than the previous one measured in the step 2.
  10. The TER NETCONF Client sets the value of the parameter energy-saving-enabled element to TRUE.
  11. The O-RU NETCONF Server responds with a <rpc-reply> message indicating successful completion of requested procedure.
  12. The power-state of o-ran-hardware is switched to SLEEPING, indicating the O-RU is in energy saving mode. Check O-RU power-state=SLEEPING.
  13. The TER performs the DC or AC power consumption measurement with the power meter.
  14. The TER NETCONF Client waits for at least one Notification of Power measurement from the NETCONF Server to ensure a full cycle of power-state=sleeping for power measurement is completed.
  15. The TER compares the difference between the reported power consumption by the NETCONF Server and the measured power consumption in step 13 to validate it is within acceptable range, e.g. +- 10%. The power consumption measured by the power analyzer is expected to be smaller than that measured in the Step 7.

###### Test Requirement (expected result)

1. The test steps above are performed successfully
2. All validation steps above are within expected ranges or correctly match the expected outcome.

### ![]({{site.baseurl}}/assets/images/e67c1c12464c.png) Carrier Activation

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for O-RU and O-DU. This test validates carrier activation from SLEEP state.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [3]:

* + 15.3.2 Activation, deactivation and sleep
  + 20.2 Carrier deactivation for energy saving
  + 10.2 Measurement activation and de-activation

###### Test Entrance Criteria

The minimum functions of the TER described in section 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.10.1 is successfully completed so that O-RU is configured to receive, process and output the test signal defined in initial condition 5.
   2. Leaf active is either INACTIVE or SLEEP in the tx-array-carrier and rx-array-carrier elements for the carriers under test.
   3. Leaf state is either DISABLED (if leaf active is INACTIVE) or READY (if leaf active is SLEEP) in the tx- array-carrier and rx-array-carrier elements for the carriers under test.
   4. The TER NETCONF Client subscribes to notifications of the measurement-object power, with the measurement-interval of 60 sec.
   5. CUSM Emulator generates proper C/U plane stimulus for 3GPP test waveform with 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS 138.141 -1 NR-FR1-TM1.1 and clause 3.2.1.1.5 of this document. If the radio does not support the bandwidth and/or numerology defined here, it will be up to the test developer to modify these parameters in the test waveform to adapt to the O-RU capabilities.

###### Procedure

* 1. The TER NETCONF Client retrieves subscribed notifications from the O-RU NETCONF Server on the power consumption performance measurement.
  2. The TER measures the AC or DC power consumption of the O-RU using a power meter.
  3. The TER compares the difference between the power consumption reported by the O-RU NETCONF Server and the power consumption measured in step 2, validating that it is within an acceptable range, e.g. +- 10%.
  4. The TER NETCONF Client sets the value of the leaf active at tx-array-carrier element / rx-array-carrier element to ACTIVE.
  5. The O-RU NETCONF Sever responds with a <rpc-reply> message indicating successful completion of requested procedure.
  6. The TER NETCONF Client waits for at least two continuous Notifications of ACTIVE from the NETCONF Server to ensure a full cycle of ACTIVE state for power measurements is completed.
  7. The TER performs the DC or AC power consumption measurement with the power meter.
  8. The TER verifies transmission is present from the O-RU and the expected signal (defined in C.a.5) is measured successfully with a signal analyzer.
  9. The TER compares the difference between the DC or AC power consumption reported by the O-RU NETCONF Server and the DC or AC power consumption measured in step 7, validating that it is within an acceptable range, e.g. +- 10%. The power consumption should now be larger than the previous one measured in the step 2.
  10. The TER records the time from execution of step 4 to the TER receiving the signal from the O-RU.

###### Test Requirement (expected result)

1. The test steps above are performed successfully.
2. All validation steps above are within expected ranges or correctly match the expected outcome.

### ![]({{site.baseurl}}/assets/images/b35b93a8fabd.png) Subscription and Reporting of Energy, Power and Environmental (EPE) Statistics

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for both O-RU and O-DU Tests.

This test validates the Energy, Power and Environmental (EPE) measurement activation/deactivation and collection of measurement results.

This scenario corresponds to the following clause in [3]:

* + 10.2 Measurement activation and de-activation

###### Test Entrance Criteria

The minimum functions of the TER described in section 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or

3.1.1.7 (IPv6/TLS) is successfully completed.

###### Procedure

* 1. The TER NETCONF Client activates the Energy, Power and Environmental performance measurement via NETCONF <edit-config> to O-RU NETCONF Server with the following parameters and values:

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Parameters** | **Value** |
| Measurement-group | Epe-statistics |
| Measurement-object | POWER |
| Report-info | Average |
| Object-unit | O-RAN-RADIO |
| Measurement-interval | 60 sec |
| Active | True |

</div>

###### Table 3.1.14-1 Configuration Parameters for performance measurement

* 1. The O-RU NETCONF Sever responds with a <rpc-reply> message indicating successful completion of requested procedure.
  2. The TER NETCONF Client subscribes to measurement group epe-statistics and measurement-object POWER to collect the measurement result by sending NETCONF <create-subscription> to NETCONF server in the O-RU. The following is an example:

<rpc xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="101">

<create-subscription xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<filter netconf:type="subtree">

<measurement-result-statistics

xmlns="urn:o-ran:performance-management:1.0">

<epe-statistics>

<measurement-object>POWER</measurement-object>

</epe-statistics>

</measurement-result-statistics>

</filter>

</create-subscription>

</rpc>

* 1. The O-RU NETCONF Server responds with <rpc-reply> message indicating successful completion of requested procedure.
  2. The O-RU NETCONF Server sends NETCONF notification messages periodically to the client with configured measurement result.
  3. TER waits for 5 minutes and then validates that notification messages are generated according to measurement-interval and notification-interval.
  4. The TER NETCONF Client deactivates the Energy, Power and Environmental (EPE) performance measurement via NETCONF <edit-config> to O-RU NETCONF Server.
  5. The O-RU NETCONF Server stops sending NETCONF notification messages to the client.

###### Test Requirement (expected result)

1. The test steps above are performed successfully
2. All validation steps above are within expected ranges or correctly match the expected outcome.

### ![]({{site.baseurl}}/assets/images/53f39a2c5b0c.png) M-Plane based TRX control

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for O-RU and O-DU. The test must be executed if the O-RU supports M-plane based TRX control.

This test validates M-plane based TRX control.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [3]:

* + 20.3.2 TRX control - M-Plane controlled
  + 10.2 Measurement activation and de-activation

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.10.1 is successfully completed so that O-RU is configured to receive, process and output the test signal defined in initial condition 5.
   2. The O-RU NETCONF Server exposes the capability to support energy savings.
   3. The antenna mask is set to enable all array-elements .
   4. The TER NETCONF Client subscribes to notifications of the measurement-object *power*, with the measurement-interval of 60 sec.
   5. CUSM Emulator generates proper C/U plane stimulus for 3GPP test waveform with 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS 138.141 -1 NR-FR1-TM1.1 and clause

3.2.1.1.5 of this document. If the radio does not support the bandwidth and/or numerology defined here, it will be up to the test developer to modify these parameters in the test waveform to adapt to the O-RU capabilities.

###### Procedure

* 1. The TER NETCONF Client retrieves subscribed notifications from the O-RU NETCONF Server on the power consumption performance measurement.
  2. The TER measures the AC or DC power consumption of the O-RU using power meter.
  3. The TER compares the power difference between the reported power consumption by the O-RU NETCONF Server and the measured power consumption in step 2 and validates it is within acceptable range, e.g. +- 10%.
  4. The TER NETCONF Client sets the value of antenna mask for the [tr]x-array. It is recommended to set at least half of the antenna mask off in order to have more differentiable power changes.

For the case where the O-RU advertises mplane-supported-trx-control-masks list, RPC edit-config shall be used to configure a specific antenna mask value by specifying a given antenna-bitmask-index for the [tr]x- array using the YANG parameter [tr]x-array-antenna-mask-config.

EXAMPLE-1: configuration of a given 32-bit tx antenna mask by specifying the antenna-index 1, which points to an antenna mask that has half ones and the other half zeros:

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="101">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<config>

<tx-array-antenna-mask-config>

<array-name> tx-array-1 </array-name>

<antenna-bitmask-index> 1 </antenna-bitmask-index>

</tx-array-antenna-mask-config>

</config>

</edit-config>

</rpc>

For the case where the O-RU does not advertise mplane-supported-trx-control-masks list for a given [tr]x- array, the RPC edit-config shall be used to configure a specific antenna-bitmask value for the [tr]x-array using the YANG parameter [tr]x-array-antenna-mask-config.

EXAMPLE-2: configuration of a 32-bit tx antenna mask is shown below:

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="101">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<config>

<tx-array-antenna-mask-config>

<array-name>tx-array-1</array-name>

<antenna-bitmask>11111111000000000000000011111111</antenna-bitmask >

</tx-array-antenna-mask-config>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server responds with a <rpc-reply> message indicating successful completion of requested procedure.

For Example,

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="101">

<ok/>

</rpc-reply>

* 1. The TER NETCONF Client waits for mplane-trx-control-ant-mask-update notification.

EXAMPLE-1: mplane-trx-control-ant-mask-update notification by specifying the antenna-index is shown below:

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<mplane-trx-control-ant-mask-update>

<array-name>tx-array-1</array-name>

<array-type>tx-array</array-type>

<updated-antenna-mask-index>1</updated-antenna-mask-index>

</mplane-trx-control-ant-mask-update>

EXAMPLE-2: mplane-trx-control-ant-mask-update notification by specifying antenna mask is shown below:

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<mplane-trx-control-ant-mask-update>

<array-name>tx-array-1</array-name>

<array-type>tx-array</array-type>

<updated-antenna-mask>11111111000000000000000011111111</updated-antenna-mask>

</mplane-trx-control-ant-mask-update>

</notification>

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The TER compares the difference between the reported power consumption by the O-RU NETCONF Server and the measured in step 7 to validate it is within acceptable range, e.g. +- 10%. The power consumption should be smaller than the previous one measured in the step 2.
  3. The TER NETCONF Client resets the value of antenna mask for the [tr]x-array after 15 minutes.

For the case where the O-RU advertises mplane-supported-trx-control-masks list, RPC edit-config shall be used to configure a specific antenna mask value by specifying a given antenna-bitmask-index for the [tr]x- array using the YANG parameter [tr]x-array-antenna-mask-config.

EXAMPLE-1: configuration of a given 32-bit tx antenna mask by specifying the antenna-index 5 which points to all-ones antenna mask:

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message- id="102">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<config>

<tx-array-antenna-mask-config>

<array-name>tx-array-1</array-name>

<antenna-bitmask-index>5</antenna-bitmask-index>

</tx-array-antenna-mask-config>

</config>

</edit-config>

</rpc>

For the case where the O-RU does not advertise mplane-supported-trx-control-masks list for a given [tr]x- array, the RPC edit-config shall be used to configure a specific antenna-bitmask value for the [tr]x-array using the YANG parameter [tr]x-array-antenna-mask-config.

EXAMPLE-2: configuration of a 32-bit tx antenna mask is shown below:

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="102">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<config>

<tx-array-antenna-mask-config>

<array-name>tx-array-1</array-name>

<antenna-bitmask>11111111111111111111111111111111</antenna-bitmask >

</tx-array-antenna-mask-config>

</config>

</edit-config>

</rpc>

Note : For resetting antenna mask 15 minutes is specified as an example, actual value may depend on O-RU implementation.

* 1. The O-RU NETCONF Server responds with a <rpc-reply> message indicating successful completion of requested procedure.

For Example,

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="102">

<ok/>

</rpc-reply>

* 1. The TER NETCONF Client waits for mplane-trx-control-ant-mask-update notification. For Example,

EXAMPLE-1: mplane-trx-control-ant-mask-update notification by specifying the antenna-index is shown below:

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<mplane-trx-control-ant-mask-update>

<array-name>tx-array-1</array-name>

<array-type>tx-array</array-type>

<updated-antenna-mask-index>5</updated-antenna-mask-index>

</mplane-trx-control-ant-mask-update>

EXAMPLE-2: mplane-trx-control-ant-mask-update notification by specifying antenna mask is shown below:

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<mplane-trx-control-ant-mask-update>

<array-name>tx-array-1</array-name>

<array-type>tx-array</array-type>

<updated-antenna-mask>11111111111111111111111111111111</updated-antenna-mask>

</mplane-trx-control-ant-mask-update>

</notification>

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The TER verifies the expected signal (defined in C.a.5) is measured successfully with a signal analyzer.
  3. The TER compares the DC or AC power difference between the reported power consumption by the O- RU NETCONF Server and the measured DC or AC power consumption in step 12 to validate it is within acceptable range, e.g. +- 10%. The power consumption should now be larger than the previous one measured in the step 7.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps above are within expected ranges or correctly match the expected outcome.

### ![]({{site.baseurl}}/assets/images/0aabdcdeeae6.png) Deep-hibernate

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY for O-RU and O-DU. The test shall be executed if the O-RU supports deep-hibernate.

This test validates deep-hibernate.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports energy savings.

This scenario corresponds to the following clause in [3]:

* + 20.5 Deep-hibernate

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.10.1 is successfully completed so that O-RU is configured to receive, process and output the test signal defined in initial condition 4.
   2. The O-RU NETCONF Server exposes the capability to support energy savings including deep-hibernate.
   3. The TER NETCONF Client subscribes to notifications of the measurement-object *power*, with the measurement-interval of 60 sec.
   4. CUSM Emulator generates proper C/U plane stimulus for 3GPP test waveform with 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS 138.141 -1 NR-FR1-TM1.1 and clause

3.2.1.1.5 of this document. If the radio does not support the bandwidth and/or numerology defined here, it will be up to the test developer to modify these parameters in the test waveform to adapt to the O-RU capabilities.

###### Procedure

* 1. The TER NETCONF Client retrieves subscribed notifications from the O-RU NETCONF Server on the power consumption performance measurement.
  2. The TER measures the AC or DC power consumption of the O-RU using power meter.
  3. The TER compares the power difference between the reported power consumption by the O-RU NETCONF Server and the measured power consumption in step 2 and validates it is within acceptable range, e.g. +- 10%.
  4. The TER NETCONF Client sends deep-hibernate rpc command. For Example,

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="105">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<config>

<deep-hibernate>

<hibernate-time>15</hibernate-time>

</deep-hibernate>

</config>

</edit-config>

</rpc>

NOTE: hibernate-time is between min-hibernate-time-duration and max-hibernate-time-duration if advertised by the O-RU.

* 1. The O-RU NETCONF Server responds with a <rpc-reply> message indicating successful completion of requested procedure.

For Example,

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="105">

<ok/>

</rpc-reply>

* 1. The TER NETCONF Client waits for deep-hibernate-activated notification. For Example,

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<deep-hibernate-activated/>

<hibernate-time>15</hibernate-time>

<deep-hibernate-activated/>

</notification>

* 1. The O-RU NETCONF Server starts deep-hibernate timer.
  2. The TER NETCONF Client sends close-session rpc command. For Example,

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="106">

<close-session xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"/>

</rpc>

* 1. The O-RU NETCONF Server enters deep-hibernate.
  2. Half of hibernate time past, the TER performs the DC or AC power consumption measurement with the power meter. The power consumption should now be smaller than the previous one measured in the step 2.
  3. The TER verifies the transmission from the O-RU is turned OFF using a signal analyzer.
  4. The O-RU NETCONF Server restarts after the expiry of hibernate-time.
  5. After restart, the TER verifies restart-cause value is DEEP-HIBERNATE-RESTART.
  6. After carrier activation, the TER NETCONF Client waits for at least two continuous Notifications of ACTIVE from the O-RU NETCONF Server to ensure a full cycle of ACTIVE state for power measurements is completed.
  7. The TER performs the DC or AC power consumption measurement with the power meter. The power consumption should now be larger than the previous one measured in the step 10.
  8. The TER verifies transmission is present from the O-RU and the expected signal (defined in C.a.4) is measured successfully with a signal analyzer.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps above are within expected ranges or correctly match the expected outcome.

### ![]({{site.baseurl}}/assets/images/d9af37a9fa58.png) Data layer control

1. **Test Description and Applicability**

This scenario is CONDITIONAL MANDATORY for O-RU and O-DU. The test shall be executed if the O-RU supports Data layer control.

This test validates Data layer control.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [3]:

* + 20.3.3 Data layer control
  + 10.2 Measurement activation and de-activation

###### Test Entrance Criteria

The minimum functions of the TER described in clause 2.1 that support validation of the M-Plane are operational, configured and connected to the O-RU.

###### Test Methodology

1. **Initial Conditions**
   1. The test procedure described in clause 3.1.10.1 is successfully completed so that O-RU is configured to receive, process and output the test signal defined in initial condition 4.
   2. The O-RU NETCONF Server exposes the capability to support energy savings including Data layer control.
   3. The TER NETCONF Client subscribes to notifications of the measurement-object *power*, with the measurement-interval of 60 sec.
   4. CUSM Emulator generates proper C/U plane stimulus for 3GPP test waveform with 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS 138.141 -1 NR-FR1-TM1.1 and clause

3.2.1.1.5 of this document. If the radio does not support the bandwidth and/or numerology defined here, it will be up to the test developer to modify these parameters in the test waveform to adapt to the O-RU capabilities.

###### Procedure

* 1. The TER NETCONF Client retrieves subscribed notifications from the O-RU NETCONF Server on the power consumption performance measurement.
  2. The TER measures the AC or DC power consumption of the O-RU using power meter.
  3. The TER compares the power difference between the reported power consumption by the O-RU NETCONF Server and the measured power consumption in step 2 and validates it is within acceptable range, e.g. +- 10%.
  4. The TER NETCONF Client turns off data layers by adding energy-sharing-group-id into energy-sharing- groups-disabled leaf-list parameter.

For Example,

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="103">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<config>

<energy-sharing-groups-disabled>4</energy-sharing-groups-

disabled>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server responds with a <rpc-reply> message indicating successful completion of requested procedure.

For Example,

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="103">

<ok/>

</rpc-reply>

* 1. The TER NETCONF Client waits for 10 seconds.
  2. The TER performs the DC or AC power consumption measurement with the power meter.
  3. The TER compares the difference between the reported power consumption by the O-RU NETCONF Server and the measured in step 7 to validate it is within acceptable range, e.g. +- 10%. The power consumption should be smaller than the previous one measured in the step 2.
  4. The TER NETCONF Client turns on data layers by removing energy-sharing-group-id from energy- sharing-groups-disabled leaf-list parameter after 15 minutes.

For Example,

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="104">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<config>

<energy-sharing-groups-disabled:operation="delete">4</energy- sharing-groups-disabled>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server responds with a <rpc-reply> message indicating successful completion of requested procedure.

For Example,

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="104">

<ok/>

</rpc-reply>

* 1. The TER NETCONF Client waits for data-layer-control-wakeup-notification. Example,

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<data-layer-control-wakeup-notification>

<energy-sharing-group>4</energy-sharing-group>

</data-layer-control-wakeup-notification>

</notification>

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The TER verifies the expected signal (defined in C.a.4) is measured successfully with a signal analyzer.
  3. The TER compares the DC or AC power difference between the reported power consumption by the O- RU NETCONF Server and the measured DC or AC power consumption in step 12 to validate it is within acceptable range, e.g. +- 10%. The power consumption should now be larger than the previous one measured in the step 7.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps above are within expected ranges or correctly match the expected outcome.

### UC-Plane Measurements O-RU

### UC-Plane Standard Test Definitions

The following clauses describe test scenarios for equipment implementing the U-Plane and C-Plane O-RAN option 7.2x protocols.

### ![]({{site.baseurl}}/assets/images/955215c86599.png) UC-Plane Measurements, O-RU TEST SCENARIO

In these sets of tests, the Device Under Test (DUT) is the O-RU. This document describes conformance tests for 4 scenarios:

* + - 1. Conducted FDD tests for FR1 radios
      2. Non-conducted (OTA) FDD tests for FR1 radios
      3. Conducted TDD tests for FR1 radios
      4. Non-conducted tests for TDD FR1 and FR2 radios

The O-RU must only be tested for the scenarios that apply to the O-RU capabilities. The fact that there are 4 scenarios defined does not imply that every O-RU must be tested for all scenarios in order to be O-RAN compliant and

consequently the O-RU does not have to support all the capabilities required to test all 4 scenarios (i.e. support of FR1, FR2, TDD, FDD, conducted and non-conducted). In other words, depending on whether the O-RU supports capabilities such as FDD, TDD, FR1 and or FR2, only the corresponding scenarios that match the O-RU capabilities will apply. For example, an O-RU that does not have or cannot provide access to antenna ports (or TAB connectors), supports TDD and operates at FR2 bands, the corresponding scenario that the O-RU will need to be tested to be O-RAN conformant is scenario #4 only. Another example, for an O-RU that supports FDD, operates at FR1 bands and has or can provide access to antenna ports (or TAB connectors), scenario #1 or #2 can apply but only one of the two possible scenarios will be selected to test the O-RU for O-RAN conformance.

For scenario #1 and #3 above the RF test setup is as described in ETSI TS 138.141-1[NR] and TS 136.141 [LTE]. For scenarios #2 and #4 the RF test setup is as described in TS 138.141-2. Note that O-RAN conformance testing is expected to be "off-line" and not to be run while an O-DU and/or O-RU is operating and serving actual users. The O- RU manufacturer must also make available the same declarations described in ETSI TS 138.141-1, TS 138.141-2 [NR] and TS 136.141 [LTE] Section 4.6. This will determine the radio's support for multi-carrier operation (e.g. if multi- carrier operation is supported on different connectors)

Since the purpose of this document is to test O-RAN Fronthaul conformance and not to duplicate 3GPP RF tests, only selected parts of TS 138.141-1, TS 138.141-2 [NR] and TS 136.141 [LTE] will be used for RF testing. These selected test features are only necessary to test whether the O-RU correctly interpreted and generated the O-RAN C-Plane and U-Plane messages correctly. Several testcases require a bandwidth that may not be supported by the O-RU. In such situation, the testcase should be executed by adjusting to a bandwidth that is supported by the O-RU and complies with the channel bandwidth listed in either TS 138.104 clause 5.3.2 for NR or TS 136.104 clause 5.6 for LTE. The adjustment of the bandwidth can be done by reducing the number of physical resource blocks or by selecting another FRC. The bandwidth adjustment may select the minimum bandwidth defined by 3GPP. The adjustment of the bandwidth does not require the execution of the same testcase again with a larger bandwidth.

There will also be some additions to the test waveforms used in TS 138.141-1, TS 138.141-2 [NR] and TS 136.141 [LTE] to fully exercise the features of the O-RAN Fronthaul protocol. These selected parts and additions are summarized below:

#### ![]({{site.baseurl}}/assets/images/bbd41a8fe365.png) For scenario #1 (Conducted FDD tests for FR1 radios)

* For downlink tests for type 1-C radios (radios with antenna port connectors and passive antennas) the test configuration described in TS 138.141-1 D.1.1 will be used. Only a single antenna port will be used unless the test explicitly requires more than one port and the radio supports more than one port. RF test equipment will be connected at the point described in TS 138.141-1 clause 4.2.1. Note that an antenna port is an electrical conducting port that is connected to an array element.
* For uplink tests for type 1-C radios (radios with antenna port connectors and passive antennas) the test configuration described in TS 138.141-1 D.2.1 will be used. Only a single antenna port will be used unless the test explicitly requires more than one port and the radio supports more than one port. RF test equipment will be connected at the point described in TS 138.141-1 clause 4.2.1. Note that an antenna port is an electrical conducting port that is connected to an array element.
* For downlink tests for type 1-H radios (radios with TAB connectors and active antenna systems) the test configuration described in TS 138.14138.141-1 D.3.1 will be used for conducted tests. Only a single TAB connector will be used unless the test explicitly requires more than one connector. RF test equipment will be connected at the point described in TS 138.141-1 clause 4.2.2. Note that a transceiver array boundary (TAB) connector is an electrical conducting port that is connected to an array element via a radio distribution network (RDN).
* For uplink tests for type 1-H radios (radios with TAB connectors and active antenna systems) the test configuration described in TS 138.14138.141-1 D.4.1 will be used for conducted tests. Only a single TAB connector will be used unless the test explicitly requires more than one connector. RF test equipment will be connected at the point described in TS 138.141-1 clause 4.2.2. Note that a transceiver array boundary (TAB) connector is an electrical conducting port that is connected to an array element via a radio distribution network (RDN).
* The basic downlink test will start with the Test model described in NR-FR1-TM1.1 and E-TM1.1. Subsequent tests will adapt this model to test additional features of the O-RAN interface (e.g. Modifying the payload data, blanking some symbols, etc.). Note this test model describes the IQ data contained in the O-RAN packets not the O-RAN specific parameters. This test model will also be augmented with the following O-RAN specific parameters:

Includes "stock" eAxC values as configured via M-Plane:

* + DU\_Port\_ID: two bits, nominal value 00b
  + BandSector: nominal 6 bits, nominal value 000000b
  + CC\_ID: nominal 4 bits, nominal value 0000b (most tests invoke only one component carrier)
  + RU\_port\_ID: 4 bits, nominal values 0000b through 0011b or to whatever max value needed for a specific test
* If the radio manufacturer declares support for multi-carrier a different eAxC will be assigned for each carrier. Note that most tests described in ETSI TS 138.141-1[NR] and TS 136.141 [LTE] require testing at the bottom, middle and top of the supported bands of the radio. This specification relaxes that requirement because the purpose is to test the fronthaul compliance and not the radio performance.
* **Compression**: Static 16-bit fixed point IQ bitwidth in both DL and UL
* **Beamforming**: no beamforming (beamId = 0x0000), assumed to mean boresight radiation (normal to the antenna surface) at some undetermined beamwidth (recall that beam weight magnitudes must be equal to unity)
* **Transport**: L2 Ethernet, eCPRI with no fragmentation and no QOS
* **Delay Parameters:** The test will be executed with a direct fiber connection to the O-RU and the network delay is considered negligible for the purpose of delay management. Therefore, T12\_min = T12\_max = 0 and T34\_min = T34\_max = 0.

The radio will report its supported values for:

* T2a\_min/max\_up
* Ta3\_min/max\_up
* T2a\_min/max\_cp\_ul
* Tcp\_adv\_dl

These parameters will be used to calculate the delay windows needed for the delay management tests below. Note that T1a\_min\_up = T2a\_min\_up and T1a\_max\_up = T2a\_max\_up due to the fixed, zero network delay. Similarly, Ta4\_min\_up = Ta3\_min\_up and Ta4\_max\_up = Ta3\_max\_up. Similarly, T1a\_min\_cp\_ul = T2a\_min\_cp\_ul and T1a\_max\_cp\_ul = T2a\_max\_cp\_ul.

* Uplink tests will start with the basic 3GPP test signal for Fixed Reference Channels for receiver sensitivity and in-channel selectivity as described in ETSI TS 138.141-1[NR] and TS 136.141 [LTE]. All O-RAN specific parameters will be the same as described above for downlink testing. As with downlink testing subsequent tests will build on this basic waveform modifying parameters as needed to exercise O-RAN specific features.
* Uplink tests will be conducted using power levels at least 30dB higher than the power levels used to test 3GPP Receiver sensitivity described in ETSI TS 138.141-1 Table 7.2.5-1[NR] and TS 136.141 [LTE]. This is to ensure a clear signal is received by the O-RU so it can be accurately decoded and demodulated to ensure the correct data was received by the O-DU as was sent by the signal source. Again, the purpose of these tests is to ensure correct operation of the O-RAN fronthaul not to test receiver sensitivity.

#### ![]({{site.baseurl}}/assets/images/063eb512c6e3.png) For scenario #2 (Non-conducted OTA FDD tests for FR1 radios)

* For downlink tests for type 1-H radios that elect to be tested over the air (OTA) rather than conducted, the test configuration is described in TS 138.141-2 E.1.2 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-1. The RF analyzer test equipment is connected to the Test Antenna and is located outside of the OTA chamber.
* For downlink test for 1-O or 2-O radios (radios with no physical antenna or TAB connectors and consequently only over the air - OTA - measurements are possible) the test configuration is described in TS 138.141-2

E.1.2 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-2. The RF analyzer test equipment is connected to the Test Antenna and is located outside of the OTA chamber.

* For uplink tests for type 1-H radios that elect to be tested over the air (OTA) rather than conducted, the test configuration is described in TS 138.141-2 E.2.1 where the Test Antenna will be placed inside an OTA

chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-1. The RF generator test equipment is connected to the Test Antenna and is located outside of the OTA chamber.

* For uplink test for 1-O or 2-O radios (radios with no physical antenna or TAB connectors and consequently only over the air (OTA) measurements are possible) the test configuration is described in TS 138.141-2 E.2.1 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-2. The RF generator test equipment is connected to the Test Antenna and is located outside of the OTA chamber.
* For downlink tests for LTE radios that elect to be tested over the air (OTA), the test configuration is described in TS 138.141-2 E.1.2 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-1. The RF analyzer test equipment is connected to the Test Antenna and is located out of the OTA chamber.
* For uplink tests for LTE radios that elect to be tested over the air (OTA), the test configuration is described in TS 138.141-2 E.2.1 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-1. The RF generator test equipment is connected to the Test Antenna and is located out of the OTA chamber.
* Note that the chamber shown in TS 138.141-2 E1.2. and E.2.1. are generic and consequently any OTA chamber could be used, i.e. far field, CATR, near field, reverberation, etc.
* Likewise, depending on the beamforming measurement technology the positioner in TS 138.141-2 E.1.2 and

E.2.1. may or may not be needed.

* Furthermore, depending on the beamforming method to be measured more than one test antenna with more than one RF analyzer and/or generator ports may also be needed.
* The basic downlink test will start with the Test model described in NR-FR1-TM1.1 and E-TM1.1 in TS 138.141-1 and 36.141 for NR FR1 and LTE radios respectively. Subsequent tests will adapt this model to test additional features of the O-RAN interface (e.g. Modifying the payload data, blanking some symbols, etc.). Note this test model describes the IQ data contained in the O-RAN packets not the O-RAN specific parameters. This test model will also be augmented with the following O-RAN specific parameters:

Includes "stock" eAxC values as configured via M-Plane:

* + DU\_Port\_ID: two bits, nominal value 00b
  + BandSector: nominal 6 bits, nominal value 000000b
  + CC\_ID: nominal 4 bits, nominal value 0000b (most tests invoke only one component carrier)
  + RU\_port\_ID: 4 bits, nominal values 0000b through 0011b or to whatever max value needed for a specific test
* If the radio manufacturer declares support for multi-carrier a different eAxC will be assigned for each carrier. Note that most tests described in ETSI TS 138.141-2[NR] and TS 136.141 [LTE] require testing at the bottom, middle and top of the supported bands of the radio. This specification relaxes that requirement because the purpose is to test the fronthaul compliance and not the radio performance.
* **Compression**: Static 16-bit fixed point IQ bitwidth in both DL and UL
* **Beamforming**: no beamforming (beamId = 0x0000), assumed to mean boresight radiation (normal to the antenna surface) at some undetermined beamwidth (recall that beam weight magnitudes must be equal to unity)
* **Transport**: L2 Ethernet, eCPRI with no fragmentation and no QOS
* **Delay Parameters:** The test will be executed with a direct fiber connection to the O-RU and the network delay is considered negligible for the purpose of delay management. Therefore, T12\_min = T12\_max = 0 and T34\_min = T34\_max = 0.

The radio will report its supported values for:

* T2a\_min/max\_up
* Ta3\_min/max\_up
* T2a\_min/max\_cp\_ul
* Tcp\_adv\_dl

These parameters will be used to calculate the delay windows needed for the delay management tests below. Note that T1a\_min\_up = T2a\_min\_up and T1a\_max\_up = T2a\_max\_up due to the fixed, zero network delay. Similarly, Ta4\_min\_up = Ta3\_min\_up and Ta4\_max\_up = Ta3\_max\_up. Similarly, T1a\_min\_cp\_ul = T2a\_min\_cp\_ul and T1a\_max\_cp\_ul = T2a\_max\_cp\_ul.

* Uplink tests will start with the basic 3GPP test signal for Fixed Reference Channels for receiver sensitivity and in-channel selectivity as described in ETSI TS 138.141-2[NR] and TS 136.141 [LTE]. All O-RAN specific parameters will be the same as described above for downlink testing. As with downlink testing subsequent tests will build on this basic waveform modifying parameters as needed to exercise O-RAN specific features.
* Uplink tests will be radiated using power levels at least 30dB higher than the reference sensitivity power levels used to test 3GPP Receiver sensitivity described in ETSI TS 138.141-2 Table 7.3.5.2-1, Table 7.3.5.2-2 and Table 7.3.5.2-3[NR FR1], Table 7.3.5.3-1 [NR FR2] and TS 136.141 Table 7.2-1 to Table 7.2-12 [LTE]. This

is to ensure a clear signal is received by the O-RU so it can be accurately decoded and demodulated to ensure the correct data was received by the O-DU as was sent by the signal source. Again, the purpose of these tests is to ensure correct operation of the O-RAN fronthaul not to test receiver sensitivity.

#### ![]({{site.baseurl}}/assets/images/264badbff36d.png) For scenario #3 (Conducted TDD Tests for FR1 Radios)

All provisions of clause 3.2.1.1.1 will apply to FR1 TDD tests however the default test waveform will be a TDD waveform as described in ETSI TS 138.141-1. It will be NR-FR1-TM1.1 (TDD) and G-FR1-A1-5 (SCS30k\_51RB) in the uplink. If the O-RU does not support the UL bandwidth of 51 RB, another FRC test model can be selected. The TDD test model is derived based on the uplink/downlink configurations described in ETSI TS 138.141-1 Table

4.9.2.2.1 using information element *TDD-UL-DL-ConfigCommon* as defined in TS 138.331 for 30 kHz SCS as shown below:

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Field name** |  |
| referenceSubcarrierSpacing (kHz) | 30 |
| Periodicity (ms) for dl-UL-TransmissionPeriodicity | 5 |
| nrofDownlinkSlots | 7 |
| nrofDownlinkSymbols | 6 |
| nrofUplinkSlots | 2 |
| nrofUplinkSymbols | 4 |

</div>

###### Table 3.2.1-1 Configuration Parameters for TDD FR1 Conducted Tests

This waveform is shown below:

![]({{site.baseurl}}/assets/images/a7ac60a1b21c.jpg)

###### Figure 3.2.1.1-1 NR-FR1-TM1.1 TDD Test Signal

As an alternative to the default test waveform shown in Figure 3.2.1.1-1, it is optional to flexibly use other test waveforms with any TDD configurations allowed by the information element *TDD-UL-DL-ConfigCommon* as defined in TS 138.331 for 30 kHz SCS. The tester should use the 3GPP prescribed waveform as the recommended waveform but has the option to use any TDD configuration in the IOT profiles defined in [25] with the above constraints.

This test frame consists of a PDCCH in the first two symbols of every downlink slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data. This configuration corresponds to stock data section A (Section 3.2.1.1.5 below) in all symbols that do not contain PDCCH channels. Individual tests may call out other stock data sections as needed. If the radio does not support the numerology described in section 3.2.3.1 the stock test frames can be adapted for smaller numbers of PRBs and should still be used. Symbols number two and eleven contain DMRS signals which are not used to test O-RAN Front Haul capabilities but should be sent to help test equipment synchronize. In the standard test frame, all PDSCH data is set to zeros if not otherwise described in the testcase and PUSCH is set to PN23 sequences. For all tests in this document (except the most basic resource allocation test) the PN23 sequence will be used in both uplink and downlink to allow the test to determine whether test data was put in the correct PRBs and whether the test data was accurately transmitted (or received) by the O-RU under test.

* For tests for type 1-C and 1-H the test configuration described in TS 138.141-1 for TDD testing will be used. Only a single antenna port will be used unless the test explicitly requires more than one port and the radio supports more than one port. RF test equipment will be connected at the point described in TS 138.141-1. Note that an antenna port is an electrical conducting port that is connected to an array element.
* The test will start with the Test model described above. Subsequent tests will adapt this model to test additional features of the O-RAN interface (e.g. Modifying the payload data, blanking some symbols, etc.). Note this test model describes the IQ data contained in the O-RAN packets not the O-RAN specific parameters. This test model will also be augmented with the following O-RAN specific parameters:

Includes "stock" eAxC values as configured via M-Plane:

* + DU\_Port\_ID: two bits, nominal value 00b
  + BandSector: nominal 6 bits, nominal value 000000b
  + CC\_ID: nominal 4 bits, nominal value 0000b (most tests invoke only one component carrier)
  + RU\_port\_ID: 4 bits, nominal values 0000b through 0011b or to whatever max value needed for a specific test
* If the radio manufacturer declares support for multi-carrier a different eAxC will be assigned for each carrier. Note that most tests described in ETSI TS 138.141-1[NR] and TS 136.141 [LTE] require testing at the bottom, middle and top of the supported bands of the radio. This specification relaxes that requirement because the purpose is to test the fronthaul compliance and not the radio performance.
* **Compression**: Static 16-bit fixed point IQ bitwidth in both DL and UL
* **Beamforming**: no beamforming (beamId = 0x0000), assumed to mean boresight radiation (normal to the antenna surface) at some undetermined beamwidth (recall that beam weight magnitudes must be equal to unity)
* **Transport**: L2 Ethernet, eCPRI with no fragmentation and no QOS
* **Delay Parameters:** The test will be executed with a direct fiber connection to the O-RU and the network delay is considered negligible for the purpose of delay management. Therefore, T12\_min = T12\_max = 0 and T34\_min = T34\_max = 0.

The radio will report its supported values for:

* T2a\_min/max\_up
* Ta3\_min/max\_up
* T2a\_min/max\_cp\_ul
* Tcp\_adv\_dl

These parameters will be used to calculate the delay windows needed for the delay management tests below. Note that T1a\_min\_up = T2a\_min\_up and T1a\_max\_up = T2a\_max\_up due to the fixed, zero network delay. Similarly, Ta4\_min\_up = Ta3\_min\_up and Ta4\_max\_up = Ta3\_max\_up. Similarly, T1a\_min\_cp\_ul = T2a\_min\_cp\_ul and T1a\_max\_cp\_ul = T2a\_max\_cp\_ul.

* Uplink tests will start with the basic 3GPP test signal for Fixed Reference Channels for receiver sensitivity and in- channel selectivity as described in ETSI TS 138.141-1[NR] and TS 136.141 [LTE] and described above. All O- RAN specific parameters will be the same as described above for downlink testing. As with downlink testing subsequent tests will build on this basic waveform modifying parameters as needed to exercise O-RAN specific features.
* Uplink tests will be conducted using power levels at least 30dB higher than the power levels used to test 3GPP Receiver sensitivity described in ETSI TS 138.141-1 Table 7.2.5-1[NR] and TS 136.141 [LTE]. This is to ensure a clear signal is received by the O-RU so it can be accurately decoded and demodulated to ensure the correct data was received by the O-DU as was sent by the signal source. Again, the purpose of these tests is to ensure correct operation of the O-RAN fronthaul not to test receiver sensitivity.

#### ![]({{site.baseurl}}/assets/images/bbadf448f90c.png) For Scenario #4 (Non-conducted OTA TDD Tests for FR1 and FR2 Radios)

All provisions of clause 3.2.1.1.2 with respect to OTA methodology will apply to this scenario, except applied to TDD FR1 (1-H, 1-O) and FR2 (2-O) radios. The default test waveform for FR1 will be a TDD waveform as described in Sec. 3.2.1.1.3. The default test waveform for FR2 will be a 100 MHz bandwidth TDD waveform based on NR-FR2- TM1.1 for the downlink, and G-FR2-A1-3 for 120 kHz subcarrier spacing with 66 RBs in the uplink. The TDD test model is derived based on the uplink/downlink configurations described in ETSI TS 138.141-2 Table 4.9.2.2-1 using information element *TDD-UL-DL-ConfigCommon* as defined in TS 138.331 as shown below:

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Field name** | **Value** |
| referenceSubcarrierSpacing (kHz) | 120 |
| Periodicity (ms) for dl-UL- TransmissionPeriodicity | 1.25 |
| nrofDownlinkSlots | 7 |
| nrofDownlinkSymbols | 6 |
| nrofUplinkSlots | 2 |
| nrofUplinkSymbols | 4 |

</div>

###### Table 3.2.1-2 Configuration Parameters for FR2 Radio Testing

As an alternative to the default test waveform shown in Figure 3.2.1.1-2, it is optional to flexibly use other test waveforms with any TDD configurations allowed by the information element *TDD-UL-DL-ConfigCommon* as defined in TS 138.331. The tester should use the 3GPP prescribed waveform as the recommended waveform but has the option to use any TDD configuration in the IOT profiles defined in [25] with the above constraints.

This test frame consists of a PDCCH in the first two symbols of every downlink slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data. This configuration corresponds to stock data section A (Section 3.2.1.1.5 below) in all symbols that do not contain PDCCH channels. Individual tests may call out other stock data sections as needed. If the radio does not support the numerology described the stock test frames can be adapted for smaller numbers of PRBs and should still be used. Symbols number two and eleven contain DMRS signals which are not used to test O-RAN Front Haul capabilities but should be sent to help test equipment synchronize. In the standard test frame, all PDSCH data is set to zeros if not otherwise mentioned in the testcase and PUSCH is set to PN23 sequences. For all tests in this document (except the most basic resource allocation test) the PN23 sequence will be used in both uplink and downlink to allow the test to determine whether test data was put in the correct PRBs and whether the test data was accurately transmitted (or received) by the O-RU under test.

* + For downlink tests for type 1-H radios that elect to be tested over the air (OTA) rather than conducted, the test configuration is described in TS 138.141-2 E.1.2 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-1. The RF analyzer test equipment is connected to the Test Antenna and is located outside of the OTA chamber.
  + For downlink test for 1-O or 2-O radios (radios with no physical antenna or TAB connectors and consequently only over the air - OTA - measurements are possible) the test configuration is described in TS 138.141-2

E.1.2 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-2. The RF analyzer test equipment is connected to the Test Antenna and is located outside of the OTA chamber.

* + For uplink tests for type 1-H radios that elect to be tested over the air (OTA) rather than conducted, the test configuration is described in TS 138.141-2 E.2.1 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-1. The RF generator test equipment is connected to the Test Antenna and is located outside of the OTA chamber.
  + For uplink test for 1-O or 2-O radios (radios with no physical antenna or TAB connectors and consequently only over the air (OTA) measurements are possible) the test configuration is described in TS 138.141-2 E.2.1 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-2. The RF generator test equipment is connected to the Test Antenna and is located outside of the OTA chamber.
  + For downlink tests for LTE radios that elect to be tested over the air (OTA), the test configuration is described in TS 138.141-2 E.1.2 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-1. The RF analyzer test equipment is connected to the Test Antenna and is located out of the OTA chamber.
  + For uplink tests for LTE radios that elect to be tested over the air (OTA), the test configuration is described in TS 138.141-2 E.2.1 where the Test Antenna will be placed inside an OTA chamber and measurements are referenced to the radiated characteristics defined over the air (OTA) at the Radiated Interface Boundary (RIB) defined in TS 138.141-2 4.2-1. The RF generator test equipment is connected to the Test Antenna and is located out of the OTA chamber.
  + Note that the chamber shown in TS 138.141-2 E1.2. and E.2.1. are generic and consequently any OTA chamber could be used, i.e. far field, CATR, near field, reverberation, etc.
  + Likewise, depending on the beamforming measurement technology the positioner in TS 138.141-2 E.1.2 and

E.2.1. may or may not be needed.

* + Furthermore, depending on the beamforming method to be measured more than one test antenna with more than one RF analyzer and/or generator may also be needed.
  + The basic downlink test will start with the Test model described in NR-FR1-TM1.1 and E-TM1.1 in TS 138.141-1 and 36.141 for NR FR1 and LTE radios respectively, and NR-FR2-TM1.1 in TS 138.141-2 for FR2 radios. Subsequent tests will adapt this model to test additional features of the O-RAN interface (e.g. Modifying the payload data, blanking some symbols, etc.). Note this test model describes the IQ data contained in the O-RAN packets not the O-RAN specific parameters. This test model will also be augmented with the following O-RAN specific parameters:

Includes "stock" eAxC values as configured via M-Plane:

* + - DU\_Port\_ID: two bits, nominal value 00b
    - BandSector: nominal 6 bits, nominal value 000000b
    - CC\_ID: nominal 4 bits, nominal value 0000b (most tests invoke only one component carrier)
    - RU\_port\_ID: 4 bits, nominal values 0000b through 0011b or to whatever max value needed for a specific test
  + If the radio manufacturer declares support for multi-carrier a different eAxC will be assigned for each carrier. Note that most tests described in ETSI TS 138.141-2[NR] and TS 136.141 [LTE] require testing at the bottom, middle and top of the supported bands of the radio. This specification relaxes that requirement because the purpose is to test the fronthaul compliance and not the radio performance.
  + **Compression**: Static 16-bit fixed point IQ bitwidth in both DL and UL
  + **Beamforming**: no beamforming (beamId = 0x0000), assumed to mean boresight radiation (normal to the antenna surface) at some undetermined beamwidth (recall that beam weight magnitudes must be equal to unity)
  + **Transport**: L2 Ethernet, eCPRI with no fragmentation and no QOS
  + **Delay Parameters:** The test will be executed with a direct fiber connection to the O-RU and the network delay is considered negligible for the purpose of delay management. Therefore, T12\_min = T12\_max = 0 and T34\_min = T34\_max = 0.

The radio will report its supported values for:

* T2a\_min/max\_up
* Ta3\_min/max\_up
* T2a\_min/max\_cp\_ul
* Tcp\_adv\_dl

These parameters will be used to calculate the delay windows needed for the delay management tests below. Note that T1a\_min\_up = T2a\_min\_up and T1a\_max\_up = T2a\_max\_up due to the fixed, zero network delay. Similarly, Ta4\_min\_up = Ta3\_min\_up and Ta4\_max\_up = Ta3\_max\_up. Similarly, T1a\_min\_cp\_ul = T2a\_min\_cp\_ul and T1a\_max\_cp\_ul = T2a\_max\_cp\_ul.

* + Uplink tests will start with the basic 3GPP test signal for Fixed Reference Channels for receiver sensitivity and in-channel selectivity as described in ETSI TS 138.141-2[NR] and TS 136.141 [LTE]. All O-RAN specific parameters will be the same as described above for downlink testing. As with downlink testing subsequent tests will build on this basic waveform modifying parameters as needed to exercise O-RAN specific features.
  + Uplink tests will be radiated using power levels at least 30dB higher than the reference sensitivity power levels used to test 3GPP Receiver sensitivity described in ETSI TS 138.141-2 Table 7.3.5.2-1, Table 7.3.5.2-2 and Table 7.3.5.2-3[NR FR1], Table 7.3.5.3-1 [NR FR2] and TS 136.141 Table 7.2-1 to Table 7.2-12 [LTE]. This

is to ensure a clear signal is received by the O-RU so it can be accurately decoded and demodulated to ensure the correct data was received by the O-DU as was sent by the signal source. Again, the purpose of these tests is to ensure correct operation of the O-RAN fronthaul not to test receiver sensitivity.

#### ![]({{site.baseurl}}/assets/images/9f9a4e84f103.png) Test Configuration for the UC-Plane

The TER shown in Figure 2.1-1 provides M-Plane and S-Plane commands and sequences to correctly set up the O-RU for testing using the fronthaul connection - meaning a criterion and prerequisite for executing all UC-Plane tests is proper operation of the O-RU's synchronization and M-Plane capabilities. The TER provides the specific C-Plane and U-Plane data flows and collects data from the radiated energy from the O-RU and evaluates based on the collected RF energy whether the O-RU correctly received and interpreted the fronthaul DL data flow. For many tests a single RF detector is satisfactory to detect the radiated signal but for beamforming tests an RF pattern must be measured to validate the correct beam is being generated according to the C-Plane commands and U-Plane data flowing across the fronthaul interface.

In addition, the TER generates RF energy using the signal generator and feeds it to the O-RU's antennas (or antenna connectors) which is expected to be used by the O-RU, in conjunction with the C-Plane UL commands sent by the TER over the fronthaul connection, to generate UL data flows on the fronthaul connection which are received and evaluated by the TER. For almost all tests a single RF emitter is satisfactory to generate the radiated signal, even beamforming tests wherein the received power level will validate that the beam main lobe was correctly specified across the fronthaul interface, except for the case of uplink channel-information-based beamforming and DMRS based beamforming tests where multiple RF emitters are needed to emulate multiple uplink spatial streams.

3GPP-specified tests will be used here to simplify the testing, because such tests will need to be supported by the O-RU anyway for 3GPP conformance testing. The specific test cases identify where this is possible and where changes must be made to adequately test O-RAN features.

Note that when testing the O-RU for fronthaul interface conformance, much more than the fronthaul interface is being tested, indeed the entire O-RU is under test, including digital and analog processing having nothing to do with the fronthaul interface. Therefore a "passed" test can be interpreted with some confidence as indicating a properly operating fronthaul interface, but a "failed" test may indicate a problem with the fronthaul interface or with some other operation within the O-RU therefore failed tests may require some troubleshooting. While ETSI TS 138.141-1, TS 138.141-2 [NR] and TS 136.141 [LTE] describes the basic waveform used in these tests it does not describe how the various channels should be put into O-RAN sections. The ETSI TS 138.141-1 NR-FR1-TM1.1 [NR FR1], TS 138.141- 2 NR-FR2-TM1.1 [NR FR2], and TSTS 136.141 E-TM1.1 [LTE] signals are tightly packed with data. All tests will divide that data into "stock" data sections using the sections described below. To expedite the definition and creation of the tests, a set of standard test environments and patterns is defined in this clause. This includes a "stock" arrangement of data sections in DL (same is used for UL) which can be used regardless of the specific bandwidth and SCS used in the test. Specifically, there are "stock" 1-symbol, 2-symbol, and 3-symbol data section sets that shall be cited in test definitions (numbered "A" through "F") that will support various test cases. The test cases are expected to specify the data section definition of a test slot and all slots are expected to follow the same data section definition unless a test specifically states otherwise. In many cases only some symbols within a slot will be subject to testing; the remaining symbols are expected to remain undefined for the test and may have data sections defined according to the normal operation of the O-DU (e.g. set to carry synch or reference signals consistent with LTE or NR). In cases where a specific type of data section cannot be supported by the DUT, then that data section is omitted in the symbol(s) and the corresponding U-Plane data shall be set to zero in DL (and arranged to have no RF power in UL). Figure 3.2.1.1-2 shows the "stock" data section definition.

**"stock" data section definitions A- F:**

**Arrows mark end- of- symbol for various SCS and bandwidths**

![]({{site.baseurl}}/assets/images/0fd5540329dd.png)**0 0**

**0 0 0**

**0 0 0**

**3 4 5**

**0 0 0**

**0 0 0**

**0 1 2**

**PRBs (max=273) 0 0**

**6 7**

**A: 1 section ........... B: 2 sections ......... C: 2 sections w/ gap\*\* D: 6 sections..........**

**\* \***

**\* \***

**E: 2 symbols**

**2 sections ..........**

**\* \* \***

**\* \* \***

**F: 3 symbols \* \***

**complex ............**

**0 0 0 0**

**1 1 1 1**

**0 0 0**

**1 1 1**

**3 4 5**

**0 0 0**

**1 1 1**

**0 1 2**

**0 0**

**0 0**

**8 9**

**6 7 8 9**

**\* \* \* \***

**\* \* \***

**\* \* \***

**\* \***

**0 0 0 0**

**2 2 2 2**

**0 0 0**

**2 2 2**

**3 4 5**

**0 0 0**

**2 2 2**

**0 1 2**

**6 7 8 9**

**0 0 0 0**

**3 3 3 3**

**0 0 0**

**3 3 3**

**3 4 5**

**0 0 0**

**3 3 3**

**0 1 2**

**6 7 8 9**

**0 0 0 0**

**4 4 4 4**

**0 0 0**

**4 4 4**

**3 4 5**

**0 0 0**

**4 4 4**

**0 1 2**

**6 7 8 9**

**0 0 0 0**

**5 5 5 5**

**0 0 0**

**5 5 5**

**3 4 5**

**0 0 0**

**5 5 5**

**0 1 2**

**6 7 8 9**

**0 0 0 0**

**6 6 6 6**

**0 0 0**

**6 6 6**

**3 4 5**

**0 0 0**

**6 6 6**

**0 1 2**

**6 7 8 9**

**0 0 0 0**

**7 7 7 7**

**0 0 0**

**7 7 7**

**3 4 5**

**0 0 0**

**7 7 7**

**0 1 2**

**6 7 8 9**

**0 0 0 0**

**8 8 8 8**

**0 0 0**

**8 8 8**

**3 4 5**

**0 0 0**

**8 8 8**

**0 1 2**

**6 7 8 9**

**0 0 0 0**

**9 9 9 9**

**0 0 0**

**9 9 9**

**3 4 5**

**0 0 0**

**9 9 9**

**0 1 2**

**6 7 8 9**

**1 1 1 1 1**

![]({{site.baseurl}}/assets/images/09c20ccc7a17.png)**0 0 0 0 3**

![]({{site.baseurl}}/assets/images/a9227a7361a9.png)![]({{site.baseurl}}/assets/images/7af2f24757d2.png)![]({{site.baseurl}}/assets/images/d391425732db.png)

...

**1**

**6**

**9**

**111**

**666**

**678**

**1 11**

**6 66**

**3 45**

**1 1 1**

**6 6 6**

**0 1 2**

**222**

**111**

**678**

**222**

**111**

**345**

**2 2 2**

**1 1 1**

**0 1 2**

**2 2 2 2 22**

**1 6 6 7 77**

**9 8 9 0 12**

...

**1 11**

**3 33**

**6 78**

**111**

**333**

**345**

**1 1 1**

**3 3 3**

**0 1 2**

**1 1 1**

**0 0 0**

**3 4 5**

**1 1 1**

**0 0 0**

**0 1 2**

...

...

**6 7 8 9 9**

**\* marks PRBs with reMask NOT all ones**

**\*\* white- colored PRBs represent empty PRBs**

**A: 1 symbol 1 section only : simplest case**

**B: 1 symbol 2 sections : slightly more complex**

**C: 1 symbol 2 sections w/ gap : tests ability to handle data gaps**

**D: 1 symbol many sections : tests single- PRB section, rb bit, use of non- all- ones reMask, many data sections**

**E: 2 symbol 2 sections : tests multi- symbol section, symInc bit**

**F: 3 symbols many sections : tests data gaps, reMask, multi- symbol sections**

###### Figure 3.2.1.1-2 Stock Data Section Definition for both DL and UL

There is also "stock" U-Plane data that is PN23 data, representing user data prior to modulation, as specified within ETSI TS 138.14138.141-1[CCITT Recommendation O.151 (10/92): [https://www.itu.int/rec/T-REC-O.151-199210-](https://www.itu.int/rec/T-REC-O.151-199210-I/en) [I/en](https://www.itu.int/rec/T-REC-O.151-199210-I/en)] which is assumed to start at a frame boundary and be identical in all frames in both DL and UL, unless a specific test states differently. The PN sequence is expected to be running for the duration of the frame for whatever is the bandwidth and SCS (this is different from how the data sections are handled, wherein the data sections are truncated based on the number of PRBs per symbol). However, in many cases only some symbols within a frame will be actually subject to testing (as defined by the specific tests) so will contain the test PN sequence data; the remaining symbols are expected to remain undefined for the test and may contain data according to the normal operation of the O-DU (e.g. set to carry synch or reference signals consistent with LTE or NR). Note that the PN sequence initial value is provided by a seed which may be included as a Test Command parameter. If the parameter is omitted the PN sequence generator will use a "seed" value of all ones.

For all tests, the test definition shall define the specific slots and symbols subject to test (carrying the "stock" C-Plane data section definition and the "stock" U-Plane data) with the remaining slots and symbols carrying normal 3GPP synch and control data and either allocated user data according to 3GPP or left empty (i.e. no user data allocated). All slots and symbols subject to test are identical in each frame, so tests do not have to wait for a specific frame number and are not expected to reset or otherwise perturb the normal frame number sequence. This is intended to allow the test to disrupt normal O-DU and O-RU operation as little as possible. If there is a specific need to validate the construction of a specific frame or slot of data, a test may elect to zero the test data and leave undefined the data sections for all except one slot or frame of data; where this is necessary it will be described in the specific test definition, but this is expected to be an exceptional case.

#### ![]({{site.baseurl}}/assets/images/1a874d9f438e.png) Generic Steps for Test Execution, O-RU TEST SCENARIO

The following are the generic test steps used when testing the O-RU, although specific tests may deviate from this general procedure:

1. Configure the Test Equipment, O-RU (TER) for test execution, which may include defining the specific test to execute. This may also include using a scripting language for describing the test.
2. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
3. Send appropriate C-Plane and U-Plane DL data flows and collect the O-RU radiated energy (or collect from antenna connectors) using RF detection equipment.
4. Evaluate the RF energy pattern from the O-RU to determine if the O-RU correctly received and interpreted the fronthaul C-Plane and U-Plane data flows. In some cases, it also includes decoding and demodulating the RF signal to ensure all UC-Plane messages were interpreted correctly.
5. Send appropriate C-Plane messages to define the desired UL U-Plane flow, at the same time cause the RF signal generator to radiate (or feed into antenna connectors) the appropriate RF energy pattern for the test.

This also means meeting the appropriate timing windows to allow the O-RU to decode and process the C- Plane messages before the signal generator starts sending RF.

1. Collect the O-RU UL data flows on the fronthaul interface and evaluate for correctness; this will generally be U-Plane data only but in limited cases (LAA) may include UL C-Plane messages too.
2. Since FDD uplink and TDD tests require tight timing constraints between the components of the TER it is recommended that CUSM emulator signal the RF test equipment when C-Plane signalling has started for a frame. How this signal is used by the RF test equipment to synchronize transmission and reception is implementation dependant.

### Minimum Capabilities of the TER for U-Plane and C-Plane Tests

Since many features of the O-RAN protocol rely on the O-DU instructing the O-RU to put data in specific resource blocks using a specific compression method it is imperative that the test equipment support features that allow comparing data on the fronthaul side with data on the RF side of the radio.

### ![]({{site.baseurl}}/assets/images/b3c8c2161b21.png) Signal Analyzer

* has the capability of decoding and demodulating an RF signal either received over the air or on a conducted interface. This data must be made available for comparison with data sent on the fronthaul interface.
* is able to determine the Phase and amplitude of any signal for beamforming tests.
* Obviously must support the frequency range of the radio being tested.

### ![]({{site.baseurl}}/assets/images/efaaef71ca2b.png) Signal Generator

* provides software capable of building a correct 5G or LTE waveform.
* Should have the ability to automatically build 3GPP compliant test waveforms and should provide a mechanism for editing the parameters of that waveform.
* is able to be synchronized with the O-DU emulator to ensure proper timing of uplink C-Plane and U-Plane messages
* For beamforming test cases:
  + is able to inject beamformed RF signals according to the test requirements.
  + needs to be able to emulate a static channel according to the test requirements.

### ![]({{site.baseurl}}/assets/images/2eb0134a330e.png) CUSM-Plane Emulator (CUSM-E)

* is able to extract IQ data from uplink U-Plane messages and demodulate and decode the data to ensure it is the same as what was commanded in the uplink C-Plane messages.
* has the ability to synchronize with the RF signal source.
* Should have the ability to perform as a PTP Master or subordinate depending on the synchronization configuration the radio supports.
* has the ability to accept frequency domain IQ and encapsulate it according to user input on the correct sections.
* For DMRS BF test cases:
  + is capable of measuring EVM and BER/BLER measurements of the received signal from DUT (Uplink direction).
  + is able to operate with and without Channel Estimation and Equalization over the received signal from DUT (Uplink direction).

### FR1 FDD Conducted-Signal Tests

### ![]({{site.baseurl}}/assets/images/ea1350b1807e.png) UC-Plane O-RU Scenario Class NR testing Generic (NRG)

Note that all downlink tests in this clause use a 3GPP test wave form with 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS 138.141 -1 NR-FR1-TM1.1 and clause 3.2.1.1.5 of this document. There are several variations on this test signal depending on the capabilities of the radio. If the radio does not support the

numerology used in the example tests as reported in the M-plane it will be up to the test developer to modify their tests to adapt to the radio. This can usually be accomplished by using stock test patterns described above. The test is expected to follow the same spirit as the tests in this document but things like symbol numbers, number of PRBs, etc. may have to be changed.

All uplink tests in this clause use a 3GPP test waveform described in 38.141-1 clause A1, in particular G-FR1-A1-5 (30 kHz subcarrier spacing, QPSK, 100 MHz BW). As with downlink tests if the radio does not support this signal it is up to the test developer to modify the parameters of the test without changing the spirit of the test.

#### ![]({{site.baseurl}}/assets/images/241a7980ad74.png) UC-Plane O-RU Scenario Class Base 3GPP DL

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can meet the most basic downlink requirements for O-RAN fronthaul. Subsequent tests will build on this to exercise additional capabilities of the Fronthaul.

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard NR-FR1-TM1.1 signal. This signal is shown below in Figure 3.2.3.1-1.

![]({{site.baseurl}}/assets/images/f19bab66eea0.png)

###### Figure 3.2.3.1-1 NR-FR1-TM1.1 FDD Test Signal

This test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data. This configuration corresponds to stock data section A (Section 3.2.1.1.5 above) in all symbols that do not contain PDCCH channels. If the radio does not support the numerology described in clause 3.2.3.1 the stock test frames can be adapted for smaller numbers of PRBs and should still be used.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame using the default parameters in clause 3.2.1.1.5 of this document (or a similar 3GPP waveform) except only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). As per TM-FR1-TM1.1 all user data in this test will be zeros.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer. It must also support the default parameters defined in clause 3.2.1.1.1 above.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.

Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

* 1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
  2. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and all zero data, the test passes.

#### ![]({{site.baseurl}}/assets/images/d0ce9fa49af5.png) UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource allocation

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink. This test is applicable for Category A and Category B radios (No precoding is required). The test will be conducted therefore there will be no channel distortion or interference. It is mandatory the radio pass this test to be considered O-RAN conformant.

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard NR-FR1-TM1.1 signal. This signal is shown below in Figure 3.2.3.1-2.

![]({{site.baseurl}}/assets/images/25d798478e7d.png)

###### Figure 3.2.3.1-2 NR-FR1-TM1.1 FDD Test Signal

This test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data. This test requires non-zero data (PN23 Sequence) to populate all allocated resource blocks. This configuration corresponds to stock data section A in all symbols that do not contain PDCCH channels.

###### Test Entrance Criteria

The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in section NR-FR1- TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. The data in the sections must be a PN23 sequence using an initial seed of all ones. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and data, the test passes.

#### ![]({{site.baseurl}}/assets/images/c8a2d745d44c.png) UC Plane O-RU Base Class FDD Test UL

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can meet the most basic uplink requirements for O-RAN fronthaul correctly interpreting C-Plane messages and correctly constructing uplink U-Plane messages from an RF signal. Subsequent tests will build on this to exercise additional capabilities of the Fronthaul.

The test validates that correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (clause 7.2 TS 138.141-1) of the Conducted Receiver Characteristic Test (Clause 7 TS 138.141) and power Levels at least 30 dB above Reference Sensitivity power Level described in TS 138.141-1 Table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance.

![]({{site.baseurl}}/assets/images/112042a43d48.jpg)

###### Figure 3.2.3.1-3 G-FR1-A1-5 Uplink FDD Test Signal

This signal is described by table A.1-1 in ETSI TS 138.141-1 and is referred to as G-FR1-A1-5 with the power increased to up to 30 dB above that described in Table 7.2.5-1. Under those conditions, a 3GPP compliant O-RU should deliver uplink U-Plane information that matches the uplink signal.

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connector or TAB connector, together with the corresponding C-Plane messages on the Fronthaul interface.

The TER will capture the U-Plane messages generated by the DUT and validate whether the payload matches the uplink signal.

It applies to the O-RAN CUS Specification [2]:

* Clause 7.4
* Clause 8.3.2
* Clause 8.3.3

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in ETSI TS 138.141-1 clause G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this clause will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

Leverage from the well-known payload (PN23 sequence) of the uplink signal to compare it with the payload of the signal communicated on the O-RAN interface. The IQ information is extracted from the U-Plane message and demodulated to retrieve payload.

###### a: Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M- Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

###### b: Procedure

* + Load uplink test waveform (G-FR1-A1-5 : SCS30k\_51RB) on the RF signal source
  + Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
  + Load C-Plane message sequence on Test Equipment O-RU (TER)
  + Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
  + Launch test to play the RF uplink frame after the C-Plane messages have been sent honoring timing windows
  + Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
  + Extract IQ information
  + Extract Payload
  + Compare payload binary sequences

###### Test Requirement (expected result)

1. The verdict is "Test pass" if the payload binary sequences match between the uplink test frame sent to the DUT and the received U-Plane data from the DUT
2. If any of the test conditions are not true, the verdict for the whole test is "Fail"

#### ![]({{site.baseurl}}/assets/images/af99528fa751.png) UC-Plane O-RU Scenario Class Extended using RB Parameter 3GPP DL - Resource Allocation

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the rb parameter set, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink. This test is applicable for Category A and Category B radios (No precoding is required). The test will be conducted therefore there will be no channel distortion or interference. It is mandatory the radio pass this test to be considered O-RAN conformant.

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard NR-FR1-TM1.1 signal. This signal is shown below in Figure 3.2.3.1-4.

![]({{site.baseurl}}/assets/images/369bd036ebb4.png)

###### Figure 3.2.3.1-4 NR-FR1-TM1.1 FDD Test Signal

This test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data.

This test requires non-zero data to populate all allocated resource blocks.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause NR-FR1-TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. Every allocated (see below) symbol should be described by sections (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Symbol #3 of each slot should be Stock data section "D" as shown in clause 3.2.1.1.5 above. The control plane for symbol #3 will only include PRBs number 5 through 23. C-Plane messages will have the rb bit set to one for this section. All other DL-SCH symbols and PRBs other than PRBs 5-23 will either not contain data (i.e. left empty) or contain user data as defined in the 3GPP NR-FR-TM1.1 FDD test model. There are two options to conduct the test:

* + 1. A single data section with the rb bit set and a PN23 sequence sent as shown below:

![]({{site.baseurl}}/assets/images/d87fa727c1b2.png)

A new PN23 sequence will be started but every other PRB will contain only the odd parts of the PN23 sequence (as shown in green). The other PRBs (shown in orange) will not contain data and will not be sent to the O-RU. Thus, a single data section will be used, and the corresponding U- Plane message will only contain data for the odd PRBs as shown above. The parts of the PN23 sequence not used (shown marked with an X) will be discarded.

* + 1. Two data sections one containing the odd parts of the PN23 sequence and the other containing the even parts as shown below:

![]({{site.baseurl}}/assets/images/431d9de8dead.png)

A new PN23 sequence will be started but every other PRB in one section will contain only the odd parts of the PN23 sequence (as shown in green). The second data section will contain the even parts of the PN23 sequence. The C-Plane messages for both sections will use the rb bit. The U- Plane messages corresponding to the first data section will contain only the odd parts of the PN23 sequence, the U-Plane message corresponding to the second data section will only contain the even parts. Thus, a continuous PN23 sequence will be sent only in PRBs 5 through 23.

Additional sections should be included to describe the DCI symbols, Reference Signals and also DL-SCH data (if opted to allocated data for the remining symbols) as described in 38.141-1. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should only contain the PN23 sequence data in every other PRB in symbol #3 PRBs 5 to 23 if the test is conducted using option #1.
3. The test frame received by the signal analyzer should only contain the PN23 sequence data in every PRB in symbol #3 PRBs 5 to 23 if the test is conducted using option #2.

#### ![]({{site.baseurl}}/assets/images/cb9d36ce9ca3.png) UC Plane O-RU Scenario Class Extended using RB Parameter 3GPP UL - Resource Allocation

###### Test Description and Applicability

This test is MANDATORY.

This test adds the capability of interpreting the rb parameter to the basic uplink test

Validate correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (clause 7.2 TS 138.141-1) of the Conducted Receiver Characteristic Test (clause 7 TS 138.104) and power Levels at least 30 dB

above Reference Sensitivity power Level described in TS 138.141-1 Table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance.

![]({{site.baseurl}}/assets/images/112042a43d48.jpg)

###### Figure 3.2.3.1-5 SCS15k\_25RB Uplink FDD Test Signal

Using an RF data source, the test equipment will generate a 3GPP test signal as shown in Figure 3.2.3.1-5 above. The radio will demodulate and decode this signal and send frequency domain IQ to the O-DU- Emulator as instructed by the O-DU-emulator using uplink C-Plane messages

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connector or TAB connector, together with the corresponding C-Plane messages on the Fronthaul interface.

The TER will capture the U-Plane messages generated by the DUT and validate if the payload matches with the uplink signal.

It applies to the O-RAN CUS Specification [2]:

* Clause 7.4
* Clause 8.3.2
* Clause 8.3.3

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in ETSI TS 138.141-1 clause G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The radio must report that it supports the rb parameter. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this clause will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

Leverage from the well-known payload (Pseudo Random sequence) of the uplink signal to compare it with the payload of the signal communicated on the O-RAN interface. The IQ information is extracted from the U-Plane message and demodulated to retrieve payload.

###### a: Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

###### b: Procedure

* + Load uplink test waveform (G-FR1-A1-5 : SCS30k\_51RB) on the RF signal source. Note this signal has a PN23 sequence as user data.
  + Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
  + Load C-Plane message sequence on Test Equipment O-RU (TER) - In this test only symbol number 6 will be used and all 51 PRBs will be used. All other symbols will not contain data except required DRMS signals which may be used to synchronize test equipment. There are two options for conducting this test:
    1. A single data section with the rb bit set and a PN23 sequence sent as shown below:

![]({{site.baseurl}}/assets/images/9462bc0bd71f.png)

A new PN23 sequence will be started but every other PRB will contain only the odd parts of the PN23 sequence (as shown in blue). The other PRBs (shown in orange) will not contain data and will not be sent to the O-RU. Thus, a single data section will be used, and the corresponding U-Plane message will only contain data for the odd PRBs as shown above. The parts of the PN23 sequence not used (shown marked with an X) will be discarded.

* + 1. Two data sections one containing the odd parts of the PN23 sequence and the other containing the even parts as shown below:

![]({{site.baseurl}}/assets/images/5f341852097c.png)

A new PN23 sequence will be started but every other PRB in one section will contain only the odd parts of the PN23 sequence (as shown in blue). The second data section will contain the even parts of the PN23 sequence (as shown in orange). The C-Plane messages for both sections will use the rb bit. The U-Plane messages corresponding to the first data section will contain only the odd parts of the PN23 sequence, the U-Plane message corresponding to the second data section will only contain the even parts. Thus, a continuous PN23 sequence will be sent only in PRBs 0 through 51.

* + - * Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
      * Launch test to play the C-Plane messages and trigger the source to play the RF signal on a frame boundary.
      * Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
      * Extract IQ information
      * Extract Payload
      * Compare payload binary sequences

###### Test Requirement (expected result)

1. The verdict is "Test pass" if payload binary sequences match between the uplink test frame sent to the DUT and the received U-Plane data from the DUT. In particular symbol #6 should contain either every other PRB of the PN23 sequence or a continuous PN23 sequence in PRBs 0 through 51 depending which test option is chosen.
2. If any of the test conditions is not true, the verdict for the whole test is "Fail".

#### ![]({{site.baseurl}}/assets/images/ec6945278b1f.png) UC-Plane O-RU Scenario Class Extended using SymInc Parameter 3GPP DL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the SymInc parameter set, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink. This test is applicable for Category A and Category B radios (No precoding is required). The test will be conducted therefore there will be no channel distortion or interference.

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard NR-FR1-TM1.1 signal. This signal is shown below in Figure 3.2.3.1-6.

![]({{site.baseurl}}/assets/images/947624c252fd.png)

###### Figure 3.2.3.1-6 NR-FR1-TM1.1 FDD Test Signal

This test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data.

This test requires to either populate all allocated resource blocks with non-zero data or leave all resource blocks, except for the resource blocks under test, empty or unallocated. In the case of nonzero data allocation, this data will be a PN23 sequence with a seed value of all ones.

Two symbols will be reserved for testing the SymInc parameter as described below.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause NR-FR1-TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The Radio must support the SymInc parameter as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. If

all symbols have user data allocated, every symbol may be described by either multiple or a single type 1 section (DL-SCH and DCI) except symbols #5 and #6 which will be used for the SymInc test. The data in these sections must be a PN23 sequence using an initial seed of all ones. Each symbol should be a new PN23 sequence, that is PRB 0 should contain the data from a new PN23 sequence for each symbol. No Section Type zero messages will be used for this test.

Symbols number 5 and 6 should be stock data sections type "E" as shown above. This stock data section consists of two adjacent symbols each containing two sections. The corresponding C-Plane message will contain 4 section IDs in a single C-Plane message describing symbols #5 and #6. The startSymbolId in the application header will be symbol #5. The third section ID for symbol #6 will have the SymInc bit set informing the O-RU that the third section will begin describing symbol #6.

The corresponding U-Plane messages will be a new PN23 Sequence for each symbol (5 and 6).

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should only contain the same PN23 signals that were sent in the U-Plane.

#### ![]({{site.baseurl}}/assets/images/bf78ebfc9e5b.png) UC Plane O-RU Scenario Class Extended using SymInc Parameter 3GPP UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to add the capability of interpreting the SymInc parameter to the basic uplink test.

Validate correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (Clause 7.2 TS 138.141-1) of the Conducted Receiver Characteristic Test (clause 7 TS 138.141) and power Levels at least 30 dB above Reference Sensitivity power Level described in TS 138.141-1 table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance. C-Plane messages will contain 4 sections with the SymInc bit set specifying that the radio should increment the current symbol.

![]({{site.baseurl}}/assets/images/112042a43d48.jpg)

###### Figure 3.2.3.1-7 G-FR1-A1-5 Uplink FDD Test Signal

Using an RF source, the test equipment will generate a 3GPP test signal as shown in Figure 3.2.3.1-7 above. The radio will demodulate and decode this signal and send frequency domain IQ to the O-DU-Emulator as instructed by the O-DU-emulator using uplink C-Plane messages. Note this signal has 20 slots with all symbols populated with only uplink shared data in the only first 51 RBs. For this test, all the symbols except the ones being under test, symbols #5 and #6, may either be left empty/unallocated or be allocated with user data according to the test model above. If the symbols are populated with user data, PN23 data sequence will be used.

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connector or TAB connector, together with the corresponding C-Plane messages on the Fronthaul interface.

The TER will capture the U-Plane messages generated by the DUT and validate if the payload matches with the uplink signal.

It applies to the O-RAN CUS Specification [2]:

* Clause 7.4
* Clause 8.3.2
* Clause 8.3.3

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in ETSI TS 138.141-1 clause G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The radio must report that it supports the SymInc parameter. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this clause will be used if the radio supports that numerology and bandwidth.

1. **Test Methodology**

Leverage from the well-known payload (Pseudo Random sequence) of the uplink signal to compare it with the payload of the signal communicated on the O-RAN interface. The IQ information is extracted from the U-Plane message and demodulated to retrieve payload.

###### Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

###### Procedure

* + - Load uplink test waveform (G-FR1-A1-5 : SCS30k\_51RB, 100 MHz) on the RF signal source. Note this signal has a PN23 sequence as user data. Configure the source to generate a new PN23 sequence in symbols #5 and #6.
    - Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
    - Load C-Plane message sequence on Test Equipment O-RU (TER) - Only symbols #5 and #6 in each slot will be used in this test. All other symbols will contain either user data and/or reference signals but will not be considered part of the test. These two symbols will be used to determine whether the radio properly increments the current symbol ID when the SymInc bit is set. The C-Plane message for symbol #5 should have the SymInc bit set. This message should have a third section describing symbol #6 (using the SymInc mechanism). All PRBs in each symbol will be requested (In the example waveform 51 PRBs).
    - Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
    - Launch test to play the C-Plane messages and trigger the source to play the RF signal on a frame boundary.
    - Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
    - Extract IQ information
    - Extract Payload
    - Compare payload binary sequences

##### Test Requirement (expected result)

1. The verdict is "Test pass" if payload binary sequences match between the uplink test frame sent to the DUT and the received U-Plane data from the DUT. In particular symbols number 5 and 6 should properly contain the correct PN23 sequences that were built by the signal source.
2. If any of the test conditions is not true, the verdict for the whole test is "Fail"

#### ![]({{site.baseurl}}/assets/images/c28bcababeb2.png) UC-Plane O-RU Scenario Class Extended using reMask Parameter 3GPP DL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can correctly decode and interpret C-Plane and U-Plane messages putting resource block in the correct place in the transmitted signal using the reMask parameter. In this test stock data section "D" will be used to exercise the reMask, only PRBs 1 through 5 will be used in this test.

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard NR-FR1-TM1.1 signal as modified below. This signal is shown below in Figure 3.2.3.1-8:

![]({{site.baseurl}}/assets/images/bc5f7aa3c89c.png)

###### Figure 3.2.3.1-8 NR-FR1-TM1.1 Modification 1

This generic 3GPP NR-FR1-TM1.1 test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data.

Resource blocks that are not under test may be filled with non-zero data or may be left unallocated. If filled with non-zero data, a PN23 sequence with a seed value of all ones must be used.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the reMask parameter set, transfer U-Plane data into the correct resource elements and transmit this data accurately in the downlink. This test is applicable for Category A and Category B radios (No precoding is required). The test will be conducted therefore there will be no channel distortion or interference. It is mandatory the radio pass this test to be considered O-RAN conformant.

This test will utilize stock data section D described above.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause NR-FR1-TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The Radio must support the reMask parameter as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal as described below. If all symbols have user data allocated, every symbol may be described by type 1 sections (DL-SCH and DCI). Only symbol #2 will be used for the reMask test. The data in this section must be a PN23 sequence using an initial seed of all ones. The first bits of the PN23 will be in PRB1 and continue in consecutive resource elements to the end of PRB5. No Section Type zero messages will be used for this test. The PN23 sequence will be interleaved with DMRS signals as shown below:

![]({{site.baseurl}}/assets/images/a892307434ce.jpg)

Symbol number 2 should be stock data Section Type "D" as shown above. This test will only be using PRBs 1 through 5. The corresponding C-Plane message will contain two section IDs in a single C-Plane message describing symbol #2. The startSymbolId in the application header will be symbol #2. The C-Plane message will have one section with the reMask set to all 101010101010b (only DMRS REs) and another section with the reMask set to all ones. The first section (reMask = 101010101010b) will be for PRB 1 only, the second section will be for PRBs 2-5 and will have an reMask value of all ones. The two sections will have different section IDs. The remainder of the PRBs will not be used and set to zero value.

The corresponding U-Plane messages will be a new PN23 Sequence (initial seed is all ones) in PRBs 1 through 5 of symbol #2 alternated with the DMRS signals. The first U-Plane message will correspond to sectionID with reMask set to 101010101010b and will contain one PRB with user data and DMRS signals as shown.

The second U-Plane message will correspond to PRBs 2-5 and contain the same alternate data. The purpose of the section ID containing valid data is to ensure the radio sends a signal to synchronize the signal analyzer.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should only contain the same PN23 signals that were sent in the U-Plane only for PRBs 2-5. Only DMRS signals should be sent for PRB1.

#### ![]({{site.baseurl}}/assets/images/d9a77d199e93.png) UC Plane O-RU Scenario Class Extended using reMask Parameter 3GPP UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

This test adds the capability of interpreting the reMask parameter to the basic uplink test.

Validate correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (Clause 7.2 TS 138.141-1) of the Conducted Receiver Characteristic Test (clause 7 TS 138.141) and power Levels at least 30 dB above Reference Sensitivity power Level described in TS 138.141-1 Table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance.

![]({{site.baseurl}}/assets/images/112042a43d48.jpg)

###### Figure 3.2.3.1-9 G-FR1-A1-5 UL FDD Test Signal

Using an RF source, the test equipment will generate a 3GPP test signal as shown in Figure 3.2.3.1-9 above. The radio will demodulate and decode this signal and send frequency domain IQ to the O-DU-Emulator as instructed by the O-DU-emulator using uplink C-Plane messages as described below. This test might either populate all symbols with non-zero data or leave them unallocated/empty. If symbols are populated, a PN23 sequence with seed all ones will be used.

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connector or TAB connector, together with the corresponding C-Plane messages on the Fronthaul interface.

The TER will capture the U-Plane messages generated by the DUT and validate if the payload matches the uplink signal.

It applies to the O-RAN CUS Specification [2]:

* Clause 7.4
* Clause 8.3.2
* Clause 8.3.3

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in ETSI TS 138.141-1 clause G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The radio must report that it supports the reMask parameter. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this clause will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

Leverage from the well-known payload PN23 sequence of the uplink signal to compare it with the payload of the signal communicated on the O-RAN interface. The IQ information is extracted from the U-Plane message and demodulated to retrieve payload.

###### Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

###### b: Procedure

* + - Load uplink test waveform (G-FR1-A1-5 : SCS30k\_51RB) on the RF signal source. Note this signal will have a PN23 sequence as user data.
    - Configure signal source to play the test waveform described below on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
    - Load C-Plane message sequence on Test Equipment O-RU (TER). For symbol #2 only PRBs 1-5 will be sent with the alternating user data and DMRS pattern shown below. Other symbols may be used in this test or be left unallocated (unused). However other symbols containing reference signals may be used to ensure the O-RU can synchronize with the TER. The format of symbol #2 used in this test will be:

![]({{site.baseurl}}/assets/images/5e23f7b7eafd.jpg)

The C-Plane message describing symbol #2 should contain two sections with different section IDs. Only PRBs 1-5 will be used (Matching stock data Section Type "D"). The first section should only describe PRB 1 and have an reMask of 101010101010b. The second section should describe PRBs 2-5 and have an reMask of all ones. The two sections should have different section IDs.

* + - Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
    - Launch test to play the C-Plane messages and trigger the source to play the RF signal on a frame boundary.
    - Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
    - Extract IQ information
    - Extract Payload
    - Compare payload binary sequences

###### Test Requirement (expected result)

1. The verdict is "Test pass" if payload binary sequences match between the uplink test frame sent to the DUT and the received U-Plane data from the DUT. In particular, there should only be U-Plane messages for PRBs 1-5 with user data and DRMS signals in PRBs 2-5 and only DMRS signals in PRB 1.
2. If any of the test conditions is not true, the verdict for the whole test is "Fail"

#### ![]({{site.baseurl}}/assets/images/c87986331008.png) UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension 3GPP DL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can correctly decode and interpret C-Plane and U-Plane messages putting resource block in the correct place in the transmitted signal using the extension type 6. In this test stock data section definition C will be used to exercise the non-contiguous RB allocation, all 273 PRBs (or the max number of PRBs per symbol for the highest numerology the radio supports) will be used in this test.

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard NR-FR1-TM1.1 signal with the modifications described below (supporting non-contiguous PRB allocation). The standard 3GPP NR-FR1-TM1.1 is shown in Figure 3.2.3.1-10 below:

![]({{site.baseurl}}/assets/images/bd2aa12fdfa5.png)

###### Figure 3.2.3.1-10 3GPP NR-FR1-TM1.1 Test Signal

This generic NR-FR1-TM1.1 test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data.

This test might either populate all symbols with non-zero data or leave them unallocated/empty. If symbols are populated, a PN23 sequence with seed all ones will be used.

This test will utilize stock data section definition C described above. This data section includes 4 RBs in the first RB group, the second group of 4 RBs are blank and the remainder of the RBGs contain user data. This stock data section will be repeated over three symbols to test the SymbolMask parameter.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause NR-FR1-TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The Radio must support the extension type 6 as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

For this test only symbols number 6 and 7 will be used in each slot. Other symbols may be used in this test or be left unallocated (unused). However other symbols containing reference signals may be used to ensure the O-RU can synchronize with the TER.

The starting PRB will be zero and number of PRBs will be chosen from one or more columns in Table 3.2.3-2 below. The resource block group size will be 16 based on ETSI TS 138.214 Table 5.1.2.2.1-1 as shown in Table 3.2.3-1 below using configuration 2.

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Bandwidth Part Size** | **Configuration 1** | **Configuration 2** |
| 1 - 36 | 2 | 4 |
| 37 - 72 | 4 | 8 |
| 73 - 144 | 8 | 16 |
| 145 - 275 | 16 | 16 |

</div>

###### Table 3.2.3-1

Using the calculations in the O-RAN CUS Specification [2] clause 7.7.6 for the test waveform described above, the ID of the last RBG will be 17, f(0) will be 16, f(n) will be 16 and f(lastRbgID) will be 1 (17 total RBGs). StartPrbc will be zero and numPrbc will be 273. If the radio does not support this numerology the following table will apply. The number of PRBs correspond to Table 3.2.3-2 Stock Data Sections:

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (11-79)** | | | | | | | | | | |
| max  PRB/sym | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| numPRBc | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| rbgSize | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| lastRbgID | 2 | 5 | 6 | 7 | 6 | 6 | 6 | 8 | 8 | 4 |
| f(0) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(n) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| F(lastRbgID) | 3 | 4 | 1 | 4 | 2 | 3 | 4 | 1 | 2 | 15 |
| rbgMask (Hex) | 0000005 | 000003D | 000007D | 00000FD | 000007D | 000007D | 000007D | 00001FD | 00001FD | 000001D |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (100-273)** | | | | | | | | | | |
| max PRB/sym | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| numPRBc | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| rbgSize | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| lastRbgID | 6 | 6 | 6 | 8 | 8 | 8 | 10 | 13 | 16 | 17 |
| f(0) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(n) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| F(lastRbgID) | 4 | 10 | 11 | 4 | 5 | 7 | 2 | 9 | 14 | 1 |
| rbgMask (Hex) | 000007D | 000007D | 000007D | 00001FD | 00001FD | 00001FD | 00007FD | 0003FFD | 001FFFD | 003FFFD |

</div>

###### Table 3.2.3-2 Stock Data Sections

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal.

Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols

#6 and #7 which will be used for the section extension 6 test. The data in symbol #6 should be a new PN23 sequence starting in the first PRB and continuing to PRB 273 (RBG number 17). Symbol #7 should be identical to symbol #6. The rbgMask value should be set to 0x003FFFD and the symbolMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test.

The O-DU emulator will build a U-Plane message containing the PN23 IQ data for the first 16 PRBs (RBG 0), this message will have the section ID used in the C-Plane message described above. Another U-Plane message will be created using the same section ID but with the PN23 data for RBGs 2-17 in it. The same U- Plane messages will be used for symbol #7.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should only contain the same PN23 signals that were sent in the U-Plane, that is the PN23 sequence in the first 16 PRBs, nothing in the next 16 PRBs and the remainder of the PN23 sequence in RBGs 2-17.

#### ![]({{site.baseurl}}/assets/images/e785f6b47c07.png) UC Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension 3GPP UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the capability of interpreting the section extension 6, non-contiguous PRB allocation to the basic uplink test.

Validate correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (clause 7.2 ETSI TS 138.141-1) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 138.141) and power Levels at least 30 dB above Reference Sensitivity power Level described in ETSI TS 138.141-1 table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance. C-Plane messages will contain 2 symbols with the same set of non-contiguous PRBs referenced to test both the symbolMask and the rbgMask.

![]({{site.baseurl}}/assets/images/112042a43d48.jpg)

###### Figure 3.2.3.1-11 G-FR1-A1-5 UL FDD Test Signal

Using an RF source, the test equipment will generate a 3GPP test signal as shown in Figure 3.2.3.1-11 above. The radio will demodulate and decode this signal and send frequency domain IQ to the O-DU-Emulator as instructed by the O-DU-emulator using uplink C-Plane messages containing section extension 6. Note this signal has 20 slots with all symbols populated with only uplink shared data in the only first 51 RBs. The symbols are populated with PN23 data.

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connector or TAB connector, together with the corresponding C-Plane messages on the Fronthaul interface.

The TER will capture the U-Plane messages generated by the DUT and validate if the payload matches with the uplink signal.

It applies to the O-RAN CUS Specification [2]:

* Clause 7.4
* Clause 8.3.2
* Clause 8.3.3

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in ETSI TS 138.141-1 clause G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The radio must report that it supports section extension type 6, non-contiguous PRB allocations. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this section will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

Leverage from the well-known payload (Pseudo Random sequence) of the uplink signal to compare it with the payload of the signal communicated on the O-RAN interface. The IQ information is extracted from the U-Plane message and demodulated to retrieve payload.

###### Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M- Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

###### Procedure

* + - Load uplink test waveform (G-FR1-A1-5 : SCS130k\_51RB) on the RF signal source. Note this signal should contain a new PN23 sequence as user data in PRBs 0 through 51 for symbols 6 and 7. The remainder of the test waveform may be left unallocated or allocated as described in 3GPP.
    - Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
    - Load C-Plane message sequence on Test Equipment O-RU (TER) - Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. For this test symbols number 6 and 7 will be used in each slot. The starting PRB will be zero and number of PRBs will be 51. The resource block group size will be 8. Using the calculations in the O-RAN CUS Specification [2], clause 7.7.6, the ID of the last RBG will be 6, f(0) will be 8, f(n) will be 8 and f(lastRbgID) will be 3. StartPrbc will be zero and numPrbc will be 51.

If symbols other than #6 and #7 are allocated, every symbol should be described by multiple type 1 section (DL-SCH and DCI) except symbols #6 and #7 which will be used for the section extension 6 test. The data in symbol #6 is expected to be a new PN23 sequence starting in the first PRB and continuing to PRB 48 (RBG number 2). Symbol #7 should be identical to symbol #6. The rbgMask value should be set to 0x000007D and the symbolMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test.

* + - Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
    - Launch test to play the C-Plane messages and trigger the source to play the RF signal on a frame boundary.
    - Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
    - Extract IQ information
    - Extract Payload
    - Compare payload binary sequences

###### Test Requirement (expected result)

1. The verdict is "Test pass" if the test frame received by the signal analyzer contains the same PN23 signals that were sent in the U-Plane, that is the PN23 sequence in the first 16 PRBs, nothing in the next 16 PRBs and the remainder of the PN23 sequence in RBGs 2 (Next 16 PRBs).
2. If any of the test conditions is not true, the verdict for the whole test is "Fail".

#### ![]({{site.baseurl}}/assets/images/9abe2ccd1d48.png) UC-Plane O-RU Scenario Class Section Extension 10 - Multiple Port Grouping DL - Resource allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages when section extension 10 is supported by the radio, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink. This test is applicable for Category A and Category B radios (No precoding is required). The test will be conducted therefore there will be no channel distortion or interference. Note the purpose of this test is not to test the use of section extension 10 with either section extension 1 or 2 (Real time beam weights or attributes) since these are special conditions. There are four versions of beam groupings: Common Beam, beam matrix indication, beam vector listing and beamId/ueId listing with associated port-list index. Each of these will be tested. The beamforming measurements will be conducted using the method described in clause 3.2.3.2.3 and 3.2.3.2.4 (Predefined beamforming).

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard NR-FR1-TM1.1 signal. This signal is shown below in Figure 3.2.3.1-12.

![]({{site.baseurl}}/assets/images/bc5f7aa3c89c.png)

![]({{site.baseurl}}/assets/images/7363a3ae3282.png)

###### Figure 3.2.3.1-12 NR-FR1-TM1.1 FDD Test Signal

This test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data. This test requires non-zero data (PN23 Sequence) to populate all allocated resource blocks. This configuration corresponds to stock data section A in all symbols that do not contain PDCCH channels.

For this test the O-RU will indicate the default eAxC ID to use indicating this port grouping as well as the number of ports in this grouping, call this value nPG.

###### Test Entrance Criteria

The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause NR-FR1- TM1.1. It will be for 5G New Radio only.

There will be numPortc "layers" or eAxCs referred to in the test. That is there will be one C-Plane message referencing the port group eAxC ID obtained from the M-Plane but numPortc U-Plane messages. For Test Case#4, (beamGroupType = 11b, beamId/ueId listing with associated port-list index), O-RU will advertise over M-Plane support for Section Extension 10, beamGroupType = 11b by setting the flag se-10-bgt-11b-supported = TRUE.

Manufacturers' must provide their defined list of beam indices and their associated magnitude and phase relation between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna ports being tested and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane message that describes the signal. This message should include section extension 10. Note the test will be performed four times exercising all four beam group types. Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. The data in the sections must be a PN23 sequence using an initial seed of all ones. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for each layer (i.e. numPortc repetitions).

Test case #1 (beamGroupType = 00b, Common Beam):

For this test the beamGroupType parameter should be set to 00b. It is expected that all layers will be played on the same beam ID and this is the beam ID used in the corresponding C-Plane message. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. Use the signal analyzer to decode at least two beams and ensure they are the same.

Test case #2 (beamGroupType = 01b, beam matrix indication):

For this test the beamGroupType parameter should be set to 01b. It is expected that all layers will be played on consecutive beam IDs starting with the beam ID in the C-Plane message. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. Use the signal analyzer to decode at least two beams and ensure they meet the consecutive beam criteria.

Test case #3 (beamGroupType = 10b, beam vector listing):

For this test the beamGroupType parameter should be set to 10b. In this case the section extension should list "numPortc" beam IDs in section extension 10. It is expected that all layers will be played on the beam IDs indicated in the section extension. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. Use the signal analyzer to decode at least two beams and ensure they agree with the beam vector listing.

Test case #4 (beamGroupType = 11b, beamId/ueId listing with associated port-list index):

For this test the beamGroupType parameter should be set to 11b. With the usage of this beamGroupType, O- DU can pick arbitrary eAxC-ID value(s) from the M-Plane configured port-list and specify the associated beamId/ueId in the section extension. Hence, in this case the section extension should list "numPortc" value equal to the number of "portListIndex" values in the section extension. Each "portListIndex" indicates the index of an eAxC-ID in the port-list. It is expected that only the layers associated with specified "portListIndex" will be played on the beam IDs indicated in the section extension. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. Use the signal analyzer to decode at least two beams and ensure they agree with the beam vector listing.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above.
3. If it contains all the same PRB assignments and data, and the beams are measured as described in test cases #1 through #3 above the test passes.

#### ![]({{site.baseurl}}/assets/images/42b7b461a8fd.png) UC Plane O-RU Scenario Class Extended multiple port grouping using section extension 10 UL- Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the capability of interpreting the section extension 10, multiple port groupings in the basic uplink test.

Validate correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (Section 7.2 ETSI TS 138.141-1) of the Conducted Receiver Characteristic Test section (Section 7 ETSI TS 138.141) and power Levels at

least 30 dB above Reference Sensitivity power Level described in ETSI TS 138.141-1 table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance. Note the purpose of this test is not to test the use of section extension 10 with either section extension 1 or 2 (Real time beam weights or attributes) since these are special conditions. There are four versions of beam groupings: Common Beam, beam matrix indication, beam vector listing and beamId/ueId listing with associated port-list index. Each of these will be tested. The beamforming measurements will be conducted using the method described in clause 3.2.3.2.3 and 3.2.3.2.4 (Predefined beamforming).

Only Section Type 1 messages will be used in this test.

![]({{site.baseurl}}/assets/images/89634a3bc22f.jpg)

###### Figure 3.2.3.1-13 G-FR1-A1-5 UL FDD Test Signal

Using an RF source, the test equipment will generate a 3GPP test signal as shown in Figure 3.2.3.1-13 above. The radio will demodulate and decode this signal and send frequency domain IQ to the O-DU-Emulator as instructed by the O-DU-emulator using uplink C-Plane messages containing section extension 10. Note this signal has 20 slots with all symbols populated with only uplink shared channel data in the only first 51 RBs. The symbols are populated with PN23 data.

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connectors or TAB connectors, together with the corresponding C-Plane messages on the Fronthaul interface.

The TER will capture the U-Plane messages generated by the DUT and validate if the payload matches with the uplink signal.

It applies to the O-RAN CUS Specification [2]:

* Clause 7.4
* Clause 8.3.2
* Clause 8.3.3

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in ETSI TS 138.141-1 clause G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The radio must report that it supports section extension type 10, multiple port groupings. For Test Case#4, (beamGroupType = 11b, beamId/ueId listing with associated port-list index), O-RU will advertise over M-Plane support for Section Extension 10, beamGroupType = 11b by setting the flag se-10-bgt-11b-supported = TRUE. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the

numerology and bandwidth used in this test. The test signal described in this section will be used if the radio supports that numerology and bandwidth. Manufacturers' must provide their defined list of beam indices and their associated magnitude and phase relation between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

Leverage from the well-known payload (Pseudo Random sequence) of the uplink signal to compare it with the payload of the signal communicated on the O-RAN interface. The IQ information is extracted from the U-Plane message and demodulated to retrieve payload. Signals will be applied to connector ports emulating the phase and amplitude corresponding to the associated beam ID direction or phase relationship provided by the manufacturer.

###### Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M- Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna ports that belong to the beam under test and configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-E. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test. Let the DUT and TER to warm to the normal operating temperature within specified range

###### Procedure

* + - Load uplink test waveform (G-FR1-A1-5 : SCS130k\_51RB) on the RF signal source. Note this signal should contain a new PN23 sequence as user data in PRBs 0 through 51 for symbols 6 and 7. The remainder of the test waveform is as described in 3GPP.
    - Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
    - Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
    - Load C-Plane message sequence on Test Equipment O-RU (TER) - Use the O-DU emulator control interface to build the appropriate C-Plane message (Single C-Plane message) that describes the signal. For this test symbols number 6 and 7 will be used in each slot.

Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols #6 and #7 which will be used as the payload data. The data in symbol #6 is expected to be a new PN23 sequence starting in the first PRB and continuing to PRB 51. Symbol #7 should be identical to symbol #6. No Section Type zero messages will be used for this test. The C-Plane message should include section extension 10 with numPortc equal to what was received on the M-Plane at startup. The eAxC ID should be the group eAxC ID also received from the M-Plane. Run the test four times using:

Test Case #1 (beamGroupType = 00b, Common Beam): All layers should have the same beam ID. The signal sent by the source should correspond to the same beam ID. It is expected that the source is connected to at least two port groups to ensure the same beam is being used.

Test Case #2 (beamGroupType = 01b, beam matrix indication): All layers should have consecutive beam IDs starting with the beam ID in the C-Plane message. The signal sent by the source should correspond to the consecutive beam IDs. It is expected that the source is connected to at least two port groups to ensure the consecutive beams are being used.

Test Case #3 (beamGroupType = 10b, beam vector listing): All layers will be assigned beam IDs based on the list of beam IDs contained in the section extension. The number of beam IDs must be equal to numPortc. The signal sent by the source should correspond to the signalled beam IDs. It is expected that the source is connected to at least two port groups to ensure that the correct beams are being used.

Test case #4 (beamGroupType = 11b, beamId/ueId listing with associated port-list index):

For this test the beamGroupType parameter should be set to 11b. With the usage of this beamGroupType, O- DU can pick arbitrary eAxC-ID value(s) from the M-Plane configured port-list and specify the associated beamId/ueId in the section extension. Hence, in this case the section extension should list "numPortc" value equal to the number of "portListIndex" values in the section extension. Each "portListIndex" indicates the index of an eAxC-ID in the port-list. The signal sent by the source should correspond to the signalled beam

IDs associated with eAxC-ID indexed by specified "portListIndex". It is expected that the source is connected to at least two port groups to ensure that the correct beams are being used.

* + - Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
    - Launch test to play the C-Plane message and trigger the source to play the RF signal on a frame boundary. Respect all timing windows.
    - Signal the signal source that C-Plane messages have been sent to allow it to start sending RF. Respect all timing windows.
    - Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
    - Extract IQ information
    - Extract Payload
    - Compare payload binary sequences

###### Test Requirement (expected result)

1. The test frame received by the signal analyzer must contain the same PN23 signals that were sent in the U- Plane.

The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the best performance (i.e. highest EVM, power, SNR, etc.) should match the manufacturer's declaration of the beam under test. If this is also true, the test passes.

#### ![]({{site.baseurl}}/assets/images/c054f2beeef5.png) UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource allocation - Coupling C and U plane via Frequency and Time

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages, transfer U- Plane data into the correct resource blocks and transmit this data accurately in the downlink when the radio reports it supports the option feature of coupling C and U plane messages via frequency and time. This test is applicable for Category A and Category B radios (No precoding is required). The test will be conducted therefore there will be no channel distortion or interference. It is mandatory the radio pass this test if it reports it supports coupling C and U plane via time and frequency.

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard NR-FR1-TM1.1 signal. This signal is shown below in Figure 3.2.3.1-14.

![]({{site.baseurl}}/assets/images/1323b63a0c98.png)

![]({{site.baseurl}}/assets/images/7363a3ae3282.png)

###### Figure 3.2.3.1-14 NR-FR1-TM1.1 FDD Test Signal

This test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data. This test requires non-zero data (PN23 Sequence) to populate all allocated resource blocks. This configuration corresponds to stock data section A in all symbols that do not contain PDCCH channels.

###### Test Entrance Criteria

The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in section NR-FR1- TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. This test is only applicable if the radio reports it supports coupling C and U plane via time and frequency.

###### Procedure

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. The data in the sections must be a PN23 sequence using an initial seed of all ones. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

In this test the C-Plane messages will contain valid values in the following fields:

* + - EAxC ID
    - Datadirection bit (Downlink)
    - Frame ID, subframeID, slotID, startsymbolID, and NumSymbol
    - SectionID must have a value 4095
    - SymInc, rb reMask and section extension #6 are *not* used in this test

The U-Plane messages generated by the TER must match those values used in the C-Plane corresponding o the section described in the C-plane but the value of sectionID will be 4095.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and data, the test passes.

#### ![]({{site.baseurl}}/assets/images/3f46975a269a.png) UC-Plane O-RU Base Class FDD Test UL - Coupling C and U plane via time and frequency

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can meet the most basic uplink requirements for O-RAN fronthaul correctly interpreting C-Plane messages and correctly constructing uplink U-Plane messages from an RF signal when the radio reports it supports C and U plane coupling via time and frequency.

The test validates that correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (Clause 7.2 ETSI TS 138.141-1) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 138.141) and power Levels at least 30 dB above Reference Sensitivity power Level described in ETSI TS 138.141-1 Table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance.

![]({{site.baseurl}}/assets/images/112042a43d48.jpg)

###### Figure 3.2.3.1-15 G-FR1-A1-5 Uplink FDD Test Signal

This signal is described by table A.1-1 in ETSI TS 138.141-1 and is referred to as G-FR1-A1-5 with the power increased to up to 30 dB above that described in Table 7.2.5-1. Under those conditions, a 3GPP compliant O-RU should deliver uplink U-Plane information that matches the uplink signal.

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connector or TAB connector, together with the corresponding C-Plane messages on the Fronthaul interface.

The TER will capture the U-Plane messages generated by the DUT and validate whether the payload matches the uplink signal.

It applies to the O-RAN CUS Specification [2]:

* Clause 7.4
* Clause 8.3.2
* Clause 8.3.3

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The O-RU must indicate it supports coupling C and U plane via time and frequency. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in ETSI TS 138.141-1 clause G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this clause will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

Leverage from the well-known payload (PN23 sequence) of the uplink signal to compare it with the payload of the signal communicated on the O-RAN interface. The IQ information is extracted from the U-Plane message and demodulated to retrieve payload.

###### a: Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M- Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

###### b: Procedure

* + Load uplink test waveform (G-FR1-A1-5 : SCS30k\_51RB) on the RF signal source
  + Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
  + Load C-Plane message sequence on Test Equipment O-RU (TER) C-Plane messages will contain valid values in the following fields:
    - EAxC ID
    - Datadirection bit (Uplink)
    - Frame ID, subframeID, slotID, startsymbolID, and NumSymbol
    - SectionID must have a value 4095
    - SymInc, rb reMask and section extension #6 are *not* used in this test
  + Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
  + Launch test to play the RF uplink frame after the C-Plane messages have been sent honoring timing windows
  + Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
  + TER will arrange U-Plane messages according to time and frequency
  + Extract IQ information
  + Extract Payload
  + Compare payload binary sequences

###### Test Requirement (expected result)

1. The verdict is "Test pass" if the payload binary sequences match between the uplink test frame sent to the DUT and the received U-Plane data from the DUT
2. If any of the test conditions are not true, the verdict for the whole test is "Fail"

#### ![]({{site.baseurl}}/assets/images/39667d689464.png) UC- Plane O-RU Scenario Class Extended 3GPP DL - Resource allocation - Section Description Priorities

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink when the radio reports it supports the option feature of coupling C and U plane messages via frequency and time and Section Description Priorities. This test is applicable for Category A and Category B radios (No precoding is required).

The test will be conducted therefore there will be no channel distortion or interference. It is mandatory the radio pass this test if it reports it supports coupling C and U plane via time and frequency. Note, there are two versions of this feature: coupling C and U plane messages via frequency and time and Section Description Priorities and

coupling C and U plane messages via frequency and time and Section Description Priorities (optimized). This test requires both tests to be performed if the radio supports both methods otherwise only one test is to be performed if the radio only supports one of these methods. These methods are listed under test methodology below.

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard NR-FR1-TM1.1 signal with *exceptions noted in the test procedure*. This signal is shown below in Figure 3.2.3.1-16 .

![]({{site.baseurl}}/assets/images/77cd88886b47.png)![]({{site.baseurl}}/assets/images/7363a3ae3282.png)

###### Figure 3.2.3.1-16 NR-FR1-TM1.1 FDD Test Signal

This test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data. This test requires non-zero data (PN23 Sequence) to populate all allocated resource blocks. This configuration corresponds to stock data section A in all symbols that do not contain PDCCH channels.

###### Test Entrance Criteria

The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause NR-FR1- TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. This test is only applicable if the radio reports it supports coupling C and U plane via time and frequency and Section Description Priority (including the optimized version).

###### Procedure for Coupling C and U plane messages via frequency and time with section priorities

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above and below in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. The data in the sections must be a PN23 sequence using an initial seed of all ones. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| # | Section ext 6 | priority | symbolMask | start Prbc | numPrbc | reMask | rbgMask | beamId | numSymbol | Note |
| 1 | yes | +1 | 00000000000100 | 0 | 192 | 010001000100 | 0xFFFFC00 | 1 | 1 | CSI  reference signal (CSI-RS) |
| 2 | yes | +1 | 00100000000000 | 0 | 192 | 010001000100 | 0xFFFFC00 | 2 | 1 | CSI  reference signal (CSI-RS) |
| 3 | no | 0 | 11111000000000  Not used in this section without section extension  6. Just shown for information | 0 | 273 | 111111111111 | N/A | 100 | 5 | UE1 |
| 4 | yes | 0 | 00000000001100 | 15 | 32 | 111111111111 | 0x6000000 | 200 | 2 | UE2 |
| 5 | no | 0 | 00000111110000  Not used in this section without section extension  6. Just shown for information | 31 | 48 | 111111111111 | N/A | 300 | 5 | UE3 |
| 6 | no | 0 | 00000000000011  Not used in this section without section extension  6. Just shown for information | 10 | 2 | 111111111111 | N/A | 3 | 2 | Special channel |

</div>

###### Table 3.2.3-3 Section Description Priorities

In this test the section configuration will be as shown in Table 3.2.3-3 above. The 6 sections will comprise one slot and this slot will be repeated continuously to synchronize the TER signal analyzer. The six sections will be sent on one C-Plane message using C and U plane coupling via time and frequency. The configuration above follows the example given in the CUSM specification.

The section numbers in the above table do not represent SectionID numbers but individual sections. Sections #1 and #2 describe hypothetical CSI-RS signals sent in symbols #2 and #11 in each slot. These signals have sub-carriers masked by reMask. The CSI-RS signals generation follows ETSI TS 138.211 V16.2.0 (or after), clause 7.4.1.5 with nID = 0, row 1, N=1 and L=1. These sections use section extension 6 and contain a higher priority than all other sections.

Section #3 describes PN23 data sent to hypothetical UE #1 it overlaps REs in sections #1 and #2 but has a lower priority so sections #1 and #2 are valid. Since section #3 has contiguous symbols section extension 6 is not needed.

Section #4 is for hypothetical UE #2. It shares symbol 2 with the CSI-RS signal in Section #1. Since the symbols are not contiguous, it uses section extension 6 but the priority is set to the default 0.

Section #5 is for hypothetical UE #3 and uses a contiguous set of symbols so section extension 6 is not needed. It does not overlap any other signals. This section is optional because it does not test Section Description Priority.

Section #6 is a hypothetical special channel using two symbols and does not require section extension 6. This section is also optional.

U-Plane messages will contain:

* CSI-RS signals as described by section #1 for symbol #2
* CSI-RS signals as described by section #2 for symbol #11
* A new PN23 sequence in each of the last 5 symbols as described in section #3. Note that for symbol #11 the PN sequence will be pierced by the CSI-RS signals.
* A new PN23 sequence for symbol #2 as described by section #4 as well as a new PN sequence for symbol #3. These sequences are only 32 PRBs long and start in PRB 15. The sequence in symbol #2 will be pierced by CSI-RS signals.
* The user data for sections number #5 and #6 are standard PN23 sequences only for these symbols and PRBs described in the table above.

###### Procedure for Coupling C and U plane messages via frequency and time with section priorities (optimized)

This test will be identical to the above test with the following exceptions:

* + - There will be two C-Plane messages describing the downlink signal to be sent.
    - The first two sections listed in the table above (those with higher priorities) will be repeated in both C-Plane messages and will have a section ID equal to a value between 0 and "max-highest-priority- sections-per-slot" as sent on the M-Plane.
    - The other sections will be divided between the two C-Plane messages and not repeated.
    - The repeated C-plane message will have the "repetition" bit set to one.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same PRB assignment and data as the signal described above.
3. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beam under test that has been assigned to each section described above. The procedure for this beamforming test is the same as test 3.2.3.2.3 (UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming). This result is applicable for either or both forms of this test.

#### ![]({{site.baseurl}}/assets/images/36be0178fe93.png) (VOID)

![]({{site.baseurl}}/assets/images/e60efe334ee4.png) UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension 12 3GPP DL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can correctly decode and interpret C-Plane and U-Plane messages putting resource block in the correct place in the transmitted signal using the extension type 12. In this test stock data section definition C will be used to exercise the non-contiguous RB allocation, all 273 PRBs (or the maximum number of PRBs per symbol for the highest numerology the radio supports) will be used in this test.

Using a standard 3GPP NR-FR1-TM1.1 test frame for FDD the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the

downlink the standard NR-FR1-TM1.1 signal with the modifications described below (supporting non-contiguous PRB allocation). The standard 3GPP NR-FR1-TM1.1 is shown in Figure 3.2.3.1-17 below:

![]({{site.baseurl}}/assets/images/bd2aa12fdfa5.png)

###### Figure 3.2.3.1-17 3GPP NR-FR1-TM1.1 Test Signal

This generic NR-FR1-TM1.1 test frame consists of a PDCCH in the first two symbols of every slot consisting of 3 PRBs. All the remaining PRBs in the frame consist of Physical Downlink Shared Channel data.

This test requires non-zero data to populate all allocated resource blocks. This data will be a PN23 sequence with a seed value of all ones as described below.

This test will utilize stock data section definition C described above with the following exception. This data section will include user data in the first RB group, the second group will be blank and the remainder of the RBGs contain user data. This stock data section will be repeated over two symbols to test the SymMask parameter.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The default test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause NR-FR1-TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The Radio must support the extension type 12 as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

For this test only symbols number 6 and 7 will be used in each slot. Other symbols may contain data including reference signals to ensure test equipment can synchronize with the signal. The starting PRB will be zero and number of PRBs will be chosen from one or more columns in Table 3.2.3-5 **Stock Data Sections**below. The resource block group size will be 16 based on ETSI TS 138.214 Table 5.1.2.2.1-1 as shown in Table 3.2.3-4 below using configuration 2.

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Bandwidth Part Size** | **Configuration 1** | **Configuration 2** |
| 1 - 36 | 2 | 4 |
| 37 - 72 | 4 | 8 |
| 73 - 144 | 8 | 16 |
| 145 - 275 | 16 | 16 |

</div>

###### Table 3.2.3-4 Resource Block Group Size

Using the calculations in O-RAN CUS Specification [2], clause 7.7.6, for the test waveform described above, the ID of the last RBG will be 17, f(0) will be 16, f(n) will be 16 and f(lastRbgID) will be 1 (17 total RBGs). StartPrbc will be zero and numPrbc will be 273. If the radio does not support this numerology the following table will apply. The number of PRBs correspond to Table 3.2.3-2 Stock Data Sections:

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (11-79)** | | | | | | | | | | |
| max  PRB/sym | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| numPRBc | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| rbgSize | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| lastRbgID | 2 | 5 | 6 | 7 | 6 | 6 | 6 | 8 | 8 | 4 |
| f(0) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(n) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| F(lastRbgID) | 3 | 4 | 1 | 4 | 2 | 3 | 4 | 1 | 2 | 15 |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (100-273)** | | | | | | | | | | |
| max  PRB/sym | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| numPRBc | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| rbgSize | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| lastRbgID | 6 | 6 | 6 | 8 | 8 | 8 | 10 | 13 | 16 | 17 |
| f(0) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(n) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| F(lastRbgID) | 4 | 10 | 11 | 4 | 5 | 7 | 2 | 9 | 14 | 1 |

</div>

###### Table 3.2.3-5 Stock Data Sections

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal.

Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols

#6 and #7 which will be used for the section extension 12 test. The data in symbol #6 should be a new PN23 sequence starting in the first PRB and continuing to PRB 273 (RBG number 17). Symbol #7 should be identical to symbol #6. The symMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test. The parameters for the default test signal are shown below:

![]({{site.baseurl}}/assets/images/41c26745e145.jpg)

The O-DU emulator will build a U-Plane message containing the PN23 IQ data for the first 16 PRBs (RBG 0), this message will have the section ID used in the C-Plane message described above. Another U-Plane message will be created using the same section ID but with the PN23 data for RBGs 2-17 in it. The same U-Plane messages will be used for symbol #7.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should only contain the same PN23 signals that were sent in the U-Plane, that is the PN23 sequence in the first 16 PRBs, nothing in the next 16 PRBs and the remainder of the PN23 sequence in RBGs 2-17, or the pattern appropriate for the numerology if a different numerology is chosen as noted above.

#### ![]({{site.baseurl}}/assets/images/c73cbe71b799.png) UC Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension 3GPP UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the capability of interpreting the section extension 12, non-contiguous PRB allocation to the basic uplink test.

Validate correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (Section 7.2 ETSI TS 138.141-1) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 138.141) and power Levels at least 30 dB above Reference Sensitivity power Level described in ETSI TS 138.141-1 table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance. C-Plane messages will contain 2 symbols with the same set of non-contiguous PRBs referenced to test both the symMask and the offStartPrb parameters.

![]({{site.baseurl}}/assets/images/112042a43d48.jpg)

###### Figure 3.2.3.1-18 G-FR1-A1-5 UL FDD Test Signal

Using an RF source, the test equipment will generate a 3GPP test signal as shown in Figure 3.2.3.1-18 above. The radio will demodulate and decode this signal and send frequency domain IQ to the O-DU-Emulator as instructed by the O-DU-emulator using uplink C-Plane messages containing section extension 12. Note this signal has 20 slots with all symbols populated with only uplink shared data in the only first 48 RBs. The symbols are populated with PN23 data.

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connector or TAB connector, together with the corresponding C-Plane messages on the Fronthaul interface.

The TER will capture the U-Plane messages generated by the DUT and validate if the payload matches with the uplink signal.

It applies to the O-RAN CUS Specification [2]:

* Clause 7.4
* Clause 8.3.2
* Clause 8.3.3

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in section ETSI TS 138.141-1 section G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The radio must report that it supports section extension type 12, non-contiguous PRB allocations. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this section will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

Leverage from the well-known payload (Pseudo Random sequence) of the uplink signal to compare it with the payload of the signal communicated on the O-RAN interface. The IQ information is extracted from the U-Plane message and demodulated to retrieve payload.

###### Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M- Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

###### Procedure

* + - Load uplink test waveform (G-FR1-A1-5 : SCS130k\_51RB) on the RF signal source. Note this signal should contain a new PN23 sequence as user data in PRBs 0 through 50 for symbols 6 and 7. The remainder of the test waveform is as described in 3GPP.
    - Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
    - Load C-Plane message sequence on Test Equipment O-RU (TER) - Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. For this test symbols number 6 and 7 will be used in each slot. The starting PRB will be zero and number of used PRBs will be 48. The resource block group size will be 16. Using the calculations in O-RAN CUS Specification [2] clause 7.7.6, the ID of the last RBG will be 17, f(0) will be 16, f(n) will be 16 and f(lastRbgID) will be 1. Note, if the radio does not support this numerology a suitable replacement can be selected from the table below:

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (11-79)** | | | | | | | | | | |
| max  PRB/sym | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| numPRBc | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| rbgSize | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| lastRbgID | 2 | 5 | 6 | 7 | 6 | 6 | 6 | 8 | 8 | 4 |
| f(0) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(n) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| F(lastRbgID) | 3 | 4 | 1 | 4 | 2 | 3 | 4 | 1 | 2 | 15 |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (100-273)** | | | | | | | | | | |
| max  PRB/sym | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| numPRBc | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| rbgSize | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| lastRbgID | 6 | 6 | 6 | 8 | 8 | 8 | 10 | 13 | 16 | 17 |
| f(0) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(n) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| F(lastRbgID) | 4 | 10 | 11 | 4 | 5 | 7 | 2 | 9 | 14 | 1 |

</div>

###### Table 3.2.3-6 Stock Data Sections

* + - A single section ID will describe the non-contiguous resource allocation using section extension 12. The parameters to use for the example wave form are shown below:

![]({{site.baseurl}}/assets/images/a6115840e5b8.jpg)

* + - Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
    - Launch test to play the C-Plane messages and trigger the source to play the RF signal on a frame boundary.
    - Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
    - Extract IQ information
    - Extract Payload
    - Compare payload binary sequences

###### Test Requirement (expected result)

1. The verdict is "Test pass" if the test frame received by the signal analyzer contains the same PN23 signals that were sent in the U-Plane, that is the PN23 sequence in the first 16 PRBs, nothing in the next 16 PRBs and the remainder of the PN23 sequence in RBG 2 (Next 16 PRBs).
2. If any of the test conditions is not true, the verdict for the whole test is "Fail"

#### ![]({{site.baseurl}}/assets/images/dd67e370551b.png) UC Plane O-RU Base Class FDD Test UL - Static SRS allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the O-RU can support static SRS configuration through the M-Plane. This is an uplink only test so there is no corresponding downlink test for FDD. The O-RU must report through the M- Plane that it supports static configuration of SRS.

The test will have the CUSM emulator configure the O-RU, through the M-Plane, with a section of time/frequency resources reserved for static uplink SRS. The signal source will be programmed to send simulated SRS signals in a subset of those resources. The O-RU should receive this SRS signals and pass them through to the CUSM emulator using U-Plane messages. Note, there will be no C-Plane messages sent from the CUSM emulator and the

O-RU. The signal generator will signal power levels at least 30 dB above Reference Sensitivity power Level described in TS 138.141-1 Table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance.

The placement of the time frequency resources is not specified in this test so it may be placed anywhere in the frame.

The TER (Test Equipment, O-RU) generates an uplink SRS signal on the antenna connector or TAB connector. The TER will capture the U-Plane messages generated by the DUT and validate whether the payload matches the uplink signal as well as beam characteristics. The metric used to validate that the signal received by the CUSM emulator matches the signal sent by the signal generator will be EVM as described in Annex H.7 of ETSI TS

138.141. While some 3GPP test documents (e.g. ETSI TS 138.521 clause 6.4.2.1.3) suggest treating the EVM requirements for physical Zadoff-Chu sequences such as PRACH the same as QPSK for EVM requirements, this document will decrease the required EVM to the level specified for 64 QAM. The purpose of this is to ensure that there is no chance of false positives where a random, mistaken signal sent by the O-RU closely mimics the test signal used by the TER. Since there are no impairments made to the uplink SRS signal this should be well within the capabilities of the O-RU.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The O-RU must indicate it supports static SRS allocation. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in ETSI TS 138.141-1 section G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this clause will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

**a: Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M- Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required SRS test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

Implicit in this Initial set up is statically configuring O-RU with a section of time/frequency resources for static SRS signals.

###### b: Procedure

* + Build an SRS signal in the signal generator that fits in the preconfigured time frequency resources set in the initial configuration.
  + Load the waveform into the signal source:
  + Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that signals the start of a frame boundary.
  + Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
  + Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port connected
  + TER will arrange U-Plane messages according to time and frequency
  + Start SRS waveform generation on the signal generator. Ensure the test frame is repeated enough times to generate a statistically significant number of SRS occasions. That is at least 10 occasions.
  + Extract IQ information
  + Calculate EVM of the SRS signal received by the CUSM emulator to the ideal signal generated by the signal source. Use the method described in ETSI TS 138.141 Annex H.7 to perform the calculation.

###### Test Requirement (expected result)

1. The verdict is "Test pass" if the calculated EVM is less than 8% as median EVM measured over the minimum number of SRS occasions of at least 10 occasions.
2. If any of the test conditions are not true, the verdict for the whole test is "Fail"

![]({{site.baseurl}}/assets/images/8696560f3f7d.png) UC Plane O-RU Base Class FDD Test UL - Static PRACH allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the O-RU can support static PRACH configuration through the M-Plane. This is an uplink only test so there is no corresponding downlink test for FDD. The O-RU must report through the M- Plane capabilities that it supports static configuration of PRACH. The concept is to repeat test 3.2.3.8.1 (5GNR PRACH test) without sending any C-Plane type 3 messages and configuring the O-RU using only the M-Plane.

TER will setup the signal generator with a PRACH test waveform according to ETSI TS 138.141-1 clause 8.4.1 and A.6. The test waveform will contain the same preamble ID repeated by following the timing offset scheme specified in the figures 8.4.1.4.2-2 or 8.4.1.4.2-3 ETSI TS 138.141-1 depending on the selected PRACH format.

This is an example for FR1 - SCS=30 kHz - BW=100MHz - Format A3, at each occasion the time offset of the same preamble index (selected according to table A.6-1 ETSI TS 138.141.1) is incremented by 100nsec starting from 0 up to 800nsec (9 occasions per frame). Each PRACH occasion is at the beginning of the first nine used sub- frames. The scheme is repeated every frame.

![]({{site.baseurl}}/assets/images/088c69167ee4.png)![]({{site.baseurl}}/assets/images/e0259d216f82.png)

###### Figure 3.2.3.1-19 FR1 SCS 30Kz 100MHz Format A3

According to the PRACH waveform setting, the TER will generate a corresponding sequence of M-Plane messages which include the following parameters (According to the M-Plane specification):

grouping static-prach-configuration

* leaf pattern-period - "Period after which static PRACH patterns are repeated. Unit: number of frames."
* leaf guard-tone-low-re - "Number of REs occupied by the low guard tones."
* leaf num-prach-re - "Number of contiguous PRBs per data section description"
* leaf guard-tone-high-re - "Number of REs occupied by the high guard tones."
* leaf sequence-duration - "Duration of single sequence of the PRACH. Sequence may be considered as 'single PRACH symbol'"
* list prach-patterns - key prach-pattern-id - "Provides a PRACH pattern. Each record in the list represents a single PRACH occasion. Number of list entries cannot exceed max-prach-patterns"
  + leaf prach-pattern-id - "Supplementary parameter acting as key for prach-pattern list."
  + leaf number-of-repetitions - "This parameter defines number of PRACH repetitions in PRACH occasion, to which the section control is applicable
  + leaf number-of-occasions - "This parameter informs how many consecutive PRACH occasions is described by the PRACH Pattern"
  + leaf re-offset - "Offset between the start of the lowest-frequency RE of the lowest frequency PRB and the start of the lowest frequency RE belonging to the PRACH occasion. The re- offset is configured as number of PRACH REs.
  + list occasion-parameters - "list of cp-lengths, gp-lengths and beam-ids applicable per each PRACH occasion in PRACH pattern. NOTE: the number of records in this list MUST be equal to value of parameter number-of-occasions."
    - leaf occasion-id - "Supplementary parameter acting as key in 'occasion-parameters' list"
    - leaf cp-length - "Cyclic prefix length. See CUS-Plane specification for detailed description."
    - leaf gp-length - "Guard period length."
    - leaf beam-id - "This parameter defines the beam pattern to be applied to the U- Plane data. beamId = 0 means no beamforming operation will be performed."
  + leaf frame-number - "This parameter is an index inside the pattern-length, such that PRACH occasion is happening for SFN which fulfills following equation: [SFN mod pattern-length = frame-id]"
  + leaf sub-frame-id - "Identifier of sub-frame of the PRACH occasion. Value is interpreted in the same way as subframeId field in a section description of a C-Plane message."
  + leaf time-offset - "This parameter defines the time-offset from the start of the sub-frame to the start of the first Cyclic Prefix of PRACH pattern"

By the corresponding U-Plane messages in the uplink direction, the TER will try to detect the presence of the corresponding preamble at the expected timing offset and calculate the probability of detection Pd according to the definition in TS38.141-1 clause 8.4.1.1.

The signal will be exercised at only one O-RU port without adding any external AWGN power level or multipath fading profile and at a power level avoiding detection errors due to poor SNR (rule described in the sub-section C of this scenario class).

The test will have the CUSM emulator configure the O-RU, through the M-Plane, with a section of time/frequency resources reserved for static uplink PRACH. The default is the PRACH configuration described in 3GPP above but the test may be conducted with changes if the radio does not support those exact configurations. The signal source will be programmed to send simulated PRACH signals in those resources. The O-RU should receive this PRACH signal and pass them through to the CUSM emulator using U-Plane messages. Note, there will be no C- Plane messages sent from the CUSM emulator and the O-RU.

###### Test Entrance Criteria

O-RU must have a conducted antenna port (FR1) or TAB connector.

By the M-plane, TER will detect all the supported SCSs, FFT sizes and carrier bandwidths by the O-RU. It is assumed that only one combination of the three above parameters supported by the O-RU is enough to validate the test. TER shall generate M-Plane messages according to one of the PRACH formats in table A.6-1 ETSI TS

138.141. TER will choose the format either according to the manufacturer declaration item D.103 "PRACH format and SCS" in ETSI TS 138.141-1 or according to the format information obtained by the M-plane in case O-RU implements this feature. If more formats are claimed, only one shall be selected to reduce the test time, preference will be given to a format specified in Table A.6.1 ETSI TS 138.141. It is assumed that the O-RU manufacturer will support at least one in that table. For the case of long preambles, it is assumed format 0 is always supported since this is the only one shown in the table A.6-1 ETSI TS 138.141.

###### Test Methodology a: Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-

Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required PRACH test signal upon receiving a trigger signal from the CUSM-E.

Implicit in this Initial set up is statically configuring O-RU with a section of time/frequency resources for static PRACH signals.

**b: Procedure**

* + Set signal generator power by the following method:
    1. Select SNR from the scenario with two RX antennas and AWGN propagation condition in table 8.4.1.5- 1, 8.4.1.5-2 or 8.4.1.5-3 ETSI TS 138.141-1 depending on the selected SCS and PRACH format.
    2. Select the AWGN power level according to the configured SCS and channel bandwidth in table 8.4.1.4.2-1 ETSI TS 138.141-1 and 38.141-1and multiply by the PRACH signal bandwidth.
    3. The output power will be given by the formula (SNR+Noise power - 3dB) rounded to the first decimal digit. Extra 3dB are to compensate that SNR and noise power are selected from the two RX ports test case and this test procedure requires only one O-RU port.

For example, for the FR1 - SCS=30 kHz - BW=100MHz - Format A3 SNR is -13.5dB and noise level is -70.1dBm/98.28MHz. signal generator power = -13.5dB -70.1dBm/98.28MHz\*(139\*30 kHz)-3dB =- 19.5dBm.

* Set signal generator frequency offset to the central carrier frequency. PRACH will be mapped over frequency according to *msg1-FrequencyStart ( n*start *)* parameter equal to 0. PRACH format is set according to what TER has selected from the manufacturer declarations.

RA

* Start PRACH waveform generation on the signal generator. Ensure the test frame is repeated enough times

to generate a statistically significant number of PRACH occasions. That is at least 10 occasions.

* TER will perform PRACH detection per each PRACH occasion in each frame sent and compare the result with the expected preamble ID and the expected timing offset. Since the external AWGN and fading generator are not present the time error tolerance should be low, TER will use the time error tolerance in table 8.4.1.1-1 for AWGN case according to the corresponding PRACH format and PRACH SCS. A counter of successful detections is incremented at every matching. The probability of detection is given by the ratio between that counter and the number of the expected received PRACH occasions within the test time.
* Repeat the test procedure by setting *msg1-FrequencyStart ( n*start *)* parameter to the right edge of the configured carrier bandwidth in order to exercise a different frequency offset number

RA

1. **Test Requirement (expected result)**

1. Test is pass if the probability of detection is 100% determined across the minimum amount of at least 10 occasions.

#### ![]({{site.baseurl}}/assets/images/972cdffcba1b.png) UC Plane O-RU Scenario Class Extended using section extension 13 for frequency hopping UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the capability of the O-RU to correctly interpret section extension 13, frequency hopping, for the uplink.

This test will validate correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (clause7.2 ETSI TS 138.141-1) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 138.141) and power Levels at least 30 dB above Reference Sensitivity power Level described in ETSI TS 138.141-1 table 7.2.5-

* 1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance. C-Plane message will reference 2 symbols using section extension 13.

![]({{site.baseurl}}/assets/images/112042a43d48.jpg)

###### Figure 3.2.3.1-20 G-FR1-A1-5 UL FDD Test Signal

Using an RF source, the test equipment will generate a 3GPP test signal as shown in Figure 3.2.3.1-20 above. The radio will demodulate and decode this signal and send frequency domain IQ to the O-DU-Emulator as instructed by the O-DU-emulator using uplink C-Plane messages containing section extension 13. Note this signal has 20 slots with all symbols populated with only uplink shared data in the only first 51 RBs. The symbols are populated with PN23 data.

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connector or TAB connector, together with the corresponding C-Plane messages on the Fronthaul interface.

The TER will capture the U-Plane messages generated by the DUT and validate if the payload matches with the uplink signal.

It applies to the O-RAN CUS Specification [2]:

* + - Clause 7.4
    - Clause 8.3.2
    - Clause 8.3.3

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in ETSI TS 138.141-1 clause G-FR1-A1-5. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. The radio must report that it supports section extension type 13, frequency hopping. Note this signal may be changed to any of the 3GPP sensitivity test signals in table A.1-1 in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this section will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

Leverage from the well-known payload (Pseudo Random sequence) of the uplink signal to compare it with the payload of the signal communicated on the O-RAN interface. The IQ information is extracted from the U-Plane message and demodulated to retrieve payload.

###### Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M- Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

###### Procedure

* Load uplink test waveform (G-FR1-A1-5 : SCS130k\_51RB) on the RF signal source. Note this signal should contain a new PN23 sequence as user data in PRBs 0 through 50 for symbol 6 and PRBs 100 through 151 for symbol 7. This will be copied for all 20 slots. The remainder of the test waveform is as described in 3GPP.
* Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
* Load a C-Plane message on Test Equipment O-RU (TER) - Use the O-DU emulator control interface to build the appropriate C-Plane message that describes this uplink signal. This section should have startSymbolId = 6, numPrbc = 51, and section extension 13 attached. The section extension should have nextSymbolId = 7 and nextStartPrbc = 100.
* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information
* Extract Payload
* Compare payload binary sequences

###### Test Requirement (expected result)

* 1. The verdict is "Test pass" if the test frame received by the signal analyzer contains two U-Plane messages for this section ID one containing the PN23 sequence for the first 51 PRBs in symbol 6 and PRBs 100 through 151 for symbol #7 containing the PN23 sequence sent by the signal source for those PRBs.

### ![]({{site.baseurl}}/assets/images/a8c5e18359a5.png) UC-Plane O-RU Scenario Class Beamforming (BFM)

This clause describes the beamforming conformance testing for O-RAN fronthaul interface. The tests do not aim to test the O-RU beamforming performance or capabilities but to test that the O-RU under test focuses the RF energy or sensitivity into a specific direction and with a specific granularity following the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) C-Plane messages.

Unless stated otherwise in a test case, the following statements apply to all the test cases defined in this clause:

* + - It is based on conducted testing with a setup such as described in Clause 2.1 and it only applies to O-RU DUTs that have conducted antenna ports or TAB connectors.
    - It applies to Category A and Category B O-RU DUTs.
    - It applies to LTE and/or 5G New Radio O-RU DUTs. In both cases, precoding is not required in any test case.
    - If O-RU DUT supports Analog Beamforming (i.e. time domain beamforming), all the U-Plane test frames are defined by segmenting the Stock Test A: 1 section per symbol. The definition of this Stock Test A can be found in Figure 3.2.1.1-2 and the description accompanying this figure. Each slot shall include multiple sections (one per symbol within the slot) and only one beam at a time (i.e. one beamId at a time) and therefore only one beam can be tested per slot.
    - If O-RU DUT supports Digital Beamforming (i.e. frequency domain beamforming), all the U-Plane test frames are defined by segmenting the Stock Test B: 2 sections per symbol definition as shown in Figure 3.2.1.1-2. Each slot shall include multiple sections (two per symbol within the slot) and only one beam per section at a time (i.e. one beamId at a time) and therefore up to two different beams can be tested per slot.
    - If O-RU DUT supports multiple polarizations, it is up to the TER to determine if the testing is carried out for each polarization separately or multiple polarizations at the same time. In any case, it is important to guarantee that the correct eAxC\_ID for the correct polarization (or polarizations) is exercised.
    - For O-RU DUT that support LTE:
      * Downlink tests will use a standard 3GPP E-TM1.1 test frame for FDD (Clause 6.1.1.1 ETSI TS 136.141- 1) with 20MHz bandwidth (100 RB) as shown in Figure 3.2.3.2-1.

![]({{site.baseurl}}/assets/images/86a1181af385.png)

###### Figure 3.2.3.2-1 E-TM1.1 FDD 20 MHz 100RB

If 20MHz is not supported by the O-RU DUT, then it will use the highest bandwidth supported by the O- RU DUT.

* + - * Uplink test will use a standard 3GPP UL RMC Configuration definition for FDD (TS36.521-1) and power levels 30dB above Reference Sensitivity power level with 10MHz bandwidth (100 RB) as shown in Figure 3.2.3.2-2.

![]({{site.baseurl}}/assets/images/be84eed72acf.png)

###### Figure 3.2.3.2-2 UL RMC FDD 20 MHz 100 RB

If 20MHz is not supported by the O-RU DUT, then it will use the highest bandwidth supported by the O- RU DUT.

* + - For O-RU DUT that support 5G NR:
      * Downlink tests will use a standard 3GPP NR-FR1-TM1.1 test frame for FDD in [19] (clause 4.9.2 TS138.141-1) of the Conducted Transmitter Characteristic Test (clause 6 TS138.141-1) as described in clause 3.2.1.1. The test numerology will be preferably 30kHz subcarrier spacing and 100 MHz Bandwidth. If not supported, then it will use any other supported subcarrier spacing and the highest bandwidth of the O-RU DUT.
      * Uplink tests will use a standard 3GPP Reference Sensitivity level definition (clause 7.2 and Annex A TS138.141-1) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 138.141) and power levels 30dB above Reference Sensitivity power level as described in clause 3.2.1.1. The test numerology will be preferably 30kHz subcarrier spacing and 100 MHz Bandwidth, if supported. Otherwise, it will use any available subcarrier space and the highest bandwidth supported by the O-RU DUT.
    - The O-RU DUT:
      * supports the default parameters in clause 3.2.1.1.1 of this document.
      * has installed current release of shipping software.
      * has at least two conducted antenna ports (or TAB connectors) to be connected to a signal analyzer. Likewise, it must have at least two conducted antenna ports or TAB connectors to be connected to a signal generator.
      * be fully calibrated up to the antenna ports or (TAB connectors) (if needed). It is expected to be calibrated by O-RU vendor prior to testing.
    - The TER:
      * is capable of carrying out any signal processing required to generate and demodulate 3GPP compliant waveforms.
      * is able to calculate or extract beamweights (or magnitude and phase relations) between antenna ports or TAB connectors. Alternatively, and if the O-RU DUT manufacturer provides the list of beam directions supported by the O-RU DUT, TER might calculate or extract the beam direction instead of the beamweights.
      * is able to generate and deliver signals with the required beamweights (or magnitude and phase relations) at the antenna ports or TAB connectors.
      * is fully calibrated up to the interfaces where is connected to the O-RU DUT antenna ports (or TAB connectors). For that, a known test signal might be either injected by the TER into the O-RU DUT, or internally generated by the O-RU DUT, and the O-RU DUT must not apply any digital or analog beamweights to the known test signal. One possible method to perform calibration uses injected C-Plane and U-Plane signals from TER into the O-RU and using C-Plane messages with beamID=0.
    - The O-DU emulator of the TER:
      * is capable of generating and sending U-Plane messages containing 3GPP test frames following the corresponding Stock sectioning defined above, as well as be capable of capturing U-Plane messages and extracting 3GPP test frames (i.e. IQ data) from the captured U-Plane messages.
      * is capable of generating the C-Plane messages for, receiving, extracting and demodulating the 3GPP test frames following the corresponding Stock sectioning defined above.
    - For DMRS-BF tests, the TER setup modifications are:
      * RF Signal Generator / System which can be a combination of test equipment, or an integrated one, that provides all the testing capabilities needed:
        + RF Signal Generator capable of generating wanted signals (3GPP compliant SU-MIMO and MU- MIMO signals).
        + RF Signal Generator capable of generating Additive white Gaussian Noise and Interference signals. It can be a single device or multiple devices.
        + Beamformer to apply beam weights to each of the signals under tests
      * CUSM-Plane emulator with expanded capability:
        + is able to operate with and without reference Channel Estimation (CE) and Equalization (EQ) over the received signal from DUT (Uplink direction).

NOTE: The definition of the reference algorithms used for Channel Estimation and Equalization in the TER are not defined in the present document,

* + - * + is capable of measuring and reporting EVM measurements after CE and EQ if receiving unequalized IQ data (when testing O-RU DUT with DMRS-BF-NEQ), or directly from received equalized IQ data (when testing O-RU DUT with DMRS-BF-EQ),
        + is capable of measuring and reporting BER and/or BLER measurements of the received signal from DUT (Uplink direction) after demapping and decoding,

NOTE: The definition of the reference algorithms used for demapping and decoding in the TER are not defined in the present document,

* + - * + is capable of parsing ST9 and ST10 messages to extract SINR and RRM measurements.

![A diagram of a door  Description automatically generated]({{site.baseurl}}/assets/images/6ba4831e0247.png)

###### Figure 3.2.3.2-3 Test Equipment set up for testing O-RU DUT with DMRS-BF

* + - The TER might have less testing ports than the O-RU DUT conducted antenna ports (or TAB connectors) if testing is carried out sequentially; or as many antenna ports as the number of conducted antenna ports (or TAB connectors) under test if testing is carried out simultaneously.
    - It is up to the TER on how to extract the beamweights (or magnitude and phase relation) between the antenna ports or TAB connectors, or the beam direction / properties, in order to match it with the manufacturer's declaration.
    - The user payload will be generated as PN23 with a seed of all ones.
    - It applies to the O-RAN CUS Specification [2]:
      * Clause 7.4
      * Clause 8.3.2
      * Clause 8.3.3
      * Clause 12
      * Annex J

#### ![]({{site.baseurl}}/assets/images/a34c702e4021.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - No Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with no beamforming (beamId=0x000) and with one spatial stream (single eAxC).

###### Test Entrance Criteria

* + Manufacturers' declaration that defines list of magnitude and phase relation (or beamweights) between antenna ports or TAB connectors and/or beam directions with antenna array characteristics when O-RU DUT is operating with no beamforming.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Extract either the beamweights, or magnitude and phase relation, or beam direction from the measured signal.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam direction, should match the expected relation, or beam direction, for the expected no beamforming within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/7934952454d2.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - No Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with no beamforming (beamId=0x000) and with one spatial stream (single eAxC).

###### Test Entrance Criteria

* + Manufacturers' declaration that defines list of magnitude and phase relation (or beamweights) between antenna ports or TAB connectors and/or beam directions with antenna array characteristics when O-RU DUT is operating with no beamforming.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL- SCH) using Section Type 1 messages. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different set of beamweights or phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the phase relation expected for no beamforming.

#### ![]({{site.baseurl}}/assets/images/6ff2f68941b0.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC).

The transmitted beam direction is measured for each indexed beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted direction could be defined by the phase relation between the antenna ports or TAB connectors under test, or directly by extracting the beam direction.

The elevation ? and azimuth ? angles are defined as in [2] clause 12.4.2.2

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming conformance test might include multiple tests that the O-RU must comply:

The test should include the following beams:

* 1. A beam with 0 degrees azimuth (?) and elevation (?) angles.
  2. A beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
  3. A beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
  4. A beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
  5. A beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of beam indices and their associated magnitude and phase relation between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Extract either the beamweights, or magnitude and phase relation, or beam direction from the measured signal.

###### Test Requirement (expected result)

* 1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
  2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
  3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam direction, should match the expected relation, or beam direction, corresponding to the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/71a199b4e6cb.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC).

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.3 applies, but instead it is related to the uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of beam indices and their associated magnitude and phase relation between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL- SCH) using Section Type 1 messages. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different set of beamweights or phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beam under test.

#### ![]({{site.baseurl}}/assets/images/a922007e9e60.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with weight-based dynamic beamforming with one spatial stream (single eAxC).

The transmitted beam direction is measured for each weighted beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted direction could be defined by the phase relation between the antenna ports or TAB connectors under test, or by directly extracting the beam direction.

The elevation ? and azimuth ? angles are defined as in [2] clause 12.4.2.2:

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based Dynamic Beamforming conformance test should evaluate the following beams for the O-RU to comply:

* 1. A weight-based beam with 0 degrees azimuth (?) and elevation (?) angles.
  2. A weight-based beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
  3. A weight-based beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
  4. A weight-based beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
  5. A weight-based beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles will be measured.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight--based Dynamic Beamforming conformance test should also evaluate the following compression methods for each of the supported beams described above (a. to e.) for the O-RU to comply:

1. No compression method applied to the beamforming weights.
2. Block floating point compression method applied to the beamforming weights with 14-bit mantissa.
3. Block scaling compression method applied to the beamforming weights with 14-bit scaler.
4. u-law compression method applied to the beamforming weights with 14-bit fixed width.
5. Depending on what type of Beamspace compression the DUT supports, either Beamspace compression method applied to the beamforming weights with 14-bit scaler or Beamspace compression method applied to the beamforming weights with 14-bit mantissa.

If the O-RU does not support all the compression methods described above, fewer than 5 compression methods will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of frequency domain (?) and or time domain (?) weights for each supported beam, or alternatively, list of gain and phase relation, or complex beam weights, between antenna ports or TAB connectors for each supported beam. Also, the O-RU needs to report to the O-DU the antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**
     + Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
     + Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
     + Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
     + Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (DL-SCH and DCI) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x01 to convey the beam weights, it is not required that the next sections contain extension type 1 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Extract either the beamweights, or magnitude and phase relation, or beam direction from the measured signal.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam direction, should match the expected relation, or beam direction, corresponding to the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/53262520b85e.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Weight-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with weight-based beamforming and with one spatial stream (single eAxC).

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.5 but applies to the uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of frequency domain (?) and or time domain (?) weights for each supported beam, or alternatively, list of gain and phase relation, or complex beam weights, between antenna ports or TAB connectors for each supported beam . Also, the O-RU needs to report to the O-DU the antenna array characteristics

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (UL-SCH) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x01 to convey the beam weights, it is not required that the next sections contain extension type 1 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different set of beamweights or phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beam under test.

#### ![]({{site.baseurl}}/assets/images/7d69fa53f237.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with attributed-based dynamic beamforming with one spatial stream (single eAxC).

If the O-RU DUT supports Attribute based Dynamic Beamforming, this test is mandatory for the O-RU DUT to be O-RAN conformant.

The transmitted beam direction and attributes are measured for each attributed beam required in this measurement, see below. The measured transmitted direction and attributes, i.e. pointing azimuth and elevation angles, beamwidths and sidelobe suppression, is compared to manufacturer-designated direction and attributes.

Transmitted direction and beam attributes are defined by the magnitude and phase relation between the antenna ports or TAB connectors under test, or by directly extracting the beam properties.

The elevation ? and azimuth ? angles are defined as in [2] clause 12.4.2.2.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based Dynamic Beamforming conformance test should evaluate the following beams for the O-RU to comply:

* 1. An attribute-based beam with 0 degrees azimuth (?) and elevation (?) angles with any beamwidth and sidelobe suppression supported by the O-RU under this beam direction.
  2. An attribute-based beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?) with the widest beamwidth and lowest sidelobe suppression supported for this specific beam direction.
  3. An attribute-based beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?) with the narrowest beamwidth and highest sidelobe suppression supported for this specific beam direction.
  4. An attribute-based beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?) with the widest beamwidth and lowest sidelobe suppression supported for this specific beam direction.
  5. An attribute-based beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?) with the narrowest beamwidth and highest sidelobe suppression supported for this specific beam direction.

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles and attribute configurations will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of supported beam directions (azimuth ? and elevation ? angles) attributes that are supported by the O-RU and their associated gain and phase relation, or complex weight, between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**
     + Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
     + Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
     + Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
     + Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (DL-SCH and DCI) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x02 to convey the beam weights, it is not required that the next sections contain extension type 2 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Extract either the beamweights, or magnitude and phase relation, or beam properties from the measured signal.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam properties, should match the expected beam properties corresponding to the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/243b01769e82.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Attribute-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with attribute-based beamforming with one spatial stream (single eAxC).

Same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.7 but considering uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of supported beam directions (azimuth ? and elevation ? angles) attributes that are supported by the O-RU and their associated gain and phase relation, or complex weight, between antenna ports or TAB connectors and/or beam directions with antenna array characteristics

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (UL-SCH) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x02 to convey the beam weights, it is not required that the next sections contain extension type 2 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different set of beamweights or magnitude and phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different sets of beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam properties.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beam under test.

#### ![]({{site.baseurl}}/assets/images/b80141740b7d.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO).

For Category A radios, the test is for each polarization separately and consequently either different or same channel models can be defined for each of the polarization. For Category B, same channel might be used for both polarizations and the test might measure each polarization separately.

The transmitted beam direction is measured for each scenario required in this measurement. The measured transmitted direction is extracted from the decoded received signal in the TER. Transmitted direction is defined by properly receiving a data transmission between the O-RU and the target User Equipment while destroying or heavily attenuating the data transmission between the O-RU and the other User Equipment.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming conformance test should evaluate the following scenarios for the O-RU to comply and will rely on TER Channel Emulation capabilities as shown in Figure 3.2.3.2-3.

![]({{site.baseurl}}/assets/images/0f45728e23ab.png)

###### Figure 3.2.3.2-3 TER with Channel Emulation Capability

a. A scenario where two spatial streams, or eAxC flows, are generated for two users (one layer each) with M antenna ports or TAB connectors. The O-DU will report to the O-RU via C plane messages an emulated

channel estimate H ? [h1, . . . , hM, h1, . . . , hM] ? C2xM. The emulated channel H shall model a static channel,

1 1 2 2

with rank not lower than the number of spatial streams, and it shall not be a block-diagonal channel. As an example, a Butler channel model could be implemented as emulated channel. The O-RU will calculate and

apply the beamweight matrix G ? [g1, . . . , gM, g1, . . . , gM] ? CMx2 in such that the received signal at the

1 1 2 2

users is the same as the generated in the O-DU. It is up to the O-RU on how to calculate the beamforming weights, for example Zero-forcing, regularized zero-forcing / MMSE, etc.

If O-RU supports Analog Beamforming (Time Domain Beamforming), the test should not apply any analog beamforming or time domain beamforming. In this case, M is not the number of antenna ports or TAB connectors but the number of TRX channels supported by the O-RU.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal analyzer.
  + The TER equipment must either include a channel emulator between the O-RU antenna ports and the signal analyzer or the signal analyzer be capable of applying the required channel matrix being emulated between the O-RU and the users.
  + Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 5 and 6 messages. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Capture the test signals and pass them through a channel emulator or apply the signal processing required to emulate the channel under test.
5. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.

#### ![]({{site.baseurl}}/assets/images/1d6d7a86d544.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Channel-Information-based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO).

Same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.10 but considering uplink direction.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal generator.
  + The TER equipment must either include a channel emulator between the O-RU antenna ports and the signal generator or the signal generator be capable of applying the required channel matrix being emulated between the users and the O-RU.
  + Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signals through a channel emulator or apply the required signal processing to emulate the channel under test.
3. Inject the resulting test signals into the antenna ports (or TAB connectors).
4. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL-SCH) using Section Type 5 and 6. No Section Type zero messages will be used for this test.
5. Play the C plane messages to the O-RU respecting timing windows described in clause 2.4. while also triggering the signal source.
6. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.

#### ![]({{site.baseurl}}/assets/images/04b05705bcc6.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Flexible Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC) using section extension 11.

The transmitted beam direction is measured for each indexed beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted direction could be defined by the phase relation between the antenna ports or TAB connectors under test, or directly by extracting the beam direction.

The elevation ? and azimuth ? angles are defined as in [2] clause 12.4.2.2 :

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Flexible Predefined-beam Beamforming conformance test might include multiple tests that the O-RU must comply. The test should include any two of the following beams:

* 1. A beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
  2. A beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
  3. A beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
  4. A beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

###### Test Entrance Criteria

* Manufacturers' defined list of beam indices and their associated magnitude and phase relation between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every slot should be described by one section (DL-SCH and DCI) using Section Type 1 and will contain section extension extType=0x0B to convey the beamIDs for Beam1 and Beam2, i.e. BeamID1 and BeamID2.

The fields in Section Extension 11 should contain the following values:

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **disableBFWs** | **RAD** | **numBundPrb** | **bfwCompHdr** |
| 1 | 0 | floor(allocPRBsymbol /2) | (depends on method) |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Bundle** | **bfwCompParam** | **beamId** |
| PRB bundle 0 | (depends on Compression method) | beamID1 |
| PRB bundle 1 | (depends on Compression method) | beamID2 |

</div>

Where allocPRBsymbol is the number of allocated PRBs per symbol for the Downlink test waveform under a certain Bandwidth and Subcarrier spacing configuration. For example, for a 3GPP NR-FR1-TM1.1 with 100MHz bandwidth and 30kHz subcarrier spacing, the allocPRBsymbol is 273.

If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.

No Section Type zero messages will be used for this test.

1. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
3. Extract either the beamweights, or magnitude and phase relation, or beam direction from the measured signal.

###### Test Requirement (expected result)

* 1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
  2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
  3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam direction, should match the expected relation, or beam direction, corresponding to the beams under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/5618b3a29e74.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Flexible Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC) using section extension 11.

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.11 applies, but instead it is related to the uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of beam indices and their associated magnitude and phase relation between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every slot should be described by one section (UL-SCH) using Section Type 1 messages and will contain section extension extType=0x0B to convey the beamIDs for Beam1 and Beam2,

i.e. BeamID1 and BeamID2.

The fields in Section Extension 11 should contain the following values:

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **disableBFWs** | **RAD** | **numBundPrb** | **bfwCompHdr** |
| 1 | 0 | floor(allocPRBsymbol/2) | (depends on method) |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Bundle** | **bfwCompParam** | **beamId** |
| PRB bundle 0 | (depends on Compression method) | beamID1 |
| PRB bundle 1 | (depends on Compression method) | beamID2 |

</div>

Where allocPRBsymbol is the number of allocated PRBs per symbol for the Uplink test waveform under a certain Bandwidth and Subcarrier spacing configuration. For example, for a 3GPP G-FR1-A1-5 test waveform with 100MHz bandwidth and 30kHz subcarrier spacing, the allocPRBsymbol is 51.

If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.

No Section Type zero messages will be used for this test.

1. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
2. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
3. Repeat the previous steps but now in step b apply a different set of beamweights or phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or equivalently the magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beams under test.

#### ![]({{site.baseurl}}/assets/images/a74fa1fbbad0.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Flexible Real Time Weights Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with flexible weight-based dynamic beamforming with one spatial stream (single eAxC) using section extension 11.

The transmitted beam direction is measured for each weighted beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted direction could be defined by the phase relation between the antenna ports or TAB connectors under test, or by directly extracting the beam direction.

The elevation ? and azimuth ? angles are defined as in [2] clause 12.4.2.2:

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Flexible Real Time Weights Beamforming conformance test should evaluate any two of following beams (called henceforth Beam1 and Beam2) for the O-RU to comply:

* 1. A weight-based beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
  2. A weight-based beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
  3. A weight-based beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
  4. A weight-based beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Flexible Real Time Weights Beamforming conformance test should also evaluate the following compression methods for each of the supported beams described above (a. to e.) for the O-RU to comply:

1. No compression method applied to the beamforming weights.
2. Block floating point compression method applied to the beamforming weights with 14-bit mantissa.
3. Block scaling compression method applied to the beamforming weights with 14-bit scaler.
4. u-law compression method applied to the beamforming weights with 14-bit fixed width.
5. Depending on what type of Beamspace compression the DUT supports, either BBeamspace compression method applied to the beamforming weights with 14-bit scaler or Beamspace compression method applied to the beamforming weights with 14-bit mantissa.

If the O-RU does not support all the compression methods described above, fewer than 5 compression methods will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of frequency domain (?) and or time domain (?) weights for each supported beam, or alternatively, list of gain and phase relation, or complex beam weights, between antenna ports or TAB connectors for each supported beam. Also, the O-RU needs to report to the O-DU the antenna array characteristics.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every slot should be described by one section (DL-SCH and DCI) using Section Type 1 and will contain section extension extType=0x0B to convey the beam weights for Beam1 and Beam2.

The fields in Section Extension 11 should contain the following values:

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **disableBFWs** | **RAD** | **numBundPrb** | **bfwCompHdr** |
| 0 | 0 | floor(allocPRBsymbol /2) | (depends on method) |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Bundle** | **bfwCompParam** | **beamId** | **bfwI / bfwQ** |
| PRB bundle 0 | (depends on Compression method) | beamID1 | Weights for Beam1 |
| PRB bundle 1 | (depends on Compression method) | beamID2 | Weights for Beam2 |

</div>

Where allocPRBsymbol is the number of allocated PRBs per symbol for the TM1.1 test waveform under a certain Bandwidth and Subcarrier spacing configuration. For example, for a TM1.1 with 100MHz bandwidth and 30kHz subcarrier spacing, the allocPRBsymbol is 273.

If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.

1. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
3. Extract either the beamweights, or magnitude and phase relation, or beam direction from the measured signal.

###### Test Requirement (expected result)

* 1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
  2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
  3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam direction, should match the expected relation, or beam direction, corresponding to the beams under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/e0449eb14ff5.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Flexible Real Time Weights Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with weight-based beamforming and with one spatial stream (single eAxC) using section extension 11.

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.13 but applies to the uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of frequency domain (?) and or time domain (?) weights for each supported beam, or alternatively, list of gain and phase relation, or complex beam weights, between antenna ports or TAB connectors for each supported beam. Also, the O-RU needs to report to the O-DU the antenna array characteristics

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beam weights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every slot should be described by one section (UL-SCH) using Section Type 1 messages and will contain section extension extType=0x0B to convey the beam weights.

The fields in Section Extension 11 should contain the following values:

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **disableBFWs** | **RAD** | **numBundPrb** | **bfwCompHdr** |
| 0 | 0 | floor(allocPRBsymbol /2) | (depends on method) |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Bundle** | **bfwCompParam** | **beamId** | **bfwI / bfwQ** |
| PRB bundle 0 | (depends on Compression method) | beamID1 | Weights for Beam1 |
| PRB bundle 1 | (depends on Compression method) | beamID2 | Weights for Beam2 |

</div>

Where allocPRBsymbol is the number of allocated PRBs per symbol for the TM1.1 test waveform under a certain Bandwidth and Subcarrier spacing configuration. For example, for a TM1.1 with 100MHz bandwidth and 30kHz subcarrier spacing, the allocPRBsymbol is 273.

If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.

1. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
2. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
3. Repeat the previous steps but now in step b apply a different set of beamweights or phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or equivalently the magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beams under test.

#### ![]({{site.baseurl}}/assets/images/b958976d3b24.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Layer nulling Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO) with section extension 14.

For Category A radios, the test is for each polarization separately and consequently either different or same channel models can be defined for each of the polarization. For Category B, same channel might be used for both polarizations and the test might measure each polarization separately.

The transmitted beam direction is measured for each scenario required in this measurement. The measured transmitted direction is extracted from the decoded received signal in the TER. Transmitted direction is defined by properly receiving a data transmission between the O-RU and the target User Equipment while destroying or heavily attenuating the data transmission between the O-RU and the other User Equipment.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Layer nulling Beamforming conformance test should evaluate the following scenarios for the O-RU to comply and will rely on TER Channel Emulation capabilities as shown in Figure 3.2.3.2-3.

* 1. The conformance test will contain two test runs where in each of the test runs, the O-DU will indicate to the O-RU that one of the users/layers to be null at a time. For example, first test run will indicate only UE 0 Layer 0 to be null (i.e. null eAxC 0) while the second test run will indicate only UE 1 layer 0 to be null (i.e. null eAxC 1), see figure Figure 3.2.3.2-4.

![]({{site.baseurl}}/assets/images/89f31e68fb7c.png)

###### Figure 3.2.3.2-4 Layer Nulling Beamforming Tests

* 1. A scenario where two spatial streams, or eAxC flows, are generated for two users (one layer each) with M antenna ports or TAB connectors. The O-DU will report to the O-RU via C plane messages using Section

Types 5 and Section Types 6 an emulated channel estimate H ? [h1, . . . , hM, h1, . . . , hM] ? C2xM. The

1 1 2 2

emulated channel H shall model a static channel, with rank not lower than the number of spatial streams,

and it shall not be a block-diagonal channel. As an example, a Butler channel model could be implemented as emulated channel. The O-RU will calculate the beamweight matrix G ?

[g1, . . . , gM, g1, . . . , gM] ? CMx2 for all layers/users but it will only apply the beamweights to the

1 1 2 2

users/layers that have not been indicated as null by the O-DU emulator. The TER should only receive the non-null user/layers for each of the test runs. It is up to the O-RU on how to calculate the beamforming weights, for example Zero-forcing, regularized zero-forcing / MMSE, etc.

If O-RU supports Analog Beamforming (Time Domain Beamforming), the test should not apply any analog beamforming or time domain beamforming. In this case, M is not the number of antenna ports or TAB connectors but the number of TRX channels supported by the O-RU.

###### Test Entrance Criteria

* The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal analyzer.
* The TER equipment must either include a channel emulator between the O-RU antenna ports and the signal analyzer or the signal analyzer be capable of applying the required channel matrix being emulated between the O-RU and the users.
* Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.

###### Test Methodology

* 1. **Initial Conditions**
     + Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
     + Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
     + Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
     + Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 5 and 6 messages. Section type 5 messages will contain section extension 14 indicating the nulling of the eAxC to be nulled under this test run. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Capture the test signals and pass them through a channel emulator or apply the signal processing required to emulate the channel under test.
5. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
6. Repeat procedure a. to e. for the other eAxC to be nulled (i.e. the remining eAxC not tested yet).

###### Test Requirement (expected result)

1. For each of the test runs, the expected signal (i.e. the expected User containing non-nulled eAxC data) is measured by the signal analyzer and should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM)
2. For each of the test runs, the non-expected signal (i.e. the non-expected User containing nulled eAxC data) should be measured but no data should be detected (or heavily attenuated) by the signal analyzer.
3. For each of the test runs, the expected test frame to be received for each test run by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.

#### ![]({{site.baseurl}}/assets/images/8eb9824cf8a0.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Layer nulling Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO) with section extension 14.

Same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.15 but considering uplink direction.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal generator.
  + The TER equipment must either include a channel emulator between the O-RU antenna ports and the signal generator or the signal generator be capable of applying the required channel matrix being emulated between the users and the O-RU.
  + Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject both test signals, for both Users, through a channel emulator or apply the required signal processing to emulate the channel under test.
3. Inject the resulting test signals into the antenna ports (or TAB connectors).
4. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL-SCH) using Section Type 5 and 6. Section type 5 messages will contain section extension 14 indicating the nulling of the eAxC to be nulled under this test run. No Section Type zero messages will be used for this test.
5. Play the C plane messages to the O-RU respecting timing windows described in section 2.4. while also triggering the signal source.
6. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
7. Repeat procedure a. to f. but now null other eAxC to be nulled (i.e. the remining eAxC not tested yet).

###### Test Requirement (expected result)

1. For each of the test runs, the expected test frame (i.e. the non-nulled eAxC) received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. For each of the test runs, the non-expected test frame (i.e. the nulled eAxC) received by the TER/O-DU should be measured and confirm that no data or heavily attenuated data is measured.

#### ![]({{site.baseurl}}/assets/images/5cb7fce54e22.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming with mixed numerology

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with channel-information-based beamforming and mixed numerology in combination with a beam-ID-based beamforming and mixed numerology.

For Category A radios, the test is for each polarization separately and consequently either different or same channel models can be defined for each of the polarization. For Category B, same channel might be used for both polarizations and the test might measure each polarization separately.

The two beams share the spectrum equally and the transmitted beam directions for UE-based and beam-ID-based beamforming are either sufficiently separated in space or a guard band can be signaled in between to avoid interference. On each beam, i.e. the beam signaled via beam ID and the beam signaled via UE-ID the testcase emulates a change of the numerology.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming with mixed numerologies conformance test should evaluate the following scenarios for the O-RU to comply and will rely on TER capabilities as shown in Figure 3.2.3.2-5.

![]({{site.baseurl}}/assets/images/931aaf47233b.png)

###### Figure 3.2.3.2-5 Test setup for channel information based beamforming with mixed numerologies

a. A scenario where two spatial streams, or eAxC flows, are generated for two users (one layer each) with M antenna ports or TAB connectors. The O-DU will signal to the O-RU via C plane messages a beam ID based beam and a UE ID based beam that are either sufficiently separated in the spatial domain to avoid interference or a guard band is configured between the frequency domain resources. The two beams share the channel bandwidth in equal parts, depending on the applied numerology. The beam ID beam direction is based on manufacturer declaration and the O-DU may report to the O-RU via C plane messages an emulated channel

estimate H ? [h1, . . . , hM] ? C2xM allowing the computing of the beamweight matrix G ? [g1, . . . , gM] ?

2 2 2 2

CMx2 in such that the received signal at the UE ID based beam is the same as the generated in the O-DU. It is up to the O-RU on how to calculate the beamforming weights, for example Zero-forcing, regularized zero- forcing / MMSE, etc.

If O-RU supports Analog Beamforming (Time Domain Beamforming), the test should not apply any analog beamforming or time domain beamforming. In this case, M is not the number of antenna ports or TAB connectors but the number of TRX channels supported by the O-RU.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal analyzer.
  + The TER equipment must be able to receive the two beams via an RF connection stage. This can for example include a channel emulator between the O-RU antenna ports and the signal analyzer or a switch matrix with sufficient decoupling between its connectors.
  + Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.
  + Manufacturer provides information about beam ID based beamforming to allow the signaling of the channel information allowing the UE-based beam in a sufficiently separated spatial direction to avoid interference. Alternatively, a guard band can be signaled between the two frequency allocations on each beam.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. Due to the symbol duration dependency on the subcarrier spacing, the section corresponding to 15 kHz SCS covers 2 OFDMA symbols duration, the section corresponding to 30 kHz SCS covers 4 OFDMA symbols and the section corresponding to 60 kHz SCS covers 8 OFDMA symbol duration to have a common measurement time of 1 ms for each numerology.
3. The C-Plane message schedules two sections separated in the frequency domain at the same time, the channel bandwidth is divided in two sections of equal size. A guard band between the two frequency sections can be configured. One section presents beam ID based beamforming and the simultaneous section presents the UE ID based beamforming.
4. The O-DU emulator signals Section Type 1 corresponding to beam ID specific beamforming for the measurement duration of 4 OFDMA symbols and 30 kHz SCS. The user plane data is a new PN23 sequence. After the measurement duration of 4 OFDMA symbols, the O-DU emulator signals Section Type 3 with mixed numerology and schedules an SCS of 15 kHz. The scheduling and measurement duration is 2 OFDMA symbols. The user plane data is a new PN23 sequence. The beam ID value is the same in Section Type 1 and Section Type 3 and the occupied bandwidth for both numerologies should match as much as possible.
5. The O-DU emulator signals Section Type 5 corresponding to the UE ID based beamforming for the measurement duration of 4 OFDMA symbols and 30 kHz SCS. The user plane data is a new PN23 sequence. After the measurement duration of 4 OFDMA symbols, the O-DU emulator signals Section Type 5 with section extension 15 mixed numerology and schedules an SCS of 60 kHz. The scheduling and measurement duration is 8 OFDMA symbols. The user plane data is a new PN23 sequence. The UE ID value is different for the Section Type 5 and Section Type 5 with section extension 15 case, emulating a situation of time domain beamforming to two separate UE IDs. The occupied bandwidth for both consecutive UE ID beams should match as much as possible.
6. The O-DU emulator may schedule after the two scheduling periods of 1 ms each (4 OFDMA symbols followed by 2 OFDMA for 15 kHz SCS / 8 OFDMA symbols for 60 kHz SCS) another two sections with 30 kHz SCS and Section Type 1 / Section Type 5 scheduling, see Figure 3.2.3.2-6
7. Encapsulate the IQ data in U-Plane messages. As described, there will be 4 user plane data section, each one containing a new PN23 sequence.
8. Capture the test signals and pass them through a channel emulator or apply the signal processing required to receive the two beams generated by the DUT.
9. ![]({{site.baseurl}}/assets/images/c60543ac7651.jpg)Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
|  | | | Optional guard band |  |
|  | Section type 5 + Section extension type 15 |  | | |

</div>

###### Figure 3.2.3.2-6 Test execution details

1. **Test Requirement (expected result)**
2. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.

#### ![]({{site.baseurl}}/assets/images/3265d23e7c8e.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Bit masking for antenna mapping in Channel-Information-based Beamforming in uplink direction

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive properly a basic 3GPP test frame with bit masking signaling an antenna mapping for channel-information-based beamforming in uplink direction.

The O-DU emulator shall signal antenna port combinations via section extension type 16 as declared by the manufacturer. An uplink signal is fed into the O-RU antenna ports signaled as belonging to the antenna mapping and the received signal should indicate good reception by analysis of EVM and PN pattern matching. In a second analysis, the uplink signal is fed into the O-RU antenna ports that are not signaled as belonging to the antenna mapping and the received signal quality, e.g. EVM should be much worse compared to the proper reception case. The UC-Plane O-RU Scenario Class Beamforming 3GPP UL - bit masking for antenna mapping in Channel- Information-based Beamforming should evaluate the following scenarios for the O-RU to comply and will rely on TER capabilities as shown in Figure 3.2.3.2-7.

![]({{site.baseurl}}/assets/images/fcd075031c64.png)

###### Figure 3.2.3.2-7 Test setup for channel information based beamforming with bit masking for antenna mapping in uplink direction

1. **Test Entrance Criteria**
   * The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal generator.
   * The TER equipment must be able transmit two uplink signals that are fed into the antenna ports of the O-RU. The feeding of the uplink signal into the antenna ports can be done simultaneously or consecutively.
   * The TER may contain a channel emulation stage or a switch matrix to allow the proper connection of the uplink signal with the O-RU antenna port or a consecutive test with manual connection is possible
   * Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.
   * Manufacturer provides information about antenna mapping to enable correct signaling via C-plane

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. The uplink signal is described by table A.1-1 in ETSI TS 138.141-1 and is referred to as G-FR1-A1-5 with the power that is about 30 dB higher as the minimum sensitivity. The data content is a new PN23 sequence in each of the two test steps.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test.
3. The O-DU emulator signals via section extension type 16 without section extension 10 the antenna masking dependent on manufacturer declaration. The antenna elements belonging to the signaled antenna mask are identified by the first eAxC value in section extension type 16.
4. Test step 1: The signal generator uplink signal containing a new PN23 sequence in the FRC G-FR1-A1-5 is connected to the antenna port identified as the first eAxC value corresponding to the situation where the uplink signal is properly connected to the receiving antenna port. The received signal should indicate a good EVM signal quality and the PN23 sequence matches between generator and analyzer
5. Test step 2: A second uplink signal containing a new PN23 sequence in the FRC G-FR1-A1-5 is connected to the antenna port not identified as the first eAxC value in the section extension type 16 message corresponding to the situation where the uplink signal is wrongly connected to the receiving antenna port. The received signal quality should be much worse compared to the signal quality detected in paragraph (d)
6. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. For the situation of the uplink signal fed into the first eAxC antenna port signaled as belonging to the antenna mask, the signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received in test step 1 by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The received uplink signal in test step 2 should indicate a EVM not satisfying the 3GPP performance or indicate a PN pattern mismatch

#### ![]({{site.baseurl}}/assets/images/0bd4d8270e69.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - User port grouping in Channel-Information-based Beamforming in downlink direction

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with UE based antenna port grouping and channel-information-based beamforming. The test emulates a downlink signal with 2 layers belonging to the same UE. Via section extension type 17, the O-DU emulator signals the same UE ID for the two downlink layer signal and the analyzer shall indicate a good signal quality. In a second test step, the signal analyzer is connected to an antenna port of the O-RU that is not signaled as belonging to the user port group and the received signal quality should be much worse compared to test step 1.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - user port grouping for antenna mapping in

Channel-Information-based Beamforming should evaluate the following scenarios for the O-RU to comply and will rely on TER capabilities as shown in Figure 3.2.3.2-8

![]({{site.baseurl}}/assets/images/f5bb71f5c3d2.png)

###### Figure 3.2.3.2-8 Test setup for channel information based beamforming with user port grouping antenna mapping in downlink direction

a. A scenario where two spatial streams, or eAxC flows, are generated for one user. The antenna configuration of the O-RU has M antenna element rows as of manufacturer declaration and R<M antenna elements will be used to transmit the two layers to the user. The O-DU will signal to the O-RU via C plane messages a UE ID based beam and a user port grouping. The O-DU may report to the O-RU via C plane messages an emulated

channel estimate H ? [h1, . . . , hM] ? C1xM allowing the computing of the beamweight matrix G ?

1 1

[g1, . . . , gR, ... , gM] ? CMx1 in such that the received signal at the UE ID based beam is the same as the

1 1 1

generated in the O-DU. It is up to the O-RU on how do the antenna port grouping and the selection of the number of R antenna element rows and to calculate the beamforming weights, for example Zero-forcing, regularized zero-forcing / MMSE, etc.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal analyzer.
  + The TER equipment must be able to receive the two layers via an RF connection stage. This can for example include a channel emulator between the O-RU antenna ports and the signal analyzer or a switch matrix.
  + Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.
  + Manufacturer provides information about antenna mapping to enable correct signaling via C-plane

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. The user plane data content is a new PN23 for each of the two layers.
2. The O-DU emulator signals Section Type 5 with section extension type 10 and section extension type 17 corresponding to the UE ID based beamforming. Section extension type 17 indicates the value numUeID for the first user on the two layers dedicated to this user
3. Test step 1: The O-DU emulator provides a user plane data signal representing two layers with a new PN23 sequence on each layer. The C-Plane signals an antenna port grouping using the section extension type 17. The received signal should indicate a good EVM signal quality and the PN23 sequence matches between generator and analyzer on both layers dedicated to the user.
4. Test step 2: The signal analyzer is connected to an antenna port that is not signaled as belonging to the user port group via section extension type 17. This can be done simultaneously to test step 1 or consecutively. The received signal quality should be much worse compared to the signal quality detected in test step1.
5. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured on the two layers belonging to the user group port by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The received downlink signal in test step 2 should indicate a EVM not satisfying the 3GPP performance or indicate a PN pattern mismatch

#### ![]({{site.baseurl}}/assets/images/3a91c4f19720.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY, the condition being O-RUs that support either DMRS-EQ or DMRS-NEQ.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with Demodulation Reference Signal-based beamforming (DMRS-BF) with multiple spatial streams from multiple users (i.e. MU-MIMO) using Section Extension 24 (SE24).

The UC-Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based Beamforming conformance test will rely on TER Beamforming capabilities as shown in Figure 3.2.3.2-8.

![A computer screen shot of a computer  Description automatically generated]({{site.baseurl}}/assets/images/8294439cfd53.png)

###### Figure 3.2.3.2-8 TER with Beamforming Capability

As defined in introduction of clause 3.2.3.2 UC-Plane O-RU Scenario Class Beamforming, each of the UE layer in Figure 3.2.3.2-8 shall use a standard 3GPP Reference Sensitivity level definition (clause 7.2 and Annex A TS138.141-1) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 138.141). The power levels shall be at least 30dB above Reference Sensitivity power level as described in clause 3.2.1.1. The test numerology will be preferably 30kHz subcarrier spacing and 100 MHz Bandwidth, if supported. Otherwise, it shall use any available subcarrier space, and the highest bandwidth supported by the O-RU DUT. In addition, the uplink test vector will be generated with UL-SCH in UL slots and allocated to the PRBs 0 to 50 truncated to the carrier bandwidth used for testing.

![A black and blue rectangular object with a blue line  Description automatically generated]({{site.baseurl}}/assets/images/ac4c7349b903.png)

###### Figure 3.2.3.2-9 Uplink test vector to be generated by RF signal generator for each UE layer

Note that this test vector is defined for a Single Input Single Output (SISO) scenario. However, for this test, the test vector is expanded to evaluate the test scenario where two spatial streams, or eAxC flows, are scheduled at the same resource allocation for two users (with one layer each) and with M antenna ports or TAB connectors. The CUSM-Plane emulator will signal to the O-RU via C-plane messages the scheduling of the two ueIds, using Section Type 5 and Section Extension 10 with beamGroupType=10b or beamGroupType=11b depending on O-RU capabilities.

This test case does not test allocated IPN measurement (MEAS\_IPN\_ALLOC =DISABLED), antenna DMRS SNR (andDmrsSnr=0), transform precoding and self assembly. The CUSM-Plane emulator shall assign and schedule the ueIds using any supported number of least significant bits of the ueId to indicate the layers within each user. If an O-RU supports ueId persistence, ueId persistence shall not be used "ueId-persistence-enabled=FALSE".

The CUSM-Plane emulator will inform the O-RU of the DMRS configurations for the two streams using Section Extension 24 with entryType 1 and 2. The two DMRS configurations are as follows:

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
|  | **UE 0 Layer 0 (DMRS 0)** | **UE 1 Layer 0 (DMRS 1)** |
| **Ports** | 1000 | 1002 |
| **scrambling ID (nSCID)** | 0 | 1 |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
|  |  |  |
| **Scrambling ID 0 (**n0 **)**  ID | 2 | 3 |
| **Scrambling ID 0 (**n1 **)**  ID | 4 | 5 |
| **DMRS Power Boosting** | 3 dB | |
| **UL DMRS Configuration** | Type 1 | |
| **DMRS Duration (maxLength)** | len1 (Single Symbol) | |
| **DMRS Additional Position (dmrs-AdditionalPosition)** | 1+1 (2) | |
| **UL Mapping Type** | A | |
| **l0** | pos2 | |
| **DMRS Uplink Transform Precoding r16** | False | |
| **Transform Precoding** | False | |

</div>

Same DMRS signal can be used for all available polarizations. Each polarization might be measured separately.

If O-RU supports any other beamforming, these shall not be exercise and tested. If O-RU supports Analog Beamforming (Time Domain Beamforming), the test should not apply any analog beamforming or time domain beamforming. In this case, M is not the number of antenna ports or TAB connectors but the number of TRX channels supported by the O-RU.

There are two layers with two different DMRS configurations to measure in this scenario, two users with one layer each. A succesful received layer is defined as properly receiving data transmission at the O-DU emulator side from a corresponding layer transmitted by a User Equipment. This received data transmission shall be successfully received when it matches the DMRS configuration being signalled to the O-RU.

###### Test Entrance Criteria

* + The O-RU has at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal generator.
  + The O-RU supports enough entry tables of DMRS configuration to process the test vector and configuration under test.
  + The TER equipment either includes a beamformer between the O-RU antenna ports and the UE signal generator or the signal generator be capable of emulating different AoA for different UE.
  + The TER equipment is responsible for generating the RF signals for each UE layer as described in Section A, the corresponding matching O-RAN fronthaul traffic with Section ST5, SE10 and SE24 and the configuration of the DUT via M-Plane.
  + Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described in Section A in the signal source of the TER.
2. Inject the test signals through a beamformer or apply the required signal processing to the layers under test.
3. Get the resulting test signals ready to be injected into the antenna ports (or TAB connectors).
4. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test using Section Type 5 with Section Extension 10 and Section Extension 24.
5. Play the C-plane messages to the O-RU respecting timing windows described in clause 2.4. while also triggering the signal source so the signal is injected into the antenna ports (or TAB connectors).
6. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U- plane messages to the O-DU emulator.
7. Allow for the O-DU emulator to capture the U-Plane messages sent by the O-RU and to run the following measurements on the extracted IQ data for each of the users/layers:
   * if O-RU implements DMRS-BF-EQ:
     + EVM of the received equalized IQ data (no channel estimation and equalization is used in TER).
     + BER or BLER of the received equalized IQ data after layer demapping and decoding in the TER. NOTE 1: The measured BER or BLER depends on the algorithms implemented in both the O-RU DUT and the O-DU TER.

NOTE 2: The algorithms for demapping and decoding to be used in TER are left for future study.

* + if O-RU implements DMRS-BF-NEQ:
    - EVM of the received non-equalized IQ data after the channel estimation and equalization operation in the TER.

NOTE 3: The measured EVM depends on the algorithms implemented in both the O-RU DUT and the O-DU TER.

NOTE 4: The algorithms for channel estimation and equalization to be used in TER are left for future study.

* + - BER or BLER of the received non-equalized IQ data after Channel Estimation, equalization, layer demapping and decoding in the TER.

NOTE 5: The measured BER or BLER depends on the algorithms implemented in both the O-RU DUT and the O-DU TER.

NOTE 6: The algorithms for demapping and decoding to be used in TER are left for future study.

* + demodulate, decode and extract the payload.

###### Test Requirement (expected result)

The test frame received by the TER/O-DU emulator for each of the users/layers should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data (payload).

Report EVM and BER or BLER measured during the test.

### ![]({{site.baseurl}}/assets/images/2741b20004a0.png) UC-Plane O-RU Scenario Class Compression (CMP)

Validate the correct implementation and interpretation of mandatory and optional IQ data compression formats described in [2]. Also, evaluate the consistency in U-Plane signaling.

It applies to the O-RAN CUS Specification [2]:

* + Clause 7.4
  + Clause 7.5.2.10
  + Clause 8.3.3.13
  + Clause 8.3.3.15/16/17
  + Clause 8.3.2
  + Clause 8.3.3
  + Table 10.2-1
  + Annex A
  + Annex A.6

The objective is primarily to test the protocol, prior to the compression algorithms performance.

**Signalling**: IQ Compression related fields in UC-Plane messages include:

* + U-Plane IQ data field
  + C-Plane udCompHdr (per clause 7.5.2.10 of [2])
  + U-Plane udComphdr (per clause 8.3.3.13of [2])
  + U-Plane udCompParam (per clause 8.3.3.15of [2])

**Compression**: The current specification [2] includes 7 compression modes, including uncompressed mode (fixed point). Tests should cover each one of these modes

* + fixed-point
  + block floating-point
  + block scaling
  + mu-law
  + modulation compression (modulation compression not included in this document)
  + Block Floating Point + selective RE sending
  + Modulation Compression + selective RE sending

**IQ Bit Width**: IQ information can be represented using different bit width (1-16 bits). To optimize test time, tests should be performed on a subset of bit widths

For fixed point, block floation point, block scaling, mu-law compressions the subset of bit widths to be tested are

* + 9 bits
  + 14 bits

For modulation compression bit width 4 is used for the test.

#### ![]({{site.baseurl}}/assets/images/77e29a63e840.png) Overview of Compression Test Methodology

A common test methodology and structure will be used across all compression test cases. Each one of the test cases will be defined with specific input parameters and expected output values.

To minimize influence of the Radio's RF performance to the test results, the test methodology will be based on a relative comparison between modulated signal measurements performed on a test frame with uncompressed IQ (fixed 16 bits) and measurements on the same test frame using compressed IQ. The test will verify that the difference between measurements fits within an acceptable range for the test to pass.

For downlink test, the modulated signal measurement is performed by a signal analyzer on the antenna port of the O- RU.

For uplink measurement, the modulated signal measurement is performed with the IQ extracted from the Uplink U- Plane data sent by the O-RU on the O-RAN interface.

The following paragraphs in this overview section outline the details of these common test methodologies.

Test Frame

The test frames used for compression conformance test will be referred in this document as "**NR-FR1-CMP-TST- FRAME-DL"** Downlink Standard Compression Test frame and "**NR-FR1-CMP-TST-FRAME-UL"** Uplink Standard Compression Test frame. They are 5G NR frames based on the description in clause 3.2.1.1.5 with specific attributes described below.

The Downlink UC-Plane test stimulus file includes the C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the NR-FR1-CMP-TST-FRAME-DL test frame.

The Uplink C-Plane test stimulus file includes the C-Plane messages that require the O-RU to provide the uplink U- Plane messages according to the NR-FR1-CMP-TST-FRAME-UL test frame received by the O-RU on its antenna port.

Signalling and IQ information will be based on various compression schemes

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-CMP-TST-FRAME-ST-DL-UNC-16B | Static Downlink Uncompressed (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-UL-UNC-16B | Static Uplink Uncompressed (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-DL-FPF-9B | Static Downlink Fixed Point 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-DL-FPF-14B | Static Downlink Fixed Point 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-UL-FPF-9B | Static Uplink Fixed Point 9 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-UL-FPF-14B | Static Uplink Fixed Point 14 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-DL-BFP-9B | Static Downlink Block Floating Point 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-DL-BFP-14B | Static Downlink Block Floating Point 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-UL-BFP-9B | Static Uplink Block Floating Point 9 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-UL-BFP-14B | Static Uplink Block Floating Point 14 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-DL-BSC-9B | Static Downlink Block Scaling 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-DL-BSC-14B | Static Downlink Block Scaling 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-UL-BSC-9B | Static Uplink Block Scaling 9 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-UL-BSC-14B | Static Uplink Block Scaling 14 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-DL-MLW-9B | Static Downlink Mu-Law 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-DL-MLW-14B | Static Downlink Mu-Law 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-UL-MLW-9B | Static Uplink Mu-Law 9 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-UL-MLW-14B | Static Uplink Mu-Law 14 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-DL-MC | Static Downlink Modulation Compression |
| NR-FR1-CMP-TST-FRAME-ST-DL-UNC-BRE- 16B | Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-ST-UL-UNC-BRE- 16B | Static Uplink Uncompressed (C-plane only) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-ST-DL-BRE-9B | Static Downlink Block Floating Point + Selective RE 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-DL-BRE-14B | Static Downlink Block Floating Point + Selective 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-UL-BRE-9B | Static Uplink Block Floating Point 9 Bits + Selective RE (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-UL-BRE-14B | Static Uplink Block Floating Point 14 Bits + Selective RE (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-DL-MRE | Static Downlink Modcomp + Selective RE Compression (CU\_plane) |

</div>

###### Table 3.2.3-7 Stimulus Files for Static Compression Test

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-CMP-TST-FRAME-NS-DL-UNC-16B | Downlink Uncompressed (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-UL-UNC-16B | Uplink Uncompressed (C-plane) |
| NR-FR1-CMP-TST-FRAME-NS-DL-FPF-9B | Downlink Fixed Point 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-DL-FPF-14B | Downlink Fixed Point 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-UL-FPF-9B | Uplink Fixed Point 9 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-UL-FPF-14B | Uplink Fixed Point 14 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-DL-BFP-9B | Downlink Block Floating Point 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-DL-BFP-14B | Downlink Block Floating Point 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-UL-BFP-9B | Uplink Block Floating Point 9 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-UL-BFP-14B | Uplink Block Floating Point 14 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-DL-BSC-9B | Downlink Block Scaling 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-DL-BSC-14B | Downlink Block Scaling 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-UL-BSC-9B | Uplink Block Scaling 9 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-UL-BSC-14B | Uplink Block Scaling 14 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-DL-MLW-9B | Downlink Mu-Law 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-DL-MLW-14B | Downlink Mu-Law 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-UL-MLW-9B | Uplink Mu-Law 9 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-UL-MLW-14B | Uplink Mu-Law 14 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-DL-MC | Non-Static Downlink Modulation Compression |
| NR-FR1-CMP-TST-FRAME-NS-DL-UNC-BRE- 16B | Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-NS-UL-UNC-BRE- 16B | Static Uplink Uncompressed (C-plane only) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-NS-DL-BRE-9B | Downlink Block Floating Point + Selective RE 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-DL-BRE-14B | Downlink Block Floating Point + Selective RE 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-UL-BRE-9B | Uplink Block Floating Point + Selective RE 9 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-UL-BRE-14B | Uplink Block Floating Point + Selective RE 14 Bits (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-DL-MRE | Downlink Modcomp + Selective RE Compression |

</div>

**Table 3.2.3-8 Stimulus Files for Non-Static Compression Test**

Test Frame Power

To ensure that the compressed IQ exponent value is properly tested, each symbol of the test frame will include 3 sections with different power levels. The Power levels are relative powers to the first group of PRBs transmitted. Any valid 3GPP power level may be used for the first set of PRBs as long as the power levels of the remaining PRBs are also valid. Figure 3.2.3.3-1 below shows PRB power relative to the first set of PRBs.

0 dB for the bottom third of total PRBs in the symbol (referred as PDSCH0)

-10 dB for the middle third of total PRBs in the symbol (referred as PDSCH1)

-20 dB for the upper third of total PRBs in the symbol (referred as PDSCH2)

The spectrum representation of the frame shown in Figure 3.2.3.3-1 below highlights the various power levels for each group of PRBS within a symbol.

![A picture containing object  Description automatically generated]({{site.baseurl}}/assets/images/a1d3c0ca6203.png)

###### Figure 3.2.3.3-1 PRB Spectrum Power Visualization

Test Frame User data

To validate that user data has not been impacted by compression, the test payload for the 3 sections is each based on an individual PN23 sequence that will be measured and compared by the test apparatus.

Test Frame Modulation Scheme

To maximise coverage on the compressed IQ mantissa value, the test frame will use the highest possible modulation, limited to 256 QAM modulation for downlink. An example measurement is show in Figure 3.2.3.3-2.

![A screenshot of a cell phone  Description automatically generated]({{site.baseurl}}/assets/images/9098a0af031a.png)

###### Figure 3.2.3.3-2 Example User Data Modulation Validation

Summary of Required Measurements for Compression Tests

3 measurements types will be required for downlink tests and 4 measurements will be required for uplink tests.

* **Power level**: Using the test frames (NR-FR1-CMP-TST-FRAME-DL and NR-FR1-CMP-TST-FRAME-UL) sent twice with both compressed and uncompressed IQ data, power level measurements are performed to validate compression algorithms influence on Exponent (udCompParam).

The Power level measurements are called:

* + CMP-Uncompressed-Measured-Power-PDSCH0 in dBm
  + CMP-Compressed-Measured-Power-PDSCH0 in dBm
  + CMP-Uncompressed-Measured-Power-PDSCH1 in dBm
  + CMP-Compressed-Measured-Power-PDSCH1 in dBm
  + CMP-Uncompressed-Measured-Power-PDSCH2 in dBm
  + CMP-Compressed-Measured-Power-PDSCH2 in dBm

For the test to pass, the difference between measurements should be within an acceptable range, called

* + ACC\_PWR\_PDSCH0 = +- 1dB
  + ACC\_PWR\_PDSCH1 = +- 1dB
  + ACC\_PWR\_PDSCH2 = +- 1dB
* **EVM**: Using a common test frame sent twice with both compressed and uncompressed IQ data, EVM measurements comparisons between uncompressed IQ and compressed IQ will help validate acceptable compression influence on signal quality.

These 6 EVM measurements required:

* + CMP-Uncompressed-Measured-EVM-PDSCH0 in %
  + CMP-Compressed-Measured-EVM-PDSCH0 in %
  + CMP-Uncompressed-Measured-EVM-PDSCH1 in %
  + CMP-Compressed-Measured-EVM-PDSCH1 in %
  + CMP-Uncompressed-Measured-EVM-PDSCH2 in %
  + CMP-Compressed-Measured-EVM-PDSCH2 in %

For the test to pass, the difference between the compressed and uncompressed measurements for the same PDSCH signal must be within the following range:

* + ACC\_EVM\_PDSCH0 <= 4 percentage points
  + ACC\_EVM\_PDSCH1 <= 4 percentage points
  + ACC\_EVM\_PDSCH2 <= 4 percentage points

![]({{site.baseurl}}/assets/images/ba21abab7110.png)![A screen shot of a video game  Description automatically generated]({{site.baseurl}}/assets/images/338a7b79df8e.png) An example measurement showing both power and EVM is shown below in Figure 3.2.3.3-3.

###### Figure 3.2.3.3-3 Example Compression EVM Measurement

* **Payload Data Integrity**: comparing user data between the O-RAN test frame and the RF measurement to validate that compression does not influence user data. The User data measurements are called:
  + CMP-Uncompressed-BER-PDSCH0
  + CMP-Uncompressed-BER-PDSCH1
  + CMP-Uncompressed-BER-PDSCH2
  + CMP-Compressed-BER-PDSCH0
  + CMP-Compressed-BER-PDSCH1
  + CMP-Compressed-BER-PDSCH2

For the data integrity test to pass, the comparison between stimulus payload and the measured payload should be free of any errors (i.e. BER=0).

* **Presence/Absence of U-Plane Header measurements (uplink only)**: to validate that in the U-Plane PRB header, the udCompHeader, "reserved" and udCompParam fields are correctly absent for Static compression mode or present for other compression modes.

Table 3.2.3-9 describes the measurements required for each compression option in the downlink.

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| Downlink | Power Level | EVM | Data Integrity |
| Uncompressed IQ (fixed 16 bits) | Perform power measurements on the 3 groups of PRBs to create 3 power reference points | Perform EVM measurements on the 3 groups of PRBs to create 3 EVM reference points | N/A |
| Fixed point  (< 16 bits fixed IQ) | Perform the test using same test waveforms in compressed mode and check if 3 power measurements are within acceptable range | Perform the test using same test waveforms in compressed mode and check if 3 EVM measurements are within acceptable range | If power level and EVM OK, then verify user data integrity with BER measurement on payload |
| Block floating point | Perform the test using same test waveforms in compressed mode and check if 3 power measurements are within acceptable range | Perform the test using same test waveforms in compressed mode and check if 3 EVM measurements are within acceptable range | If power level and EVM OK, then verify user data integrity with BER measurement on payload |
| Block scaling | Same as above | Same as above | Same as above |
| Mu Law | Same as above | Same as above | Same as above |
| Modulation Compression | Same as above | Same as above | Same as above |
| Block floating point  + Selective RE | Same as above | Same as above | Same as above |
| Block scaling + Selective RE | Same as above | Same as above | Same as above |

</div>

###### Table 3.2.3-9 Measurements Required for Specific Downlink Compression Options

Compression Tests reference table

As the same methodology is used across the different compression modes, the conformance test can be viewed as series of instances of the same test structure with different parameter values as shown below in

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Test name** | **DL/UL** | **Compression** | **IQ Width** |
| UC-Plane O-RU CMP Scenario - Static Format (SF) | | | |
| UC-Plane O-RU CMP Scenario Static Format (SF) Fixed-Point (FPF) | DL | Fixed point | 9 bits  14 bits |
| UL | Fixed Point | 9 bits  14 bits |
| UC-Plane O-RU CMP Scenario Static Format (SF) Block Floating Point (BFP) | DL | Block Floating point | 9 bits  14 bits |
| UL | Block Floating point | 9 bits  14 bits |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| UC-Plane O-RU CMP Scenario Static Format (SF) Block Scaling (BSC) | DL | Block Scaling | 9 bits  14 bits |
| UL | Block Scaling | 9 bits  4 bits |
| UC-Plane O-RU CMP Scenario Static Format (SF) Mu-Law (MLW) | DL | Mu-Law | 9 bits  14 bits |
| UL | Mu-Law | 9 bits  14 bits |
| UC-Plane O-RU CMP Scenario Static Format (SF) Modulation Compressed Format | DL | Modulation Compression | N/A |
| UC-Plane O-RU CMP Scenario Static Format Modulation Compressed Format | DL | Block Floating point + Selective RE | 9 bits  14 bits |
| UL | Block Floating point + Selective RE | 9 bits  14 bits |
| UC-Plane O-RU CMP Scenario Static (ST) mod-compr Format + Selective RE (MRE) | DL | Modulation Compression + Selective RE | 4-bits |
| UC-Plane O-RU CMP Scenario - Non-Static Format Test (NS) | | | |
| UC-Plane O-RU CMP Scenario Non-Static (NS) Fixed-Point (FPF) | DL | Fixed point | 9 bits  14 bits |
| UL | Fixed Point | 9 bits  14 bits |
| UC-Plane O-RU CMP Scenario Non-Static (NS) Block Floating Point (BFP) | DL | Block Floating point | 9 bits  14 bits |
| UL | Block Floating point | 9 bits  14 bits |
| UC-Plane O-RU CMP Scenario Non-Static (NS) Block Scaling (BSC) | DL | Block Scaling | 9 bits  14 bits |
| UL | Block Scaling | 9 bits  4 bits |
| UC-Plane O-DU CMP Scenario Non-Static (NS) Mu-Law (MLW) | DL | Mu-Law | 9 bits  14 bits |
| UL | Mu-Law | 9 bits  14 bits |
| UC-Plane O-RU CMP Scenario Non-Static (NS) Modulation Compressed Format | DL | Modulation Compression | 4-bits |
| UC-Plane O-RU CMP Scenario Non-Static (NS) Block Floating Point + Selective RE (BRE) | DL | Block Floating point + Selective RE | 9 bits  14 bits |
| UL | Block Floating point + Selective RE | 9 bits  14 bits |
| UC-Plane O-RU CMP Scenario Non-Static (NS) mod-compr Format + Selective RE (MRE) | DL | Modulation Compression + Selective RE | 4-bits |

</div>

###### Table 3.2.3-10 Compression Test Reference Table

Results Analysis

In general, for each specific Compression Test in this conformance test document, the test will pass if the following conditions are met:

Power measurement differences between Uncompressed and Compressed are within acceptable range

EVM measurement difference between Uncompressed and Compressed are within acceptable range

Data integrity measurements show no data corruption

Uplink U-Plane Header measurements exclude fields for static compression These test criteria and expected results are summarized below in 3.2.3.3-6.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- |
| **Test name** | **Test Attributes** | | | **Acceptance Threshold Criteria** | | |
| **DL UL** | **Compression** | **IQ**  **Width** | **Power difference** | **EVM difference** | **BER** |
| UC-Plane O- RU CMP  Scenario Fixed-Point Format (FPF) | DL | Fixed point | 9 bits | ACC\_PWR\_PDSCH0  = ACC\_PWR\_PDSCH1  = ACC\_PWR\_PDSCH2  = +/- 1 dB | ACC\_EVM\_PDSCH0  =  ACC\_EVM\_PDSCH1  = ACC\_EVM\_PDSCH2  <= 4 percentage points | BER = 0 |
| 14 bits | Same as above | Same as above | BER = 0 |
| UL | Fixed Point | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UC-Plane O- RU CMP  Scenario Block Floating Point Compression (BFP) | DL | Block Floating point | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UL | Block Floating point | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UC-Plane O- RU CMP  Scenario Block Scaling Compression (BSC) | DL | Block Scaling | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UL | Block Scaling | 9 bits | BER = 0 |
| 4 bits | BER = 0 |
| UC-Plane O- DU CMP  Scenario Mu- Law Compression (MLW) | DL | Mu-Law | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UL | Mu-Law | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UC-Plane O- RU CMP  Scenario Modulation Compressed Format | DL | Modulation Compression | 4-bits | Same as above | Same as above | BER = 0 |
| UC-Plane O- RU CMP  Scenario Block Floating Point Compression  + Selective RE (BRE) | DL | Block Floating point + Selective RE | 9 bits | Same as above | Same as above | BER = 0 |
| 14 bits | Same as above | Same as above | BER = 0 |
| UL | Block Floating point + Selective RE | 9 bits | Same as above | Same as above | BER = 0 |
| 14 bits | Same as above | Same as above | BER = 0 |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- |
| UC-Plane O- RU CMP  Scenario Modulation Compressed  + Selective RE Format | DL | Modulation Compression  + Selective RE | 4-bits | Same as above | Same as above |  |

</div>

**Table 3.2.3-11 Compression Test Acceptance Threshold Criteria**

#### ![]({{site.baseurl}}/assets/images/3cf253014e94.png) UC-Plane O-RU Scenario Class Compression Static Format (SF) Fixed-Point (FP)

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

The purpose of this test is to:

* + Validate correct encoding of IQ data under the following conditions.
    - RU Static compression configurations
    - Fixed point IQ data format
    - Selection of 2 supported bit width: 9 bits, 14 bits
    - Uplink / downlink
  + Validate that in the U-Plane PRB header, the udCompHeader, "reserved" and udCompParam fields are not present

###### Test Entrance Criteria

The test uses the setup and methodology described in clause 3.2.1.1.

###### Test Methodology

1. **Initial Conditions**
   * The O-RU is started
   * Fronthaul Ethernet interface configured for communication between TER and the DUT.
   * O-RU synchronized with TER using S-Plane
   * Communication established between TER and the DUT such that it is possible to exchange U-Plane and C-Plane messages
   * signal analyzer connected to DUT's antenna port and setup according to DUT RF output configuration
   * signal source connected to DUT's antenna port and setup according to DUT RF input configuration

###### Procedure

For each supported bit width (9 bits, 14 bits), the following tests need to be performed:

###### Downlink test

* + Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink configured as follows: no compression, (16 bits)
  + Arm signal analyzer to capture the next Frame
  + Send the "uncompressed" **NR-FR1-CMP-TST-FRAME-ST-DL-UNC-16B** test stimulus file to the DUT
  + With the signal analyzer, perform the 3 power measurements
    - CMP-Uncompressed-Measured-Power-PDSCH0 in dBm
    - CMP-Uncompressed-Measured-Power-PDSCH1 in dBm
    - CMP-Uncompressed-Measured-Power-PDSCH2 in dBm
  + With the signal analyzer, perform the 3 EVM measurements
    - CMP-Uncompressed-Measured-EVM-PDSCH0 in %
    - CMP-Uncompressed-Measured-EVM-PDSCH1 in %
    - CMP-Uncompressed-Measured-EVM-PDSCH2 in %
  + With the signal analyzer, check Data integrity measurements
    - CMP-Uncompressed-BER-PDSCH0
    - CMP-Uncompressed-BER-PDSCH1
    - CMP-Uncompressed-BER-PDSCH2
  + Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink configured as follows: Fixed point, 9-bit (then 14 bits)
  + Send the "Compressed" **NR-FR1-CMP-TST-FRAME-ST-DL-FPF-9B (then 14B)** test stimulus file to the DUT
  + With the signal analyzer, perform the 3 power measurements
    - CMP-Compressed-Measured-Power-PDSCH0 in dBm
    - CMP-Compressed-Measured-Power-PDSCH1 in dBm
    - CMP-Compressed-Measured-Power-PDSCH2 in dBm
  + With the signal analyzer, perform the 3 EVM measurements
    - CMP-Compressed-Measured-EVM-PDSCH0 in %
    - CMP-Compressed-Measured-EVM-PDSCH1 in %
    - CMP-Compressed-Measured-EVM-PDSCH2 in %
  + With the signal analyzer, check Data integrity measurements
    - CMP-Compressed-BER-PDSCH0
    - CMP-Compressed-BER-PDSCH1
    - CMP-Compressed-BER-PDSCH2
  + Verify the following conditions
    - Power measurements within acceptable range
      * Difference between CMP-Uncompressed-Measured-Power-PDSCH0 and CMP- Compressed-Measured-Power-PDSCH0 is within ACC\_PWR\_PDSCH0 range
      * Difference between CMP-Uncompressed-Measured-Power-PDSCH1 and CMP- Compressed-Measured-Power-PDSCH1 is within ACC\_PWR\_PDSCH1 range
      * Difference between CMP-Uncompressed-Measured-Power-PDSCH2 and CMP- Compressed-Measured-Power-PDSCH2 is within ACC\_PWR\_PDSCH2 range
    - EVM measurements within acceptable range
      * Difference between CMP-Uncompressed-Measured-EVM-PDSCH0 and CMP- Compressed-Measured-EVM-PDSCH0 is less than ACC\_EVM\_PDSCH0
      * Difference between CMP-Uncompressed-Measured-EVM-PDSCH1 and CMP- Compressed-Measured-EVM-PDSCH1 is less than ACC\_EVM\_PDSCH1
      * Difference between CMP-Uncompressed-Measured-EVM-PDSCH2 and CMP- Compressed-Measured-EVM-PDSCH2 is less than ACC\_EVM\_PDSCH2
    - BER Measurements show no errors
      * CMP-Uncompressed-BER-PDSCH0 =0
      * CMP-Uncompressed-BER-PDSCH1 =0
      * CMP-Uncompressed-BER-PDSCH2 =0
      * CMP-Compressed-BER-PDSCH0 =0
      * CMP-Compressed-BER-PDSCH1 =0
      * CMP-Compressed-BER-PDSCH2 =0

##### Uplink test

* + Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the uplink configured as follows: no compression, 16-bit
  + Arm signal source to generate the Frame NR-FR1-CMP-TST-FRAME-UL
  + Arm CUSM-E to send the "uncompressed" NR-FR1-CMP-TST-FRAME-ST-UL-UNC-16B test stimulus file to the DUT
  + ARM CUSM-E to capture the Uplink U-Plane Data from the DUT
  + Launch the test
  + Extract IQ information from Capture U-Plane trace
  + Using the signal analyzer software, perform the 3 power measurements
    - CMP-Uncompressed-Measured-Power-PDSCH0 in dBm
    - CMP-Uncompressed-Measured-Power-PDSCH1 in dBm
    - CMP-Uncompressed-Measured-Power-PDSCH2 in dBm
  + Using the signal analyzer software, perform the 3 EVM measurements
    - CMP-Uncompressed-Measured-EVM-PDSCH0 in %
    - CMP-Uncompressed-Measured-EVM-PDSCH1 in %
    - CMP-Uncompressed-Measured-EVM-PDSCH2 in %
  + Using the signal analyzer software, check Data integrity measurements
    - CMP-Uncompressed-BER-PDSCH0
    - CMP-Uncompressed-BER-PDSCH1
    - CMP-Uncompressed-BER-PDSCH2
  + Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the uplink configured as follows: Fixed point, 9-bit (then 14 bits)
  + Arm signal source to generate the Frame NR-FR1-CMP-TST-FRAME-UL
  + Arm CUSM-E to send the "Compressed" NR-FR1-CMP-TST-FRAME-ST-UL-FPF-9B test stimulus file to the DUT
  + Arm CUSM-E to capture the Uplink U-Plane Data from the DUT
  + Launch the test
  + Extract IQ information from Capture U-Plane trace
  + Using the signal analyzer software, perform the 3 power measurements
    - CMP-Compressed-Measured-Power-PDSCH0 in dBm
    - CMP-Compressed-Measured-Power-PDSCH1 in dBm
    - CMP-Compressed-Measured-Power-PDSCH2 in dBm
  + Using the signal analyzer software, perform the 3 EVM measurements
    - CMP-Compressed-Measured-EVM-PDSCH0 in %
    - CMP-Compressed-Measured-EVM-PDSCH1 in %
    - CMP-Compressed-Measured-EVM-PDSCH2 in %
  + Using the signal analyzer software, check Data integrity measurements
    - CMP-Compressed-BER-PDSCH0
    - CMP-Compressed-BER-PDSCH1
    - CMP-Compressed-BER-PDSCH2
  + Validate correct U-Plane PRB header structure
    - U-Plane udComphdr (per clause 8.3.3.13 of [2])
    - U-Plane udCompParam (per clause 8.3.3.15 of [2])
  + Validate that the power measurements within acceptable range
    - Difference between CMP-Uncompressed-Measured-Power-PDSCH0 and CMP- Compressed-Measured-Power-PDSCH0 is withinACC\_PWR\_PDSCH0 range
    - Difference between CMP-Uncompressed-Measured-Power-PDSCH1 and CMP- Compressed-Measured-Power-PDSCH1 is withinACC\_PWR\_PDSCH1 range
    - Difference between CMP-Uncompressed-Measured-Power-PDSCH2 and CMP- Compressed-Measured-Power-PDSCH2 is withinACC\_PWR\_PDSCH2 range
  + EVM measurements within acceptable range
    - Difference between CMP-Uncompressed-Measured-EVM-PDSCH0 and CMP-Compressed- Measured-EVM-PDSCH0 is less than ACC\_EVM\_PDSCH0
    - Difference between CMP-Uncompressed-Measured-EVM-PDSCH1 and CMP-Compressed- Measured-EVM-PDSCH1 is less than ACC\_EVM\_PDSCH1
    - Difference between CMP-Uncompressed-Measured-EVM-PDSCH2 and CMP-Compressed- Measured-EVM-PDSCH2 is less than ACC\_EVM\_PDSCH2
  + Validate that the BER Measurements show no errors
    - CMP-Uncompressed-BER-PDSCH0 = 0
    - CMP-Uncompressed-BER-PDSCH1 = 0
    - CMP-Uncompressed-BER-PDSCH2 = 0
    - CMP-Compressed-BER-PDSCH0 = 0
    - CMP-Compressed-BER-PDSCH1 = 0
    - CMP-Compressed-BER-PDSCH2 = 0

###### Test Requirement (expected result)

1. All validation steps above are within expected ranges or correctly match the expected outcome.

#### ![]({{site.baseurl}}/assets/images/34164f1dbfb7.png) UC-Plane O-RU Scenario Class Compression Static Format (SF) Block Floating Point (BFP)

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

This static format test scenario for Block Floating Point Format will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.3.3.2 for Block floating point formats.

###### Test Methodology

Same as 3.2.3.3.2 with Static Block Floating Point test patterns

* + NR-FR1-CMP-TST-FRAME-ST-DL-BFP-9B
  + NR-FR1-CMP-TST-FRAME-ST-DL-BFP-14B
  + NR-FR1-CMP-TST-FRAME-ST-UL-BFP-9B
  + NR-FR1-CMP-TST-FRAME-ST-UL-BFP-14B

###### Test Requirement (expected result)

1. Same as 3.2.3.3.2.

#### ![]({{site.baseurl}}/assets/images/a3304e82c702.png) UC-Plane O-RU Scenario Class Compression Static Format (SF) Block Scaling

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

This static format test scenario for Block Scaling Format will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.3.3.2 for Block Scaling point formats.

###### Test Methodology

Same as 3.2.3.3.2 with Static Block Scaling test patterns

* + NR-FR1-CMP-TST-FRAME-ST-DL-BSC-9B
  + NR-FR1-CMP-TST-FRAME-ST-DL-BSC-14B
  + NR-FR1-CMP-TST-FRAME-ST-UL-BSC-9B
  + NR-FR1-CMP-TST-FRAME-ST-UL-BSC-14B

###### Test Requirement (expected result)

Same as 3.2.3.3.2.

#### ![]({{site.baseurl}}/assets/images/eeda9cfe0424.png) UC-Plane O-RU Scenario Class Compression Static Format (SF) Mu-Law (MLW)

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

This static format test scenario for Mu-Law Format will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.3.3.2 for Mu-Law formats.

###### Test Methodology

Same as 3.2.3.3.2 with Static Mu-Law test patterns

* + NR-FR1-CMP-TST-FRAME-ST-DL-MLW-9B
  + NR-FR1-CMP-TST-FRAME-ST-DL-MLW-14B
  + NR-FR1-CMP-TST-FRAME-ST-UL-MLW-9B
  + NR-FR1-CMP-TST-FRAME-ST-UL-MLW-14B

###### Test Requirement (expected result)

Same as 3.2.3.3.2

#### ![]({{site.baseurl}}/assets/images/4bffc0bbc074.png) UC-Plane O-RU Scenario Class Compression Static Format (SF) Modulation- Compressed Format

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

This modulation compression format scenario is a static format scenario, based on 3.2.3.3.2 with some important differences

* + The purpose is to validate Radio Unit's correct interpretation of the Modulation compression parameters used in the Section Extension Type = 4 and/or Section Extension Type 5 , based on the section extensions a radio supports.

If the O-RU only supports section extension 4 on a given endpoint, then:

* + - Section extension 4 shall be used for all symbols containing PDSCH REs and for symbols containing both PDSCH and DMRS REs.

If the O-RU only supports section extension 5 on a given endpoint, then:

* + - Section extension 5 shall be used for all symbols containing PDSCH REs and for symbols containing both PDSCH and DMRS REs.

If the radio supports 4 and 5 on a given endpoint, then

* + - Section extension 4 shall be used for symbols containing only PDSCH REs .
    - Section extensions 5 shall be used for symbols containing DMRS + PDSCH REs.

![]({{site.baseurl}}/assets/images/0dd3c40c2a0c.png)

###### Figure 3.2.3.3-4 Section Extension 4 and 5 signaling

* + When high level modulation is supported by the Device Under Test (DUT), Section Extension Type 5 messages will be tested on the current compression test frame , that includes Mixed MCS test cases where high MCS user data REs and low MCS DMRS signaling data REs are in the same PRB.
  + The test will only verify DL correct encoding of IQ information, as the Modulation Compression model is not applicable for uplink
  + As the Modulation Compression model does not require IQ bit width to be setup, there is no need to run multiple compression tests for various IQ bit width.

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-CMP-TST-FRAME-ST-DL-UNC-16B | Static Downlink Uncompressed (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-DL-MC | Static Downlink Modulation Compression |

</div>

###### Test Entrance Criteria

Same as 3.2.3.3.2.

###### Test Methodology

Same as 3.2.3.3.2 with Static Modulation Compression test patterns

* + NR-FR1-TDD-CMP-TST-ST-DL-MC

Note that this test is only applicable to the downlink and therefore should only follow the downlink steps of the referenced test case above. Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink configured as follows: Modulation Compression.

###### Test Requirement (expected result)

All validation steps for the downlink referenced in 3.2.3.3.2 are within expected ranges or correctly match the expected outcome.

#### ![]({{site.baseurl}}/assets/images/4ea56a7cbb2f.png) UC-Plane O-RU Scenario Class Compression Non-Static (NS) Fixed-Point (FPF)

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

This Fixed-Point Format scenario is a non-static format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.3.3.2.

###### Test Methodology

* 1. **Initial Conditions**
     + Same as 3.2.3.3.2 Non-Static Fixed-Point test patterns
     + Via the M-Plane or another suitable mechanism, disable the O-RU Static IQ and compression format

###### Procedure

For each supported bit width (9 bits, 14 bits), the following tests need to be performed:

###### Downlink test

* + Arm signal analyzer to capture the next Frame
  + Send the uncompressed" NR-FR1-CMP-TST-FRAME-NS-DL-UNC-16B test stimulus file to the DUT
  + With the signal analyzer, perform the 3 power measurements
    - CMP-Uncompressed-Measured-Power-PDSCH0in dBm
    - CMP-Uncompressed-Measured-Power-PDSCH1 in dBm
    - CMP-Uncompressed-Measured-Power-PDSCH2 in dBm
  + With the signal analyzer, perform the 3 EVM measurements
    - CMP-Uncompressed-Measured-EVM-PDSCH0 in %
    - CMP-Uncompressed-Measured-EVM-PDSCH1 in %
    - CMP-Uncompressed-Measured-EVM-PDSCH2 in %
  + With the signal analyzer, check Data integrity measurements
    - CMP-Uncompressed-BER-PDSCH0
    - CMP-Uncompressed-BER-PDSCH1
    - CMP-Uncompressed-BER-PDSCH2
  + Send the "Compressed" NR-FR1-CMP-TST-FRAME-NS-DL-FPF-9B (then 14B) test stimulus file to the DUT
  + With the signal analyzer, perform the 3 power measurements
    - CMP-Compressed-Measured-Power-PDSCH0 in dBm
    - CMP-Compressed-Measured-Power-PDSCH1 in dBm
    - CMP-Compressed-Measured-Power-PDSCH2 in dBm
  + With the signal analyzer, perform the 3 EVM measurements
    - CMP-Compressed-Measured-EVM-PDSCH0 in %
    - CMP-Compressed-Measured-EVM-PDSCH1 in %
    - CMP-Compressed-Measured-EVM-PDSCH2 in %
  + With the signal analyzer, check Data integrity measurements
    - CMP-Compressed-BER-PDSCH0
    - CMP-Compressed-BER-PDSCH1
    - CMP-Compressed-BER-PDSCH2
  + Validate that the power measurements within acceptable range
    - Difference between CMP-Uncompressed-Measured-Power-PDSCH0 and CMP- Compressed-Measured-Power-PDSCH0 is within ACC\_PWR\_PDSCH0 range
    - Difference between CMP-Uncompressed-Measured-Power-PDSCH1 and CMP- Compressed-Measured-Power-PDSCH1 is within ACC\_PWR\_PDSCH1 range
    - Difference between CMP-Uncompressed-Measured-Power-PDSCH2 and CMP- Compressed-Measured-Power-PDSCH2 is within ACC\_PWR\_PDSCH2 range
  + Validate that the EVM measurements within acceptable range
    - Difference between CMP-Uncompressed-Measured-EVM-PDSCH0 and CMP- Compressed-Measured-EVM-PDSCH0 is within ACC\_EVM\_PDSCH0 range
    - Difference between CMP-Uncompressed-Measured-EVM-PDSCH1 and CMP- Compressed-Measured-EVM-PDSCH1 is within ACC\_EVM\_PDSCH1 range
    - Difference between CMP-Uncompressed-Measured-EVM-PDSCH2 and CMP- Compressed-Measured-EVM-PDSCH2 is within ACC\_EVM\_PDSCH2 range
  + Validate that the BER Measurements show no errors
    - CMP-Uncompressed-BER-PDSCH0 =0
    - CMP-Uncompressed-BER-PDSCH1 =0
    - CMP-Uncompressed-BER-PDSCH2 =0
    - CMP-Compressed-BER-PDSCH0 =0
    - CMP-Compressed-BER-PDSCH1 =0
    - CMP-Compressed-BER-PDSCH2 =0

###### Uplink test

* + Arm signal source to generate the Frame NR-FR1-CMP-TST-FRAME-UL
  + Arm CUSM-E to send the "uncompressed" NR-FR1-CMP-TST-FRAME-NS-UL-UNC-16B test stimulus file to the DUT
  + Arm CUSM-E to capture the Uplink U-Plane Data from the DUT
  + Launch the test
  + Extract IQ information from Captured U-Plane trace
  + Using the signal analyzer software, perform the 3 power measurements
    - CMP-Uncompressed-Measured-Power-PDSCH0 in dBm
    - CMP-Uncompressed-Measured-Power-PDSCH1 in dBm
    - CMP-Uncompressed-Measured-Power-PDSCH2 in dBm
  + Using the signal analyzer software, perform the 3 EVM measurements
    - CMP-Uncompressed-Measured-EVM-PDSCH0 in %
    - CMP-Uncompressed-Measured-EVM-PDSCH1 in %
    - CMP-Uncompressed-Measured-EVM-PDSCH2 in %
  + Using the signal analyzer software, check Data integrity measurements
    - CMP-Uncompressed-BER-PDSCH0
    - CMP-Uncompressed-BER-PDSCH1
    - CMP-Uncompressed-BER-PDSCH2
  + Via the M-Plane or another suitable mechanism, put the O-RU into a Non-Static configuration
  + Arm signal source to generate the Frame NR-FR1-CMP-TST-FRAME-UL
  + Arm CUSM-E to send the "Compressed" NR-FR1-CMP-TST-FRAME-NS-UL-CMP-9B (then 14B) test stimulus file to the DUT
  + ARM CUSM-E to capture the Uplink U-Plane Data from the DUT
  + Launch the test
  + Extract IQ information from Captured U-Plane trace
  + Using the signal analyzer software, perform the 3 power measurements
    - CMP-Compressed-Measured-Power-PDSCH0 in dBm
    - CMP-Compressed-Measured-Power-PDSCH1 in dBm
    - CMP-Compressed-Measured-Power-PDSCH2 in dBm
  + Using the signal analyzer software, perform the 3 EVM measurements
    - CMP-Compressed-Measured-EVM-PDSCH0 in %
    - CMP-Compressed-Measured-EVM-PDSCH1 in %
    - CMP-Compressed-Measured-EVM-PDSCH2 in %
  + Using the signal analyzer software, check Data integrity measurements
    - CMP-Compressed-BER-PDSCH0
    - CMP-Compressed-BER-PDSCH1
    - CMP-Compressed-BER-PDSCH2
  + Validate correct U-Plane PRB header structure
    - U-Plane udComphdr (per clause 8.3.3.13 of [2])
    - U-Plane udCompParam (per clause 8.3.3.15 of [2]
  + Validate that the power measurements within acceptable range
    - Difference between CMP-Uncompressed-Measured-Power-PDSCH0 and CMP- Compressed-Measured-Power-PDSCH0 is within ACC\_PWR\_PDSCH0 range.
    - Difference between CMP-Uncompressed-Measured-Power-PDSCH1 and CMP- Compressed-Measured-Power-PDSCH1 is within ACC\_PWR\_PDSCH1 range.
    - Difference between CMP-Uncompressed-Measured-Power-PDSCH2 and CMP- Compressed-Measured-Power-PDSCH2 is within ACC\_PWR\_PDSCH2 range.
  + Validate that the EVM measurements within acceptable range
    - Difference between CMP-Uncompressed-Measured-EVM-PDSCH0 and CMP- Compressed-Measured-EVM-PDSCH0 is less than ACC\_EVM\_PDSCH0 value.
    - Difference between CMP-Uncompressed-Measured-EVM-PDSCH1 and CMP- Compressed-Measured-EVM-PDSCH1 is less than ACC\_EVM\_PDSCH1 value.
    - Difference between CMP-Uncompressed-Measured-EVM-PDSCH2 and CMP- Compressed-Measured-EVM-PDSCH2 is less than ACC\_EVM\_PDSCH2 value.
  + Validate that the BER Measurements show no errors
    - CMP-Uncompressed-BER-PDSCH0 = 0
    - CMP-Uncompressed-BER-PDSCH1 = 0
    - CMP-Uncompressed-BER-PDSCH2 = 0
    - CMP-Compressed-BER-PDSCH0 = 0
    - CMP-Compressed-BER-PDSCH1 = 0
    - CMP-Compressed-BER-PDSCH2 = 0

###### Test Requirement (expected result)

1. All validation steps above are within expected ranges or correctly match the expected outcome.

#### ![]({{site.baseurl}}/assets/images/0f57527d6df3.png) UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block Floating Point

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format This Block Floating-Point Format scenario is a non-static format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.3.3.7 for Block floating point formats.

###### Test Methodology

Same as 3.2.3.3.7 with Static Block Floating Point test patterns

* + NR-FR1-CMP-TST-FRAME-NS-DL-BFP-9B
  + NR-FR1-CMP-TST-FRAME-NS-DL-BFP-14B
  + NR-FR1-CMP-TST-FRAME-NS-UL-BFP-9B
  + NR-FR1-CMP-TST-FRAME-NS-UL-BFP-14B

###### Test Requirement (expected result)

Same as 3.2.3.3.7.

#### ![]({{site.baseurl}}/assets/images/0305febf207c.png) UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block Scaling (BSC)

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

This Block Scaling Format scenario is a dynamic-format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.3.3.2 for Block Scaling formats.

###### Test Methodology

Same as 3.2.3.3.2 with Static Block Scaling test patterns

* + NR-FR1-CMP-TST-FRAME-NS-DL-BSC-9B
  + NR-FR1-CMP-TST-FRAME-NS-DL-BSC-14B
  + NR-FR1-CMP-TST-FRAME-NS-UL-BSC-9B
  + NR-FR1-CMP-TST-FRAME-NS-UL-BSC-14B

###### Test Requirement (expected result)

1. Same as 3.2.3.3.7

#### ![]({{site.baseurl}}/assets/images/3ca2af1a1478.png) UC-Plane O-RU Scenario Class Compression Non-Static (NS) Mu-Law (MLW)

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

This Mu-Law Format scenario is a dynamic-format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.3.3.2 for Mu-Law formats.

###### Test Methodology

Same as 3.2.3.3.7 with Mu-Law format test patterns

* + NR-FR1-CMP-TST-FRAME-NS-DL-MLW-9B
  + NR-FR1-CMP-TST-FRAME-NS-DL-MLW-14B
  + NR-FR1-CMP-TST-FRAME-NS-UL-MLW-9B
  + NR-FR1-CMP-TST-FRAME-NS-UL-MLW-14B

###### Test Requirement (expected result)

Same as 3.2.3.3.7.

#### ![]({{site.baseurl}}/assets/images/2d36d1557809.png) UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) Modulation- Compressed Format

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

This modulation compression format scenario is a non-static format scenario, based on 3.2.3.3.2 with some important differences

* + The purpose is to validate Radio Unit's correct interpretation of the Modulation compression parameters used in the Section Extension Type = 4 and/or Section Extension Type 5 , based on the section extensions a radio supports.

If the O-RU only supports section extension 4 on a given endpoint, then:

* + - Section extension 4 shall be used for all symbols containing PDSCH REs and for symbols containing both PDSCH and DMRS REs.

If the O-RU only supports section extension 5 on a given endpoint, then:

* + - Section extension 5 shall be used for all symbols containing PDSCH REs and for symbols containing both PDSCH and DMRS REs.

If the radio supports 4 and 5 on a given endpoint, then

* + - Section extension 4 shall be used for symbols containing only PDSCH REs .
    - Section extensions 5 shall be used for symbols containing DMRS + PDSCH REs.

![]({{site.baseurl}}/assets/images/0dd3c40c2a0c.png)

###### Figure 3.2.3.3-5 Section Extension 4 and 5 signaling

* + When high level modulation is supported by the Device Under Test (DUT), Section Extension Type 5 messages will be tested on the current compression test frame , that includes Mixed MCS test cases where high MCS user data REs and low MCS DMRS signaling data REs are in the same PRB.
  + The test will only verify DL correct encoding of IQ information, as the Modulation Compression model is not applicable for uplink
  + As the Modulation Compression model does not require IQ bit width to be setup, there is no need to run multiple compression tests for various IQ bit width.

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Stimulus File Name | Description |
| NR-FR1-CMP-TST-FRAME-NS-DL-UNC-16B | Non-Static Downlink Uncompressed (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-DL-MC | Non-Static Downlink Modulation Compression |

</div>

###### Test Entrance Criteria

Same as 3.2.3.3.2.

###### Test Methodology

Same as 3.2.3.3.7 with Static Modulation Compression test patterns

* + NR-FR1-TDD-CMP-TST-NS-DL-MC

Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink configured as follow: Modulation Compression

###### Test Requirement (expected result)

All validation steps above are within expected ranges or correctly match the expected outcome.

#### ![]({{site.baseurl}}/assets/images/640e183cbd87.png) UC-Plane O-RU Scenario Class Compression Static Format (SF) Block Floating Point + Selective RE Format

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

The Block Floating-Point+ Selective RE Format scenario is a static format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

For this test scenario, the compression test methodology will be based on the description in clause 3.2.3.3.1.

However, on top of the test frame requirements from clause 3.2.3.3.1, this test scenario also requires a test frame that MUST include PRBs with a combination of allocated and empty Resource Elements in the same symbol, to verify if the O-RU properly interprets the ReMask value in the udCompParam field (user data compression parameter). The measurements must be performed on the symbols that include a combination of empty and allocated resource elements.

The recommended DL test frame is based on Type 2 DMRS with 2 DMRS CDM groups without data. The resource mapping model for the Resource Blocks is shown Figure 3.2.3.3-, where both symbols #2 and #11 include a combination of empty and allocated Resources.

![Chart  Description automatically generated]({{site.baseurl}}/assets/images/048224fe0900.png)

###### Figure 3.2.3.3-6 Frame Format Compression Test Selective RE

The uncompressed and compressed test frames are listed in Table 3.2.3-12 Stimulus Files for Static Compression Test

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-CMP-TST-FRAME-ST-DL-UNC-RE-16B | Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-ST-UL-UNC-RE-16B | Static Uplink Uncompressed (C-plane only) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-ST-DL-BRE-9B | Static Downlink Block Floating Point + Selective RE 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-DL-BRE-14B | Static Downlink Block Floating Point + Selective 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-ST-UL-BRE-9B | Static Uplink Block Floating Point 9 Bits + Selective RE  (C-plane only) |
| NR-FR1-CMP-TST-FRAME-ST-UL-BRE-14B | Static Uplink Block Floating Point 14 Bits + Selective RE (C-plane only) |

</div>

###### Table 3.2.3-12 Stimulus Files for Static Compression Test

1. **Test Entrance Criteria**

Same as 3.2.3.3.2 for static Block floating point + Selective RE formats.

###### Test Methodology

Same as 3.2.3.3.2 with Static Block Floating Point + Selective RE test patterns. The uncompressed test frames used for this test are

* + NR-FR1-CMP-TST-FRAME-ST-DL-UNC-RE-16B
  + NR-FR1-CMP-TST-FRAME-ST-UL-UNC-RE-16B

The compressed test frames used for this test are

* + NR-FR1-CMP-TST-FRAME-ST-DL-BRE-9B
  + NR-FR1-CMP-TST-FRAME-ST-DL-BRE-14B
  + NR-FR1-CMP-TST-FRAME-ST-UL-BRE-9B
  + NR-FR1-CMP-TST-FRAME-ST-UL-BRE-14B

###### Test Requirement (expected result)

Same as 3.2.3.3.2.

#### ![]({{site.baseurl}}/assets/images/b0333b494886.png) UC-Plane O-RU Scenario Class Compression Static Format (SF) mod-compr + Selective RE Format

##### Test Description and Applicability

This test is CONDITIONAL- MANDATORY and shall be performed if the O-RU supports this compression format.

This modulation compression + Selective format scenario is a static format scenario, based on 3.2.3.3.2 with some important differences

* + The purpose is to validate Radio Unit's correct interpretation of the Modulation compression parameters used in the Section Extension Type = 4 and Section Extension Type 5
  + When high level modulation is supported by the Device Under Test (DUT), Section Extension Type 5 messages will be tested on the current compression test frame , that includes Mixed MCS test cases where high MCS user data REs and low MCS DMRS signaling data REs are in the same PRB.
  + The test will only verify Downlink correct encoding of IQ information, as the Modulation Compression model is not applicable for uplink
  + As the Modulation Compression model does not require IQ bit width to be setup, there is no need to run multiple compression tests for various IQ bit widths.

On top of the test frame requirements described above , this test scenario requires a test frame that MUST include PRBs with a combination of allocated and empty Resource Elements in the same symbol, to verify if the O-RU properly interprets the ReMask value in the udCompParam field (user data compression parameter). The measurements must be performed on the symbols that include a combination of empty and allocated resource elements.

The recommended DL test frame is based on Type 2 DMRS with 2 DMRS CDM groups without data. The resource mapping model for the Resource Blocks is shown on the diagram below, where both symbols #2 and #11 include a combination of empty and allocated Resources.

![Chart  Description automatically generated]({{site.baseurl}}/assets/images/048224fe0900.png)

###### Figure 3.2.3.3-7 Test Frame Modulation Compression Selective RE

The uncompressed and compressed test frames are listed in the table below

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Stimulus File Name | Description |
| NR-FR1-CMP-TST-FRAME-ST-DL-UNC-RE-16B | Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-ST-DL-MRE | Static Downlink Modulation Compression + Selective RE |

</div>

###### Table 3.2.3-13 Test Frame Descriptions Modulation Compression Selective RE

1. **Test Entrance Criteria**

Same as 3.2.3.3.2.

###### Test Methodology

Same as 3.2.3.3.2 with Static Modulation Compression test patterns

The uncompressed test frames used for this test are

* + NR-FR1-CMP-TST-FRAME-ST-DL-UNC-RE-16B

The compressed test frames used for this test are

* + NR-FR1-CMP-TST-FRAME-ST-DL-MRE

Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink configured as follow: Modulation Compression + Selective RE

###### Test Requirement (expected result)

Same as 3.2.3.3.2.

#### ![]({{site.baseurl}}/assets/images/0b300fce8c1f.png) UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) Block Floating Point + Selective RE Format

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format

This Block Floating-Point+ Selective RE Format scenario is a non-static format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

For this test scenario, the compression test methodology will be based on the description in clause 3.2.3.3.1

However, on top of the test frame requirements from clause 3.2.3.3.1, this test scenario also requires a test frame that MUST include PRBs with a combination of allocated and empty Resource Elements in the same symbol, to verify if the O-RU properly interprets the sReMask value in the udCompParam field (user data compression parameter). The measurements must be performed on the symbols that include a combination of empty and allocated resource elements.

The recommended DL test frame is based on Type 2 DMRS with 2 DMRS CDM groups without data. The resource mapping model for the Resource Blocks is shown on the diagram below, where both symbols #2 and #11 include a combination of empty and allocated Resources.

![Chart  Description automatically generated]({{site.baseurl}}/assets/images/048224fe0900.png)

###### Figure 3.2.3.3-8 Frame Format Compression NS BFP Selective RE

The uncompressed and compressed test frames are listed in Table 3.2.3-14.

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-CMP-TST-FRAME-NS-DL-UNC-RE-16B | Non-Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-NS-UL-UNC-RE-16B | Non-Static Uplink Uncompressed (C-plane only) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-NS-DL-BRE-9B | Non-Static Downlink Block Floating Point + Selective RE 9 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-DL-BRE-14B | Non-Static Downlink Block Floating Point + Selective 14 Bits (CU-plane) |
| NR-FR1-CMP-TST-FRAME-NS-UL-BRE-9B | Non-Static Uplink Block Floating Point 9 Bits +  Selective RE (C-plane only) |
| NR-FR1-CMP-TST-FRAME-NS-UL-BRE-14B | Non-Static Uplink Block Floating Point 14 Bits + Selective RE (C-plane only) |

</div>

###### Table 3.2.3-14 Stimulus Files for NS BFP Selective RE Compression Test

1. **Test Entrance Criteria**

Same as 3.2.3.3.2 for Non-Static Block floating point + Selective RE formats.

###### Test Methodology

Same as 3.2.3.3.7 with Non-Static Block Floating Point + Selective RE test patterns

The uncompressed test frames used for this test are

* + NR-FR1-CMP-TST-FRAME-NS-DL-UNC-BRE-16B
  + NR-FR1-CMP-TST-FRAME-NS-UL-UNC-BRE-16B

The compressed test frames used for this test are

* + NR-FR1-CMP-TST-FRAME-NS-DL-BRE-9B
  + NR-FR1-CMP-TST-FRAME-NS-DL-BRE-14B
  + NR-FR1-CMP-TST-FRAME-NS-UL-BRE-9B
  + NR-FR1-CMP-TST-FRAME-NS-UL-BRE-14B

###### Test Requirement (expected result)

Same as 3.2.3.3.7.

#### ![]({{site.baseurl}}/assets/images/a3ca1e6c5d77.png) UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) mod-compr + Selective RE Format

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format

This Modulation Compression + Selective RE Format scenario is a non-static format scenario that will verify DL correct encoding of IQ information.

This is the same as 3.2.3.3.13 with Non-Static test frames. When high level modulation is supported by the Device Under Test (DUT), Section Extension Type 5 messages will be tested on the current compression test frame , that includes Mixed MCS test cases where high MCS user data REs and low MCS DMRS signaling data REs are in the same PRB.

The uncompressed and compressed test frames are listed in Table 3.2.3-15.

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Stimulus File Name | Description |
| NR-FR1-CMP-TST-FRAME-NS-DL-UNC-RE-16B | Non Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-CMP-TST-FRAME-NS-DL-MRE | Non Static Downlink Modulation Compression + Selective RE |

</div>

###### Table 3.2.3-15 Stimulus Files for NS Mod Comp Selective RE Compression Test

1. **Test Entrance Criteria**

Same as 3.2.3.3.2 for non-static Modulation Compression + Selective RE formats.

###### Test Methodology

Same as 3.2.3.3.7 with Non-Static Block Floating Point + Selective RE test patterns

The uncompressed test frames used for this test are

* + NR-FR1-CMP-TST-FRAME-NS-DL-UNC-BRE-16B

The compressed test frames used for this test are

* + NR-FR1-CMP-TST-FRAME-NS-DL-MRE

###### Test Requirement (expected result)

Same as 3.2.3.3.7.

### ![]({{site.baseurl}}/assets/images/de300459e786.png) UC-Plane O-RU Scenario Class Delay Management (DLM)

This section describes conformance test cases for O-RU Delay Management. The test setup for these test cases is shown in 2.1.

When performing the conformance test cases for scenario class Delay Management it does not matter which timing method is used. The different timing methods are described in clause 4.4.3, 4.4.4, 4.4.5 and 4.4.6 of [2]

Delay Management downlink tests will test whether the O-RU can accurately transmit data when C and U plane messages are received at the extreme ends of their respective reception windows. Uplink tests will test whether the O- RU can accurately transmit received data to the CUSM-E when the CUSM-E transmits uplink C-Plane messages within the correct uplink reception window. It also tests whether the O-RU sends its U-Plane messages within the correct reception window.

Figure 3.2.3.4-1 shows a simplified timing relation for the C- and U-Plane messages for downlink.

The size of the control plane reception window on the O-RU will be: (T2a\_max\_up +Tcp\_adv\_dl) - (T2a\_min\_up

+Tcp\_adv\_dl) = C-Plane reception window. The start-point (before t=0) will be: T2a\_max\_up + Tcp\_adv\_dl = start of C-Plane transmission window.

The size of the reception window for the user plane will be: T2a\_max\_up - T2a\_min\_up. The start-point (before t=0) will be T2a\_max\_up.

As an example, if the values are set such as T2a\_max\_up = 264 us, Tcp\_adv\_dl = 63 us and T2a\_min\_up = 53 us, then the C-Plane reception window would be 211 us, the start of C-plane transmission window would be 327 us, the U-plane reception window would 211 us and the start of U-plane transmission window would be 264 us.

# t=0

![]({{site.baseurl}}/assets/images/9711c0e7f6e1.png)

Reception window

U-Plane DL

T2a\_min\_up\_dl

T2a\_max\_up\_dl

Tcp\_adv\_dl

Reception window T2a\_min\_cp\_dl

C-Plane DL

T2a\_max\_cp\_dl

symbol #13

symbol #12

c

c

symbol #0

u

u

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| TER | |
|  |  |
| O-RU | |
|  |  |
| TER | |

</div>

###### Figure 3.2.3.4-1 Simplified Timing for Downlink

The Delay Management uplink test cases for the O-RU will test that if the C-Plane fronthaul messages are received with respective reception window then the corresponding U-Plane messages will be sent in the O-RU's transmission window.

Figure 3.2.3.4-2 shows a simplified timing relation for the C-Plane and U-Plane messages for uplink.

Similar to the downlink case, the size of the control plane reception window is T2a\_max\_cp\_ul - T2a\_min\_cp\_ul . The start-point of (before t=0) of the C-plane reception window is T2a\_max\_cp\_ul.

The size of the transmission window for the user plane will be: Ta3\_max\_up - Ta3\_min\_up. The start-point (after t=0) will be Ta3\_min\_up.

If we follow the same example values as the ones set in the downlink case, the C-plane reception window would be 211 us, the start-point of the C-plane reception window would be 274 us, the U-plane transmission window would be 70 us and the start-point of the U-plane transmission window would be 20 us.

# t=0

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| TER | |
|  |  |
| O-RU | |
|  |  |
| TER | |

</div>

Ta3\_max\_up\_dl

Ta3\_min\_up\_dl Transmission window

U-Plane UL

Reception window C-Plane UL

T2a\_min\_cp\_ul T2a\_max\_cp\_ul

symbol #12 symbol #13 symbol #0

t

u

u

c

c

###### Figure 3.2.3.4-2 Simplified Timing for Uplink

The test frame used for downlink tests will be (by default) will be the 3GPP G-FR1-A1-1 FDD signal shown below in Figure 3.2.3.4-3. If the radio does not support this signal a 3GPP test wave form that the radio supports can be substituted provided there is at least one symbol in each slot available for test traffic. This symbol will be a stock data Section Type "B" described in 3.2.1.1.1. This symbol will contain a new PN23 sequence starting in PRB 0 and extending to all the PRBS in the test signal (274 PRBs in the example below).

![]({{site.baseurl}}/assets/images/2a75ec26e38e.jpg)

###### Figure 3.2.3.4-3 FDD Downlink Test Signal for Delay Management Tests

The test frame used for uplink tests will be (by default) the 3GPP G-FR1-A1-1 FDD signal shown below in Figure 3.2.3.4-4. If the radio does not support this signal a 3GPP test wave form that the radio supports can be substituted provided there is at least one symbol in each slot available for test traffic. This symbol will be a stock data Section Type "B" described in 2.3.1. This symbol will contain a new PN23 sequence starting in PRB 0 and extending to all the PRBS in the test signal (25 PRBs in the example below).

![]({{site.baseurl}}/assets/images/f85a96089bc6.jpg)

**Figure 3.2.3.4-4 Uplink FDD Test Signal for Delay Management Tests**

#### ![]({{site.baseurl}}/assets/images/1b341151001b.png) UC-Plane O-RU Scenario Class DLM Test #1: Downlink - Positive testing

###### Test Description and Applicability

This test is MANDATORY.

This test case will validate that the timing on the air interface is according to requirements specified in the CUS Specification when the C-Plane and the U-Plane messages are received within the O-RU's reception windows.

Four different test cases for downlink can be performed when the expected outcome is positive, i.e. the O-RU shall be able to transmit the received U-Plane-data on the air interface. These are shown in Figure 3.2.3.4-5. Note that in these tests the C-Plane reception window may be applicable to the slot or symbol boundaries depending on the Radio's capabilities. That is, in some radios, the C-Plane reception window is at the beginning of each slot and all C-Plane messages will be sent at once within this window. Other radios will require C-Plane messages to be sent in a reception window for each symbol, In all cases U-Plane messages will be sent during reception windows corresponding to each symbol regardless of whether the radio has large enough buffers to store U-Plane data for multiple symbols.

1: Early - Early t=0

T2a\_min\_up\_dl

T2a\_max\_up\_dl

Tcp\_adv\_dl O-RU rec. win. U-plane

Tcp\_adv\_dl

O-RU rec. win. C-plane

T2a\_min\_cp\_dl

T2a\_max\_cp\_dl

2: Early - Late

t=0

T2a\_min\_up\_dl

T2a\_max\_up\_dl

Tcp\_adv\_dl O-RU rec. win. U-plane

Tcp\_adv\_dl

O-RU rec. win. C-plane

T2a\_min\_cp\_dl

T2a\_max\_cp\_dl

3: Late - Early

t=0

T2a\_min\_up\_dl

T2a\_max\_up\_dl

Tcp\_adv\_dl O-RU rec. win. U-plane

Tcp\_adv\_dl

O-RU rec. win. C-plane

T2a\_min\_cp\_dl

T2a\_max\_cp\_dl

4: Late - Late

t=0

T2a\_min\_up\_dl

T2a\_max\_up\_dl

Tcp\_adv\_dl O-RU rec. win. U-plane

Tcp\_adv\_dl

O-RU rec. win. C-plane

T2a\_min\_cp\_dl

T2a\_max\_cp\_dl

###### Figure 3.2.3.4-5 Downlink Positive Test Cases

1st case "C-Plane Early - U-Plane Early"; the C-Plane message is received by the O-RU at the beginning of the reception window for the C-Plane messages (indicated with small green box in figure 2.5). The corresponding U- Plane data is received in the beginning of the reception window for the U-Plane messages (indicated with small blue box in figure), i.e. Tcp\_adv\_dl later.

2nd case "C-Plane Early - U-Plane Late"; the C-Plane message is received by the O-RU at the beginning of the reception window for the C-Plane messages. The corresponding U-Plane data is received earliest Tcp\_adv\_dl after the C-Plane message i.e. in the end of the U-Plane reception window.

3rd case "C-Plane Late - U-Plane Early"; the C-Plane message is received by the O-RU at the end of the reception window for the C-Plane messages. The corresponding U-Plane data is received earliest Tcp\_adv\_dl after the C-Plane message i.e. in the end of the reception window.

4th case "C-Plane Late - U-Plane Late"; this case is greyed out in the figure since it will in practice be the same case as number 3, the U-Plane message cannot be received later than it is in case 3.

###### Test Entrance Criteria

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer. The reception windows will be calculated and used by the CUSM-E based on the delay parameters reported by the radio on the M-Plane.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the RF signal analyzer to the O- RU antenna port. Determine the correct reception windows the radio claims to support using delay management parameters repowered by the radio,

###### Procedure

Configure the CUSM-ECUSM-E to send C-Plane and U-Plane messages so these messages are received within the reception windows for respective plane according to the three cases (1..3) described in Figure 3.2.3.4-5 above. NOTE: Make sure that the C-Plane message is received at least Tcp\_adv\_dl earlier then the corresponding U-Plane message(s) by the O-RU.

On the RF-signal-analyzer observe the received signal and compare the decoded data on the selected test symbol to the send PN23 sequence for that symbol.

###### Pass/Fail Criteria (expected result)

The test passes if the received data matches the transmitted data.

#### ![]({{site.baseurl}}/assets/images/eaef2ad02a73.png) UC-Plane O-RU Scenario Class DLM Test #2: Uplink - Positive testing

###### Purpose and Description

This test is MANDATORY.

This test case will validate that the transmission of the U-Plane data in uplink direction are transmitted correctly by the O-RU within its transmission window. The CUSM-E will send C-Plane messages at both ends of the C-Plane reception window specified by the radio using the M-Plane (Two tests). The C-Plane messages will describe a test frame as shown above. The frame will have one designated symbol in each slot (not containing DMRS information). The C-Plane message will ask the radio to send that symbol's data from each slot.

After the correct C-Plane messages are sent the CUSM-E will trigger the signal generator to send a valid test signal to the radio's RF port. This signal will contain a new, known PN23 sequence in the same symbol (per slot) designated by the C-Plane messages.

The positive test outcome for these uplink test cases is that the corresponding U-Plane data for a specific C-Plane message is transmitted within the O-RU's transmission window IF the C-Plane message was received within the O- RU's reception window as shown in Figure 3.2.3.4-6

The data will be transmitted to the radio by an external signal generator and the uplink signal will be as described above. The test data sent by the signal generator will contain a known, new PN23 sequence in one symbol of each slot. The CUSM-E will expect to receive the same data for the correct symbol in each slot.

## t=0

T2

O-RU rec. win. C-plane

T2a\_max\_cp\_ul

Ta3\_min\_up\_

a\_min\_cp\_ul

dl

O-RU tr. win. U-plane

Ta3\_max\_up\_dl

###### Figure 3.2.3.4-6 Relationship between C-Plane and U-Plane Message

Two different test cases can be identified for the uplink case. The C-Plane message is received in the beginning of the reception window or at the end of the reception window. These test cases are shown in Figure 3.2.3.4-7 below.

## 1: Early

O-RU rec. win. C-plane

T2a\_max\_cp

T2a\_min\_cp\_ul

\_ul

2: Late

O-RU rec. win. C-plane

T2a\_max\_cp

T2a\_min\_cp\_ul

\_ul

t=0

## t=0

###### Figure 3.2.3.4-7 Early and Late C-Plane Message Test Cases

1st case "Early"; the C-Plane message is received by the O-RU at the beginning of the reception window for the C-Plane messages (indicated with small green box in figure).

2nd case "Late"; the C-Plane message is received by the O-RU at the end of the reception window for the C- Plane messages.

###### Test Entrance Criteria

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the RF Signal Generator to the O- RU antenna port.

###### Procedure

Configure the CUSM-E to send C-Plane so these messages are received within the reception windows according to the two cases (1..2) described in Figure 3.2.3.4-7 above. After these messages are sent a trigger signal will be sent to the signal generator instructing it to send the correct RF test frame at t=0.

The CUSM-should receive U-Plane messages on the front haul interface during the uplink transmission window described by the radio over the M-Plane.

###### Pass/Fail Criteria (expected result)

The test case is passed if the correct data is received at CUSM-E in the correct time window.

#### ![]({{site.baseurl}}/assets/images/c82d3a4d9d29.png) UC-Plane O-RU Scenario Class DLM Test #3: Downlink - Negative testing

###### Test Description and Applicability

This test is MANDATORY.

This test case will validate that the O-RU will correctly increment relevant M-Plane counters if C-Plane and/or U- Plane messages are not received within the respective O-RU reception windows.

Negative testing for downlink traffic will verify that the O-RU will correctly increment relevant M-Plane counters if C-Plane and/or U-Plane messages are not received within the respective O-RU reception windows. There are four test cases defined for this Downlink test and are shown in Figure 3.2.3.4-8. The titles on each diagram show the message arrival time relative to the O-RU receive window for the C-Plane and the U-Plane in that order. For instance, test 1: Too Early-OK means the C-Plane message arrived early, outside the O-RU C-Plane receive window and the corresponding U-Plane message arrived correctly within the O-RU U-Plane receive window.

1: Too Early - OK t=0

2: OK - Too Early

t=0

T2a\_min\_up\_dl

T2a\_max\_up\_dl

Tcp\_adv\_dl O-RU rec. win. U-plane

Tcp\_adv\_dl

O-RU rec. win. C-plane

T2a\_min\_cp\_dl

T2a\_max\_cp\_dl

T2a\_min\_up\_dl

T2a\_max\_up\_dl

Tcp\_adv\_dl O-RU rec. win. U-plane

Tcp\_adv\_dl

O-RU rec. win. C-plane

T2a\_min\_cp\_dl

T2a\_max\_cp\_dl

3: OK - Too Late

t=0

T2a\_min\_up\_dl

T2a\_max\_up\_dl

Tcp\_adv\_dl O-RU rec. win. U-plane

Tcp\_adv\_dl

O-RU rec. win. C-plane

T2a\_min\_cp\_dl

T2a\_max\_cp\_dl

4: Too Late - OK

t=0

T2a\_min\_up\_dl

T2a\_max\_up\_dl

Tcp\_adv\_dl O-RU rec. win. U-plane

Tcp\_adv\_dl

O-RU rec. win. C-plane

T2a\_min\_cp\_dl

T2a\_max\_cp\_dl

###### Figure 3.2.3.4-8 Downlink Negative Test Cases

1. **Test Entrance Criteria**

The O-RU must support the default parameters defined in clause 3.2.2 above, especially the parameters concerning delay management.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.

###### Procedure

Configure the CUSM-ECUSM-E to send C-Plane and U-Plane messages so these messages are received according to the four test cases shown in figure above.

###### Test Requirement (expected result)

The test case is passed if the M-Plane performance measurement objects in the list "rx-window-measurement- objects" for RX\_EARLY are incremented properly for tests 1 and 2 and RX\_LATE are incremented properly for tests 3 and 4.

#### ![]({{site.baseurl}}/assets/images/f94711b1a169.png) UC-Plane O-RU Scenario Class DLM Test #4: Uplink - Negative Testing

###### Test Description and Applicability

This test is MANDATORY.

This test case will validate that the O-RU will correctly increment relevant M-Plane counters if C-Plane and/or U- Plane messages are not received within the respective O-DU reception windows.

Negative testing for uplink traffic will verify that the O-RU will correctly increment relevant M-Plane counters if C-Plane and/or U-Plane messages are not received within the respective O-DU reception windows. There are four test cases defined for this Downlink test and are shown in Figure 3.2.3.4-9. The titles on each diagram show the message arrival time relative to the O-RU receive window for the C-Plane and the U-Plane in that order. For instance, test 1: Too Early-OK means the C-Plane message arrived early, outside the O-RU C-Plane receive window and the corresponding U-Plane message arrived correctly within the O-RU U-Plane receive window.

Negative testing for uplink traffic will verify that the O-RU will not transmit any U-Plane uplink data when C- Plane messages are not received within the window on the O-RU.

## 1: Too Early

O-RU rec. win. C-plane

T2a\_max\_cp

2: Too Late

O-RU rec. win. C-plane

T2a\_max\_cp

t=0

## t=0

T2a\_min\_cp\_ul

\_ul

T2a\_min\_cp\_ul

\_ul

###### Figure 3.2.3.4-9 Uplink Negative Test Cases

1. **Test Entrance Criteria**

The O-RU must support the default parameters defined in clause 3.2.2 above, especially the parameters concerning delay management.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.

###### Procedure

Configure the CUSM-E to send C-Plane messages so these messages are received according to the two test cases shown in figure above.

###### Pass/Fail (expected result)

The test case is passed if the M-Plane performance measurement objects in the list "rx-window-measurement- objects" for RX\_EARLY and RX\_LATE are incremented properly for test 1 and test 2 respectively.

### ![]({{site.baseurl}}/assets/images/971535a9db4e.png) UC-Plane O-RU Scenario Class Transport (TRN)

This test is for future study.

### ![]({{site.baseurl}}/assets/images/7509d17660b6.png) UC-Plane O-RU Scenario Class LAA (LAA)

The purpose of this clause is to specify LAA test cases to test the compliance of the O-RU to the O-RAN specifications. Although in LAA operation, regular C-Plane and U-Plane messages (used for operation over licensed spectrum as well) are transmitted over the fronthaul interface between the O-DU and O-RU, there exist additional C-Plane messages that are required specifically for LAA operation over unlicensed spectrum. These additional C-Plane messages are based on Section type 7 and are communicated in both UL and DL directions between the O-DU and O-RU.

The LAA test cases only focus on LAA-related messages and operations. Other testing aspects that are applicable to LAA and non-LAA technologies (e.g. delay management, beamforming, compression, etc.) are not considered in this clause; Please refer to other clauses in the conformance test specification document.

LAA considered in this clause is based on 3GPP Rel. 13, which only considers downlink transmission on the unlicensed spectrum (i.e. uplink transmission goes on the licensed component carrier). Hence, all the test cases in this clause will consider downlink operation only. This includes DL U-Plane messages and DL/UL C-Plane messages. Note also that UL C-Plane messages only exist in LAA technology.

The LAA test cases for the O-RU test if the O-RU is capable of conforming with the CUSM-E instructions in terms of:

1. Correctly performing the listen-before-talk (LBT) procedure (i.e. managing the congestion window).
2. Timely data transmission based on the spectrum sensing outcome.
3. Timely deferring from occupying the spectrum based on the messages received from the O-DU.

On the other hand, testing O-RU capabilities (e.g. spectrum sensing) is out of scope of this specifications since it's not directly related to the O-RAN fronthaul interface.

#### ![]({{site.baseurl}}/assets/images/e5a572d9bad8.png) CU-DU-LAA-CWM Test #1: LBT PDSCH Configuration and Response

##### Test Description and Applicability

This test is CONDITIONAL MANDATORY. The test must be executed if the O-RU supports LAA. This test validates that the O-RU is capable of the following functions

* + Correctly receiving and interpreting C-Plane messages (Section Type 7 and specifically laaMsgType 0) from the TER to correctly perform LBT.
  + Correctly receiving U-Plane data from the TER and correctly processes the data (i.e. drop it or transmit it) based on the LBT outcome.
  + Correctly performing LBT and correctly generating C-Plane messages to inform the TER about the LBT outcomes using Section Type 7 and specifically laaMsgType 2.

This test assumes that the O-RU is capable of processing Section Type 1 C-plane messages and its corresponding U-plane messages.

It applies to the O-RAN CUS Specification [2]:

* + Clause 7.4
  + Clause 7.5.3.14
  + Clause 7.5.3.15
  + Clause 7.5.3.16
  + Clause 7.5.3.17
  + Clause 7.5.3.18
  + Clause 7.5.3.19
  + Clause 7.5.3.20
  + Clause 7.5.3.21
  + Clause 7.5.3.22
  + Clause 7.5.3.23
  + Clause 7.5.3.25
  + Clause 7.5.3.27
  + Table 10.2-1

The purpose of this test is to:

* + Validate that the O-RU can correctly interpret C-Plane messages by correctly performing LBT.
  + Validate that the O-RU can correctly construct the UL C-Plane message as specified in Section Type 7, laaMsgType 2 with the following specialized fields. Specifically,
    - Verify the laaMsgLen based on the message content.
    - Verify that the lbtHandle parameter in the DL C-Plane message with laaMsgType 0 matches the corresponding lbtHandle parameter in the UL C-Plane message with laaMsgType 2.
    - Verify the lbtPdschRes parameter value. Set: {0, 1, 2, 3}.
    - Verify the inParSF parameter value. Set: {0, 1}
    - Verify the sfStatus parameter value. Set: {0, 1}.
    - Verify the sfnSf value.
  + Validate that the O-RU can correctly interpret U-Plane data received from the TER.
  + Validate that the O-RU can correctly interpret C-Plane messages received from the TER.

###### Test Entrance Criteria

* + The O-RU must support LAA
  + The O-RU has passed M-Plane conformance and S-Plane conformance testing.
  + The O-RU has antenna ports or TAB connectors for TER connections

###### Test Methodology

The test shall be executed by the TER issuing DL C-Plane messages to the O-RU DUT to cause the O-RU to execute LBT. Furthermore, the TER shall issue other U-Plane and C-Plane messages required for data transmission. The TER needs to emulate external interference to allow the O-RU to do LBT and send the LBT outcome to the TER based on the description in clause 7.2.5 of [2]

###### Initial Conditions

* + TER (Test Equipment, O-RU) is initialized and configured.
  + The O-RU is initialized, synchronized, and configured as normal, except that it shall receive and interpret Test Commands.
  + The fronthaul Ethernet interface is up.
  + The O-RU is running its usual software, except that it is configured to accept and execute Test Commands to enable O-RU Conformance Testing.
  + The TER needs to emulate the external interference (e.g. Wi-Fi, other LAA cells) for the O-RU to execute LBT.

###### Procedure

* + DL C-Plane message (LBT\_PDSCH\_REQ):
    - The TER sends DL C-Plane message to configure the DUT (i.e. O-RU) to execute LBT for PDSCH transmission using the configuration parameters in Table 3.2.3-16 below.
    - The TER needs to run 4 consecutive LBT trials starting from run index 1 until run index 4.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Run Index | laaMsgType | laaMsgLen | lbtHandle | lbtOffset | lbtMode | lbtDeferFactor | lbtBackoffCounter | MCOT |
| 1 | 0 | 2 | 65,534 | 0 | 0 | 1 | 2 | 2 |
| 2 | 0 | 2 | 65,535 | 250 | 0 | 1 | 4 | 3 |
| 3 | 0 | 2 | 0 | 500 | 3 | 3 | 8 | 8 |
| 4 | 0 | 2 | 1 | 750 | 3 | 7 | 16 | 10 |

</div>

###### Table 3.2.3-16: LBT\_PDSCH\_REQ Configuration Parameters for Different Runs

* DL U-Plane data:
  + TER provides U-Plane DL data to the O-RU at the correct time based on clause 5.3.4 in [2]
  + TER evaluates the detected U-Plane data for correctness
  + Note that multiple U-Plane messages are needed for every "run" (i.e. for every MCOT). Some of these U-Plane messages should get dropped by the TER based on the outcome of the LBT process.
* DL C-Plane (Section type 1):
  + TER sends DL C-Plane message to help the DUT interpret the U-Plane data.
* UL C-Plane message (LBT\_PDSCH\_RSP) verification:
  + The TER generates RF signal to emulate that the channel is busy for the durations shown in Table 3.2.3-17 below starting from the subframe where LBT is scheduled to start:

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Run Index | Channel busy duration |
| 1 | 0 |
| 2 | 2 msecs |
| 3 | 2.5 msec |
| 4 | lbt-timer (see Clause 16.2.2 in the M- plane specs) |

</div>

###### Table 3.2.3-17 Channel Busy Duration for Different LBT Test Runs

* + TER starts Timeout-Timer "T1"; "T1" is of a suitable length to allow the O-RU to receive the C- Plane and U-Plane messages, process it, and act accordingly (based on the LBT outcome and the description in clause 7.2.5 of [2]) such that timer expiry is a sign of test failure.

###### Test Requirement (expected result)

* + TER detects the U-Plane data at the correct time and for the correct duration based on Table 3.2.3-18 below and clause 7.2.5 of [2].
  + TER correctly detects the LBT response C-Plane messages over the fronthaul interface with results that match the emulated external interference.
  + TER detects the correct operation of the DUT based on the description in clause 7.2.5 of [2] and Table 3.2.3-18 below:

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Run Index | Expected behavior |
| 1 | Data transmission for 2 msecs starts after finishing initial spectrum sensing. |
| 2 | Data transmission for 3 msecs starts after finishing spectrum sensing for a minimum duration of 2 msecs. |
| 3 | Data transmission for 8 msecs starts after finishing spectrum sensing for a minimum duration of 2.5 msecs. |
| 4 | No Data transmission. LBT should fail. |

</div>

**Table 3.2.3-18 Expected O-RU Behavior in LBT Test Cases**

### ![]({{site.baseurl}}/assets/images/a33ab1e1dc59.png) UC-Plane O-RU Scenario Class LTE (LTE)

This clause describes applicable LTE conformance test cases for O-RAN fronthaul interface. Since there are plenty of the commonalities between the NR and LTE test cases, this clause makes suitable references to the NR specific test cases clauses for the LTE scenarios whenever possible, as below.

* + LTE UC-Plane O-DU Scenario Class Beamforming (BFM) described in clause 3.2.3.2
  + LTE UC-Plane O-DU Scenario Class Compression (CMP) described in clause 3.2.3.3
  + LTE UC-Plane O-DU Scenario Class Delay Management (DLM) described in clause 3.2.3.4
  + LTE UC-Plane O-DU Scenario Class LAA (LAA) described in clause 3.2.3.6
  + LTE UC-Plane O-DU Scenario Class Section Type 3 described in clause 3.2.3.8

Subsequently, LTE-only specific generic test cases are explicitly covered below. One of the key differences applicable for LTE specific test cases as compared to NR is due to the explicit precoding behavior supported by some of the transmission modes for LTE.

In particular, for a Category B O-RU to implement precoding for LTE TM2-TM4, specific C-Plane instructions need to be provided to the O-RU from the O-DU. This specific aspect of the O-RAN fronthaul interface is enabled by the section extension = 0x3 described in the CUS Plane specification [2].

For all the test cases described in this clause:

* Downlink tests will use a standard 3GPP E-TM1.1 test frame for FDD (clause 6.1.1.1 ETSI TS 136.141-1) as shown in Figure 3.2.3.7-1.

![]({{site.baseurl}}/assets/images/6dd55fecdbcb.jpg)

###### Figure 3.2.3.7-1 3GPP E-TM1.1 Test Frame for FDD

* Uplink tests will use a standard 3GPP UL FRC Configuration definition for FDD (TS36.521-1) and power levels 30dB above Reference Sensitivity power level as shown in Figure 3.2.3.7-2.

![]({{site.baseurl}}/assets/images/10106be0f375.png)

###### Figure 3.2.3.7-2 UL FRC Configuration for FDD

All the downlink tests in this clause use a 3GPP test wave form LTE Test Model 1.1 (E-TM1.1) with 20 MHz Bandwidth as described in ETSI TS 136.141 clause 6.1.1.1.

There are several variations on this test signal depending on the capabilities of the radio. If for example the radio does not support the bandwidth used in the example tests as reported in the M-plane it will be up to the test developer to modify their tests to adapt to the radio. The test is expected to follow the same spirit as the tests in this document may have to be changed.

Likewise, all uplink tests in this clause use a 3GPP test waveform described in 36.141 clause A1. As with downlink tests if the radio does not support this signal, it is up to the test developer to modify the parameters of the test without changing the spirit of the test.

#### ![]({{site.baseurl}}/assets/images/da9418c65115.png) UC-Plane O-RU Scenario Class Base 3GPP DL

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame using the default parameters in clause 3.2.1.1.1 of this document except for only one spatial stream on one antenna will be used.

This test is applicable for Category A and Category B radios (No precoding is required). As per E-TM1.1 all user data in this test will be zeros. The test will be conducted.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1.1.13.2.1.1.2 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The O-RU must have a conducted antenna port to be connected to a signal analyzer.
  + The signal analyzer must have the ability to decode the downlink shared channel.

###### Procedure

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Build an appropriate IQ signal describing the E-TM1.1 signal described above in the CUSM-E.
  + Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal. Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages.
  + The data in the sections must be all zeros.
  + No Section Type zero messages will be used for this test.
  + Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and all zero data, the test passes.

#### ![]({{site.baseurl}}/assets/images/dc20b98c0f75.png) UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink.

This test requires non-zero data to populate all allocated resource blocks. This data will be a PN23 sequence with a seed value of all ones.

This test is applicable for both Category A and Category B radios.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The O-RU must have a conducted antenna port to be connected to a signal analyzer.
  + The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Build an appropriate IQ signal describing the E-TM1.1 signal described above in the CUSM-E.
  + Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal. Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages.
  + The data in the sections must be a PN23 sequence using an initial seed of all ones.
  + No Section Type zero messages will be used for this test.
  + Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above. It contains all the same PRB assignments and data the test passes.

#### ![]({{site.baseurl}}/assets/images/3318c5ea96b9.png) UC-Plane O-RU Scenario Class Extended 3GPP UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (Clause 7.2 ETSI TS 136.141) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 136.104) and power Levels at least 30 dB above Reference Sensitivity power Level described in E-TM1.1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance. The data section will be a PN23 sequence with a seed value of all ones.

Under those conditions, 3GPP compliant O-RU should deliver uplink U-Plane information that matches with the uplink signal.

The TER (Test Equipment, O-RU) generates an uplink signal on the antenna connector or TAB connector, together with the corresponding C-Plane messages on the Fronthaul interface. The TER will capture the U-Plane messages generated by the DUT and validate if the payload matches with the uplink signal.

This test is applicable for both Category A and Category B radios. It applies to the following O-RAN CUS Specification [2]:

* + Clause 7.4
  + Clause 8.3.2
  + Clause 8.3.3

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The O-RU must have a conducted antenna port to be connected to a signal analyzer.
  + The signal analyzer must have the ability to decode the downlink shared channel.
  + The Radio must support the reMask parameter as notified by the M-Plane.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-ECUSM-E. The signal source power level should be adjusted to setting used in the 3GPP receiver sensitivity test.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Load uplink test waveform (A1-1) on the RF signal source
  + Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the CUSM-E that C-Plane messages have been sent.
  + Load C-Plane message sequence on Test Equipment O-RU (TER)
  + Arm Test Equipment O-RU (TER) to capture DUT fronthaul messages
  + Launch test to simultaneously play RF uplink frame and C-Plane messages
  + Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
  + Extract IQ information
  + Extract Payload
  + Compare payload binary sequences

###### Test Requirement (expected result)

1. The verdict is "Test pass" if payload binary sequences match between the uplink test frame sent to the DUT and the received U-Plane data from the DUT
2. If any of the test conditions is not true, the verdict for the whole test is "Fail"
3. If the DUT does not support initial conditions, the test verdict is "Inconclusive"

#### ![]({{site.baseurl}}/assets/images/5e423ea01c11.png) UC-Plane O-RU Scenario Class Extended using reMask parameter 3GPP DL - Resource allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the reMask parameter set, transfer U-Plane data into the correct resource elements and transmit this data accurately in the downlink. This test is applicable for Category A and Category B radios (No precoding is required). The test will be conducted therefore there will be no channel distortion or interference. It is mandatory the radio pass this test to be considered O-RAN conformant.

This test requires non-zero data to populate all allocated resource blocks. This data will be a PN23 sequence with a seed value of all ones. This test is applicable for both Category A and Category B radios.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The O-RU must have a conducted antenna port to be connected to a signal analyzer.
  + The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Build an appropriate IQ signal described above in the CUSM-E.
  + Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal.
  + Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols#6 which will be used for the reMask test.
  + The data in this section must be a PN23 sequence using an initial seed of all ones. The first bits of the PN23 will be in PRB1 and continue in consecutive resource elements to the end of PRB5. No Section Type zero messages will be used for this test.
  + Symbol number #6 should be stock data Section Type "D" as shown above.
  + This test will only be using PRBs 1 through 5. The corresponding C-Plane message will contain a section IDs in a single C-Plane message describing symbol #6.
  + The startSymbolId in the application header will be symbol #6.
  + The C-Plane message will have one section with the reMask set to only the odd number resource elements. The number of PRBs will be 5. The start PRB will be 1.
  + The corresponding U-Plane message will be a new PN23 Sequence (initial seed is all ones) in PRBs 1 through 5 of symbol #6.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should only contain the same PN23 signals that were sent in the U-Plane but only every other odd resource element.

#### ![]({{site.baseurl}}/assets/images/c07fd94872af.png) UC-Plane O-RU Scenario Class With Precoding (WPR) TxD

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the correct implementation of transmit diversity of a Category B O-RU with two antenna ports. TxD uses TM2 (transmission Mode 2). For TxD, information for 2 layers are packed into a PRB for transmission from O-DU and are unpacked at the O-RU. TxD precoding is applied based on the C Plane configuration before RF transmission.

Using a standard E-TM1.1 test frame for FDD the CUSM-E (i.e. O-RAN interface of the TER described in clause 3.2.2) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard E-TM1.1 signal.

This test is applicable for Category B radios only.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The O-RU must have two conducted antenna ports to be connected to a signal analyzer.
  + The signal analyzer must have the ability to decode the downlink shared channel.
  + The O-RU must support the Section Extension ExtType=3 parameter as notified by the M-Plane

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Build an appropriate IQ signal describing the E-TM1.1 signal described above in the CUSM-E.
  + Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal.
  + Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.
  + The test configures two antenna ports hence two beamIDs needed (same beamID for user data and CRS REs). For Antenna Port 0, the beamId is contained in the C-Plane data section header, while the Antenna Ports 1 ("beamIdAP1") is contained in the ExtType=3 .
  + Configure different eAxCs are used for each layer
  + Configure following parameters in the Section Extension ExtType=3
    - codebookIndex - '00000000' (invalid)
    - layerID (Layer ID for DL transmission) - layer ID that are used for DL transmission
    - txScheme (transmission scheme) - 'txD'
    - numLayers (number of layers used for DL transmission) - 0001 (implies 2)
    - crsReMask (CRS resource element mask)
    - crsSymlNum (CRS symbol number indication)
    - crsShift (crsShift used for DL transmission)
  + Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.3.4.
  + Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation between antenna ports or TAB connectors under test should match the expected result for Tx Diversity transmission as specified in ETSI TS 136.141 clause 4.5.1.1.

#### ![]({{site.baseurl}}/assets/images/8dae26dde2e0.png) UC-Plane O-RU Scenario Class With Precoding (WPR) SM

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the correct implementation of TM3/4 Spatial Multiplexing transmission mode for a Category B O-RU with two antenna ports. For TM3/4 Spatial Multiplexing, information for 2 layers are packed into a PRB for transmission from O-DU and are unpacked at the O-RU, subsequently TM3/4 based precoding is applied based on the C Plane configuration before over the air transmission.

Using a standard E-TM1.1 test frame for FDD the CUSM-E (i.e. O-RAN interface of the TER described in clause 3.2.2) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard E-TM1.1 signal.

This test is applicable for Category B radios only.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The signal analyzer must have the ability to decode the downlink shared channel.
  + The O-RU must support the Section Extension ExtType=3 parameter as notified by the M-Plane
  + The O-RU must have at least two conducted antenna ports (or TAB connectors) to be connected to a signal analyzer.
  + The TER with connections to the O-RU must be calibrated.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Build an appropriate IQ signal describing the E-TM1.1 signal described above in the CUSM-E.
  + Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal.
  + Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.
  + The test configures two antenna ports. Therefore, two beamIDs are needed. The same beamID is used for user data and CRS REs.
    - For Antenna Port 0, the beamId is contained in the C-Plane data section header, while the Antenna Ports 1 ("beamIdAP1") is contained in the ExtType=3
  + Configure following parameters in the Section Extension ExtType=3 as defined in CUS Plane Specification [2].
    - codebookIndex - indices of the precoder codebook that are used for precoding
    - layerID (Layer ID for DL transmission) - layer ID that are used for DL transmission
    - txScheme (transmission scheme) - set to Spatial multiplexing (no CDD)
    - numLayers (number of layers used for DL transmission) - set to 0001 (implies 2)
    - crsReMask (CRS resource element mask)
    - crsSymlNum (CRS symbol number indication)
    - crsShift (crsShift used for DL transmission)
  + Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.3.4.
  + Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation between antenna ports or TAB connectors under test should match the expected result for MIMO transmission as specified in ETSI TS 136.141 clause 4.5.1.1.

### ![]({{site.baseurl}}/assets/images/b0054648d719.png) UC-Plane O-RU Scenario Class Section Type 3 (ST3)

This clause will specify the test scenarios to validate the correct decoding of C-Plane messages with Section Type 3. The required test setup is shown in 2.1, where only a stimulus RF signal is applied.

#### ![]({{site.baseurl}}/assets/images/7dc60a496591.png) UC-Plane O-RU Scenario Class ST3 Test #1: NR PRACH

###### Test Description and Applicability {MANDATORY}

This test is MANDATORY.

This test will validate the correct decoding of C-Plane messages containing Section Type 3 in 5G NR scenario by testing the correct detection of a PRACH signal.

TER will setup the signal generator with a PRACH test waveform according to ETSI TS 138.141-1 clause 8.4.1 and A.6. The test waveform will contain the same preamble ID repeated by following the timing offset scheme specified in the figures 8.4.1.4.2-2 or 8.4.1.4.2-3 ETSI TS 138.141-1 depending on the selected PRACH format.

This is an example for FR1 - SCS=30 kHz - BW=100MHz - Format A3, at each occasion the time offset of the same preamble index (selected according to table A.6-1 ETSI TS 138.141.1) is incremented by 100nsec starting from 0 up to 800nsec (9 occasions per frame). Each PRACH occasion is at the beginning of the first nine used sub- frames. The scheme is repeated every frame.

![]({{site.baseurl}}/assets/images/088c69167ee4.png)

![]({{site.baseurl}}/assets/images/e0259d216f82.png)

###### Figure 3.2.3.8-1 FR1 SCS 30Kz 100MHz Format A3

According to the PRACH waveform setting, the TER will generate a corresponding sequence of C-Plane messages with Section Type 3. By the corresponding U-Plane messages in the uplink direction, the TER will try to detect the presence of the corresponding preamble at the expected timing offset and calculate the probability of detection Pd according to the definition in TS38.141-1 clause 8.4.1.1.

The signal will be exercised at only one O-RU port without adding any external AWGN power level or multipath fading profile and at a power level avoiding detection errors due to poor SNR (rule described in C of this scenario class).

###### Test Entrance Criteria

O-RU must have a conducted antenna port (FR1) or TAB connector.

By the M-plane, TER will detect all the supported SCSs, FFT sizes and carrier bandwidths by the O-RU. To test the correct interpretation of Section Type 3, it is assumed that only one combination of the three above parameters supported by the O-RU is enough to validate the test. TER shall generate C-Plane messages according to one of the PRACH formats in table A.6-1 ETSI TS 138.141. TER will choose the format either according to the manufacturer declaration item D.103 "PRACH format and SCS" in ETSI TS 138.141-1 or according to the format information obtained by the M-plane in case O-RU implements this feature. If more formats are claimed, only one shall be selected to reduce the test time, preference will be given to a format specified in Table A.6.1 ETSI TS 138.141. It is assumed that the O-RU manufacturer will support at least one in that table. For the case of long preambles, it is assumed format 0 is always supported since the only one shown in the table A.6-1 ETSI TS 138.141.

###### Test Methodology

* 1. **Initial Conditions**

The O-RU is synchronized using G.8275.1. The signal generator is connected to the antenna port under test and synchronized to the same frequency reference of the O-RU. CUSM-E has completed the activation of one carrier on the O-RU port and enabled one endpoint supporting Section Type 3. The endpoint is configured with no data compression.

###### Procedure

* + 1. Set signal generator power by the following method:
       1. Select SNR from the scenario with two RX antennas and AWGN propagation condition in table 8.4.1.5- 1, 8.4.1.5-2 or 8.4.1.5-3 ETSI TS 138.141-1 depending on the selected SCS and PRACH format.
       2. Select the AWGN power level according to the configured SCS and channel bandwidth in table 8.4.1.4.2-1 ETSI TS 138.141-1 and multiply by the PRACH signal bandwidth. It is recommended that the selected bandwidth and subcarrier spacing under test to be one of the available combinations in the

table 8.4.1.4.2-1 ETSI TS 138.141-1. If the DUT does not support one of them, it is recommended that the AWGN power level to be used for the test to be extracted with the following formula:

Pawgn = ?awgn + 10log10(OCC\_BW)

where *?awgn* is the AWGN power density with value -150dBm/Hz and *OCC\_BW* (Hz) is the selected occupied bandwidth for this test.

If needed for test purposes, the AWGN level can be reduced in the range 0dB to 16dB.

* + - 1. The output power will be given by the formula (SNR + Noise power +3 dB) rounded to the first decimal digit. Noise power is the AWGN power in the frequency domain overlapping frequency band of the PRACH to be tested. The extra 3dB are to compensate that SNR and noise power are selected from the two RX ports test case and this test procedure requires only one O-RU port.

For example, for the FR1 - SCS=30 kHz - BW=100MHz - Format A3 SNR is -13.5dB and noise level is -70.1dBm/98.28MHz. signal generator power = -13.5dB -70.1dBm - 10log10(139\*30kHz / 98.28MHz) + 3dB = -94.3 dBm.

* + 1. Set signal generator frequency offset to the central carrier frequency. PRACH will be mapped over frequency according to *msg1-FrequencyStart ( n*start *)* parameter equal to 0. PRACH format is set according to what TER has selected from the manufacturer declarations.

RA

* + 1. Start PRACH waveform generation on the signal generator. Ensure the test frame is repeated enough times to generate a statistically significant number of SRS occasions. That is at least 10 occasions.
    2. Configure CUSM-E to generate C-Plane Section Type 3 messages according to the PRACH occasions described in subsection A and by the following approach:
       1. In case of a PRACH format with preamble repetitions or not including preamble repetitions, only one C-Plane message with one section ID is generated per PRACH occasion. O-DU emulator will set "cpLength" field according to TS 138the format specified in clauses 7.5.2.14 and 4.4.3 of [2]. The "timeOffset" field will be set according to the PRACH occasion position inside the slot and by following the format value specified clauses 7.5.2.12 and 4.4.3 of [2].
       2. In both scenarios "filterIndex" field is setup based on the PRACH format and according to Table 7.5.2.3-1 of [2] and "beamId" field will set to 0 (no beamforming).
    3. TER will perform PRACH detection per each PRACH occasion and compare the result with the expected preamble ID and the expected timing offset. Since the external AWGN and fading generator are not present the time error tolerance should be low, TER will use the time error tolerance in table 8.4.1.1-1 for AWGN case according to the corresponding PRACH format and PRACH SCS. A counter of successful detections is incremented at every matching. The probability of detection is given by the ratio between that counter and the number of the expected received PRACH occasions within the test time.
    4. Repeat the test procedure by setting *msg1-FrequencyStart ( n*start *)* parameter to the right edge of the configured carrier bandwidth in order to exercise a different frequency offset number in Section Type 3.

RA

###### Pass/Fail Criteria (expected result)

1. Test is pass if the probability of detection is 100% determined across the minimum amount of at least 10 occasions.

#### ![]({{site.baseurl}}/assets/images/8f67b5d9165e.png) UC-Plane O-RU Scenario Class ST3 Test #2: LTE PRACH

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

This test will validate the correct decoding of C-Plane messages containing Section Type 3 in LTE scenario by testing the correct detection of a PRACH signal.

TER will setup the signal generator with a PRACH test waveform according to ETSI TS 136.141 clause 8.4.1 and

A.6. The test waveform will contain the same preamble ID repeated by the timing offset scheme specified in the figure 8.4.1.4.2-2 and clause 8.4.1.4.2 ETSI TS 136.141.

According to the PRACH waveform setting, TER will generate a corresponding sequence of C-Plane messages with Section Type 3. By the corresponding U-Plane messages in the uplink direction, TER will try to detect the presence of the corresponding preamble at the expected timing offset and calculate the probability of detection Pd according to the definition in TS36.141 clause 8.4.1.1.

The signal will be exercised at only one O-RU port without adding any external AWGN power level or multipath fading profile and at a power level avoiding detection errors due to poor SNR (rule described in the sub-section C of this scenario class).

###### Test Entrance Criteria

O-RU must have a conducted antenna port (FR1) or TAB connector.

By the M-plane, TER will detect all the supported SCSs, FFT sizes and carrier bandwidths by the O-RU. To test the correct interpretation of Section Type 3, it is assumed that only one combination of the three above parameters supported by the O-RU is enough to validate the test. TER will choose the PRACH format according to the manufacturer declarations or according to the format information obtained by the M-plane in case O-RU implements this feature. If more formats are claimed, only one shall be selected to reduce the test time.

###### Test Methodology

* 1. **Initial Conditions**

O-RU is synchronized using G.8275.1. signal generator is connected to the antenna port under test and synchronized to the same frequency reference of the O-RU. CUSM-E has completed the activation of one carrier on the O-RU port and enabled one endpoint supporting Section Type 3. The endpoint is configured with no data compression.

###### Procedure

* + 1. Set signal generator power by the following method:
       1. Select SNR from the scenario with two RX antennas and AWGN propagation condition in table 8.4.1.5-1 ETSI TS 136.141 depending on the selected PRACH format.
       2. Select the AWGN power level according to the configured channel bandwidth in table 8.4.1.4.2-1 ETSI TS 136.141 and multiply by the PRACH signal bandwidth. It is recommended that the selected bandwidth and subcarrier spacing under test to be one of the available combinations in the table 8.4.1.4.2-1 ETSI TS 136.141. If the DUT does not support one of them, it is recommended that the AWGN power level to be used for the test to be extracted with the following formula:

Pawgn = ?awgn - 10log10(OCC\_BW)

where *?awgn* is the AWGN power density with value -150dBm/Hz and *OCC\_BW* (Hz) is the selected occupied bandwidth for this test.

If needed for test purposes, the AWGN level can be reduced in the range 0dB to 16dB.

* + - 1. The output power will be given by the formula (SNR + Noise power +3 dB) rounded to the first decimal digit. Noise power is the AWGN power in the frequency domain overlapping frequency band of the PRACH to be tested. The extra 3dB are to compensate that SNR and noise power are selected from the two RX ports test case and this test procedure requires only one O-RU port.

For example, for the LTE 20MHz - Format 0 SNR is -13.9dB and noise level is -77.4dBm/18MHz. signal generator power = -13.9dB -77.4dBm + 10log10(839\*1.25kHz / 18MHz) + 3dB = -100.7dBm .

* + 1. Set signal generator frequency offset to the central carrier frequency. PRACH will be mapped over frequency according to *prach-FrequencyOffset (*nRA ) parameter equal to 0. PRACH format is set according to what TER has selected from the manufacturer declarations.

PRB offset

* + 1. Start PRACH waveform generation on the signal generator. Ensure the test frame is repeated enough times to generate a statistically significant number of PRACH occasions. That is at least 10 occasions.
    2. Configure CUSM-E to generate C-Plane Section Type 3 messages according to the PRACH occasions described in subsection A and by the following approach:
       1. In case of a PRACH format with preamble repetitions or not including preamble repetitions, only one C- Plane message with one section ID is generated per PRACH occasion. O-DU emulator will set "cpLength" field according to ETSI TS 138the format specified in clauses 7.5.2.14 and 4.4.3 of [2]. The

timeOffset" field will be set according to the PRACH occasion position inside the slot and by following the format value specified clauses 7.5.2.12 and 4.4.3 of [2].

* + - 1. In both scenarios "filterIndex" field is setup based on the PRACH format and according to Table 7.5.2.3- 1 of [2] and "beamId" field will set to 0 (no beamforming).
    1. The TER will perform PRACH detection per each PRACH occasion and compare the result with the expected preamble ID and the expected timing offset. Since the external AWGN and fading generator are not present, the time error tolerance should be low. The TER will use the time error tolerance defined in clause 8.4.1.1 ETSI TS

136.141 for AWGN (1.04usec). On the TER, a counter is incremented for each successful preamble detection. The probability of detection is given by the ratio between that counter and the number of the expected received PRACH occasions within the test time.

* + 1. Repeat the test procedure by setting nRA parameter of PRACH to the right edge of the configured carrier bandwidth in order to exercise a different frequency offset number in Section Type 3.

PRB offset

###### Pass/Fail Criteria (expected result)

1. Test is pass if the probability of detection is 100% determined across the minimum amount of at least 10 occasions.

### FR1 FDD Non-conducted OTA Signal Tests

### ![]({{site.baseurl}}/assets/images/0fd0a6d7dc27.png) UC-Plane O-RU Scenario Class NR testing Generic (NRG)

The generic tests for FR1 FDD Non-conducted OTA are the same as the tests described in clause 3.2.3 FR1 FDD Conducted-Signal Tests. Only the setup for the tests are different reflecting the difference between non-conductive and conductive mode testing.

### ![]({{site.baseurl}}/assets/images/07b1e06a3d30.png) UC-Plane O-RU Scenario Class Beamforming (BFM)

This clause describes the beamforming conformance testing for O-RAN fronthaul interface. The tests do not aim to test the O-RU beamforming performance or capabilities but to test that the O-RU under test focuses the RF energy or sensitivity into a specific direction and with a specific granularity following the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) C-Plane messages.

Unless stated otherwise in a test case, the following statements apply to all the test cases defined in this clause:

* It is based on Over-the-Air (OTA) testing with a setup such as described in clause 2.1 and it may be applied to any O-RU DUTs, whether the O-RU DUTs have conducted antenna ports or TAB connectors or not.
* It applies to Category A and Category B O-RU DUTs.
* It applies to LTE and/or 5G New Radio O-RU DUTs. In both cases, precoding is not required in any test case.
* If O-RU DUT supports Analog Beamforming (i.e. time domain beamforming), all the U-Plane test frames are defined by segmenting the Stock Test A: 1 section per symbol. The definition of this Stock Test A can be found in Figure 3.2.1.1-2 and the description accompanying this figure. Each slot shall include multiple sections (one per symbol within the slot) and only one beam at a time (i.e. one beamId at a time) and therefore only one beam can be tested per slot.
* If O-RU DUT supports Digital Beamforming (i.e. frequency domain beamforming), all the U-Plane test frames are defined by segmenting the Stock Test B: 2 sections per symbol definition as shown in Figure 3.2.1.1-2. Each slot shall include multiple sections (two per symbol within the slot) and only one beam per section at a time (i.e. one beamId at a time) and therefore up to two different beams can be tested per slot.
* If O-RU DUT supports multiple polarizations, it is up to the TER to determine if the testing is carried out for each polarization separately or multiple polarizations at the same time. In any case, it is important to guarantee that the correct eAxC\_ID for the correct polarization (or polarizations) is exercised.
* For O-RU DUT that support LTE:
  + Downlink tests will use a standard 3GPP E-TM1.1 test frame for FDD (clause 6.1.1.1 TS 136.141) with 20MHz bandwidth (100 RB) as shown in Figure 3.2.4.2-1.

![]({{site.baseurl}}/assets/images/86a1181af385.png)

###### Figure 3.2.4.2-1 E-TM1.1 FDD 20 MHz 100RB

If 20MHz is not supported by the O-RU DUT, then it will use the highest bandwidth supported by the O- RU DUT.

* + Uplink test will use a standard 3GPP UL FRC Configuration definition for FDD (TS36.521-1) and power levels at least 30dB above Reference Sensitivity power level with 20MHz bandwidth (100 RB) as shown in Figure 3.2.4.2-2.

![]({{site.baseurl}}/assets/images/be84eed72acf.png)

###### Figure 3.2.4.2-2 UL FRC FDD 20 MHz 100 RB

If 20MHz is not supported by the O-RU DUT, then it will use the highest bandwidth supported by the O- RU DUT.

* For O-RU DUT that support 5G NR:
  + Downlink tests will use a standard 3GPP NR-FR1-TM1.1 test frame for FDD in [19] (clause 4.9.2 TS138.141-1) of the Conducted Transmitter Characteristic Test (clause 6 TS138.141-1) as described in clause 3.2.1.1. The test numerology will be preferably 30kHz subcarrier spacing and 100 MHz Bandwidth. If not supported, then it will use any other supported subcarrier spacing and the highest bandwidth of the O-RU DUT.
  + Uplink tests will use a standard 3GPP G-FR1-A1-5 Reference Sensitivity level definition (clause 7.2 and Annex A TS138.141-1) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 138.141) and power levels at least 30dB above Reference Sensitivity power level as described in clause 3.2.1.1. The test numerology will be preferably 30kHz subcarrier spacing and 100 MHz Bandwidth, if supported. Otherwise, it will use any available subcarrier space and the highest bandwidth supported by the O-RU DUT.
* Radiated tests coordinate system is based on the coordinate system defined in clause 12.5.2 of [2].
* The O-RU DUT must:
  + support the default parameters in clause 3.2.1.1.2 of this document.
  + have installed current release of shipping software.
  + be fully calibrated up to Radiated Interface Boundary (RIB). It is expected to be calibrated by O-RU vendor prior to testing.
* The TER must:
  + be capable of carrying out any signal processing required to generate and demodulate 3GPP compliant waveforms.
  + be able to calculate or extract the beam direction via OTA measurements.
  + be able to generate and deliver signals with the required beam direction at the RIB point.
  + be fully calibrated up to the interface where it interacts with the DUT's RIB. For that, a known test signal might be either injected by the TER into the O-RU DUT, or internally generated by the O-RU DUT, and the O-RU DUT must not apply any digital or analog beam direction to the known test signal. One possible

method to perform calibration uses injected C-Plane and U-Plane signals from TER into the O-RU and using C-Plane messages with beamID=0. Alternatively, calibration methods for radiated test setups that are described in ETSI TR 137.941 can be used.

* The O-DU emulator of the TER must:
  + be capable of generating and sending U-Plane messages containing 3GPP test frames following the corresponding Stock sectioning defined above, as well as be capable of capturing U-Plane messages and extracting 3GPP test frames (i.e. IQ data) from the captured U-Plane messages.
  + be capable of generating the C-Plane messages for, receiving, extracting and demodulating the 3GPP test frames following the corresponding Stock sectioning defined above.
* The TER might have a single test antenna if a single beam direction and polarization is measured at a time, or multiple test antennas if multiple beam directions and/or polarizations are measured at the same time.
* It is up to the TER on how to extract the beam direction and beam properties at the DUT's RIB in order to match it with the manufacturer's declaration.
* The user payload will be generated as PN23 with a seed of all ones.
* It applies to the following O-RAN CUS Specification [2]:
  + Clause 7.4
  + Clause 8.3.2
  + Clause 8.3.3
  + Clause 12
  + Annex J

#### ![]({{site.baseurl}}/assets/images/2428cea31d97.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - No Beamforming

###### B. Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with no beamforming (beamId=0x000) and with one spatial stream (single eAxC).

###### B. Test Entrance Criteria

* Manufacturers' declaration that defines list of beam directions when O-RU DUT is operating with no beamforming.

###### C. Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.2.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Measure any metric/s that allows for extracting the transmitted beam direction from a single measurement,

i.e. transform-based techniques, or take as many measurements of any metric/s from multiple angles, by for example rotating the O-RU, that allows for extracting beam direction from multiple measurement, i.e. beam scanning.

###### D. Test Requirement (expected result)

1. The signal measured by the signal analyzer at the expected transmitted beam direction should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received at the expected transmitted beam direction by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The extracted beam direction is defined as the direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected beam direction for the expected no beamforming within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/fd9c73d83b75.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - No Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with no beamforming (beamId=0x000) and with one spatial stream (single eAxC).

###### Test Entrance Criteria

* + Manufacturers' declaration that defines list of beam directions when O-RU DUT is operating with no beamforming.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the signal source with any set-up information needed to allow it to synch and generate the test signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial beam direction. This initial beam direction could be the boresight direction of the receiver antenna array.
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL- SCH) using Section Type 1 messages. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.2 while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU.
6. Allow the O-DU to demodulate, decode and extract the payload and to measure and extract any required metric/s from the received signal that will be used later to determine what is the best received direction.
7. Repeat the previous steps but now in step b apply a different beam direction when injecting the test signal into the O-RU. Repeating the process for a number of different beam directions will exercise the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received at the expected beam direction by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The extracted beam direction is defined as the direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected beam direction for the expected no beamforming within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/6ed772a6e10e.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC).

The transmitted beam direction is measured for each indexed beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted direction is defined by extracting the beam direction.

The elevation ? and azimuth ? angles are defined as in clause 12.4.2.2 of [2].

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming conformance test might include multiple test that the O-RU must comply:

###### "Coarse" beamIds test:

If O-RU supports and reports beamIds that are defined as coarse granularity (coarse beamIds) to the O-DU emulator, the test should include the following beams:

* + 1. A beam with 0 degrees azimuth (?) and elevation (?) angles.
    2. A beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
    3. A beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
    4. A beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
    5. A beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of beam indices and their associated beam directions with antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**
* Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
* Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
* Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
* Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
* Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
* Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (DL- SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.2.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Measure any metric/s that allows for extracting the transmitted beam direction from a single measurement, i.e. transform-based techniques, or take as many measurements of any metric/s from multiple angles, by for example rotating the O-RU, that allows for extracting beam direction from multiple measurement, i.e. beam scanning.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer at the expected transmitted beam direction should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received at the expected transmitted beam direction by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The extracted beam direction is defined as the direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected beam direction for the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/7a3d5760a833.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC).

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.4.2.3 applies, but instead it is related to the uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of beam indices and their associated beam directions with antenna array characteristics.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the signal source with any set-up information needed to allow it to synch and generate the test signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial beam direction. This initial beam direction could be the boresight direction of the receiver antenna array.
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL- SCH) using Section Type 1 messages. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.2 while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU.
6. Allow the O-DU to demodulate, decode and extract the payload and to measure and extract any required metric/s from the received signal that will be used later to determine what is the best received direction.
7. Repeat the previous steps but now in step b apply a different beam direction when injecting the test signal into the O-RU. Repeating the process for a number of different beam directions will exercise the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received at the expected beam direction by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The extracted beam direction is defined as the direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected beam direction for the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/a85f6fe78172.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with weight-based dynamic beamforming with one spatial stream (single eAxC).

The transmitted beam direction is measured for each weighted beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted direction is defined by extracting the beam direction.

The elevation ? and azimuth ? angles are defined in clause 12.4.2.2 of [2].

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based Dynamic Beamforming conformance test should evaluate the following beams for the O-RU to comply:

* 1. A weight-based beam with 0 degrees azimuth (?) and elevation (?) angles.
  2. A weight-based beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
  3. A weight-based beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
  4. A weight-based beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
  5. A weight-based beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles will be measured.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight--based Dynamic Beamforming conformance test should also evaluate the following compression methods for each of the supported beams described above (a. to e.) for the O-RU to comply:

* + 1. No compression method applied to the beamforming weights.
    2. Block floating point compression method applied to the beamforming weights with 14-bit mantissa.
    3. Block scaling compression method applied to the beamforming weights with 14-bit scaler.
    4. u-law compression method applied to the beamforming weights with 14-bit fixed width.
    5. Depending on what type of Beamspace compression the DUT supports, either Beamspace compression method applied to the beamforming weights with 14-bit scaler. or Beamspace compression method applied to the beamforming weights with 14-bit mantissa.

If the O-RU does not support all the compression methods described above, fewer than 5 compression methods will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of frequency domain (?) and/or time domain (?) weights and their associated beam directions with antenna array characteristics

###### Test Methodology

* 1. **Initial Conditions**
* Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
* Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
* Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
* Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
* Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
* Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + 1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
    2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (DL-SCH and DCI) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x01 to convey the beam weights, it is not required that the next sections contain extension type 1 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
    3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
    4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
    5. Measure any metric/s that allows for extracting the transmitted beam direction from a single measurement,

i.e. transform-based techniques, or take as many measurements of any metric/s from multiple angles, by for example rotating the O-RU, that allows for extracting beam direction from multiple measurement, i.e. beam scanning.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer at the expected transmitted beam direction should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received at the expected transmitted beam direction by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The extracted beam direction is defined as the direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected beam direction for the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/a1214969486c.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Weight-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with weight-based beamforming and with one spatial stream (single eAxC).

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.5 but applies to the uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of frequency domain (?) and/or time domain (?) weights and their associated beam directions with antenna array characteristics.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the signal source with any set-up information needed to allow it to synch and generate the test signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial beam direction. This initial beam direction could be the boresight direction of the receiver antenna array.
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (UL-SCH) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x01 to convey the beam weights, it is not required that the next sections contain extension type 1 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.2 while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different beam direction when injecting the test signal into the O-RU. Repeating the process for a number of different beam directions will exercise the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received at the expected beam direction by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The extracted beam direction is defined as the direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected beam direction for the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/b55b83589def.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with attributed-based dynamic beamforming with one spatial stream (single eAxC).

If the O-RU DUT supports Attribute based Dynamic Beamforming, this test is mandatory for the O-RU DUT to be O-RAN conformant.

The transmitted beam direction and attributes are measured for each attributed beam required in this measurement, see below. The measured transmitted direction and attributes, i.e. pointing azimuth and elevation angles, beamwidths and sidelobe suppression, is compared to manufacturer-designated direction and attributes.

Transmitted direction and beam attributes are defined extracting the beam properties. The elevation ? and azimuth ? angles are defined as in clause 12.4.2.2 of [2].

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based Dynamic Beamforming conformance test should evaluate the following beams for the O-RU to comply:

* 1. An attribute-based beam with 0 degrees azimuth (?) and elevation (?) angles with any beamwidth and sidelobe suppression supported by the O-RU under this beam direction.
  2. An attribute-based beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?) with the widest beamwidth and lowest sidelobe suppression supported for this specific beam direction.
  3. An attribute-based beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?) with the narrowest beamwidth and highest sidelobe suppression supported for this specific beam direction.
  4. An attribute-based beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?) with the widest beamwidth and lowest sidelobe suppression supported for this specific beam direction.
  5. An attribute-based beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?) with the narrowest beamwidth and highest sidelobe suppression supported for this specific beam direction.

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles and attribute configurations will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of supported beam attributes that are supported by the O-RU and/or their associated beam directions with antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**
     + Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
     + Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
     + Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
     + Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
     + Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
     + Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (DL-SCH and DCI) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x02 to convey the beam weights, it is not required that the next sections contain extension type 2 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Measure any metric/s that allows for extracting the transmitted beam attributes from a single measurement,

i.e. transform-based techniques, or take as many measurements of any metric/s from multiple angles, by for example rotating the O-RU, that allows for extracting beam attributes from multiple measurement, i.e. beam scanning.

###### Test Requirement (expected result)

1. The signal measured at the expected beam direction by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The extracted beam attributes are referenced from the measured beam direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected beam direction and attributes for the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/6dd0798b1d40.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Attribute-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with attribute-based beamforming with one spatial stream (single eAxC).

Same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.7 but considering uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of supported beam attributes that are supported by the O-RU and/or their associated beam directions with antenna array characteristics.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
     + Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
     + Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
     + Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
     + Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial beam direction. This initial beam direction could be the boresight direction of the receiver antenna array.
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (UL-SCH) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x02 to convey the beam weights, it is not required that the next sections contain extension type 2 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.12. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different beam direction when injecting the test signal into the O-RU. Repeating the process for a number of different beam directions will exercise the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction with the correct beam attributes.

###### Test Requirement (expected result)

1. The test frame received at the expected beam direction by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The extracted beam attributes are referenced from the measured beam direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected beam direction and attributes for the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/bdfd0bbceb5c.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO).

For Category A radios, the test is for each polarization separately and consequently either different or same channel models can be defined for each of the polarization. For Category B, same channel might be used for both polarizations and the test might measure each polarization separately.

The transmitted beam direction is measured for each scenario required in this measurement. The measured transmitted direction is extracted from the decoded received signal in the TER. Transmitted direction is defined by properly receiving a data transmission between the O-RU and the target User Equipment while destroying or heavily attenuating the data transmission between the O-RU and the other User Equipment.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming conformance test should evaluate the following scenarios for the O-RU to comply and will rely on TER Channel Emulation capabilities as shown in Figure 3.2.4.2-3.

![Chart  Description automatically generated]({{site.baseurl}}/assets/images/7a1a18df3377.png)

###### Figure 3.2.4.2-3 TER with Channel Emulation Capability antennas representing multiple UEs

A scenario where two spatial streams, or eAxC flows, are generated for two users (one layer each) with M antennas ports or TAB connectors. The O-DU will report to the O-RU via C plane messages an channel estimate H ?

[h1, . . . , hM, h1, . . . , hM] ? C2xM, which is the effective channel as seen by the antennas representing the multiple

1 1 2 2

UEs, which are spaced sufficiently such that the O-RU can effectively equalize out the interference between the

users. The O-RU will calculate and apply the beamweight matrix G ? [g1, . . . , gM, g1, . . . , gM] ? CMx2 in such

1 1 2 2

that the received signal at the users is the same as the generated in the O-DU. It is up to the O-RU on how to calculate the beamforming weights, for example Zero-forcing, regularized zero-forcing / MMSE, etc.

If O-RU supports Analog Beamforming (Time Domain Beamforming), the test should not apply any analog beamforming or time domain beamforming. In this case, M is not the number of antennas ports or TAB connectors but the number of TRX channels supported by the O-RU.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with radiating antennas.
  + The TER equipment must include 2 antennas with sufficient separation to emulate the 2 users such that the O- RU can equalize out the mutual interference of the users due to the effective MU-MIMO channel.
  + Manufacturers' defined list of number of TRX chains and what antennas are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antennas and TER equipment are calibrated within acceptable tolerance.
   * Place the test antennas within the OTA chamber as defined in 3.2.1.1.2 with sufficient separation for effective MU-MIMO beamforming and configure the analyzer ports with any setup information needed to synch and demodulate the MU-MIMO transmitted signal
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator, with the data symbols for user 1 and user 2 fully overlapping in time and frequency, but with user data initialized using different seeds for the PN23 sequence.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 5 and 6 messages. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Capture the test signals and pass them through a channel emulator or apply the signal processing required to emulate the channel under test using the 2 test antennas.
5. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frames for the 2 users.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer for each of the expected UE - layer - should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer for each of the expected UE - layer - should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.

#### ![]({{site.baseurl}}/assets/images/3ffde0bb163b.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Channel-Information-based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO).

Same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.10 but considering the uplink direction.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with radiating sensing antennas.
  + The TER equipment must include 2 antennas with sufficient separation to emulate the 2 users such that the O- RU can equalize out the mutual interference of the users due to the effective MU-MIMO channel.
  + The TER equipment must have at least two probe transmitting antennas to radiate the test signals to the O-RU.
  + The TER equipment must either include a channel emulator between the signal generator and the probe transmitting antennas or the signal generator be capable of applying the required channel matrix being emulated between the users and the O-RU.
  + Manufacturers' defined list of number of TRX chains and what antennas are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 with sufficient separation for effective MU-MIMO beamforming and configure the generator with any set-up information needed to transmit the signals from the 2 UEs.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signals for each of the 2 users as described above in the signal sources of the TER using a different seed to initialize the PN23 data for each user.
2. Inject the test signals through a channel emulator or apply the required signal processing to emulate the channel under test.
3. Radiate the resulting test signals over the air into the antennas of the O-RU.
4. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL-SCH) using Section Type 5 and 6. No Section Type zero messages will be used for this test.
5. Play the C plane messages to the O-RU respecting timing windows described in clause 2.4. while also triggering the signal source.
6. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload for each of the users.

###### Test Requirement (expected result)

The test frame received by the TER/O-DU for each of the expected User - layer - should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.

### ![]({{site.baseurl}}/assets/images/5f6744bf9413.png) UC-Plane O-RU Scenario Class Compression (CMP)

The compression tests for FR1 FDD Non-conducted OTA are the same as the tests described in clause 3.2.3.3. Only the setup for the tests are different reflecting the difference between non-conductive and conductive mode testing.

### ![]({{site.baseurl}}/assets/images/d9dce8d298f2.png) UC-Plane O-RU Scenario Class Delay Management (DLM)

The delay management tests for FR1 FDD Non-conducted OTA are the same as the tests described in clause 3.2.3.4. Only the setup for the tests are different reflecting the difference between non-conductive and conductive mode testing.

### ![]({{site.baseurl}}/assets/images/b4c59526c05e.png) UC-Plane O-RU Scenario Class Transport (TRN)

This test is for future study.

### ![]({{site.baseurl}}/assets/images/601acfbebfc8.png) UC-Plane O-RU Scenario Class LAA (LAA)

The LAA tests for FR1 FDD Non-conducted OTA are the same as the tests described in clause 3.2.3.6. Only the setup for the tests are different reflecting the difference between non-conductive and conductive mode testing.

### ![]({{site.baseurl}}/assets/images/7883d74ae740.png) UC-Plane O-RU Scenario Class LTE (LTE)

The test description is the same as in clause 3.2.3.7. FR1 FDD Conducted UC-Plane O-RU Scenario Class LTE.

Only difference is that the test setup is as described in clause 3.2.1.1.2 Non-conducted OTA FDD tests for FR1 radios. In addition, depending on the tests, it will require one of the following two setups.

![]({{site.baseurl}}/assets/images/9f364a5ce52e.png)

**Figure 3.2.4.7-1 OTA setup with only a single signal analyzer**

![]({{site.baseurl}}/assets/images/6c5dffd89e76.png)

**Figure 3.2.4.7-2 OTA setup with two signal analyzers or signal analyzer with two ports**

#### ![]({{site.baseurl}}/assets/images/2c4a071f36c1.png) UC-Plane O-RU Scenario Class Base 3GPP DL

The test description, execution and pass criteria is the same as described in 3.2.3.7.1. The only difference is that the test setup is as described in clause 3.2.1.1.2 Non-conducted OTA FDD tests for FR1 radios with a single signal analyzer setup as described above in Figure 3.2.4.7-1.

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame using the default parameters in clause 3.2.1.1.1 of this document except for only one spatial stream on one antenna will be used.

This test is applicable for Category A and Category B radios (No precoding is required). As per E-TM1.1 all user data in this test will be zeros. The test will be conducted.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1.1.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The signal analyzer must have the ability to decode the downlink shared channel.

###### Procedure

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. 23
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Build an appropriate IQ signal describing the E-TM1.1 signal described above in the CUSM-E.
  + Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal. Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages.
  + The data in the sections must be all zeros sequence .
  + No Section Type zero messages will be used for this test.
  + Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and all zero data, the test passes.

#### ![]({{site.baseurl}}/assets/images/16893cda2627.png) UC-Plane O-RU Scenario Class Extended 3GPP DL - Resource Allocation

The test description, execution and pass criteria is the same as described in clause 3.2.3.7.2. The only difference is that the test setup is as described in 3.2.1.1.2 with a single signal analyzer setup as described above in Figure 3.2.4.7-1.

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink.

This test requires non-zero data to populate all allocated resource blocks. This data will be a PN23 sequence with a seed value of all ones.

This test is applicable for both Category A and Category B radios.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.

###### Procedure

* Build an appropriate IQ signal describing the E-TM1.1 signal described above in the CUSM-E.
* Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal. Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages.
* The data in the sections must be a PN23 sequence using an initial seed of all ones.
* No Section Type zero messages will be used for this test.
* Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above. It contains all the same PRB assignments and data the test passes.

#### ![]({{site.baseurl}}/assets/images/4e995e8123f1.png) UC-Plane O-RU Scenario Class Extended 3GPP UL - Resource Allocation

The test description, execution and pass criteria is the same as described in clause 3.2.3.7.3. The only difference is that the test setup is as described in clause 3.2.1.1.2 Non-conducted OTA FDD tests for FR1 radios with a single signal analyzer setup as described above in Figure 3.2.4.7-1.

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate correct uplink operation of the O-RU using 3GPP Reference Sensitivity level definition (clause 7.2 ETSI TS 136.141) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 136.104) and power levels at least 30 dB above Reference Sensitivity power Level described in E-TM1.1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance.

Under those conditions, 3GPP compliant O-RU should deliver uplink U-Plane information that matches with the uplink signal.

The TER (Test Equipment, O-RU) generates an uplink signal on the signal generator which is then transmitted over the air via the test antenna, together with the corresponding C-Plane messages on the Fronthaul interface. The TER will capture the U-Plane messages generated by the DUT and validate if the payload matches with the uplink signal.

This test is applicable for both Category A and Category B radios. It applies to the O-RAN CUS Specification [2]:

* + Clause 7.4
  + Clause 8.3.2
  + Clause 8.3.3

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Configure the source to transmit the required 3GPP test signal upon receiving a trigger signal from the CUSM-ECUSM-E. The signal source power level should be adjusted to setting used in the 3GPP receiver sensitivity test.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Load uplink test waveform (A1-1) on the RF signal source. Number of allocated RB is 6 as in A1-1 and the data content is a PN23 sequence.
  + Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the CUSM-E that C-Plane messages have been sent.
  + Load C-Plane message sequence on Test Equipment O-RU (TER)
  + Arm Test Equipment O-RU (TER) to capture DUT fronthaul messages
  + Launch test to simultaneously play RF uplink frame and C-Plane messages
  + Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
  + Extract IQ information
  + Extract Payload
  + Compare payload binary sequences

###### Test Requirement (expected result)

1. The verdict is "Test pass" if payload binary sequences match between the uplink test frame sent to the DUT and the received U-Plane data from the DUT
2. If any of the test conditions is not true, the verdict for the whole test is "Fail"
3. If the DUT does not support initial conditions, the test verdict is "Inconclusive"

#### ![]({{site.baseurl}}/assets/images/a411645612b5.png) UC-Plane O-RU Scenario Class Extended using reMask parameter 3GPP DL - Resource allocation

The test description, execution and pass criteria is the same as described in clause 3.2.3.7.4. The only difference is that the test setup is as described in clause 3.2.1.1.2 Non-conducted OTA FDD tests for FR1 radios with a single signal analyzer setup as described above in Figure 3.2.4.7-1.

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the reMask parameter set, transfer U-Plane data into the correct resource elements and transmit this data accurately in the downlink. This test is applicable for Category A and Category B radios (No precoding is required). The test will be conducted therefore there will be no channel distortion or interference. It is mandatory the radio pass this test to be considered O-RAN conformant.

This test requires non-zero data to populate all allocated resource blocks. This data will be a PN23 sequence with a seed value of all ones. This test is applicable for both Category A and Category B radios.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Build an appropriate IQ signal describing the E-TM1.1 signal described above in the CUSM-E.
  + Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal.
  + Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols#6 which will be used for the reMask test.
  + The data in this section must be a PN23 sequence using an initial seed of all ones. The first bits of the PN23 will be in PRB1 and continue in consecutive resource elements to the end of PRB5. No Section Type zero messages will be used for this test.
  + Symbol number #6 should be stock data Section Type "D" as shown above.
  + This test will only be using PRBs 1 through 5. The corresponding C-Plane message will contain a section IDs in a single C-Plane message describing symbol #6.
  + The startSymbolId in the application header will be symbol #6.
  + The C-Plane message will have one section with the reMask set to only the odd number resource elements. The number of PRBs will be 4. The start PRB will be 1.
  + The corresponding U-Plane message will be a new PN23 Sequence (initial seed is all ones) in PRBs 1 through 5 of symbol #6.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should only contain the same PN23 signals that were sent in the U-Plane but only every other odd resource element.

#### ![]({{site.baseurl}}/assets/images/cb87fa6a6fd2.png) UC-Plane O-RU Scenario Class With Precoding (WPR) TxD

The test description, execution and pass criteria is the same as described in clause 3.2.3.7.5. The only difference is that the test setup is as described in clause 3.2.1.1.2 Non-conducted OTA FDD tests for FR1 radios with two signal analyzers setup as described above in Figure 3.2.4.7-2.

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the correct implementation of transmit diversity of a Category B O-RU with two antennas. TxD uses TM2 (transmission Mode 2). For TxD, information for 2 layers are packed into a PRB for transmission from O-DU and are unpacked at the O-RU. TxD precoding is applied based on the C Plane configuration before RF transmission.

Using a standard E-TM1.1 test frame for FDD the CUSM-E (i.e. O-RAN interface of the TER described in clause 3.2.2) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard E-TM1.1 signal.

This test is applicable for Category B radios only.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The O-RU must have at least two TRX chains with radiating antennas.
  + The TER equipment must include 2 antennas with sufficient separation. The TER equipment must have at least two probe receiving antennas to receive each individual layer.
  + The signal analyzer must have the ability to decode the downlink shared channel.
  + The O-RU must support the Section Extension ExtType=3 parameter as notified by the M-Plane

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Build an appropriate IQ signal describing the E-TM1.1 signal described above in the CUSM-E. the data content is a PN23 sequences starting with an initial seed of ones.
  + Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal.
  + Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.
  + The test configures two antenna ports hence two beamIDs needed (same beamID for user data and CRS REs). For Antenna Port 0, the beamId is contained in the C-Plane data section header, while the Antenna Ports 1 ("beamIdAP1") is contained in the ExtType=3 .
  + Configure different eAxCs are used for each layer
  + Configure following parameters in the Section Extension ExtType=3
    - codebookIndex - '00000000' (invalid)
    - layerID (Layer ID for DL transmission) - layer ID that are used for DL transmission
    - txScheme (transmission scheme) - 'txD'
    - numLayers (number of layers used for DL transmission) - 0001 (implies 2)
    - crsReMask (CRS resource element mask)
    - crsSymlNum (CRS symbol number indication)
    - crsShift (crsShift used for DL transmission)
  + Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.3.4.
  + Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation between received signal analyzer or channels of the signal analyzer should match the expected result for Tx Diversity transmission as specified in ETSI TS 136.141 clause 4.5.1.1.

#### ![]({{site.baseurl}}/assets/images/f5dba7ca04ad.png) UC-Plane O-RU Scenario Class With Precoding (WPR) SM

The test description, execution and pass criteria is the same as described in clause 3.2.3.7.6. The only difference is that the test setup is as described in clause 3.2.1.1.2 Non-conducted OTA FDD tests for FR1 radios with two signal analyzers setup as described above in Figure 3.2.4.7-2.

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the correct implementation of TM3/4 Spatial Multiplexing transmission mode for a Category B O-RU with two antennas. For TM3/4 Spatial Multiplexing, information for 2 layers are packed into a PRB for transmission from O-DU and are unpacked at the O-RU, subsequently TM3/4 based precoding is applied based on the C Plane configuration before over the air transmission.

Using a standard E-TM1.1 test frame for FDD the CUSM-E (i.e. O-RAN interface of the TER described in clause 3.2.2) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the standard E-TM1.1 signal.

This test is applicable for Category B radios only.

###### Test Entrance Criteria

* + The O-RU must support the default parameters in clause 3.2.1 of this document. The test bandwidth is 20 MHz Bandwidth as described by E-TM1.1.
  + The signal analyzer must have the ability to decode the downlink shared channel.
  + The O-RU must have at least two TRX chains with radiating antennas.
  + The TER equipment must include 2 antennas with sufficient separation. The TER equipment must have at least two probe receiving antennas to receive each individual layer.
  + The TER with connections to the O-RU must be calibrated.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Connect the signal analyzer to the O-RU TAB connectors under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.2 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.2.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.2.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + Build an appropriate IQ signal describing the E-TM1.1 signal described above in the CUSM-E. . The data content is a PN23 sequences starting with an initial seed of ones.
  + The codeword -to-layer mapping follows table 6.3.3.2-1 of ETSI TS 136.211 with one codeword to two layer mapping, but does not restrict to use two codeword to two layer mapping.
  + Use the CUSM-E control interface to build the appropriate C-Plane messages that describe the signal.
  + Every symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.
  + The test configures two antenna ports. Therefore, two beamIDs are needed. The same beamID is used for user data and CRS REs.
    - For Antenna Port 0, the beamId is contained in the C-Plane data section header, while the Antenna Ports 1 ("beamIdAP1") is contained in the ExtType=3
  + Configure following parameters in the Section Extension ExtType=3 as defined in CUS Plane Specification [2].
    - codebookIndex - indices of the precoder codebook that are used for precoding
    - layerID (Layer ID for DL transmission) - layer ID that are used for DL transmission
    - txScheme (transmission scheme) - set to Spatial multiplexing (no CDD)
    - numLayers (number of layers used for DL transmission) - set to 0001 (implies 2)
    - crsReMask (CRS resource element mask)
    - crsSymlNum (CRS symbol number indication)
    - crsShift (crsShift used for DL transmission)
  + Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.3.4.
  + Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23.
3. The signal relation between the two signal analyzers or two channels of the signal analyzer should match the expected result for MIMO transmission as specified in ETSI TS 136.141 clause 4.5.1.1.

### ![]({{site.baseurl}}/assets/images/160e5791d6f8.png) UC-Plane O-RU Scenario Class Section Type 3 (ST3)

The Section Type 3 tests for FR1 FDD Non-conducted OTA are the same as the tests described in clause 3.2.3.8 . Only the setup for the tests are different reflecting the difference between non-conductive and conductive mode testing.

### FR1 TDD Conducted Signal Tests

### ![]({{site.baseurl}}/assets/images/9f920dd8ed0d.png) UC-Plane O-RU Scenario Class NR testing Generic (NRG)

All TDD tests described in this clause will be combined UL and DL tests (i.e. a single test frame describing both uplink and downlink). The default test frame used in this clause is described in clause 3.2.1.1.3 of this document. There are several variations on this test signal depending on the capabilities of the radio. If the radio does not support the numerology used in the example tests as reported in the M-plane it will be up to the test developer to modify their tests to adapt to the radio. This can usually be accomplished by using stock test patterns described above. The test is expected to follow the same spirit as the tests in this document but things like symbol numbers, number of PRBs, etc. may have to be changed.

#### ![]({{site.baseurl}}/assets/images/8b16a9aeb229.png) UC-Plane O-RU Scenario Class Base 3GPP DL/UL

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can meet the most basic uplink and downlink requirements for O- RAN fronthaul using a TDD signal. Subsequent tests will build on this to exercise additional capabilities of the Fronthaul.

Using the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the default signal.

The purpose of this test is to ensure the radio can transmit and receive a basic 3GPP, TDD test frame using the default parameters in clause 3.2.1.1.5 of this document (or a similar 3GPP waveform) except only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). As per clause 3.2.1.1.3 this test requires all-zero data to populate all allocated resource blocks. This configuration corresponds to stock data section A in all symbols that do not contain PDCCH channels.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 in downlink direction and G-FR1-A1-5 (SCS30k\_51RB) in the uplink direction. If the O-RU does not support this bandwidth another 3GPP FRC can be selected. In the test frame, all PDSCH data is set to all zeros and PUSCH is set to all zeros. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer and signal source. It must also support the default parameters defined in clause 3.2.1.1.3 above.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer and signal source to the O-RU antenna ports and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 in the CUSM emulator. Built the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal. Every symbol other than the ones used in the test should either be allocated with user data or left unallocated (empty). If allocated with user data, they be described by either a single or multiple sections (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD

transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received in downlink direction by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and all zero data, the test passes.
3. The test frame received in uplink direction by the TER should be the same as the signal described above. If it contains all the same PRB assignments and PN23 sequence data, the test passes.

#### ![]({{site.baseurl}}/assets/images/f61e0f40785e.png) UC-Plane O-RU Scenario Class Extended 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can meet the extended uplink and downlink requirements for O-RAN fronthaul using a TDD signal. This test modifies the previous test by using a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the default signal.

The purpose of this test is to ensure the radio can transmit and receive an extended 3GPP TDD test frame using the default parameters in clause 3.2.1.1.3 of this document (or a similar 3GPP waveform) except only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer and signal source. It must also support the default parameters defined in clause 3.2.1.1.1 above.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and PN23 sequence data, the test passes.

#### ![]({{site.baseurl}}/assets/images/b7f6c5fb102a.png) UC-Plane O-RU Scenario Class Extended using RB parameter 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the rb parameter set, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with the rb parameter set. This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using the rb bit in both uplink and downlink.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause 3.2.1.1.3. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer. It must also support the default parameters defined in clause 3.2.1.1.1 above.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

###### For the downlink slots and symbols:

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. If symbols other than the ones under test are allocated with user data, every allocated (see

below) symbol should be described by sections (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Symbol #3 of each slot should be Stock data section "D" as shown in clause 3.2.1.1.5 above. The control plane for symbol #3 will only include PRBs number 5 through 23. C-Plane messages will have the rb bit set to one for this section. All other DL-SCH symbols and PRBs other than PRBs 5-23 will not contain data. There are two ways to conduct the test:

* + 1. A single data section with the rb bit set and a PN23 sequence sent as shown below:

![]({{site.baseurl}}/assets/images/d87fa727c1b2.png)

A new PN23 sequence will be started but every other PRB will contain only the odd parts of the PN23 sequence (as shown in green). The other PRBs (shown in orange) will not contain data and will not be sent to the O-RU. Thus, a single data section will be used, and the corresponding U-Plane message will only contain data for the odd PRBs as shown above. The parts of the PN23 sequence not used (shown marked with an X) will be discarded.

* + 1. Two data sections one containing the odd parts of the PN23 sequence and the other containing the even parts as shown below:

![]({{site.baseurl}}/assets/images/de8fb7846298.png)

A new PN23 sequence will be started but every other PRB in one section will contain only the odd parts of the PN23 sequence (as shown in green). The second data section will contain the even parts of the PN23 sequence. The C-Plane messages for both sections will use the rb bit. The U-Plane messages corresponding to the first data section will contain only the odd parts of the PN23 sequence, the U-Plane message corresponding to the second data section will only contain the even parts. Thus, a continuous PN23 sequence will be sent only in PRBs 5 through 23.

Additional sections should be included to describe the DCI symbols as well as Reference Signals described in 38.141-1 as well as if DL-SCH is allocated for all the symbols other than the one under test (Symbol #3). Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

* + - * **For the uplink sections and symbols:** Load uplink test waveform (G-FR1-A1-5 : SCS30k\_51RB) on the RF signal source. Note this signal has a PN23 sequence as user data. Configure the signal source to play the TDD test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that all C-Plane messages have been sent. Ensure the O-RU and source are synchronized so downlink slots do not conflict with uplink slots. Load C-Plane message sequence on Test Equipment O-RU (TER) - In this test only symbol number 6 will be used and all 51 PRBs will be used. Symbol number 6 will be a guard symbol in the flexible slot if the TDD configuration according to table 3.2.1.1 is used, so only 2 uplink slots per frame are possible. If needed, another symbol than symbol number 6 can be selected. All other symbols may either contain user data or may be left unallocated except for required DRMS signals which may be used to synchronize test equipment. There are two options for conducting this test:
        1. A single data section with the rb bit set and a PN23 sequence sent as shown below:

![]({{site.baseurl}}/assets/images/9462bc0bd71f.png)

A new PN23 sequence will be started but every other PRB will contain only the odd parts of the PN23 sequence (as shown in orange). The other PRBs (shown in blue and white) may either have allocated user data and will be sent to the O-RU or may be left unallocated and will not be sent to the O-RU. A single data section will be used for symbol #6, and the corresponding U-Plane message will only contain data for the odd PRBs as shown above.

The parts of the PN23 sequence not used (shown marked with an X) will be discarded.

* + - * 1. Two data sections one containing the odd parts of the PN23 sequence and the other containing the even parts as shown below:

![]({{site.baseurl}}/assets/images/5f341852097c.png)

A new PN23 sequence will be started but every other PRB in one section will contain only the odd parts of the PN23 sequence (as shown in green). The second data section will contain the even parts of the PN23 sequence. The C-Plane messages for both sections will use the rb bit. The U-Plane messages corresponding to the first data section will contain only the odd parts of the PN23 sequence, the U-Plane message corresponding to the second data section will only contain the even parts. Thus, a continuous PN23 sequence will be sent only in PRBs 0 through 51

###### Steps:

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.
* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and PN23 sequence data, the downlink test passes.
4. The test frame extracted from the uplink U-Plane messages should be the same as the uplink signal described above. If it contains all the same PRB assignments and PN23 sequence data, the uplink test passes.

#### ![]({{site.baseurl}}/assets/images/5a3fb0c7674c.png) UC-Plane O-RU Scenario Class Extended using SymInc parameter 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the SymInc parameter set, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with the SymInc parameter set.

This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using the SymInc bit in both uplink and downlink.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause 3.2.1.1.3. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The radio must support the SymInc Parameter as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol other than the ones used in the test should either be allocated with user data or left unallocated (empty). If allocated with user data, they may be described by either a single or multiple sections (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.

Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** If the symbols other than the ones under test (symbols #5 and #6) have user data allocated, these symbols should be described by a single or multiple type 1 section (DL-SCH and DCI) except symbols #5 and #6 which will be used for the SymInc test. The data in these sections must be a PN23 sequence using an initial seed of all ones. Each symbol should be a new PN23 sequence, that is PRB 0 should contain the data from a new PN23 sequence for each symbol. Symbols number 5 and 6 should be stock data sections type "E" as shown above. This stock data section consists of two adjacent symbols each containing two sections. The corresponding C-Plane message will contain 4 section IDs in a single C-Plane message describing symbols #5 and #6. The startSymbolId in the application header will be symbol #5. The third section ID for symbol #6 will have the SymInc bit set informing the O-RU that this section will begin describing symbol #6. The corresponding U-Plane messages will be a new PN23 Sequence for each symbol (5 and 6). Additional sections should be included to describe the DCI symbols as well as Reference Signals described in 38.141-1.

**For the uplink sections and symbols:** Load uplink test waveform (G-FR1-A1-5 : SCS30k\_51RB, 100 MHz) on the RF signal source. Note this signal has a PN23 sequence as user data. Configure the source to generate a new PN23 sequence in symbols #5 and #6. Configure the signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that all C- Plane messages have been sent. Ensure the O-RU and source are synchronized so downlink slots do not conflict with uplink slots. Load C-Plane message sequence on Test Equipment O-RU (TER) - Only symbols #5 and #6 in each slot will be used in this test. Symbol number 6 will be a guard symbol in the flexible slot if the TDD configuration according to table 3.2.1.1 is used, so only 2 uplink slots per frame are possible. If needed, another symbol than symbol number 6 can be selected. All other symbols may either contain reference signals only or data and reference signals but will not be considered part of the test.

These two symbols will be used to determine whether the radio properly increments the current symbol ID when the SymInc bit is set. The C-Plane message for symbol #6 should have the SymInc bit set. This message should have a third section describing symbol #6 (using the SymInc mechanism). All PRBs in each symbol will be requested (In the example waveform 51 PRBs).

###### Steps:

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.
* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and the correct PN23 data, the downlink test passes.
4. The test frame extracted from the uplink U-Plane messages should be the same as the uplink signal described above. If it contains all the same PRB assignments and correct PN23 data, the uplink test passes.

#### ![]({{site.baseurl}}/assets/images/f65504ce6555.png) UC-Plane O-RU Scenario Class Extended using reMask parameter 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the reMask parameter set, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with the reMask parameter set.

This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using the reMask bit in both uplink and downlink.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause 3.2.1.1.3. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The radio must support the reMask Parameter as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 in the CUSM emulator and modified as described below. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) as described below for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol other than the ones used in the test should either be allocated with user data or left unallocated (empty). If allocated with user data, they will be described by either a single or multiple sections (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only.

Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

###### For the downlink slots and symbols:

Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal as described below. If the symbols other than the ones under test (symbol #2) have user data allocated, these Every symbols should be described by a single or multiple type 1 sections (DL-SCH and DCI). Only symbol #2 will be used for the reMask test. The data in this section must be a PN23 sequence using an initial seed of all ones. The first bits of the PN23 will be in PRB1 and continue in consecutive resource elements to the end of PRB5. No Section Type zero messages will be used for this test. The PN23 sequence will be interleaved with DMRS signals as shown below:

![]({{site.baseurl}}/assets/images/a892307434ce.jpg)

Symbol number 2 should be stock data Section Type "D" as shown above. This test will only be using PRBs 1 through 5. The corresponding C-Plane message will contain two section IDs in a single C-Plane message describing symbol #2. The startSymbolId in the application header will be symbol #2. The C-Plane message will have one section with the reMask set to 101010101010b and another section with the reMask set to all ones. The first section (reMask = 101010101010b) will be for PRB 1 only, the second section will be for PRBs 2-5 and will have an reMask value of all ones. The two sections will have different section IDs.

The corresponding U-Plane messages will be a new PN23 Sequence (initial seed is all ones) in PRBs 1 through 5 of symbol #2 alternated with the DMRS signals. The first U-Plane message will correspond to sectionID with reMask set to 101010101010b and will contain one PRB with user data and DMRS signals as shown. The second U-Plane message will correspond to PRBs 2-5 and will containing the same alternate data. The purpose of the section ID containing valid data is to ensure the radio sends a signal to synchronize the signal analyzer.

###### For the uplink sections and symbols:

Load C-Plane message sequence on Test Equipment O-RU (TER) symbol #2 only PRBs 1-5 will be sent with the alternating user data and DMRS pattern shown below. Other symbols may be used in this test or be left unallocated (unused). However other symbols containing reference signals may be used to ensure the O- RU can synchronize with the TER. The format of symbol #2 used in this test will be:

![]({{site.baseurl}}/assets/images/5e23f7b7eafd.jpg)

The TER will not request any other symbols from the O-RU in this test unless they are needed by the TER for synchronization. The C-Plane message describing symbol #2 should contain two sections with different section IDs. Only PRBs 1-5 will be used. The first section should only describe PRB 1 and have an reMask of 101010101010b. The second section should describe PRBs 2-5 and have an reMask of all ones. The two sections should have different section IDs.

###### Steps:

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.
* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should only contain the same PN23 signals that were sent in the U-Plane only for PRBs 2-5. only DMRS signals should be in PRB1.
4. The test frame extracted from the uplink U-Plane messages should be the same as the uplink signal described above. In particular the U-Plane messages for PRBs 2-5 should contain user data as well as DMRS signals while PRB1 should only contain DMRS signals.

#### ![]({{site.baseurl}}/assets/images/c50aa42dc95e.png) UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with section extension 6, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with section extension 6. This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using section extension 6 in both uplink and downlink.

In this test stock data section definition C will be used to exercise the non-contiguous RB allocation, all 273 PRBs (51 in the uplink slots)or the max number of PRBs per symbol for the highest numerology the radio supports will be used in this test.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause 3.2.1.1.3. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The radio must support section extension 6 as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol other than the ones used in the test should either be allocated with user data or left unallocated (empty). If allocated with user data, they may be described by either a single or multiple sections (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in section 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** Only symbols number 6 and 7 will be used in each slot. Other symbols may be used in this test or be left unallocated (unused). However other symbols containing reference signals may be used to ensure the O-RU can synchronize with the TER. The starting PRB will be zero and number of PRBs will be chosen from one or more columns in Table 3.2.5-2 below. The resource block group size will be 16 based on ETSI TS 138.214 Table 5.1.2.2.1-1 as shown in Table 3.2.5-1 below using configuration 2.

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Bandwidth Part Size** | **Configuration 1** | **Configuration 2** |
| 1 - 36 | 2 | 4 |
| 37 - 72 | 4 | 8 |
| 73 - 144 | 8 | 16 |
| 145 - 275 | 16 | 16 |

</div>

###### Table 3.2.5-1 RBG Size

Using the calculations in clause 7.7.6 of [2] for the test waveform described above, the ID of the last RBG will be 17, f(0) will be 16, f(n) will be 16 and f(lastRbgID) will be 1 (17 total RBGs). StartPrbc will be zero and numPrbc will be 273. If the radio does not support this numerology the following table will apply. The number of PRBs correspond to Table 3.2.5-2.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (11-79)** | | | | | | | | | | |
| max PRB/sym | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| numPRBc | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| rbgSize | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| lastRbgID | 2 | 5 | 6 | 7 | 6 | 6 | 6 | 8 | 8 | 4 |
| f(0) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(n) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(lastRbgID) | 3 | 4 | 1 | 4 | 2 | 3 | 4 | 1 | 2 | 15 |
| rbgMask (Hex) | 0000005 | 000003D | 000007D | 00000FD | 000007D | 000007D | 000007D | 00001FD | 00001FD | 000001D |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (100-273)** | | | | | | | | | | |
| max PRB/sym | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| numPRBc | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| rbgSize | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| lastRbgID | 6 | 6 | 6 | 8 | 8 | 8 | 10 | 13 | 16 | 17 |
| f(0) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(n) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(lastRbgID) | 4 | 10 | 11 | 4 | 5 | 7 | 2 | 9 | 14 | 1 |
| rbgMask (Hex) | 000007D | 000007D | 000007D | 00001FD | 00001FD | 00001FD | 00007FD | 0003FFD | 001FFFD | 003FFFD |

</div>

###### Table 3.2.5-2 Stock Data Sections

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal. If the symbols other than the ones under test (symbol #6 and #7) have user data allocated, these symbols should be described by a single or multiple type 1 section (DL-SCH and DCI) except symbols

#6 and #7 which will be used for the section extension 6 test. The data in symbol #6 should be a new PN23 sequence starting in the first PRB and continuing to PRB 273 (RBG number 17). Symbol #7 should be identical to symbol #6. The rbgMask value should be set to 0x003FFFD and the symbolMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test.

The O-DU emulator will build a U-Plane message containing the PN23 IQ data for the first 16 PRBs (RBG 0), this message will have the section ID used in the C-Plane message described above. Another U-Plane message will be created using the same section ID but with the PN23 data for RBGs 2-17 in it. The same U-Plane messages will be used for symbol #7.

**For the uplink sections and symbols:** For this test symbols number 6 and 7 will be used in each slot. The starting PRB will be zero and number of PRBs will be 51. The resource block group size will be 8. Using the calculations in clause 7.7.6 of [2], the ID of the last RBG will be 6, f(0) will be 8, f(n) will be 8 and f(lastRbgID) will be 3. Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols #6 and #7 which will be used for the section extension 6 test. Symbol number 6 will be a guard symbol in the flexible slot if the TDD configuration according to table 3.2.1.1 is used, so only 2 uplink slots per frame are possible. If needed, another symbol than symbol number 6 can be selected. The data in symbol #6 is expected to be a new PN23 sequence starting in the first PRB and continuing to PRB 51 (RBG number 6). Symbol #7 should be identical to symbol #6. The rbgMask value should be set to 0x000007D and the symbolMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test. If the radio only supports another numerology see the tables above in the downlink sections and symbols for appropriate modifications.

###### Steps:

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.
* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the downlink test passes.
4. The test frame extracted from the uplink U-Plane messages should be the same as the uplink signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the uplink test passes.

#### ![]({{site.baseurl}}/assets/images/6dfe6ca37e46.png) UC- Plane O-RU Scenario Class Extended 3GPP DL/UL - Resource Allocation - Coupling C and U plane via time and frequency

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can meet the extended uplink and downlink requirements for O-RAN fronthaul using a TDD signal. This test uses time and frequency to couple C-Plane and U-Plane messages.

Using the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the default signal.

The purpose of this test is to ensure the radio can transmit and receive an extended 3GPP TDD test frame using the default parameters in clause 3.2.1.1.3 of this document (or a similar 3GPP waveform) except only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence. The radio must report over the M-Plane that it supports C and U plane coupling via time and frequency.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1. It will be for 5G New Radio only. The radio must report over the M-Plane that it supports C and U plane coupling via time and frequency.

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer and signal source. It must also support the default parameters defined in clause 3.2.1.1.1 above.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in section 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is

responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source. All section IDs in C-Plane messages and downlink U-Plane messages must be 4095.

C-Plane and Downlink U-Plane messages sent by the TER will have valid values in the following fields:

* + - EAxC ID
    - Datadirection bit
    - Frame ID, subframeID, slotID, startsymbolID, and NumSymbol
    - SectionID must have a value 4095
    - SymInc, rb reMask and section extension #6 are *not* used in this test

It is the responsibility of the TER to properly arrange uplink U-Plane messages using only time and frequency resources.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. All received U-Plane messages must have section ID equal to 4095
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and PN23 sequence data, the test passes.

#### ![]({{site.baseurl}}/assets/images/b490a3bec76a.png) UC- Plane O-RU Scenario Class Extended 3GPP DL/UL - Coupling C and U plane via Time and Frequency and Section Description Priorities

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to test whether the radio can implement coupling U and C plane via time and frequency and section description priorities requirements for O-RAN fronthaul using a TDD signal. This test combines the FDD, uplink and downlink tests for these same features. Note, there are two versions of this feature: coupling C and U plane messages via frequency and time and Section Description Priorities and coupling C and U plane messages via frequency and time and Section Description Priorities (optimized). This test requires both tests to be performed if the radio supports both methods otherwise only one test is to be performed in the radio only supports one of these methods. These methods are listed under test methodology below.

Starting with the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the signals described below.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document and those specified below. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1- TM1.1. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. It will be a TDD signal.

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer and signal source. It must also support the default parameters defined in clause 3.2.1.1.1 above.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure for Coupling C and U plane messages via frequency and time with section priorities

Build an appropriate C and U plane signals for the signals described below in the CUSM emulator. Every slot used in the test should be described by a single C-Plane message with multiple sections (DL-SCH that are used for the test, DMRS and DCI) using a Section Type 1 message. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

* + - Downlink procedure:

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| # | Section ext 6 | priority | symbolMask | startPrbc | numPrbc | reMask | rbgMask | beamId | numSymbol | Note |
| 1 | yes | +1 | 00000000000100 | 0 | 192 | 010001000100 | 0xFFFFC00 | 1 | 1 | CSI  referenc e signal (CSI- RS) |
| 2 | yes | +1 | 00100000000000 | 0 | 192 | 010001000100 | 0xFFFFC00 | 2 | 1 | CSI  referenc e signal (CSI- RS) |
| 3 | no | 0 | 11111000000000  Not used in this section without section extension  6. Just shown for information | 0 | 273 | 111111111111 | N/A | 100 | 5 | UE1 |
| 4 | yes | 0 | 00000000001100 | 15 | 32 | 111111111111 | 0x6000000 | 200 | 2 | UE2 |
| 5 | no | 0 | 00000111110000  Not used in this section without section extension  6. Just shown for information | 31 | 48 | 111111111111 | N/A | 300 | 5 | UE3 |
| 6 | no | 0 | 00000000000011  Not used in this section without section extension  6. Just shown for information | 10 | 2 | 111111111111 | N/A | 3 | 2 | Special channel |

</div>

###### Table 3.2.5-3 Time and Frequency Coupling with Priority TDD DL

In this test the section configuration will be as shown in Table 3.2.5-3above. The 6 sections will comprise one slot and this slot will be repeated continuously in the downlink slots in the TDD frame to synchronize the TER signal analyzer. The six sections will be sent on one C-Plane message using C and U plane coupling via time and frequency. The configuration above follows the example given in the CUSM specification.

The section numbers in the above table do not represent SectionID numbers but individual sections. Sections #1 and #2 describe hypothetical CSI-RS signals sent in symbols #2 and #11 in each slot. These signals have sub-carriers masked by reMask. The CSI-RS signals generation follows ETSI TS 138.211 V16.2.0 (or after), clause 7.4.1.5 with nID = 0, row 1, N=1 and L=1. These sections use section extension 6 and contain a higher priority than all other sections.

Section #3 describes PN23 data sent to hypothetical UE #1 it overlaps REs in sections #1 and #2 but has a lower priority so sections #1 and #2 are valid. Since section #3 has contiguous symbols section extension 6 is not needed.

Section #4 is for hypothetical UE #2. It shares symbol 2 with the CSI-RS signal in Section #1. Since the symbols are not contiguous it uses sections extension 6 but the priority is set to the default 0.

Section #5 is for hypothetical UE #3 and uses a contiguous set of symbols so section extension 6 is not needed. It does not overlap any other signals. It shares symbol 2 with the CSI-RS signal in Section #1. This section is optional because it does not test Section Description Priority.

Section #6 is a hypothetical special channel using two symbols and does not require section extension 6. This section is also optional.

U-Plane messages will contain:

* CSI-RS signals as described by section #1 for symbol #2
* CSI-RS signals as described by section #2 for symbol #11
* A new PN23 sequence in each of the last 5 symbols as described in section #3. Note that for symbol #11 the PN sequence will be pierced by the CSI-RS signals.
* A new PN23 sequence for symbol #2 as described by section #4 as well as a new PN sequence for symbol #3. These sequences are only 32 PRBs long and start in PRB 15. The sequence in symbol #2 will be pierced by CSI-RS signals.
* The user data for sections number #5 and #6 are standard PN23 sequences only for these symbols and PRBs described in the table above.

###### Procedure for Coupling C and U plane messages via frequency and time with section priorities (optimized)

This test will be identical to the above test with the following exceptions:

* + - There will be two C-Plane messages describing the uplink and downlink signals to be sent.
    - The first two sections listed in the table above (those with higher priorities) will be repeated in both C- Plane messages and will have a section ID equal to a value between 0 and "max-highest-priority- sections-per-slot" as sent on the M-Plane.
    - The other sections will be divided between the two C-Plane messages and not repeated.
    - The repeated C-plane message will have the "repetition" bit set to one.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer must be the same as the signal described above. It must contain all the same PRB assignments and PN23 sequences.
3. (VOID)
4. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beam under test. The procedure for test case 3.2.3.2.3 (UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming) should be used.
5. These expected results are applicable for either or both forms of this test.
6. If all of the above results are observed the test passes.

#### ![]({{site.baseurl}}/assets/images/fa2b8c65e02a.png) UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension using section extension 12 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with section extension 12, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with section extension 12. This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using section extension 12 in both uplink and downlink.

In this test stock data section definition C will be used to exercise the non-contiguous RB allocation, all 273 PRBs (48 of the 51 in the uplink slots) or the max number of PRBs per symbol for the highest numerology the radio supports will be used in this test.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause 3.2.1.1.3. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The radio must support section extension 12 as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal as described above in clause 3.2.1.1.3 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.

Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** Only symbols number 6 and 7 will be used in each slot. Other symbols may contain data including reference signals to ensure test equipment can synchronize with the signal. The starting PRB will be zero and number of PRBs will be chosen from one or more columns in Table 3.2.5-5 below. The resource block group size will be 16 based on ETSI TS 138.214 Table 5.1.2.2.1- 1 as shown in Table 3.2.5-4 below using configuration 2.

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Bandwidth Part Size** | **Configuration 1** | **Configuration 2** |
| 1 - 36 | 2 | 4 |
| 37 - 72 | 4 | 8 |
| 73 - 144 | 8 | 16 |
| 145 - 275 | 16 | 16 |

</div>

###### Table 3.2.5-4 Resource Block Group Size

Using the calculations in clause 7.7.6 of [2] for the test waveform described above, the ID of the last RBG will be 17, f(0) will be 16, f(n) will be 16 and f(lastRbgID) will be 1 (17 total RBGs). StartPrbc will be zero and numPrbc will be 273. If the radio does not support this numerology the following table will apply. The number of PRBs correspond to Table 3.2.5-5.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (11-79)** | | | | | | | | | | |
| max PRB/sym | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| numPRBc | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| rbgSize | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| lastRbgID | 2 | 5 | 6 | 7 | 6 | 6 | 6 | 8 | 8 | 4 |
| f(0) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(n) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(lastRbgID) | 3 | 4 | 1 | 4 | 2 | 3 | 4 | 1 | 2 | 15 |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (100-273)** | | | | | | | | | | |
| max PRB/sym | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| numPRBc | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| rbgSize | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| lastRbgID | 6 | 6 | 6 | 8 | 8 | 8 | 10 | 13 | 16 | 17 |
| f(0) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(n) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(lastRbgID) | 4 | 10 | 11 | 4 | 5 | 7 | 2 | 9 | 14 | 1 |

</div>

###### Table 3.2.5-5 Stock Data Sections

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal.

Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols

#6 and #7 which will be used for the section extension 12 test. The data in symbol #6 should be a new PN23 sequence starting in the first PRB and continuing to PRB 273 (RBG number 17). Symbol #7 should be identical to symbol #6. The symMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test. The relevant parameters for the downlink C-Plane message are shown in Figure 3.2.5.1-1 below:

![]({{site.baseurl}}/assets/images/6fdbfcba893d.jpg)

###### Figure 3.2.5.1-1 Downlink C-Plane Parameters

The O-DU emulator will build a U-Plane message containing the PN23 IQ data for the first 16 PRBs (RBG 0), this message will have the section ID used in the C-Plane message described above. Another U-Plane message will be created using the same section ID but with the PN23 data for RBGs 2-17 in it. The same U-Plane messages will be used for symbol #7.

**For the uplink sections and symbols:** For this test symbols number 6 and 7 will be used in each slot. The starting PRB will be zero and number of PRBs will be 48. The resource block group size will be 16. Using the calculations in clause 7.7.6 of [2], the ID of the last RBG will be 17, f(0) will be 16, f(n) will be 16 and f(lastRbgID) will be 1.

Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols #6 and #7 which will be used for the section extension 6 test. The data in symbol #6 is expected to be a new PN23 sequence starting in the first PRB and continuing to PRB 48 (RBG number 2). Symbol #7 should be identical to symbol #6. The symMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test. If the radio only supports another numerology see the tables above in the downlink sections and symbols for appropriate modifications. The relevant parameters for the uplink C-Plane message are shown in Figure 3.2.5.1-2 below:

![]({{site.baseurl}}/assets/images/d205c17a6814.jpg)

###### Figure 3.2.5.1-2 Uplink C-Plane Parameters

**Steps:**

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.
* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the downlink test passes.
4. The test frame extracted from the uplink U-Plane messages should be the same as the uplink signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the uplink test passes.

#### ![]({{site.baseurl}}/assets/images/b0fc33cb3581.png) UC-Plane O-RU Scenario Class Static SRS Allocation UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the O-RU can support static SRS configuration through the M-Plane. This is an uplink only test so there is no corresponding downlink test for TDD. The O-RU must report through the M-Plane that it supports static configuration of SRS.

This test will use the standard TDD test frame described in clause 3.2.1.1. The test will have the CUSM emulator configure the O-RU, through the M-Plane, with a section of time/frequency resources reserved for static uplink SRS, these will be limited to the uplink slots of the TDD frame. The signal source will be programmed to send simulated SRS signals in a subset of those resources. The O-RU should receive this SRS signals and pass them through to the CUSM emulator using U-Plane messages. Note, there will be no C-Plane messages sent from the CUSM emulator and the O-RU. The signal generator will signal power levels at least 30 dB above Reference Sensitivity power Level described in TS 138.141-1 Table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance. The placement of the time frequency resources is not specified in this test so it may be placed in any uplink slots of the TDD frame.

The TER (Test Equipment, O-RU) generates an uplink SRS signal on the antenna connector or TAB connector. The TER will capture the U-Plane messages generated by the DUT and validate whether the payload matches the uplink signal as well as beam characteristics. The metric used to validate that the signal received by the CUSM emulator matches the signal sent by the signal generator will be EVM as described in Annex H.7 of ETSI TS 138.141. While some 3GPP test documents (e.g. ETSI TS 138.521 clause 6.4.2.1.3) suggest treating the EVM requirements for physical Zadoff-Chu sequences such as PRACH the same as QPSK for EVM requirements, this document will decrease the required EVM to the level specified for 64 QAM. The purpose of this is to ensure that there is no chance of false positives where a random, mistaken signal sent by the O-RU closely mimics the test signal used by the TER. Since there are no impairments made to the uplink SRS signal this should be well within the capabilities of the O-RU.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The O-RU must indicate it supports static SRS allocation. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. Note this signal may be changed to any of the 3GPP sensitivity test signals in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this clause will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M- Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required SRS test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

Implicit in this Initial set up is statically configuring O-RU with a section of time/frequency resources for static SRS signals.

.

###### Procedure

* + - Build an SRS signal in the signal generator that fits in the preconfigured time frequency resources set in the initial configuration.
    - Load the waveform into the signal source:
    - Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that signals the start of a frame boundary.
    - Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
    - Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port connected
    - TER will arrange U-Plane messages according to time and frequency
    - Start SRS waveform generation on the signal generator. Ensure the test frame is repeated enough times to generate a statistically significant number of SRS occasions. That is at least 10 occasions.
    - Extract IQ information
    - Calculate EVM of the SRS signal received by the CUSM emulator to the ideal signal generated by the signal source. Use the method described in ETSI TS 138.141 Annex H.7 to perform the calculation.

###### Test Requirement (expected result)

1. The verdict is "Test pass" if the calculated EVM is less than 8% as median EVM measured over the minimum number of SRS occasions of at least 10 occasions.
2. If any of the test conditions are not true, the verdict for the whole test is "Fail"

#### ![]({{site.baseurl}}/assets/images/ad531e54b5cf.png) UC Plane O-RU Base Class TDD Test UL - Static PRACH allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the O-RU can support static PRACH configuration through the M-Plane. This is an uplink only test so there is no corresponding downlink test for downlink slots. The O-RU must report through the M-Plane that it supports static configuration of PRACH. The concept is to repeat the spirit of test 3.2.3.8.1 (5GNR PRACH test) without sending any C-Plane type 3 messages and configuring the O-RU using only the M- Plane.

TER will setup the signal generator with a PRACH test waveform according to ETSI TS 138.141-1 clause 8.4.1 and

* 1. The test waveform will contain the same preamble ID repeated by following the timing offset scheme specified in the figures 8.4.1.4.2-2 or 8.4.1.4.2-3 ETSI TS 138.141-1 depending on the selected PRACH format.

This is an example for FR1 - SCS=30 kHz - BW=100MHz - Format A3 configuration index 132 (From Table 6.3.3.2-3, unpaired spectrum), at each occasion the time offset of the same preamble index (selected according to table A.6-1 ETSI TS 138.141.1) is incremented by 100nsec starting from 0 up to 800nsec (9 occasions per frame). Each PRACH occasion is at the beginning of the first nine used sub-frames. The scheme is repeated every frame. The test must be conducted using a PRACH format and configuration index the radio has reported it supports.

![A screenshot of a computer  Description automatically generated]({{site.baseurl}}/assets/images/9b3c0445dd84.png)![A grey rectangular object with a black border  Description automatically generated]({{site.baseurl}}/assets/images/791e1ea5694e.png)

###### Figure 3.2.5.1-3 FR1 SCS 30Kz 100MHz Format A3, Unpaired Spectrum, configuration index 132

According to the PRACH waveform setting, the TER will generate a corresponding sequence of M-Plane messages which include the following parameters (According to the M-Plane specification and the PRACH configuration index supported):

* + - grouping static-prach-configuration
    - leaf pattern-period - "Period after which static PRACH patterns are repeated. Unit: number of frames."
    - leaf guard-tone-low-re - "Number of REs occupied by the low guard tones."
    - leaf num-prach-re - "Number of contiguous PRBs per data section description"
    - leaf guard-tone-high-re - "Number of REs occupied by the high guard tones."
    - leaf sequence-duration - "Duration of single sequence of the PRACH. Sequence may be considered as 'single PRACH symbol'"
    - list prach-patterns - key prach-pattern-id - "Provides a PRACH pattern. Each record in the list represents a single PRACH occasion. Number of list entries cannot exceed max-prach-patterns"
      * leaf prach-pattern-id - "Supplementary parameter acting as key for prach-pattern list."
      * leaf number-of-repetitions - "This parameter defines number of PRACH repetitions in PRACH occasion, to which the section control is applicable
      * leaf number-of-occasions - "This parameter informs how many consecutive PRACH occasions is described by the PRACH Pattern"
      * leaf re-offset - "Offset between the start of the lowest-frequency RE of the lowest frequency PRB and the start of the lowest frequency RE belonging to the PRACH occasion. The re-offset is configured as number of PRACH REs.
      * list occasion-parameters - "list of cp-lengths, gp-lengths and beam-ids applicable per each PRACH occasion in PRACH pattern.

NOTE: the number of records in this list MUST be equal to value of parameter number-of- occasions."

* + - * + leaf occasion-id - "Supplementary parameter acting as key in 'occasion-parameters' list"
        + leaf cp-length - "Cyclic prefix length. See CUS-Plane specification for detailed description."
        + leaf gp-length - "Guard period length."
        + leaf beam-id - "This parameter defines the beam pattern to be applied to the U-Plane data. beamId = 0 means no beamforming operation will be performed."
      * leaf frame-number - "This parameter is an index inside the pattern-length, such that PRACH occasion is happening for SFN which fulfills following equation: [SFN mod pattern-length = frame-id]"
      * leaf sub-frame-id - "Identifier of sub-frame of the PRACH occasion. Value is interpreted in the same way as subframeId field in a section description of a C-Plane message."
      * leaf time-offset - "This parameter defines the time-offset from the start of the sub-frame to the start of the first Cyclic Prefix of PRACH pattern"

By the corresponding U-Plane messages in the uplink direction, the TER will try to detect the presence of the corresponding preamble at the expected timing offset and calculate the probability of detection Pd according to the definition in TS38.141-1 clause 8.4.1.1.

The signal will be exercised at only one O-RU port without adding any external AWGN power level or multipath fading profile and at a power level avoiding detection errors due to poor SNR (rule described in the sub-section C of this scenario class).

The test will have the CUSM emulator configure the O-RU, through the M-Plane, with a section of time/frequency resources reserved for static uplink PRACH. The default is the PRACH configuration described in 3GPP above, but the test may be conducted with changes if the radio does not support those exact configurations. The signal source will be programmed to send simulated PRACH signals in those resources. The O-RU should receive this PRACH signal and pass them through to the CUSM emulator using U-Plane messages. Note, there will be no C- Plane messages sent from the CUSM emulator and the O-RU.

###### Test Entrance Criteria

O-RU must have a conducted antenna port (FR1) or TAB connector.

By the M-plane or by manufacturer declaration, TER will detect all the supported SCSs, FFT sizes and carrier bandwidths by the O-RU. It is assumed that only one combination of the three above parameters supported by the O-RU is enough to validate the test. TER shall generate M-Plane messages according to one of the PRACH formats in table A.6-1 ETSI TS 138.141. TER will choose the format either according to the manufacturer declaration item

D.103 "PRACH format and SCS" in ETSI TS 138.141-1 or according to the format information obtained by the

M-plane in case O-RU implements this feature. If more formats are claimed, only one shall be selected to reduce the test time, preference will be given to a format specified in Table A.6.1 ETSI TS 138.141. It is assumed that the O-RU manufacturer will support at least one in that table. For the case of long preambles, it is assumed format 0 is always supported since this is the only one shown in the table A.6-1 ETSI TS 138.141.

###### Test Methodology a: Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-

Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required PRACH test signal upon receiving a trigger signal from the CUSM-E.

Implicit in this Initial set up is statically configuring O-RU with a section of time/frequency resources for static PRACH signals.

###### b: Procedure

* Set signal generator power by the following method:
  1. Select SNR from the scenario with two RX antennas and AWGN propagation condition in table 8.4.1.5-1, 8.4.1.5-2 or 8.4.1.5-3 ETSI TS 138.141-1 depending on the selected SCS and PRACH format.
  2. Select the AWGN power level according to the configured SCS and channel bandwidth in table 8.4.1.4.2-1 ETSI TS 138.141-1 and 38.141-1and multiply by the PRACH signal bandwidth.
  3. The output power will be given by the formula (SNR+Noise power - 3dB) rounded to the first decimal digit. Extra 3dB are to compensate that SNR and noise power are selected from the two RX ports test case and this test procedure requires only one O-RU port.

For example, for the FR1 - SCS=30 kHz - BW=100MHz - Format A3 SNR is -13.5dB and noise level is -70.1dBm/98.28MHz. signal generator power = -13.5dB -70.1dBm/98.28MHz\*(139\*30 kHz)-3dB =-19.5dBm.

* Set signal generator frequency offset to the central carrier frequency. PRACH will be mapped over frequency according to *msg1-FrequencyStart ( n*start *)* parameter equal to 0. PRACH format is set according to what TER has selected from the manufacturer declarations.

RA

* Start PRACH waveform generation on the signal generator. Ensure the test frame is repeated enough times

to generate a statistically significant number of PRACH occasions. That is at least 10 occasions.

* TER will perform PRACH detection per each PRACH occasion in each frame sent and compare the result with the expected preamble ID and the expected timing offset. Since the external AWGN and fading generator are not present the time error tolerance should be low, TER will use the time error tolerance in table 8.4.1.1-1 for AWGN case according to the corresponding PRACH format and PRACH SCS. A counter of successful detections is incremented at every matching. The probability of detection is given by the ratio between that counter and the number of the expected received PRACH occasions within the test time.
* Repeat the test procedure by setting *msg1-FrequencyStart ( n*start *)* parameter to the right edge of the configured carrier bandwidth in order to exercise a different frequency offset number

RA

###### Test Requirement (expected result)

1. Test is pass if the probability of detection is 100% determined across the minimum amount of at least 10 occasions.

#### ![]({{site.baseurl}}/assets/images/78308313890b.png) UC Plane O-RU Scenario Class Extended using section extension 13 for frequency hopping UL/DL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the capability of the O-RU to correctly interpret section extension 13, frequency hopping, for the uplink. Note, since frequency hopping is only used in uplink in 5G NR this test will be limited to the uplink slots of the basic TDD signal.

Using the standard TDD test frame described in clause 3.2.1.1.3 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink of the specified signal using section extension 13 for the uplink. The downlink portion of the test is not part of this test and may be any signal or no downlink signal at all.

In this test stock data section definition C will be used to exercise the non-contiguous RB allocation, all 273 PRBs (48 of the 51 in the uplink slots) or the max number of PRBs per symbol for the highest numerology the radio supports will be used in this test.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required).

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause 3.2.1.1.3. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The radio must support section extension 13 as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal as described above in clause 3.2.1.1.3 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.

Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** Any signal may be used if needed by the TER or no downlink signal may be used.

**For the uplink sections and symbols:** Load uplink test waveform (G-FR1-A1-5 : SCS130k\_51RB) on the RF signal source. Note this signal should contain a new PN23 sequence as user data in PRBs 0 through 50 for symbol 6 and PRBs 100 through 151 for symbol 7. This will be copied for all uplink slots. The remainder of the test waveform is as described in 3GPP. Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane

messages have been sent. Load a C-Plane message on Test Equipment O-RU (TER) - Use the O-DU emulator control interface to build the appropriate C-Plane message that describes this uplink signal. This section should have startSymbolId = 6, numPrbc = 51, and section extension 13 attached. The section extension should have nextSymbolId = 7 and nextStartPrbc = 100.

###### Steps:

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages (if needed) and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.
* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots (if needed)
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The verdict is "Test pass" if the test frame received by the signal analyzer contains two U-Plane messages for this section ID one containing the PN23 sequence for the first 51 PRBs in symbol 6 and PRBs 100 through 151 for symbol #7 containing the PN23 sequence sent by the signal source for those PRBs.

### ![]({{site.baseurl}}/assets/images/898101dc00ce.png) UC-Plane O-RU Scenario Class Beamforming (BFM)

This clause describes the beamforming conformance testing for O-RAN fronthaul interface. The tests do not aim to test the O-RU beamforming performance or capabilities but to test that the O-RU under test focuses the RF energy or sensitivity into a specific direction and with a specific granularity following the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) C-Plane messages.

Unless stated otherwise in a test case, the following statements apply to all the test cases defined in this clause:

* + It is based on conducted testing with a setup such as described in clause 2.1 and it only applies to O-RU DUTs that have conducted antenna ports or TAB connectors.
  + It applies to Category A and Category B O-RU DUTs.
  + It applies to LTE and/or 5G New Radio O-RU DUTs. In both cases, precoding is not required in any test case.
  + If O-RU DUT supports Analog Beamforming (i.e. time domain beamforming), all the U-Plane test frames are defined by segmenting the Stock Test A: 1 section per symbol. The definition of this Stock Test A can be found in Figure 3.2.1.1-2 and the description accompanying this figure. Each slot shall include multiple sections (one per symbol within the slot) and only one beam at a time (i.e. one beamId at a time) and therefore only one beam can be tested per slot.
  + If O-RU DUT supports Digital Beamforming (i.e. frequency domain beamforming), all the U-Plane test frames are defined by segmenting the Stock Test B: 2 sections per symbol definition as shown in Figure 3.2.1.1-2. Each slot shall include multiple sections (two per symbol within the slot) and only one beam per section at a time (i.e. one beamId at a time) and therefore up to two different beams can be tested per slot.
  + If O-RU DUT supports multiple polarizations, it is up to the TER to determine if the testing is carried out for each polarization separately or multiple polarizations at the same time. In any case, it is important to guarantee that the correct eAxC\_ID for the correct polarization (or polarizations) is exercised.
  + For O-RU DUT that support TDD:
    - The tests may use any combination of Downlink and Uplink standard 3GPP LTE test frames found in clause 6.1.1.1 of ETSI TS 136.141-1.
    - For example, the following TDD test waveform could be used for this test:
      * 20MHz bandwidth with 100 RBs assigned
      * Uplink/Downlink Configuration set to 3
      * Special Subframe Configuration set to 8
      * DwPTS Length set to 11 Symbols
      * GP lengths set to 1 Symbol
      * UpPTS Length set to 2 Symbols.
    - The full test radio frame is shown in Figure 3.2.5.2-1.

![]({{site.baseurl}}/assets/images/06e7939bb5f7.png)

###### Figure 3.2.5.2-1 Combined DL and UL TDD 20 MHz 100 RB

If 20MHz is not supported by the O-RU DUT, then it will use the highest bandwidth supported by the O- RU DUT.

* + For O-RU DUT that support 5G NR:
* The tests will use a combination of Downlink and Uplink standard 3GPP 5G NR test frames. See figure .
* The Downlink part of the radio frame will use a standard 3GPP NR-FR1-TM1.1 test frame for TDD in

[19] (clause 4.9.2 TS138.141-1) of the Conducted Transmitter Characteristic Test (clause 6 TS138.141-1) as described in clause 3.2.1.1. The test numerology will be preferably 30kHz subcarrier spacing and 100 MHz Bandwidth. If not supported, then it will use any other supported subcarrier spacing and the highest bandwidth of the O-RU DUT.

* The Uplink part of the radio frame will use a standard 3GPP Reference Sensitivity level definition (clause 7.2 and Annex A TS138.141-1) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 138.141) and power levels at least 30dB above Reference Sensitivity power level as described in clause 3.2.1.1. The test numerology will be preferably 30kHz subcarrier spacing and 100 MHz Bandwidth, if supported. Otherwise, it will use any available subcarrier space and the highest bandwidth supported by the O-RU DUT.
* The Downlink symbols are allocated at slots 0 to 7 and 10 to 17.
* The Uplink symbols are allocated at slots 7 to 9 and 17 to 19.
* Note that slots 7 and 17 have symbols allocated for Downlink, symbols 0 to 5, some other symbols assigned as Guard Period where no signal is transmitted or expected to be received, symbols 6 to 9, and finally some other symbols allocated for Uplink, symbols 10 to 13.
  + The O-RU DUT:
* supports the default parameters in clause 3.2.1.1.1 of this document.
* has installed current release of shipping software.
* has at least two conducted antenna ports (or TAB connectors) to be connected to a signal analyzer. Likewise, it must have at least two conducted antenna ports or TAB connectors to be connected to a signal generator.
* is fully calibrated up to the antenna ports or (TAB connectors) (if needed). It is expected to be calibrated by O-RU vendor prior to testing.
  + The TER:
* is capable of carrying out any signal processing required to generate and demodulate 3GPP compliant waveforms.
* is able to calculate or extract beamweights (or magnitude and phase relations) between antenna ports or TAB connectors. Alternatively, and if the O-RU DUT manufacturer provides the list of beam directions supported by the O-RU DUT, TER might calculate or extract the beam direction instead of the beamweights.
* is able to generate and deliver signals with the required beamweights (or magnitude and phase relations) at the antenna ports or TAB connectors.
* is fully calibrated up to the interfaces where is connected to the O-RU DUT antenna ports (or TAB connectors). For that, a known test signal might be either injected by the TER into the O-RU DUT, or internally generated by the O-RU DUT, and the O-RU DUT must not apply any digital or analog beamweights to the known test signal. One possible method to perform calibration uses injected C-Plane and U-Plane signals from TER into the O-RU and using C-Plane messages with beamID=0.
  + The O-DU emulator of the TER:
* is capable of generating and sending U-Plane messages containing 3GPP test frames following the corresponding Stock sectioning defined above, as well as be capable of capturing U-Plane messages and extracting 3GPP test frames (i.e. IQ data) from the captured U-Plane messages.
* is capable of generating the C-Plane messages for, receiving, extracting and demodulating the 3GPP test frames following the corresponding Stock sectioning defined above.
  + For DMRS-BF tests, the TER setup modifications are:
* RF Signal Generator / System which can be a combination of test equipment, or an integrated one, that provides all the testing capabilities needed:
  + RF Signal Generator capable of generating wanted signals (3GPP compliant SU-MIMO and MU- MIMO signals).
  + RF Signal Generator capable of generating Additive white Gaussian Noise and Interference signals. It can be a single device or multiple devices.
  + Beamformer to apply beam weights to each of the signals under tests
* CUSM-Plane emulator with expanded capability:
  + is able to operate with and without reference Channel Estimation (CE) and Equalization (EQ) over the received signal from DUT (Uplink direction).

NOTE: The definition of the reference algorithms used for Channel Estimation and Equalization in the TER are not specified in the current document,

* + is capable of measuring and reporting EVM measurements after CE and EQ if receiving unequalized IQ data (when testing O-RU DUT with DMRS-BF-NEQ), or directly from received equalized IQ data (when testing O-RU DUT with DMRS-BF-EQ),
  + is capable of measuring and reporting BER and/or BLER measurements of the received signal from DUT (Uplink direction) after demapping and decoding,

NOTE: The definition of the reference algorithms used for demapping and decoding in the TER are are not specified in the current document,

* + is capable of parsing ST9 and ST10 messages to extract SINR and RRM measurements.

![A diagram of a door  Description automatically generated]({{site.baseurl}}/assets/images/6ba4831e0247.png)

###### Figure 3.2.5.2-2 Test Equipment set up for testing O-RU DUT with DMRS-BF

* + The TER might have less testing ports than the O-RU DUT conducted antenna ports (or TAB connectors) if testing is carried out sequentially; or as many antenna ports as the number of conducted antenna ports (or TAB connectors) under test if testing is carried out simultaneously.
  + It is up to the TER on how to extract the beamweights (or magnitude and phase relation) between the antenna ports or TAB connectors, or the beam direction / properties, in order to match it with the manufacturer's declaration.
  + The user payload will be generated as PN23 with a seed of all ones.
  + It applies to the following O-RAN CUS Specification [2]::
* Clause 7.4
* Clause 8.3.2
* Clause 8.3.3
* Clause 12
* Annex J

#### ![]({{site.baseurl}}/assets/images/56d1bda1aef8.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - No Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with no beamforming (beamId=0x000) and with one spatial stream (single eAxC).

###### Test Entrance Criteria

* + Manufacturers' declaration that defines list of magnitude and phase relation (or beamweights) between antenna ports or TAB connectors and/or beam directions with antenna array characteristics when O-RU DUT is operating with no beamforming.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 1 messages. Section type zero messages will be used to signal Guard Period resources in the test waveform.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause3.2.1.1.1.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Extract either the beamweights, or magnitude and phase relation, or beam direction from the measured signal.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam direction, should match the expected relation, or beam direction, for the expected no beamforming within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/c7f44ccab3d9.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - No Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with no beamforming (beamId=0x000) and with one spatial stream (single eAxC).

###### Test Entrance Criteria

* + Manufacturers' declaration that defines list of magnitude and phase relation (or beamweights) between antenna ports or TAB connectors and/or beam directions with antenna array characteristics when O-RU DUT is operating with no beamforming.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL- SCH) using Section Type 1 messages.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different set of beamweights or phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the phase relation expected for no beamforming.

#### ![]({{site.baseurl}}/assets/images/fb517ff7438c.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC).

The transmitted beam direction is measured for each indexed beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted direction could be defined by the phase relation between the antenna ports or TAB connectors under test, or directly by extracting the beam direction.

Depending on the O-RU beamforming capabilities regarding the ability to generate "coarse", "fine" and/or "beam groups", as defined in clause 12.4.2.2 of [2].

The elevation ? and azimuth ? angles are defined as in [2] clause 10.4.1.1:

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming conformance test might include multiple test that the O-RU must comply:

###### "Coarse" beamIds test:

If O-RU supports and reports beamIds that are defined as coarse granularity (coarse beamIds) to the O-DU emulator, the test should include the following beams:

* + 1. A coarse beam with 0 degrees azimuth (?) and elevation (?) angles.
    2. A coarse beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
    3. A coarse beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
    4. A coarse beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
    5. A coarse beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles will be measured.

###### "Fine" beamIds test:

If O-RU supports and reports beamIds that are defined as fine granularity (fine beamIds) to the O-DU emulator, the test should include the following beams:

* + 1. A fine beam with 0 degrees azimuth (?) and elevation (?) angles.
    2. A fine beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
    3. A fine beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
    4. A fine beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
    5. A fine beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth or elevation angle, fewer than 5 beam angles will be measured.

###### "beam-group" beamIds test:

If O-RU supports and reports beamIds that belong to same and different beam-groups to the O-DU emulator, the test should include the following beams:

* + 1. All beams that belong to a beam-group with 0 degrees azimuth (?) or elevation (?) angles.
    2. All beams that belong to a beam-group with maximum supported azimuth angle (?).
    3. All beams that belong to a beam-group with minimum supported azimuth angle (?).
    4. All beams that belong to a beam-group with maximum supported elevation angle (?).
    5. All beams that belong to a beam-group with minimum supported elevation angle (?).

If the O-RU only supports one azimuth or elevation angle, fewer than 5 beam-groups will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of beam indices and their associated magnitude and phase relation between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**
* Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
* Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
* Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
* Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 1 messages.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Extract either the beamweights, or magnitude and phase relation, or beam direction from the measured signal.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam direction, should match the expected relation, or beam direction, corresponding to the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/b9d902a7a936.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC).

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.3 applies, but instead it is related to the uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of beam indices and their associated magnitude and phase relation between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL- SCH) using Section Type 1 messages.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different set of beamweights or phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beam under test.

#### ![]({{site.baseurl}}/assets/images/11276c711e5a.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with weight-based dynamic beamforming with one spatial stream (single eAxC).

The transmitted beam direction is measured for each weighted beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted direction could be defined by the phase relation between the antenna ports or TAB connectors under test, or by directly extracting the beam direction.

The elevation ? and azimuth ? angles are defined in clause 12.4.2.2 of [2].

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based Dynamic Beamforming conformance test should evaluate the following beams for the O-RU to comply:

* 1. A weight-based beam with 0 degrees azimuth (?) and elevation (?) angles.
  2. A weight-based beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
  3. A weight-based beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
  4. A weight-based beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
  5. A weight-based beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles will be measured.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight--based Dynamic Beamforming conformance test should also evaluate the following compression methods for each of the supported beams described above (a. to e.) for the O-RU to comply:

* + 1. No compression method applied to the beamforming weights.
    2. Block floating point compression method applied to the beamforming weights with 14-bit mantissa.
    3. Block scaling compression method applied to the beamforming weights with 14-bit scaler.
    4. u-law compression method applied to the beamforming weights with 14-bit fixed width.
    5. . Depending on what type of Beamspace compression the DUT supports, either Beamspace compression method applied to the beamforming weights with 14-bit scaler. or Beamspace compression method applied to the beamforming weights with 14-bit mantissa

If the O-RU does not support all the compression methods described above, fewer than 5 compression methods will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of frequency domain (?) and or time domain (?) weights for each supported beam, or alternatively, list of gain and phase relation, or complex beam weights, between antenna ports or TAB connectors for each supported beam . Also, the O-RU needs to report to the O-DU the antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**
* Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
* Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
* Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
* Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* + 1. Build an appropriate IQ signal described above in the O-DU emulator.
    2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (DL-SCH and DCI) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x01 to convey the beam weights, it is not required that the next sections contain extension type 1 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0.
    3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
    4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
    5. Extract either the beamweights, or magnitude and phase relation, or beam direction from the measured signal.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam direction, should match the expected relation, or beam direction, corresponding to the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/e9db15ee9a23.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Weight-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with weight-based beamforming and with one spatial stream (single eAxC).

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.5 but applies to the uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of frequency domain (?) and or time domain (?) weights for each supported beam, or alternatively, list of gain and phase relation, or complex beam weights, between antenna ports or TAB connectors for each supported beam . Also, the O-RU needs to report to the O-DU the antenna array characteristics

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (UL-SCH) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x01 to convey the beam weights, it is not required that the next sections contain extension type 1 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different set of beamweights or phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beam under test.

#### ![]({{site.baseurl}}/assets/images/b1485d33431e.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with attributed-based dynamic beamforming with one spatial stream (single eAxC).

If the O-RU DUT supports Attribute based Dynamic Beamforming, this test is mandatory for the O-RU DUT to be O-RAN conformant.

The transmitted beam direction and attributes are measured for each attributed beam required in this measurement, see below. The measured transmitted direction and attributes, i.e. pointing azimuth and elevation angles, beamwidths and sidelobe suppression, is compared to manufacturer-designated direction and attributes.

Transmitted direction and beam attributes are defined by the magnitude and phase relation between the antenna ports or TAB connectors under test, or by directly extracting the beam properties.

The elevation ? and azimuth ? angles are defined in clause 12.4.2.2 of [2].

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based Dynamic Beamforming conformance test should evaluate the following beams for the O-RU to comply:

* 1. An attribute-based beam with 0 degrees azimuth (?) and elevation (?) angles with any beamwidth and sidelobe suppression supported by the O-RU under this beam direction.
  2. An attribute-based beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?) with the widest beamwidth and lowest sidelobe suppression supported for this specific beam direction.
  3. An attribute-based beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?) with the narrowest beamwidth and highest sidelobe suppression supported for this specific beam direction.
  4. An attribute-based beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?) with the widest beamwidth and lowest sidelobe suppression supported for this specific beam direction.
  5. An attribute-based beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?) with the narrowest beamwidth and highest sidelobe suppression supported for this specific beam direction.

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles and attribute configurations will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of supported beam directions (azimuth ? and elevation ? angles) attributes that are supported by the O-RU and their associated gain and phase relation, or complex weight, between antenna ports or TAB connectors and/or beam directions with antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**
     + Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
     + Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
     + Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
     + Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (DL-SCH and DCI) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x02 to convey the beam weights, it is not required that the next sections contain extension type 2 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Extract either the beamweights, or magnitude and phase relation, or beam properties from the measured signal.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The signal relation (i.e. beamweights, or magnitude and phase relation) between antenna ports or TAB connectors, or the extracted beam properties, should match the expected beam properties corresponding to the beam under test within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/ee9e9ed1d04f.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Attribute-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with attribute-based beamforming with one spatial stream (single eAxC).

Same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.7 but considering uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of supported beam directions (azimuth ? and elevation ? angles) attributes that are supported by the O-RU and their associated gain and phase relation, or complex weight, between antenna ports or TAB connectors and/or beam directions with antenna array characteristics

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial set of beamweights, or equivalently magnitude and phase relation, between all the TER ports connected to the antenna ports (or TAB connectors) to emulate the phase and magnitude difference "seen" by the antenna elements under test. For example, initial beamweights could be set to be "all equal" (i.e. no beamforming).
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (UL-SCH) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x02 to convey the beam weights, it is not required that the next sections contain extension type 2 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different set of beamweights or magnitude and phase relation between all the antenna ports (or TAB connectors) when injecting the test signal into the O-RU. For example, repeating the process for a number of different sets of beamweights will simulate the reception of the test signal from different beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct beam properties.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beam under test.

#### ![]({{site.baseurl}}/assets/images/dc9c910d0f43.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO).

For Category A radios, the test is for each polarization separately and consequently either different or same channel models can be defined for each of the polarization. For Category B, same channel might be used for both polarizations and the test might measure each polarization separately.

The transmitted beam direction is measured for each scenario required in this measurement. The measured transmitted direction is extracted from the decoded received signal in the TER. Transmitted direction is defined by properly receiving a data transmission between the O-RU and the target User Equipment while destroying or heavily attenuating the data transmission between the O-RU and the other User Equipment.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming conformance test should evaluate the following scenarios for the O-RU to comply and will rely on TER Channel Emulation capabilities as shown in Figure 3.2.5.2-2.

![]({{site.baseurl}}/assets/images/0f45728e23ab.png)

###### Figure 3.2.5.2-2 TER with Channel Emulation Capability

A scenario where two spatial streams, or eAxC flows, are generated for two users (one layer each) with M antenna ports or TAB connectors. The O-DU will report to the O-RU via C plane messages an emulated channel estimate

H ? [h1, . . . , hM, h1, . . . , hM] ? C2xM. The emulated channel H shall model a static channel, with rank not lower

1 1 2 2

than the number of spatial streams, and it shall not be a block-diagonal channel. As an example, a Butler channel model could be implemented as emulated channel. The O-RU will calculate and apply the beamweight matrix G ?

[g1, . . . , gM, g1, . . . , gM] ? CMx2 in such that the received signal at the users is the same as the generated in the O-

1 1 2 2

DU. It is up to the O-RU on how to calculate the beamforming weights, for example Zero-forcing, regularized zero-forcing / MMSE, etc.

If O-RU supports Analog Beamforming (Time Domain Beamforming), the test should not apply any analog beamforming or time domain beamforming. In this case, M is not the number of antenna ports or TAB connectors but the number of TRX channels supported by the O-RU.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal analyzer.
  + The TER equipment must either include a channel emulator between the O-RU antenna ports and the signal analyzer or the signal analyzer be capable of applying the required channel matrix being emulated between the O-RU and the users.
  + Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal analyzer to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 5 and 6 messages.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Capture the test signals and pass them through a channel emulator or apply the signal processing required to emulate the channel under test.
5. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.

#### ![]({{site.baseurl}}/assets/images/0b090189a045.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Channel-Information-based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO).

Same description and criteria for selecting the beams to be tested applies as in section 3.2.3.2.10 but considering uplink direction.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal generator.
  + The TER equipment must either include a channel emulator between the O-RU antenna ports and the signal generator or the signal generator be capable of applying the required channel matrix being emulated between the users and the O-RU.
  + Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signals through a channel emulator or apply the required signal processing to emulate the channel under test.
3. Inject the resulting test signals into the antenna ports (or TAB connectors).
4. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL-SCH) using Section Type 5 and 6.
5. Play the C plane messages to the O-RU respecting timing windows described in clause 2.4. while also triggering the signal source.
6. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.

#### ![]({{site.baseurl}}/assets/images/e0812e2890a1.png) UC- Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY, the condition being O-RUs that support either DMRS-EQ or DMRS-NEQ.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with Demodulation Reference Signal-based beamforming (DMRS-BF) with multiple spatial streams from multiple users (i.e. MU-MIMO) using Section Extension 24 (SE24).

The UC-Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based Beamforming conformance test will rely on TER Beamforming capabilities as shown in Figure 3.2.5.2-3.

![A computer screen shot of a computer  Description automatically generated]({{site.baseurl}}/assets/images/8294439cfd53.png)

###### Figure 3.2.5.2-3 TER with Beamforming Capability

As defined in introduction of clause 3.2.5.2 UC-Plane O-RU Scenario Class Beamforming, each of the UE layer in Figure 3.2.5.2-3 shall use a standard 3GPP Reference Sensitivity level definition (clause 7.2 and Annex A TS138.141-1) of the Conducted Receiver Characteristic Test (clause 7 ETSI TS 138.141). The power levels shall be at least 30dB above Reference Sensitivity power level as described in clause 3.2.1.1. The test numerology will be preferably 30kHz subcarrier spacing and 100 MHz Bandwidth, if supported. Otherwise, it shall use any available subcarrier space, and the highest bandwidth supported by the O-RU DUT. In addition, the uplink test vector will be generated with UL-SCH in UL slots and allocated to the PRBs 0 to 50 truncated to the carrier bandwidth used for testing.

![A graph with a blue rectangle  Description automatically generated]({{site.baseurl}}/assets/images/b7685ee37e7e.png)

###### Figure 3.2.5.2-4 Example uplink test vector to be generated by RF signal generator for each UE layer

Note that this test vector is defined for a Single Input Single Output (SISO) scenario. However, for this test, the test vector is expanded to evaluate the test scenario where two spatial streams, or eAxC flows, are scheduled at the same resource allocation for two users (with one layer each) and with M antenna ports or TAB connectors. The CUSM-Plane emulator will signal this test vector configuration using SE24 to the O-RU via C-plane messages the scheduling of the two ueIds, using Section Type 5 and Section Extension 10 with beamGroupType=10b or beamGroupType=11b depending on O-RU capabilities. The CUSM-Plane emulator will signal to the O-RU via C- Plane messages the UE symbol allocation as all fourteen symbols per slot.

This test case does not test allocated IPN measurement (MEAS\_IPN\_ALLOC =DISABLED), antenna DMRS SNR (andDmrsSnr=0), transform precoding and self assembly. The CUSM-Plane emulator shall assign and schedule the ueIds using any supported number of least significant bits of the ueId to indicate the layers within each user. If an O-RU supports ueId persistence, ueId persistence shall not be used "ueId-persistence-enabled=FALSE".

The CUSM-Plane emulator will inform the O-RU of the DMRS configurations for the two streams using Section Extension 24 with entryType 1 and 2. The two DMRS configurations are as follows:

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
|  | **UE 0 Layer 0 (DMRS 0)** | **UE 1 Layer 0 (DMRS 1)** |
| **Ports** | 1000 | 1002 |
| **scrambling ID (nSCID)** | 0 | 1 |
| **Scrambling ID 0 (**n0 **)**  ID | 2 | 3 |
| **Scrambling ID 0 (**n1 **)**  ID | 4 | 5 |
| **DMRS Power Boosting** | 3 dB | |
| **UL DMRS Configuration** | Type 1 | |
| **DMRS Duration (maxLength)** | len1 (Single Symbol) | |
| **DMRS Additional Position (dmrs-AdditionalPosition)** | 1+1 (2) | |
| **UL Mapping Type** | A | |
| **l0** | pos2 | |
| **DMRS Uplink Transform Precoding r16** | False | |
| **Transform Precoding** | False | |

</div>

Same DMRS signal can be used for all available polarizations. Each polarization might be measured separately.

If O-RU supports any other beamforming, these shall not be exercise and tested. If O-RU supports Analog Beamforming (Time Domain Beamforming), the test should not apply any analog beamforming or time domain beamforming. In this case, M is not the number of antenna ports or TAB connectors but the number of TRX channels supported by the O-RU.

The configuration of DMRS and UE data layers follows configuration in SE 24. For example, there are two layers with two different DMRS configurations to measure in this scenario, two users with one layer each. A succesful received layer is defined as properly receiving data transmission at the O-DU emulator side from a corresponding layer transmitted by a User Equipment. This received data transmission shall be successfully received when it matches the DMRS configuration being signalled to the O-RU.

###### Test Entrance Criteria

* + The O-RU shall have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal generator.
  + The O-RU shall support enough entry tables of DMRS configuration to process the test vector and configuration under test.
  + The TER equipment shall either include a beamformer between the O-RU antenna ports and the UE signal generator or the signal generator be capable of emulating different AoA for different UE. This AoA should ensure sufficient conditioning / rank of the channel matrix, ensuring that both UE layers can be properly infered by O-RU during channel estimation and equalization.
  + The TER equipment is responsible for generating the RF signals for each UE layer as described in Section A, the corresponding matching O-RAN fronthaul traffic with Section ST5, SE10 and SE24 and the configuration of the DUT via M-Plane.
  + Manufacturers' defined list of number of TRX chains and what antenna ports or TAB connectors are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   * Connect the signal source to the O-RU antenna ports or TAB connectors that belong to the beam under test and configure the source with any set-up information needed to allow it to synch and generate the test signal.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal described in Section A in the signal source of the TER.
2. Inject the test signals through a beamformer or apply the required signal processing to the layers under test.
3. Get the resulting test signals ready to be injected into the antenna ports (or TAB connectors).
4. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test using Section Type 5 with Section Extension 10 and Section Extension 24.
5. Play the C-plane messages to the O-RU respecting timing windows described in clause 2.4. while also triggering the signal source so the signal is injected into the antenna ports (or TAB connectors).
6. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U- plane messages to the O-DU emulator.
7. Allow for the O-DU emulator to capture the U-Plane messages sent by the O-RU and to run the following measurements on the extracted IQ data for each of the users/layers:
   * if O-RU implements DMRS-BF-EQ:
     + EVM of the received equalized IQ data (no channel estimation and equalization is used in TER).
     + BER or BLER of the received equalized IQ data after layer demapping and decoding in the TER. NOTE 1: The measured BER or BLER depends on the algorithms implemented in both the O-RU DUT and the O-DU TER.

NOTE 2: The algorithms for demapping and decoding to be used in TER are left for future study.

* + if O-RU implements DMRS-BF-NEQ:
    - EVM of the received non-equalized IQ data after the channel estimation and equalization operation in the TER.

NOTE 3: The measured EVM depends on the algorithms implemented in both the O-RU DUT and the O-DU TER.

NOTE 4: The algorithms for channel estimation and equalization to be used in TER are left for future study.

* + - BER or BLER of the received non-equalized IQ data after Channel Estimation, equalization, layer demapping and decoding in the TER.

NOTE 5: The measured BER or BLER depends on the algorithms implemented in both the O-RU DUT and the O-DU TER.

NOTE 6: The algorithms for demapping and decoding to be used in TER are left for future study.

* + demodulate, decode and extract the payload.

###### Test Requirement (expected result)

The test frame received by the TER/O-DU emulator for each of the users/layers should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data (payload before channel encoding in the transmission and after channel decoding in the reception).

Report EVM and BER or BLER measured during the test.

#### ![]({{site.baseurl}}/assets/images/8730c7d0b048.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based Beamforming about Symbol reordering

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY, the test condition is O-RU that support either DMRS-EQ or DMRS- NEQ supports SE 25 and at least one symbol reordering method as well.

The Section Extension 25 applies to Section Type 5 with dataDirection bit = 0 and uses with Section Extension 24 which provides DMRS configuration information.

Same description and criteria for selecting the beams to be tested applies as in clause 3.2.5.2.11.A, but considering O-RU supports SE 25 and symbol reordering capability. CUSM-Plane emulator configures symbol reordering method and config-symb-reorder-upSymbId-type based on O-RU capability via M-Plane.

Table 3.2.5.2.12-1: O-RAN symbol reordering related features

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Feature** | **O-DU support** | **O-RU support** | **Additional Information** |
| Per-window symbol reordering When sending of port reduced DRMS data is enabled | **Conditional Mandatory** | **Conditional Mandatory** | **Condition for O-DU and O-RU:**  any reordering method is supported. |
| Per-window symbol reordering When sending of port reduced DRMS data is disabled | Optional | Optional | This is relevant to DMRS-BF. |
| Per-section tx-window reassignment | Optional | Optional | This is relevant to DMRS-BF. |
| U-Plane symbolId interpretation as on-air symbol number for symbol reordering | Optional | Optional | This is relevant to DMRS-BF. |
| U-Plane symbolId interpretation as transmission window number for symbol reordering | Optional | Optional | This is relevant to DMRS-BF. |
| SE 25 symbol reordering pattern | Optional | Optional |  |

</div>

The CUSM-Plane emulator will inform the O-RU of the symbol reordering via M-Plane configurations. Depending on O-RU capability of symbol reordering, there are different TER configured choices.

The O-RU capability listed as follows:

Table 3.2.5.2.12-2: O-RAN symbol reordering capability

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **O-RU capability** | **O-RU capability parameters** |
| supported-symb-reorder-capability | PER-TX-WIN-SYMB-REORDER-WITH-DMRS-SENDING |
| PER-TX-WIN-SYMB-REORDER-WITHOUT-DMRS- SENDING |
| PER-SECTION-TX-WINDOW-REASSIGNMENT |
| up-symbolId-type-supported | OVER-AIR-SYMBOL-NUMBER |

</div>

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
|  | TRANSMISSION-WINDOW-NUMBER |
| max-num-symbol-reordering-pattern-per-slot | uint16 |
| supported-section-extensions | including SE25 |

</div>

The TER Possible configuration sets listed as follows:

Table 3.2.5.2.12-3: TER Possible configuration sets

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **TER Possible configuration sets** | **TER configuration parameters** |
| Configuration Set 1 | PER-TX-WIN-SYMB-REORDERG |
| OVER-AIR-SYMBOL-NUMBER |
| port-reduced-dmrs-data-sending-enabled = TRUE |
| Configuration Set 2 | PER-TX-WIN-SYMB-REORDERG |
| TRANSMISSION-WINDOW-NUMBER |
| port-reduced-dmrs-data-sending-enabled = TRUE |
| Configuration Set 3 | PER-TX-WIN-SYMB-REORDERG |
| TRANSMISSION-WINDOW-NUMBER |
| port-reduced-dmrs-data-sending-enabled = FALSE |
| Configuration Set 4 | PER-SECTION-TX-WINDOW-REASSIGNMENT |
| OVER-AIR-SYMBOL-NUMBER |
| port-reduced-dmrs-data-sending-enabled = FALSE |

</div>

The CUSM-Plane emulator will inform the O-RU specific symbol reordering configurations using Section Extension 25 as follows:

If TER configured PER-TX-WIN-SYMB-REORDERG (SE25 indicated values corresponding to 14 symbols that are applicable to all layers, U-plane symbolId is interpreted as 'on-air symbol number' or transmission window number based on O-RU capability):

OTA symbol number

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 |
| 2 | 11 | 0 | 1 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 12 | 13 |
| 2 | 11 | 0 | 1 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 12 | 13 |
| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 |

</div>

OTA symbol number of the IQ data in U-plane message

U-plane symbolId which up-symbolId-type is OVER-AIR-SYMBOL-NUMBER

U-plane symbolId which up-symbolId-type is TRANSMISSION-WINDOW-NUMBER

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Extension Type 25 for Section Id=0 and 1** | | | | | | | | | |
| **0 (msb)** | **1** | **2** | **3** | **4** | **5** | **6** | **7 (lsb)** | **# of bytes** |  |
| ef | extType = 0x19 | | | | | | | 1 | Octet N |
| extLen = 0x03 | | | | | | | | 1 | N+1 |
| txWinForOnAirSymbol0 (all layers) = 2 | | | | txWinForOnAirSymbol1 (all layers) = 3 | | | | 1 | N+2 |
| txWinForOnAirSymbol2 (all layers) = 0 | | | | txWinForOnAirSymbol3 (all layers) = 4 | | | | 1 | N+3 |
| ... | | | | | | | |  |  |
| txWinForOnAirSymbol10 (all layers) = 11 | | | | txWinForOnAirSymbol11 (all layers) = 1 | | | | 1 | N+7 |
| txWinForOnAirSymbol12 (all layers) = 12 | | | | txWinForOnAirSymbol13 (all layers) = 13 | | | | 1 | N+8 |
| Zero pad for 4-byte boundary | | | | | | | | 3 | N+9 |

</div>

If TER configured PER-SECTION-TX-WINDOW-REASSIGNMENT (SE25 indicated values corresponding to 14 symbols that are applicable separately to each layer, U-plane symbolId is interpreted as 'on-air symbol number'):

**Symbol reordering for UE layer prioritization**

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 |
| 2 | 0 | 3 | 5 | 7 | 9 | 12 | 2 | 0 | 3 | 5 | 7 | 9 | 12 |
| 2 | 0 | 3 | 5 | 7 | 9 | 12 | 2 | 0 | 3 | 5 | 7 | 9 | 12 |
| 11 | 1 | 4 | 6 | 8 | 10 | 13 | 11 | 1 | 4 | 6 | 8 | 10 | 13 |
| 11 | 1 | 4 | 6 | 8 | 10 | 13 | 11 | 1 | 4 | 6 | 8 | 10 | 13 |

</div>

Layer#0 for section#0 Layer#1 for section#0

OTA symbol number

OTA symbol number of the IQ data in U-plane message U-plane symbolId

OTA symbol number of the IQ data in U-plane message U-plane symbolId

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Extension Type 25 for Section Id=0** | | | | | | | | | |
| **0 (msb)** | **1** | **2** | **3** | **4** | **5** | **6** | **7 (lsb)** | **# of bytes** |  |
| ef | extType = 0x19 | | | | | | | 1 | Octet N |
| extLen = 0x04 | | | | | | | | 1 | N+1 |
| txWinForOnAirSymbol0 (1st layer) = 1 | | | | txWinForOnAirSymbol1 (1st layer) = 1 | | | | 1 | N+2 |
| txWinForOnAirSymbol2 (1st layer) = 0 | | | | txWinForOnAirSymbol3 (1st layer) = 2 | | | | 1 | N+3 |
| ... | | | | | | | |  |  |
| txWinForOnAirSymbol10 (1st layer) = 5 | | | | txWinForOnAirSymbol11 (1st layer) = 0 | | | | 1 | N+7 |
| txWinForOnAirSymbol12 (1st layer) = 6 | | | | txWinForOnAirSymbol13 (1st layer) = 6 | | | | 1 | N+8 |
| txWinForOnAirSymbol0 (2nd layer) = 8 | | | | txWinForOnAirSymbol1 (2nd layer) = 8 | | | | 1 | N+9 |
| txWinForOnAirSymbol2 (2nd layer) = 7 | | | | txWinForOnAirSymbol3 (2nd layer) = 9 | | | | 1 | N+10 |
| ... | | | | | | | |  |  |
| txWinForOnAirSymbol10 (2nd layer) = 12 | | | | txWinForOnAirSymbol11 (2nd layer) = 7 | | | | 1 | N+14 |
| txWinForOnAirSymbol12 (2nd layer) = 13 | | | | txWinForOnAirSymbol13 (2nd layer) = 13 | | | | 1 | N+15 |

</div>

This test re-uses the test case description from clause 3.2.5.2.11.A.

###### Test Entrance Criteria

For the test entrance criteria see clause 3.2.5.2.11.B

###### Test Methodology

* 1. **Initial Conditions**

The initial conditions are the same as in see clause 3.2.5.2.11.C.a with the following additions:

* + - Depending on O-RU capability of symbol reordering, there are different TER configured choices (Table 3.2.5.2.12-2: O-RAN symbol reordering capability).
    - If symb-reorder-method is PER-SECTION-TX-WINDOW-REASSIGNMENT, use OVER-AIR- SYMBOL-NUMBER as up-SymbolId-type according to CUS specification [2].

###### Procedure

The procedure consists of executing the basic test case defined in clause 3.2.5.2.11.C.b modified by applying configurations described in steps below. The clause 3.2.5.2.11.C.b applies with the following modifications:

* TER shall prepare C-plane message of ST 5 with SE 10, SE 24 and SE 25. The configuration in SE 10, SE 24 and SE 25 shall be compatible with the capabilities reported by the O-RU under test.

Steps:

1. If the O-RU reports capability for PER-TX-WIN-SYMB-REORDER-WITH-DMRS-SENDING and OVER- AIR-SYMBOL-NUMBER or list including above capabilities (refer to M-plane leaf-list supported-symb- reorder-capability and up-symbolId-type-supported), execute basic test case with other configuration specified in configuration set 1(Table 3.2.5.2.12-3: TER Possible configuration sets).
2. If the O-RU reports capability for PER-TX-WIN-SYMB-REORDER-WITH-DMRS-SENDING and TRANSMISSION-WINDOW-NUMBER or list including above capabilities (refer to M-plane leaf-list supported-symb-reorder-capability and up-symbolId-type-supported), execute basic test case with other configuration specified in configuration set 2(Table 3.2.5.2.12-3: TER Possible configuration sets).
3. If the O-RU reports capability for PER-TX-WIN-SYMB-REORDER-WITHOUT-DMRS-SENDING and TRANSMISSION-WINDOW-NUMBER or list including above capabilities (refer to M-plane leaf-list supported-symb-reorder-capability and up-symbolId-type-supported), execute basic test case with other configuration specified in configuration set 3(Table 3.2.5.2.12-3: TER Possible configuration sets).
4. If the O-RU reports capability for PER-SECTION-TX-WINDOW-REASSIGNMENT and OVER-AIR- SYMBOL-NUMBER or list including above capabilities (refer to M-plane leaf-list supported-symb-reorder- capability and up-symbolId-type-supported), execute basic test case with other configuration specified in configuration set 4 (Table 3.2.5.2.12-3: TER Possible configuration sets).

The execution of the test case will trigger the O-RU to handle symbol-reordering method and report reordered U- Plane data according to SE25, and U-Plane symbolId interpretation will base on TER configuration.

###### Test Requirement (expected result)

The expected result is as in clause 3.2.5.2.11.D with a separate check of U-Plane symbol order is same as SE25 indicating.

#### ![]({{site.baseurl}}/assets/images/dc5d86ccb904.png) UC-Plane O-RU Scenario Class Extended using section extension 24 for DMRS-BF

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY with the condition the O-RU supports DMRS-BF-EQ or DMRS-BF- NEQ.

The purpose of this test is to ensure the radio can process SE 24 and process UL signal with DMRS beamforming. This test case consists of multiple configurations each with defined preconditions. For the description see clause 3.2.5.2.11.A.

###### Test Entrance Criteria

For the test entrance criteria see clause 3.2.5.2.11.B

###### Test Methodology

1. **Initial Conditions**

The initial conditions are the same as in see clause 3.2.5.2.11.C.a.

1. **Procedure**

The procedure consists of executing the basic test case defined in clause 3.2.5.2.11.C.b modified by applying various configurations described below. The clause 3.2.5.2.11.C.b applies with the following modifications:

* + TER shall check condition defined for each step.
  + TER shall build appropriate signal (following UE and UE's data layer configuration), and C-plane message as specified for given configuration. SE 24 shall be within ST 5 and with SE 10.
  + TER shall inject signal emulating ideal channel conditions as well as UE and layer spatial separation with power levels at least 30dB higher than the power levels used to test 3GPP.

Steps:

1. If the O-RU reports support for SE 24 with entryType = 2 (refer to M-plane leaf-list supported-entry- types), execute basic test case for each configuration specified in configuration set 1.
2. If the O-RU reports support for SE 24 with entryType = 3 (refer to M-plane leaf-list supported-entry- types), execute basic test case for each configuration specified in configuration set 2.
3. If the O-RU reports support for SE 24 with entryType = 1 and entryType = 2 (refer to M-plane leaf-list supported-entry-types), execute basic test case for each configuration specified in configuration set 3.
4. If the O-RU reports support for SE 24 with entryType = 2 and entryType = 3 (refer to M-plane leaf-list supported-entry-types) and multiplexing transform precoding disabled and enabled (refer to M-plane parameter different-transform-precoding-in-user-group-supported = true), execute basic test case for each configuration specified in configuration set 4.
5. If the O-RU reports support for persistence of ueId between multiple slots (refer to M-plane feature UEID- PERSISTENCE) and SE 24 with entryType = 2 (refer to M-plane leaf-list supported-entry-types), execute basic test case for the first of parameter values combinations specified in configuration set 1 modified by setting parameter ueIdReset = 1 in the first and every even slot and 0 in other slots in the parameters.
6. If the O-RU reports support for ueId persistence over multiple slots (refer to M-plane feature UEID- PERSISTENCE) and SE 24 with entryType = 3 (refer to M-plane leaf-list supported-entry-types), execute basic test case for the first of parameter values combinations specified in configuration set 2 modified by setting parameter ueIdReset = 1 in the first and every even slot and 0 in other slots in the parameters.
7. If the O-RU reports support for ueId persistence over multiple slots (refer to M-plane feature UEID- PERSISTENCE) and SE 24 with entryType = 1 and entryType 2 (refer to M-plane leaf-list supported- entry-types), execute basic test case for the configuration specified in configuration set 3 modified by setting parameter ueIdReset = 1 in the first and every even slot and 0 in other slots in the parameters. For slots where ueIdReset = 0 the 2nd entry shall be changed to entryType = 0.
8. If the O-RU reports support for ueId persistence over multiple slots (refer to M-plane feature UEID- PERSISTENCE) and SE 24 with entryType = 1 and entryType = 3 (refer to M-plane leaf-list supported- entry-types), execute basic test case for the configuration specified in configuration set 4 modified by setting parameter ueIdReset = 1 in the first and every even slot and 0 in other slots in the parameters. For slots where ueIdReset = 0 the 2nd entry shall be change to entryType = 0.

In principle execution of basic test case in each of the above steps may be performed by TER in parallel provided the O-RU's and TER have capability for multiplexing of different configurations at different, non-overlapping parts of frequency spectrum.

Configuration Set 1 (entryType 2 - transform precoding disabled):

* + 1 UE with 1 data layer with transform precoding disabled and DMRS configuration matching one provided in SE 24
  + SE 24 with 1 entry with entryType = 2 and the following parameters:
  + ueIdReset = 1
  + dmrsSymbolMask = separate configurations for each of values reported as supported by O-RU for transform precoding disabled and other parameters (e.g., dType) fixed to lowest values supported by the O-RU.
  + dType = separate configurations for each of values reported as supported by O-RU for transform precoding disabled and other parameters (e.g., dmrsSymbolMask) fixed to lowest values supported by the O-RU.
  + dmrsPortNumber, scrambling, nscid, lambda, cdmWithoutData, firstPrb, lastPrb shall have values as per CUS-plane requirements.

Configuration Set 2 (entryType = 3 - transform precoding enabled):

* + 1 UE with 1 data layer with transform precoding enabled and DMRS configuration matching one provided in SE 24
  + SE 24 with 1 entry with entryType = 3 and the following parameters:
  + ueIdReset = 1
  + dmrsSymbolMask = separate configuration for each of values reported as supported by O-RU for transform precoding enabled and other parameters (e.g., lowPaprType and hoppingMode) fixed to lowest values supported by the O-RU.
  + lowPaprType and hoppingMode = separate configuration for each pair of values reported as supported by O-RU for transform precoding enabled and with other parameters (e.g, dmrsSymbolMask) fixed to lowest values supported by the O-RU.
  + dmrsPortNumber, scrambling, nscid, firstPrb, lastPrb shall have values as per CUS-plane requirements.

Configuration Set 3 (entryType = 1 - reuse of configuration from prior entry for transform precoding disabled):

* + 1 UE with 2 data layers with transform precoding disabled and DMRS configuration matching one provided in SE 24
  + SE 24 with 2 entries:
    1. 1st entry with entryType = 2 and parameters as in the first of parameter values combinations specified in Configuration Set 1.
    2. 2nd entry with entryType = 1 and dmrsPortNumber set to the next consecutive value larger than dmrsPortNumber in 1st entry

Configuration Set 4 (mix of transform precoding disabled and enabled):

* + 2 UEs with 1 data layer each:
    1. 1st UE with transform precoding disabled and DMRS configuration matching one provided in 1st entry in SE 24
    2. 2nd UE with transform precoding enabled and DMRS configuration matching one provided in 2nd entry in SE 24
  + SE 24 with 2 entries:
    1. 1st entry with entryType = 2
    2. 2nd entry with entryType = 3
    3. Parameters for both entries shall be within the O-RU reported capabilities and shall be mutually compatible i.e. the same dmrsSymbolMask, dType (given explicitly and implied), cdmWithoutData (given explicitly and implied), etc.

###### Test Requirement (expected result)

The expected result is as in clause 3.2.5.2.11.D with a separate check of the result for each of the configurations used in this test case.

#### ![]({{site.baseurl}}/assets/images/dd2ac0a9a7fd.png) UC-Plane O-RU Scenario Class RRM Measurements for DMRS-BF

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY according to Table 10.2-1 section "Measurements" in [2]. The applicability for the different RRM measurements is summarized in table below.

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **DMRS-BF Type** | **Measurements** | **O-RU Applicability** |
| DMRS-BF-EQ | MEAS\_UE\_TAE  MEAS\_UE\_LAYER\_POWER MEAS\_UE\_FREQ\_OFFSET | **MANDATORY** |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
|  | MEAS\_IPN\_ALLOC  MEAS\_IPN\_UNALLOC |  |
| MEAS\_ANT\_DMRS | OPTIONAL |
| DMRS-BF-NEQ | MEAS\_UE\_TAE | **MANDATORY** if O-RU does not declare  feature DMRS-BF-NEQ\_UNALTERED- TAE |
| MEAS\_UE\_FREQ\_OFFSET | **MANDATORY** if O-RU does not declare feature DMRS-BF-NEQ\_UNALTERED-  FREQ-OFFSET |
| MEAS\_UE\_LAYER\_POWER | **MANDATORY** for all DMRS-BF-NEQ  capable endpoints if any of those supports the RRM measurement. |
| MEAS\_IPN\_ALLOC MEAS\_IPN\_UNALLOC  MEAS\_ANT\_DMRS | OPTIONAL |

</div>

The RRM measurements M-Plane capability parameters are:

*rrm-meas-supported*, *max-ipn-unalloc-reports-supported*, *max-ipn-unalloc-symbols-supported*,

***max-ipn-alloc-reports-supported***, ***alloc-ipn-per-dmrs-sym-grp-supported***, ***ta3-min-2g*** and ***ta3-max-2g***.

The RRM measurements M-Plane configuration parameter is:

*rrm-meas-enabled.*

The purpose of this test is to verify that the O-RU handles the configuration and reporting of RRM measurements according to CUS specification [2]. The purpose is not to verify that the measurements values calculated by O-RU are correct.

This test re-uses the test case description from clause 3.2.5.2.11.A.

###### Test Entrance Criteria

For the test entrance criteria see clause 3.2.5.2.11.B

###### Test Methodology (UE\_TAE, LAYER\_POWER, FREQ\_OFFSET, ANT\_DMRS\_SNR)

* + 1. **Initial Conditions**

The initial conditions are the same as in see clause 3.2.5.2.11.C.a with the following additions:

* + - * Depending on which O-RU DMRS-BF type that is tested, different RRM measurements will be supported by the O-RU and enabled by the O-DU. For a description of MEAS\_UE\_TAE, MEAS\_UE\_LAYER\_POWER, MEAS\_UE\_FREQ\_OFFSET and MEAS\_ANT\_DMRS see clauses 9.2.2.1, 9.2.2.2, 9.2.2.3 and 9.2.2.6 in CUS Specification [2].
      * For a DMRS-BF-EQ O-RU:
        + Enable measurements MEAS\_UE\_TAE, MEAS\_UE\_LAYER\_POWER and MEAS\_UE\_FREQ\_OFFSET via M-Plane.
        + Enable MEAS\_ANT\_DMRS if supported by the O-RU via M-Plane.

For MEAS\_ANT\_DMRS SE24 parameter *antDmrsSnr* needs to be set to 1 for at least one of the user groups.

* + - * For a DMRS-BF-NEQ O-RU:
        + Enable MEAS\_UE\_TAE, MEAS\_UE\_LAYER\_POWER, MEAS\_UE\_FREQ\_OFFSET and

MEAS\_ANT\_DMRS if supported by the O-RU via M-Plane.

For MEAS\_ANT\_DMRS SE24 parameter antDmrsSnr needs to be set to 1 for at least one of the user groups.

###### Procedure

The procedure consists of executing the basic test case defined in clause 3.2.5.2.11.C.b.

The execution of the test case will trigger the O-RU to calculate and report the enabled RRM measurements.

###### Test Requirement (expected result)

The expected result is as in clause 3.2.5.2.11.D with a separate check of:

* + - The measurements that are enabled are reported to the O-DU.
      * For UE\_TAE; one value per UE per slot shall be reported.
      * For UE\_LAYER\_POWER; one value per DMRS port per slot shall be reported and power values for all layers of a UE shall be sent in same report, as shown in Table 7.4.12-3 [2].
      * For UE\_FREQ\_OFFSET; one value per UE per slot shall be reported.
      * For ANT\_DMRS\_SNR; one value per layer per antenna per slot shall be reported.
    - The timing of the measurements reports is according to Figure 4.4.3-7 in the CUS Specification [2] Clause 4.4.3.

###### Test Methodology (IPN\_ALLOC)

* + 1. **Initial Conditions**

The initial conditions are the same as in see clause 3.2.5.2.11.C.a with the following additions:

* + - * O-RU support for MEAS\_IPN\_ALLOC depends on both which DMRS-BF type that is tested and on the O- RU's capability. For a description of MEAS\_IPN\_ALLOC see clause 9.2.2.4 in CUS Specification [2].
      * For a DMRS-BF-EQ O-RU:
        + Enable measurement MEAS\_ IPN\_ALLOC via M-Plane on one rx endpoint that supports the measurement, either a DMRS-BF-endpoint, or an endpoint dedicated for IPN measurement.
      * For a DMRS-BF-NEQ O-RU:
        + If MEAS\_IPN\_ALLOC is supported by at least one rx endpoint, enable measurement MEAS\_ IPN\_ALLOC via M-Plane on one rx endpoint that supports the measurement, either a DMRS-BF- endpoint, or an endpoint dedicated for IPN measurement.
      * Parameter *aIpnPerSym* in SE24 shall be set according to the capabilities reported by the O-RU. Each value of aIpnPerSym that is supported by the O-RU shall be tested for at least one user group.

###### Procedure

The procedure consists of executing the basic test case defined in clause 3.2.5.2.11.C.b.

The execution of the test case will trigger the O-RU to calculate the IPN for the allocated PRBs and send the report back to O-RU according to the setting of *aIpnPerSym* etc.

###### Test Requirement (expected result)

The expected result is as in clause 3.2.5.2.11.D with a separate check of:

* + - The IPN for allocated PRBs are reported to O-DU.
      * IPN\_ALLOC; one value per PRB, either for one symbol, or as an average over multiple symbols depending on O-RU capability and setting of SE24 parameter *aIpnPerSym*.
    - Verify that *symbolMask* in report aligns with the request.
    - Verify that the eAxC used for the reports corresponds to the rx endpoint that has MEAS\_IPN\_ALLOC enabled.
    - The timing of the measurement reports is according to Figure 4.4.3-7 in the CUS Specification [2] Clause 4.4.3.

###### Test Methodology (IPN\_UNALLOC)

* + 1. **Initial Conditions**

The initial conditions for measurement of IPN for unallocated PRBs are different compared to other RRM measurements. The trigger for this measurement is the O-DU sending a Section Type 11 to the O-RU.

* + - * O-RU support for MEAS\_IPN\_UNALLOC depends on both which DMRS-BF type that is tested and on the O-RU's capability. For a description of MEAS\_IPN\_UNALLOC see clause 9.2.2.5 in CUS Specification [2].
      * For a DMRS-BF-EQ O-RU:
        + Enable measurement MEAS\_ IPN\_UNALLOC via M-Plane on one rx endpoint that supports the measurement.
      * For a DMRS-BF-NEQ O-RU:
        + If MEAS\_IPN\_UNALLOC is supported by at least one rx endpoint, enable measurement MEAS\_ IPN\_ALLOC via M-Plane on one rx endpoint that supports the measurement.

###### Procedure

The O-DU requests IPN for unallocated PRBs by sending a Section Type 11 to the O-RU with eAxC set to same as for the rx endpoint that is enabled for IPN\_UNALLOC measurements.

###### Test Requirement (expected result)

The expected result is as in clause 3.2.5.2.11.D with a separate check of:

* + - The IPN for unallocated PRBs are reported to O-DU.
      * IPN\_UNALLOC; one value per PRB, either for one symbol, or as an average over multiple symbols (controlled via parameter *symbolMask* in ST11).
    - The reports shall follow the ST11 request parameter setting when it comes to *symbolMask*, possible existence of Section Extensions 6, 12 and/or 20.
    - Verify that the eAxC used for the reports corresponds to the same rx endpoint that is used by SE11, which is an endpoint dedicated for IPN measurement .
    - The timing of the measurement reports is according to Figure 4.4.3-7 in the CUS Specification [2] Clause 4.4.3.

#### ![]({{site.baseurl}}/assets/images/efe8881883dc.png) UC-Plane O-RU Scenario Class Extended using section extension ST9 for DMRS-BF

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY with condition the O-RU supports DMRS-BF-EQ.

The purpose of this test is to ensure the O-RU can process M-plane configuration for SINR and send SINR data in ST 9 messages. For further description see clause 3.2.5.2.11.A.

###### Test Entrance Criteria

The test entrance criteria is as described in clause 3.2.5.2.11.B with addition:

* + The O-RU supports DMRS-BF-EQ.

###### Test Methodology

1. **Initial Conditions**

The initial conditions are the same as in clause 3.2.5.2.11.C.a.

###### Procedure

The procedure consists of executing the basic test case defined in clause 3.2.5.2.11.C.b modified by applying various configurations described below. The clause 3.2.5.2.11.C.b applies with the following modifications:

* + TER shall prepare C-plane message of ST 5 with SE 10, SE 24. The configuration in SE 24 shall be compatible with the capabilities reported by the O-RU under test and consist of 1 data layer.
  + TER shall build appropriate signal for 1 UEs of rank 1 with DMRS configuration compatible with configuration provided to O-RU in SE 24.
  + TER shall inject signal emulating ideal channel conditions with power levels at least 30dB higher than the power levels used to test 3GPP.
  + The TER shall configure the O-RU via M-plane for DMRS-BF-EQ reception and configure the selected SINR resolution (both sinr-per-prb and sinr-slot-bitmask) to the first of SINR resolutions reported as

supported by the O-RU in supported-sinr-resolutions, set sinr-compression to the first element in supported-sinr-compression-methods reported by the O-RU and set sinr-reference-level-config to value of sinr-reference-level-max reported by the O-RU. The TER shall enable SINR reporting by setting sinr- reporting-enabled = true.

Steps:

1. The TER shall execute the basic test case observing ST 9 messages sent by the O-RU. The TER shall collect per UE data layer a summary of received SINR including minimum, maximum and average.

###### Test Requirement (expected result)

The expected result is reception of ST 9 message(s) compliant to the SINR reporting resolution configuration and SINR data format configuration set via M-plane.

In addition, the test report shall include SINR statistics collected by TER (see step C.b.1).

#### ![]({{site.baseurl}}/assets/images/f22ee93b67a1.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - DMRS based Beamforming using Frequency offset feedback

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY, the test condition is O-RU that support either DMRS-EQ or DMRS- NEQ supports SE 26.

The SE 26 is used with Section Type 5 to deliver the UE frequency offset from the O-DU to the O-RU and is valid

only when dataDirection bit = 0 and when SE 24 is present and SE 24 precedes SE 26. The M-Plane configuration parameter is **se26-usage-enabled*.***

TER controls the CUSM-Plane emulator to inform the O-RU specific Frequency offset configurations using Section Extension 26 as follows:

###### Table 3.2.5.2.16-1: SE 26 to be used in this conformance test scenario

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **0 (msb)** | **1** | **2** | **3** | **4** | **5** | **6** | **7 (lsb)** | **# of bytes** |  |
| ef | extType = 0x1A | | | | | | | 1 | Octet N |
| extLen = 0x01 | | | | | | | | 1 | N+1 |
| reserved | | | | | | | | 1 | N+2 |
| reserved | numFoFb[6:0] = 2 | | | | | | | 1 | N+3 |
| 1st freqOffsetFb = 0x3E8 | | | | | | | | 2 | N+4 |
| 2nd freqOffsetFb = 0xFC18 | | | | | | | | 2 | N+6 |
| zero padding to 4-byte boundary | | | | | | | | var | var |

</div>

The purpose of this test is to ensure the radio can receive the SE 26 information without generating any errors. There is no attempt to validate that the O-RU applies the frequency offset correctly because O-RU is not required to use the frequency offset received in SE26. Specific frequency offset values are required to be included in the SE 26 message, to ensure uniformity of the testing. Specifically, the values 0x3E8 and 0xFC18 shall be used (see Table 3.2.5.2.16-1), which for SCS = 30 kHz represent positive 500Hz and negative 500Hz.

This test re-uses the test case description from clause 3.2.5.2.11.A.

###### Test Entrance Criteria

For the test entrance criteria see clause 3.2.5.2.11.B with the following addition:

* + The TER equipment adds control parameters to turn on the SE 26 frequency offset configuration function (create SE 26 and convey to O-RU). Note the frequency offset values provided in SE 26 are fixed values under test.

###### Test Methodology

1. **Initial Conditions**

The initial conditions are the same as in see clause 3.2.5.2.11.C.a with the following addition:

* + O-RU support SE 26 and M-Plane parameter **se26-usage-enabled** = TRUE.

###### Procedure

The procedure consists of executing the basic test case defined in clause 3.2.5.2.11.C.b modified by enabling the SE 26 frequency offset function:

* DU emulator will create C-Plane message including SE 26, the values in SE 26 are frequency offset values configured by TER. DU emulator will convey C-Plane message ST 5 with SE 10, SE 24 and SE 26 to O-RU.
* Inject the test signals with additional frequency offset for each UE.
* Other procedure is same with basic test case defined in clause 3.2.5.2.11.C.b. Records output result EVM and BER or BLER measured during the test.

###### Test Requirement (expected result)

No fault or error is detected via M-Plane from the O-RU resulting when reception of SE 26. There is no evaluation of the quality of the received signal (EVM, BLER or BER).

#### ![]({{site.baseurl}}/assets/images/8dbe2137d186.png) UC Plane O-RU Scenario Class Extended using section extension 27 for DMRS-BF

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY, with condition being O-RU reports support for SE 27.

The purpose of this test is to ensure the radio can process SE 27 and process UL signal with DMRS beamforming. For further description see clause 3.2.5.2.11.A. This test uses beamforming weight update mechanism of WDBF or predefined beams of PDBF depending on specification provided by the vendor of the O-RU (see also 2nd bullet in 3.2.5.2.17.B).

###### Test Entrance Criteria

The test entrance criteria is as described in clause 3.2.5.2.11.B with addition:

* + The O-RU supports SE 27.
  + The vendor of the O-RU provides set of 2 to 4 beams to be used in the test. The beams in the set are defined by documenting beamforming weights to be used. Alternatively, the vendor may provide two sets of beamId values which identify predefined beams supported by the O-RU:
    - a set of N values Bn specified in step 3.2.5.2.17.C.b.2 and
    - a set of N consecutive values starting with value B specified in step 3.2.5.2.17.C.b.5.
  + The vendor of the O-RU provides parameters for positioning 2 UEs of rank 1 to be used for the test. The positioning is to be specified by angle parameters relative to antenna array (see clause 12.5.2 in CUS-plane [2]).

###### Test Methodology

1. **Initial Conditions**

The initial conditions are the same as in see clause 3.2.5.2.11.C.a.

###### Procedure

The procedure consists of executing the basic test case defined in clause 3.2.5.2.11.C.b modified by applying various configurations described in steps below. The clause 3.2.5.2.11.C.b applies with the following modifications:

* + TER shall prepare C-plane message of ST 5 with SE 10, SE 24 and SE 27. The configuration in SE 10, SE 24 and SE 27 shall be compatible with the capabilities reported by the O-RU under test.
  + TER shall build appropriate signal for 2 UEs of rank 1 with DMRS configuration compatible with configuration provided to O-RU in SE 24.
  + TER shall inject signal emulating ideal channel conditions with power levels at least 30dB higher than the power levels used to test 3GPP. UE positions shall be as specified by the vendor of the O-RU.

Steps:

1. The TER shall select value N such that N is greater or equal the number of beams in the set specified by the O-RU vendor and N is number of beams supported by the O-RU to be commanded via SE 27 (refer to M-plane parameter supported-se-27-num-elements in the list supported-se-27-configurations).
2. The TER shall select set of N values Bn where n = 0, 1, ..., N-1. The values Bn shall not be consecutive and valid beamId values supported by the O-RU. If the vendor of the O-RU provided beamId values as described in clause 3.2.5.2.17.B then the TER shall use the values Bn provided by the vendor.
3. If the vendor of the O-RU provided beamforming weight values described in clause 3.2.5.2.17.B then the TER shall use ST 1 with SE 1 or SE 11 with reMask=0 as described in clause 7.5.3.5 in CUS-plane [2] to associate beamforming weights of the beams specified by the O-RU vendor with beamId = B0, B(N-1), B1, B(N-2), etc. For the remaining Bn values the TER shall associate beamId=Bn with beamforming weights set to 0.
4. The TER shall execute the basic test case modified to include in ST 5 also SE 27 with beamType = 0, numElements = N, beamId = B0, B1, ..., B(N-1).
5. The TER shall select value B such that for n = 0, 1, ..., N-1 value B+n is a valid beamId value supported by the O-RU and N is number of beams supported by the O-RU to be commanded via SE 27. If the vendor of the O-RU provided beamId values as described in clause 3.2.5.2.17.B then the TER shall use the value B provided by the vendor.
6. If the vendor of the O-RU provided beamforming weight values described in clause 3.2.5.2.17.B then the TER shall use ST 1 with SE 1 or SE 11 with reMask=0 as described in clause 7.5.3.5 in CUS-plane [2] to associate beamforming weights of the beams specified by the O-RU vendor with beamId = B, B+(N-1), B+1, B+(N-2), etc. For the remaining values in range B to B+N-1 the TER shall associate beamId=B+n with beamforming weights set to 0.
7. The TER shall execute the basic test case modified to include in ST 5 also SE 27 with beamType = 1, numElements = N, beamId = B.

###### Test Requirement (expected result)

The expected result is as in clause 3.2.5.2.11.D with a separate check of the result for each execution of the basic test case in the steps 4 and 7 of the procedure described in clause 3.2.5.2.17.C.b.

### ![]({{site.baseurl}}/assets/images/f68250c6d964.png) UC-Plane O-RU Scenario Class Compression (CMP)

Validate the correct implementation and interpretation of mandatory and optional IQ data compression formats described in [2]. Also, evaluate the consistency in U-Plane signaling.

It applies to the following O-RAN CUS Specification [2]:

* + Clause 7.4
  + Clause 7.5.2.10
  + Clause 8.3.3.15/16/17
  + Clause 8.3.2
  + Clause 8.3.3
  + Table 10.2-1
  + Annex A.6
  + Annex A.6 Selective RE sending Compression

The objective is primarily to test the protocol, prior to the compression algorithms performance.

**Signalling**: IQ Compression related fields in UC-Plane messages include:

* + U-Plane IQ data field
  + C-Plane udCompHdr (clause 7.5.2.10 of [2])
  + U-Plane udComphdr (clause 8.3.3.13 of [2])
  + U-Plane udCompParam (clause 8.3.3.15 of [2])
  + Modulation compression parameters used in the Section Extension Type =4
* csf (constellation shift flag)
* modCompScaler (modulation compression scaler value)

**Compression**: Current specification includes 7 compression modes, including uncompressed mode (fixed point). Tests should cover each one of these modes

* + fixed-point
  + block floating-point
  + block scaling
  + mu-law
  + modulation compression
  + Block Floating Point + selective RE sending
  + Modulation Compression + selective RE sending

**IQ Bit Width**: For fixed-point, block floating point, block scaling and mu-law compression, IQ information can be represented using different bit width (1-16 bits). To optimize test time, tests should be performed on a subset of bit widths

For fixed point, block floation point, block scaling, mu-law compressions the subset of bit widths to be tested are

* + 9 bits
  + 14 bits

For modulation compression bit width 4 is used for the test

#### ![]({{site.baseurl}}/assets/images/55e1a165c31e.png) Overview of Compression Test Methodology

A common test methodology and structure will be used across all compression test cases. Each one of the test cases will be defined with specific input parameters and expected output values.

To minimize influence of the Radio's RF performance to the test results, the test methodology will be based on a relative comparison between modulated signal measurements performed on a TDD test frame with uncompressed IQ (fixed 16 bits) and measurements on the same test frame using compressed IQ. The test will verify that the difference between measurements fits within an acceptable range for the test to pass.

For downlink test, the modulated signal measurement is performed by a signal analyzer on the antenna port of the O- RU.

For uplink measurement, the modulated signal measurement is performed with the IQ extracted from the Uplink U- Plane data sent by the O-RU on the O-RAN interface.

The following paragraphs in this overview clause outline the details of these common test methodologies.

Test Frame

TDD test methodology for compression will combine similar downlink and uplink test patterns used for FDD test. The main difference is that uplink and downlink tests are performed simultaneously for TDD.

The test frames used for compression conformance test will be referred in this document as "**NR-FR1-TDD-CMP- TST-DL"** TDD Downlink Standard Compression Test frame and "**NR-FR1-TDD-CMP-TST-UL"** TDD Uplink Standard Compression Test frame. They are 5G NR frames based on the description in clause 3.2.1.1.3 For scenario #3 (Conducted TDD Tests for FR1 Radios) with specific attributes described below.

The Downlink UC-Plane test stimulus file includes the C-Plane and U-Plane messages that require the O-RU to transmit on the downlink the NR-FR1-TDD-CMP-TST-DL test frame.

The Uplink C-Plane test stimulus file includes the C-Plane messages that require the O-RU to provide the uplink U- Plane messages according to the NR-FR1-TDD-CMP-TST-UL test frame received by the O-RU on its antenna port.

Signalling and IQ information will be based on various compression schemes

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-TDD-CMP-TST-ST-DL-UNC-16B | Static Downlink Uncompressed (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-UL-UNC-16B | Static Uplink Uncompressed (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-DL-FPF-9B | Static Downlink Fixed Point 9 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-DL-FPF-14B | Static Downlink Fixed Point 14 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-UL-FPF-9B | Static Uplink Fixed Point 9 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-UL-FPF-14B | Static Uplink Fixed Point 14 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-DL-BFP-9B | Static Downlink Block Floating Point 9 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-DL-BFP-14B | Static Downlink Block Floating Point 14 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-UL-BFP-9B | Static Uplink Block Floating Point 9 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-UL-BFP-14B | Static Uplink Block Floating Point 14 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-DL-BSC-9B | Static Downlink Block Scaling 9 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-DL-BSC-14B | Static Downlink Block Scaling 14 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-UL-BSC-9B | Static Uplink Block Scaling 9 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-UL-BSC-14B | Static Uplink Block Scaling 14 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-DL-MLW-9B | Static Downlink Mu-Law 9 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-DL-MLW-14B | Static Downlink Mu-Law 14 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-UL-MLW-9B | Static Uplink Mu-Law 9 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-UL-MLW-14B | Static Uplink Mu-Law 14 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-DL-MC | Static Downlink Modulation Compression |
| NR-FR1-TDD -CMP-TST -ST-DL-UNC-BRE- 16B | Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-TDD -CMP-TST -ST-UL-UNC-BRE- 16B | Static Uplink Uncompressed (C-plane only) with both empty and allocated RE in the same symbol |
| NR-FR1-TDD-CMP-TST-ST-DL-BRE-9B | Static Downlink Block Floating Point + Selective RE 9 Bits (CU-plane) |
| NR-FR1- TDD-CMP-TST-ST-DL-BRE-14B | Static Downlink Block Floating Point + Selective 14 Bits (CU-plane) |
| NR-FR1- TDD-CMP-TST-ST-UL-BRE-9B | Static Uplink Block Floating Point 9 Bits + Selective RE (C-plane only) |
| NR-FR1- TDD-CMP-TST-ST-UL-BRE-14B | Static Uplink Block Floating Point 14 Bits + Selective RE (C-plane only) |
| NR-FR1- TDD-CMP-TST-ST-DL-MRE | Static Downlink Modcomp + Selective RE Compression |

</div>

###### Table 3.2.5-6 Stimulus Files for Static Compression Tests

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-TDD-CMP-TST-NS-DL-UNC-16B | Downlink Uncompressed (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-UL-UNC-16B | Uplink Uncompressed (C-plane) |
| NR-FR1-TDD-CMP-TST-NS-DL-FPF-9B | Downlink Fixed Point 9 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-DL-FPF-14B | Downlink Fixed Point 14 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-UL-FPF-9B | Uplink Fixed Point 9 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-NS-UL-FPF-14B | Uplink Fixed Point 14 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-NS-DL-BFP-9B | Downlink Block Floating Point 9 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-DL-BFP-14B | Downlink Block Floating Point 14 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-UL-BFP-9B | Uplink Block Floating Point 9 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-NS-UL-BFP-14B | Uplink Block Floating Point 14 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-NS-DL-BSC-9B | Downlink Block Scaling 9 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-DL-BSC-14B | Downlink Block Scaling 14 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-UL-BSC-9B | Uplink Block Scaling 9 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-NS-UL-BSC-14B | Uplink Block Scaling 14 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-NS-DL-MLW-9B | Downlink Mu-Law 9 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-DL-MLW-14B | Downlink Mu-Law 14 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-UL-MLW-9B | Uplink Mu-Law 9 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-NS-UL-MLW-14B | Uplink Mu-Law 14 Bits (C-plane only) |
| NR-FR1-TDD-CMP-TST-NS-DL-MC | Non-Static Downlink Modulation Compression |
| NR-FR1-TDD -CMP-TST -NS-DL-UNC-RE- 16B | Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-TDD -CMP-TST -NS-UL-UNC-RE- 16B | Static Uplink Uncompressed (C-plane only) with both empty and allocated RE in the same symbol |
| NR-FR1-TDD -CMP-TST -NS-DL-BRE-9B | Downlink Block Floating Point + Selective RE 9 Bits (CU-plane) |
| NR-FR1-TDD -CMP-TST -NS-DL-BRE-14B | Downlink Block Floating Point + Selective RE 14 Bits (CU-plane) + Selective RE |
| NR-FR1-TDD -CMP-TST -NS-UL-BRE-9B | Uplink Block Floating Point + Selective RE 9 Bits (C-plane only) |
| NR-FR1-TDD -CMP-TST -NS-UL-BRE-14B | Uplink Block Floating Point + Selective RE 14 Bits (C-plane only) + Selective RE |
| NR-FR1-TDD -CMP-TST -NS-DL-MRE | Downlink Modcomp + Selective RE Compression |

</div>

**Table 3.2.5-7 Stimulus Files for Non-Static Compression Test**

Test Frame Power

To ensure that the compressed IQ exponent value is properly tested, each symbol of the test frame will include 3 sections with different power levels. The Power levels are relative powers to the first group of PRBs transmitted. Any valid 3GPP power level may be used for the first set of PRBs as long as the power levels of the remaining PRBs are also valid. Figure 3.2.5.3-1 below shows PRB power relative to the first set of PRBs.

0 dB for the bottom third of total PRBs in the symbol (referred as PDSCH0)

-10 dB for the middle third of total PRBs in the symbol (referred as PDSCH1)

-20 dB for the upper third of total PRBs in the symbol (referred as PDSCH2)

The spectrum representation of the frame shown in Figure 3.2.5.3-1 below highlights the various power levels for each group of PRBS within a symbol.

![A picture containing object  Description automatically generated]({{site.baseurl}}/assets/images/a1d3c0ca6203.png)

###### Figure 3.2.5.3-1 PRB Spectrum Power Visualization

Test Frame User data

To validate that user data has not been impacted by compression, the test payload for the 3 sections is each based on an individual PN23 sequence that will be measured and compared by the test apparatus.

Test Frame Modulation Scheme

To maximise coverage on the compressed IQ mantissa value, the test frame will use the highest possible modulation, limited to 256 QAM modulation for downlink. An example measurement is show in Table 3.2.5-8. The data content is a PN23 sequence and the test frame assuming a channel bandwidth of 100 MHz (=273 PRB) is divided into three sections of 91 PRB each. Note that the first section below contains the Coreset in the first 3 PRB according to the 3GPP FRC model.

![]({{site.baseurl}}/assets/images/0fc943e9e111.jpg)

###### Table 3.2.5-8 Example User Data Modulation Validation

Summary of Required Measurements for Compression Tests

3 measurements types will be required for downlink tests and 4 measurements will be required for uplink tests.

* **Power level**: Using the test frames (NR-FR1-CMP-TST-FRAME-DL and NR-FR1-CMP-TST-FRAME-UL) sent twice with both compressed and uncompressed IQ data, power level measurements are performed to validate compression algorithms influence on Exponent (udCompParam).

The Power level measurements are called:

For downlink

* + CMP-Uncompressed-Measured-Power-DL-PDSCH0 in dBm
  + CMP-Compressed-Measured-Power-DL-PDSCH0 in dBm
  + CMP-Uncompressed-Measured-Power-DL-PDSCH1 in dBm
  + CMP-Compressed-Measured-Power-DL-PDSCH1 in dBm
  + CMP-Uncompressed-Measured-Power-DL-PDSCH2 in dBm
  + CMP-Compressed-Measured-Power-DL-PDSCH2 in dBm For Uplink
  + CMP-Uncompressed-Measured-Power-UL-PUSCH0 in dBm
  + CMP-Compressed-Measured-Power-UL-PUSCH0 in dBm
  + CMP-Uncompressed-Measured-Power-UL-PUSCH1 in dBm
  + CMP-Compressed-Measured-Power-UL-PUSCH1 in dBm
  + CMP-Uncompressed-Measured-Power-UL-PUSCH2 in dBm
  + CMP-Compressed-Measured-Power-UL-PUSCH2 in dBm

For the test to pass, the difference between compressed and uncompressed measurements should be within an acceptable range, called

* + ACC\_PWR\_PDSCH0 = +- 1dB
  + ACC\_PWR\_PDSCH1 = +- 1dB
  + ACC\_PWR\_PDSCH2 = +- 1dB
* **EVM**: Using a common test frame sent twice with both compressed and uncompressed IQ data, EVM measurements comparisons between uncompressed IQ and compressed IQ will help validate acceptable compression influence on signal quality.

For downlink these 6 EVM measurements required:

* + CMP-Uncompressed-Measured-EVM-DL-PDSCH0 in %
  + CMP-Compressed-Measured-EVM-DL-PDSCH0 in %
  + CMP-Uncompressed-Measured-EVM-DL-PDSCH1 in %
  + CMP-Compressed-Measured-EVM-DL-PDSCH1 in %
  + CMP-Uncompressed-Measured-EVM-DL-PDSCH2 in %
  + CMP-Compressed-Measured-EVM-DL-PDSCH2 in %

For uplink these 6 EVM measurements required:

* + CMP-Uncompressed-Measured-EVM-UL-PUSCH0 in %
  + CMP-Compressed-Measured-EVM-UL-PUSCH0 in %
  + CMP-Uncompressed-Measured-EVM-UL-PUSCH1 in %
  + CMP-Compressed-Measured-EVM-UL-PUSCH1 in %
  + CMP-Uncompressed-Measured-EVM-UL-PUSCH2 in %
  + CMP-Compressed-Measured-EVM-UL-PUSCH2 in %

For the test to pass, the difference between the compressed and uncompressed measurements for the same PDSCH signal must be within the following range:

* + ACC\_EVM\_PDSCH0 <= 4 percentage points
  + ACC\_EVM\_PDSCH1 <= 4 percentage points
  + ACC\_EVM\_PDSCH2 <= 4 percentage points

An example measurement showing both power and EVM is shown below in **Figure 3.2.5.3-2**.

![A screen shot of a video game  Description automatically generated]({{site.baseurl}}/assets/images/338a7b79df8e.png)

![]({{site.baseurl}}/assets/images/ba21abab7110.png)

###### Figure 3.2.5.3-2 Example Compression EVM Measurement

* **Payload Data Integrity**: comparing user data between the O-RAN test frame and the RF measurement to validate that compression does not influence user data. The User data measurements are called:

For Downlink

* + CMP-Uncompressed-BER-DL-PDSCH0
  + CMP-Uncompressed-BER-DL-PDSCH1
  + CMP-Uncompressed-BER-DL-PDSCH2
  + CMP-Compressed-BER-DL-PDSCH0
  + CMP-Compressed-BER-DL-PDSCH1
  + CMP-Compressed-BER-DL-PDSCH2 For Uplink
  + CMP-Uncompressed-BER-UL-PUSCH0
  + CMP-Uncompressed-BER-UL-PUSCH1
  + CMP-Uncompressed-BER-UL-PUSCH2
  + CMP-Compressed-BER-UL-PUSCH0
  + CMP-Compressed-BER-UL-PUSCH1
  + CMP-Compressed-BER-UL-PUSCH2

For the data integrity test to pass, the comparison between stimulus payload and the measured payload should be free of any errors (i.e. BER=0).

* **Presence/Absence of U-Plane Header measurements (uplink only)**: to validate that in the U-Plane PRB header, the udCompHeader, "reserved" and udCompParam fields are correctly absent for Static compression mode or present for other compression modes.

Table 3.2.5-9 Measurements Required for Specific Downlink Compression Options below describes the measurements required for each compression option.

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| Downlink | Power Level | EVM | Data Integrity |
| Uncompressed IQ (fixed 16 bits) | Perform power measurements on the 3 groups of PRBs to create 3 power reference points | Perform EVM measurements on the 3 groups of PRBs to create 3 EVM reference points | N/A |
| Fixed point  (< 16 bits fixed IQ) | Perform the test using same test waveforms in compressed mode and check if 3 power measurements are within acceptable range | Perform the test using same test waveforms in compressed mode and check if 3 EVM measurements are within acceptable range | If power level and EVM OK, then verify user data integrity with BER measurement on payload |
| Block floating point | Perform the test using same test waveforms in compressed mode and check if 3 power measurements are within acceptable range | Perform the test using same test waveforms in compressed mode and check if 3 EVM measurements are within acceptable range | If power level and EVM OK, then verify user data integrity with BER measurement on payload |
| Block scaling | Same as above | Same as above | Same as above |
| Mu Law | Same as above | Same as above | Same as above |
| Block floating point  + Selective RE | Same as above | Same as above | Same as above |
| Block scaling + Selective RE | Same as above | Same as above | Same as above |

</div>

###### Table 3.2.5-9 Measurements Required for Specific Downlink Compression Options

Compression Tests reference table

As the same methodology is used across the different compression modes, the conformance test can be viewed as series of instances of the same test structure with different parameter values as shown below in Table 3.2.5-10 Compression Test Reference Table.

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| Test name | DL/UL | Compression | IQ Width |
| TDD UC-Plane O-RU CMP Scenario - Static Format (SF) | | | |
| TDD UC-Plane O-RU CMP Scenario Static Format (SF) Fixed-Point (FPF) | DL | Fixed point | 9 bits  14 bits |
| UL | Fixed Point | 9 bits  14 bits |
| TDD UC-Plane O-RU CMP Scenario Static Format (SF) Block Floating Point (BFP) | DL | Block Floating point | 9 bits  14 bits |
| UL | Block Floating point | 9 bits  14 bits |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| TDD UC-Plane O-RU CMP Scenario Static Format (SF) Block Scaling (BSC) | DL | Block Scaling | 9 bits  14 bits |
| UL | Block Scaling | 9 bits  4 bits |
| TDD UC-Plane O-RU CMP Scenario Static Format (SF) Mu-Law (MLW) | DL | Mu-Law | 9 bits  14 bits |
| UL | Mu-Law | 9 bits  14 bits |
| TDD UC-Plane O-RU CMP Scenario Static (SF) Block Floating Point + Selective RE (BRE) | DL | Block Floating point + Selective RE | 9 bits  14 bits |
| UL | Block Floating point + Selective RE | 9 bits  14 bits |
| TDD UC-Plane O-RU CMP Scenario Static (SF) mod-compr Format + Selective RE (MRE) | DL | Modulation Compression + Selective RE | 4-bits |
| UC-Plane O-RU CMP Scenario - Non-Static Format Test (NS) | | | |
| TDD UC-Plane O-RU CMP Scenario Non- Static (NS) Fixed-Point (FPF) | DL | Fixed point | 9 bits  14 bits |
| UL | Fixed Point | 9 bits  14 bits |
| TDD UC-Plane O-RU CMP Scenario Non- Static (NS) Block Floating Point (BFP) | DL | Block Floating point | 9 bits  14 bits |
| UL | Block Floating point | 9 bits  14 bits |
| TDD UC-Plane O-RU CMP Scenario Non- Static (NS) Block Scaling (BSC) | DL | Block Scaling | 9 bits  14 bits |
| UL | Block Scaling | 9 bits  4 bits |
| TDD UC-Plane O-DU CMP Scenario Non- Static (NS) Mu-Law (MLW) | DL | Mu-Law | 9 bits  14 bits |
| UL | Mu-Law | 9 bits  14 bits |
| TDD UC-Plane O-RU CMP Scenario Non- Static (NS) Modulation Compressed Format | DL | Modulation Compression | 4-bits |
| TDD UC-Plane O-RU CMP Scenario Non- Static (NS) Block Floating Point + Selective RE (BRE) | DL | Block Floating point + Selective RE | 9 bits  14 bits |
| UL | Block Floating point + Selective RE | 9 bits  14 bits |
| TDD UC-Plane O-RU CMP Scenario Non- Static (NS) mod-compr Format + Selective RE (MRE) | DL | Modulation Compression + Selective RE | 4-bits |

</div>

###### Table 3.2.5-10 Compression Test Reference Table

Results Analysis

In general, for each specific Compression Test in this conformance test document, the test will pass if the following conditions are met:

Power measurement differences between Uncompressed and Compressed are within acceptable range

EVM measurement difference between Uncompressed and Compressed are within acceptable range

Data integrity measurements show no data corruption

Uplink U-Plane Header measurements exclude fields for static compression

These test criteria and expected results are summarized below in Table 3.2.5-11 Compression Test Acceptance Threshold Criteria.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- |
| **Test name** | **Test Attributes** | | | **Acceptance Threshold Criteria** | | |
| **DL UL** | **Compression** | **IQ**  **Width** | **Power difference** | **EVM difference** | **BER** |
| TDD UC-  Plane O-RU CMP  Scenario Fixed-Point Format (FPF) | DL | Fixed point | 9 bits | ACC\_PWR\_PDSCH0  = ACC\_PWR\_PDSCH1  = ACC\_PWR\_PDSCH2  = +/- 1 dB | ACC\_EVM\_PDSCH0  =  ACC\_EVM\_PDSCH1  = ACC\_EVM\_PDSCH2  <= 4 percentage points | BER = 0 |
| 14 bits | Same as above | Same as above | BER = 0 |
| UL | Fixed Point | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| TDD UC-  Plane O-RU CMP  Scenario Block Floating Point Compression (BFP) | DL | Block Floating point | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UL | Block Floating point | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| TDD UC-  Plane O-RU CMP  Scenario Block Scaling Compression (BSC) | DL | Block Scaling | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UL | Block Scaling | 9 bits | BER = 0 |
| 4 bits | BER = 0 |
| TDD UC-  Plane O-DU CMP  Scenario Mu- Law Compression (MLW) | DL | Mu-Law | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UL | Mu-Law | 9 bits | BER = 0 |
| 14 bits | BER = 0 |
| UC-Plane O- RU CMP  Scenario Modulation Compressed Format | DL | Modulation Compression | 4-bits |  |  | BER = 0 |
| TDD UC-  Plane O-RU CMP  Scenario Block Floating Point Compression  + Selective RE (BRE) | DL | Block Floating point + Selective RE | 9 bits | Same as above | Same as above | BER =0 |
| 14 bits | BER =0 |
| UL | Block Floating point + Selective RE | 9 bits | Same as above | Same as above | BER =0 |
| 14 bits | BER =0 |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- |
| **Test name** | **Test Attributes** | | | **Acceptance Threshold Criteria** | | |
| **DL UL** | **Compression** | **IQ**  **Width** | **Power difference** | **EVM difference** | **BER** |
| TDD UC-  Plane O-RU CMP  Scenario Modulation Compressed  + Selective RE Format | DL | Modulation Compression  + Selective RE | 4-bits | Same as above | Same as above | BER =0 |

</div>

**Table 3.2.5-11 Compression Test Acceptance Threshold Criteria**

#### ![]({{site.baseurl}}/assets/images/a7347589dc50.png) TDD UC-Plane O-RU Scenario Class Compression Static Format (SF) Fixed-Point (FP)

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format.

The purpose of this test is to:

* + Validate correct encoding of IQ data under the following conditions.
    - RU Static compression configurations
    - Fixed point IQ data format
    - Selection of 2 supported bit width: 9 bits, 14 bits
    - Uplink / downlink
  + Validate that in the U-Plane PRB header, the udCompHeader, "reserved" and udCompParam fields are not present

###### Test Entrance Criteria

The test uses the setup and methodology described in clause 3.2.5.3.1.

###### Test Methodology

1. **Initial Conditions**
   * The O-RU is started
   * Fronthaul Ethernet interface configured for communication between TER and the DUT.
   * O-RU synchronized with TER using S-Plane
   * Communication established between TER and the DUT such that it is possible to exchange U-Plane and C-Plane messages
   * signal analyzer connected to DUT's antenna port and setup according to DUT RF output configuration
   * signal source connected to DUT's antenna port and setup according to DUT RF input configuration

###### Procedure

For each supported bit width (9 bits, 14 bits), the following tests need to be performed:

###### Launch Uncompressed Test

* + Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink and uplink configured as follows: no compression, (16 bits)
  + Arm signal analyzers and signal source
  + Arm signal analyzer to capture the next Frame
  + Arm signal source to generate the Frame NR-FR1-CMP-TST-FRAME-UL
  + Arm the CUSM emulator to send the TDD O-RAN test frame, including
  + Downlink: CU-plane of "uncompressed" NR-FR1-TDD-CMP-TST-ST-DL-UNC-16B test stimulus file to the DUT
  + Uplink: C-plane of "uncompressed" NR-FR1-TDD-CMP-TST-ST-UL-UNC-16B test stimulus file to the DUT
  + ARM CUSM-E to capture the Uplink U-Plane Data from the DUT
  + Launch the test until:
    - RF signal analyzer has captured the downlink frame
    - CUSM-E has captured the uplink U\_plane data

###### Uncompressed Downlink Measurements

* + With the RF signal analyzer, perform the 3 power measurements
    - CMP-Uncompressed-Measured-Power-DL-PDSCH0 in dBm
    - CMP-Uncompressed-Measured-Power-DL-PDSCH1 in dBm
    - CMP-Uncompressed-Measured-Power-DL PDSCH2 in dBm
  + With the RF signal analyzer, perform the 3 EVM measurements
    - CMP-Uncompressed-Measured-EVM-DL-PDSCH0 in %
    - CMP-Uncompressed-Measured-EVM-DL-PDSCH1 in %
    - CMP-Uncompressed-Measured-EVM-DL-PDSCH2 in %
  + With the RF signal analyzer, check Data integrity measurements
    - CMP-Uncompressed-BER-DL-PDSCH0
    - CMP-Uncompressed-BER-DL-PDSCH1
    - CMP-Uncompressed-BER-DL-PDSCH2

###### Uncompressed Uplink Measurements

* + Extract IQ information from Capture U-Plane trace of the CUSM-E
  + Using the signal analyzer software, perform the 3 power measurements
    - CMP-Uncompressed-Measured-Power-UL-PDSCH0 in dBm
    - CMP-Uncompressed-Measured-Power-UL-PDSCH1 in dBm
    - CMP-Uncompressed-Measured-Power-UL-PDSCH2 in dB
  + Using the signal analyzer software, perform the 3 EVM measurements
    - CMP-Uncompressed-Measured-EVM-UL-PDSCH0 in %
    - CMP-Uncompressed-Measured-EVM-UL-PDSCH1 in %
    - CMP-Uncompressed-Measured-EVM-UL-PDSCH2 in %
  + Using the signal analyzer software, perform Data integrity measurements
    - CMP-Uncompressed-BER-UL-PDSCH0
    - CMP-Uncompressed-BER-UL-PDSCH1
    - CMP-Uncompressed-BER-UL-PDSCH2

###### Launch "compressed" Test

* + Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink and uplink configured as follows: Fixed point, 9-bit (then 14 bits)
  + Arm signal analyzers and signal sources
  + Arm signal analyzer to capture the next Frame
  + Arm signal source to generate the Frame NR-FR1-CMP-TST-FRAME-UL
  + Arm the CUSM emulator to send the TDD O-RAN test frame, including
  + Downlink: CU-plane of the "Compressed" NR-FR1-TDD-CMP-TST-ST-DL-FPF-9B (then 14B) test stimulus file to the DUT
  + Uplink: CU-plane of the "Compressed" NR-FR1-TDD-CMP-TST-ST-UL-FPF-9B (then 14B) test stimulus file to the DUT
  + ARM CUSM-E to capture the Uplink U-Plane Data from the DUT
  + Launch the test until:
    - RF signal analyzer has captured the downlink frame
    - CUSM-E has captured the uplink U\_plane data

###### Compressed Downlink Measurements

* + With the signal analyzer, perform the 3 power measurements
    - CMP-Compressed-Measured-Power-DL-PDSCH0 in dBm
    - CMP-Compressed-Measured-Power-DL-PDSCH1 in dBm
    - CMP-Compressed-Measured-Power-DL-PDSCH2 in dBm
  + With the signal analyzer, perform the 3 EVM measurements
    - CMP-Compressed-Measured-EVM-DL-PDSCH0 in %
    - CMP-Compressed-Measured-EVM-DL-PDSCH1 in %
    - CMP-Compressed-Measured-EVM-DL-PDSCH2 in %
  + With the signal analyzer, check Data integrity measurements
    - CMP-Compressed-BER-DL-PDSCH0
    - CMP-Compressed-BER-DL-PDSCH1
    - CMP-Compressed-BER-DL-PDSCH2

###### Validate Downlink conformance conditions

* + Power measurements within acceptable range
  + Difference between CMP-Uncompressed-Measured-Power-DL-PDSCH0 and CMP-Compressed- Measured-Power-DL-PDSCH0 is within ACC\_PWR\_PDSCH0 range
  + Difference between CMP-Uncompressed-Measured-Power-DL-PDSCH1 and CMP-Compressed- Measured-Power-DL-PDSCH1 is within ACC\_PWR\_PDSCH1 range
  + Difference between CMP-Uncompressed-Measured-Power-DL-PDSCH2 and CMP-Compressed- Measured-Power-DL-PDSCH2 is within ACC\_PWR\_PDSCH2 range
  + EVM measurements within acceptable range
  + Difference between CMP-Uncompressed-Measured-EVM-DL-PDSCH0 and CMP-Compressed- Measured-EVM-DL-PDSCH0 is less than ACC\_EVM\_PDSCH0
  + Difference between CMP-Uncompressed-Measured-EVM-DL-PDSCH1 and CMP-Compressed- Measured-EVM-DL-PDSCH1 is less than ACC\_EVM\_PDSCH1
  + Difference between CMP-Uncompressed-Measured-EVM-DL-PDSCH2 and CMP-Compressed- Measured-EVM-DL-PDSCH2 is less than ACC\_EVM\_PDSCH2
  + BER Measurements show no errors
    - CMP-Uncompressed-BER-DL-PDSCH0 =0
    - CMP-Uncompressed-BER-DL-PDSCH1 =0
    - CMP-Uncompressed-BER-DL-PDSCH2 =0
    - CMP-Compressed-BER-DL-PDSCH0 =0
    - CMP-Compressed-BER-DL-PDSCH1 =0
    - CMP-Compressed-BER-DL-PDSCH2 =0

###### Compressed Uplink Measurements

* + Extract IQ information from Capture U-Plane trace
  + Using the signal analyzer software, perform the 3 power measurements
    - CMP-Compressed-Measured-Power-UL-PDSCH0 in dBm
    - CMP-Compressed-Measured-Power-UL-PDSCH1 in dBm
    - CMP-Compressed-Measured-Power-UL-PDSCH2 in dBm
  + Using the signal analyzer software, perform the 3 EVM measurements
    - CMP-Compressed-Measured-EVM-UL-PDSCH0 in %
    - CMP-Compressed-Measured-EVM-UL-PDSCH1 in %
    - CMP-Compressed-Measured-EVM-UL-PDSCH2 in %
  + Using the signal analyzer software, check Data integrity measurements
    - CMP-Compressed-BER-UL-PDSCH0
    - CMP-Compressed-BER-UL-PDSCH1
    - CMP-Compressed-BER-UL-PDSCH2

###### Validate Uplink conformance conditions

* + Validate correct U-Plane PRB header structure
  + U-Plane udComphdr (clause 8.3.3.13 of [2])
  + U-Plane udCompParam (clause 8.3.3.15 of [2])
  + Validate that the power measurements within acceptable range
    - Difference between CMP-Uncompressed-Measured-Power-UL-PDSCH0 and CMP-

Compressed-Measured-Power-UL-PDSCH0 is within ACC\_PWR\_PDSCH0 range

* + - Difference between CMP-Uncompressed-Measured-Power-UL-PDSCH1 and CMP-

Compressed-Measured-Power-UL\_PDSCH1 is within ACC\_PWR\_PDSCH1 range

* + - Difference between CMP-Uncompressed-Measured-Power-UL-PDSCH2 and CMP- Compressed-Measured-Power-UL PDSCH2 is within ACC\_PWR\_PDSCH2 range
  + Validate EVM measurements within acceptable range
    - Difference between CMP-Uncompressed-Measured-EVM-UL-PDSCH0 and CMP-

Compressed-Measured-EVM-UL-PDSCH0 is less than ACC\_EVM\_PDSCH0

* + - Difference between CMP-Uncompressed-Measured-EVM-UL-PDSCH1 and CMP-

Compressed-Measured-EVM-UL-PDSCH1 is less than ACC\_EVM\_PDSCH1

* + - Difference between CMP-Uncompressed-Measured-EVM-UL-PDSCH2 and CMP- Compressed-Measured-EVM-UL-PDSCH2 is less than ACC\_EVM\_PDSCH2
  + Validate that the BER Measurements show no errors
    - CMP-Uncompressed-BER-UL-PDSCH0 = 0
    - CMP-Uncompressed-BER-UL-PDSCH1 = 0
    - CMP-Uncompressed-BER-UL-PDSCH2 = 0
    - CMP-Compressed-BER-UL-PDSCH0 = 0
    - CMP-Compressed-BER-UL-PDSCH1 = 0
    - CMP-Compressed-BER-UL-PDSCH2 = 0

###### Test Requirement (expected result)

All validation steps above are within expected ranges or correctly match the expected outcome.

#### ![]({{site.baseurl}}/assets/images/557486be02c3.png) TDD UC-Plane O-RU Scenario Class Compression Static Format (SF) Block Floating Point (BFP)

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format. This static format test scenario for Block Floating Point Format will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.5.3.2 for Block floating point formats.

###### Test Methodology

Same as with Static Block Floating Point test patterns

* + NR-FR1-TDD-CMP-TST-ST-DL-BFP-9B
  + NR-FR1-TDD-CMP-TST-ST-DL-BFP-14B
  + NR-FR1-TDD-CMP-TST-ST-UL-BFP-9B
  + NR-FR1-TDD-CMP-TST-ST-UL-BFP-14B

Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink and uplink configured as follows: Block floating Point, 9-bit (then 14 bits)

###### Test Requirement (expected result)

Same as 3.2.5.3.2.

#### ![]({{site.baseurl}}/assets/images/495dd78ce856.png) TDD UC-Plane O-RU Scenario Class Compression Static Format (SF) Block Scaling

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format.

This static format test scenario for Block Scaling Format will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.5.3.2 for Block Scaling point formats.

###### Test Methodology

Same as 3.2.5.3.2 with Static Block Floating Point test patterns

* + NR-FR1-TDD-CMP-TST-ST-DL-BSC-9B
  + NR-FR1-TDD-CMP-TST-ST-DL-BSC-14B
  + NR-FR1-TDD-CMP-TST-ST-UL-BSC-9B
  + NR-FR1-TDD-CMP-TST-ST-UL-BSC-14B

Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink and uplink configured as follows: Block Scaling, 9-bit (then 14 bits)

###### Test Requirement (expected result)

Same as 3.2.5.3.2.

#### ![]({{site.baseurl}}/assets/images/9ff7d9cd718f.png) TDD UC-Plane O-RU Scenario Class Compression Static Format (SF) Mu-Law (MLW)

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format.

This static format test scenario for Mu-Law Format will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.5.3.2 for Mu-Law formats.

###### Test Methodology

Same as 3.2.5.3.2 with Static Mu-Law test patterns

* + NR-FR1-TDD-CMP-TST-ST-DL-MLW-9B
  + NR-FR1-TDD-CMP-TST-ST-DL-MLW-14B
  + NR-FR1-TDD-CMP-TST-ST-UL-MLW-9B
  + NR-FR1-TDD-CMP-TST-ST-UL-MLW-14B

Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink and uplink configured as follows: Mu-Law, 9-bit (then 14 bits)

###### Test Requirement (expected result)

Same as 3.2.5.3.2.

#### ![]({{site.baseurl}}/assets/images/739176d61d15.png) TDD UC-Plane O-RU Scenario Class Compression Static Format (SF) Modulation- Compressed Format

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format.

This modulation compression format scenario is a static format scenario, based on 3.2.5.3.2 with some important differences

* + The purpose is to validate Radio Unit's correct interpretation of the Modulation compression parameters used in the Section Extension Type =4 and/or Section Extension Type 5, based on the radio support.

If the O-RU only supports section extension 4 on a given endpoint, then:

* + - Section extension 4 shall be used for all symbols containing PDSCH REs and for symbols containing both PDSCH and DMRS REs.

If the O-RU only supports section extension 5 on a given endpoint, then:

* + - Section extension 5 shall be used for all symbols containing PDSCH REs and for symbols containing both PDSCH and DMRS REs.

If the radio supports 4 and 5 on a given endpoint, then

* + - Section extension 4 shall be used for symbols containing only PDSCH REs .
    - Section extensions 5 shall be used for symbols containing DMRS + PDSCH REs.

![]({{site.baseurl}}/assets/images/0dd3c40c2a0c.png)

###### Figure 3.2.5.3-3 Section Extension 4 and 5 signaling

* + The test will only verify DL correct encoding of IQ information, as the Modulation Compression model is not applicable for uplink
  + As the Modulation Compression model does not require IQ bit width to be setup, there is no need to run multiple compression tests for various IQ bit width.
  + The CUSM\_E must generate:

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-TDD-CMP-TST-ST-DL-UNC-16B | Static Downlink Uncompressed (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-DL-MC | Static Downlink Modulation Compression |

</div>

###### Table 3.2.5-12 SFM Modulation Compression

1. **Test Entrance Criteria**

Same as 3.2.5.3.2.

###### Test Methodology

Same as 3.2.5.3.2 with Static Modulation Compression test patterns

* + NR-FR1-TDD-CMP-TST-ST-DL-MC

Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink configured as follow: Modulation Compression

* + Validation only of the downlink measurements

###### Test Requirement (expected result)

All validation steps above are within expected ranges or correctly match the expected outcome.

#### ![]({{site.baseurl}}/assets/images/50ffe87b4728.png) TDD UC-Plane O-RU Scenario Class Compression Non-Static (NS) Fixed-Point (FPF)

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format. This Fixed-Point Format scenario is a non-static format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.5.3.2.

###### Test Methodology

Same as 3.2.5.3.23.2.3.3.2 with Non-Static Uncompressed test patterns.

* + NR-FR1-TDD-CMP-TST-NS-DL-UNC-16B
  + NR-FR1-TDD-CMP-TST-NS-UL-UNC-16B

Same as 3.2.3.3.2 with Non-Static Fixed-Point (FPF) test patterns.

* + NR-FR1-TDD-CMP-TST-NS-DL-FPF-9B
  + NR-FR1-TDD-CMP-TST-NS-DL-FPF-14B
  + NR-FR1-TDD-CMP-TST-NS-UL-FPF-9B
  + NR-FR1-TDD-CMP-TST-NS-UL-FPF-14B

Via the M-Plane or another suitable mechanism, put the O-RU into a non-static configuration with the downlink and uplink configured as follows: Fixed Point, 9-bit (then 14 bits)

###### Test Requirement (expected result)

All validation steps above are within expected ranges or correctly match the expected outcome.

#### ![]({{site.baseurl}}/assets/images/86ced8e47d7c.png) TDD UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block Floating Point

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format This Block Floating-Point Format scenario is a non-static format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.5.3.7 for Block floating point formats.

###### Test Methodology

Same as 3.2.5.3.7 with Non-Static Uncompressed test patterns.

* + NR-FR1-TDD-CMP-TST-NS-DL-UNC-16B
  + NR-FR1-TDD-CMP-TST-NS-UL-UNC-16B

Same as 3.2.5.3.7 with Non-Static Fixed-Point (FPF) test patterns.

* + NR-FR1-TDD-CMP-TST-NS-DL-BFP-9B
  + NR-FR1-TDD-CMP-TST-NS-DL-BFP-14B
  + NR-FR1-TDD-CMP-TST-NS-UL-BFP-9B
  + NR-FR1-TDD-CMP-TST-NS-UL-BFP-14B

Via the M-Plane or another suitable mechanism, put the O-RU into a non-static configuration with the downlink and uplink configured as follows: Block Floating Point, 9-bit (then 14 bits)

###### Test Requirement (expected result)

Same as 3.2.5.3.7.

#### ![]({{site.baseurl}}/assets/images/a579b3503100.png) TDD UC-Plane O-RU Scenario Class Compression Non-Static (NS) Block Scaling (BSC)

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format.

This Block Scaling Format scenario is a dynamic-format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.5.3.7 for Block Scaling formats.

###### Test Methodology

Same as 3.2.5.3.7 with Non-Static Uncompressed test patterns.

* + NR-FR1-TDD-CMP-TST-NS-DL-UNC-16B
  + NR-FR1-TDD-CMP-TST-NS-UL-UNC-16B

Same as 3.2.5.3.7 with Non-Static Fixed-Point (FPF) test patterns.

* + NR-FR1-TDD-CMP-TST-NS-DL-BSC-9B
  + NR-FR1-TDD-CMP-TST-NS-DL-BSC-14B
  + NR-FR1-TDD-CMP-TST-NS-UL-BSC-9B
  + NR-FR1-TDD-CMP-TST-NS-UL-BSC-14B

Via the M-Plane or another suitable mechanism, put the O-RU into a non-static configuration with the downlink and uplink configured as follows: Block Scaling, 9-bit (then 14 bits)

###### Test Requirement (expected result)

Same as 3.2.5.3.7.

#### ![]({{site.baseurl}}/assets/images/a64764660d7a.png) TDD UC-Plane O-RU Scenario Class Compression Non-Static (NS) Mu-Law (MLW)

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format. This Mu-Law Format scenario is a dynamic-format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

###### Test Entrance Criteria

Same as 3.2.5.3.7 for Mu-Law formats.

###### Test Methodology

Same as 3.2.5.3.7 with Non-Static Uncompressed test patterns.

* + NR-FR1-TDD-CMP-TST-NS-DL-UNC-16B
  + NR-FR1-TDD-CMP-TST-NS-UL-UNC-16B

Same as 3.2.5.3.7 with Non-Static Fixed-Point (FPF) test patterns.

* + NR-FR1-TDD-CMP-TST-NS-DL-MLW-9B
  + NR-FR1-TDD-CMP-TST-NS-DL-MLW-14B
  + NR-FR1-TDD-CMP-TST-NS-UL-MLW-9B
  + NR-FR1-TDD-CMP-TST-NS-UL-MLW-14B

Via the M-Plane or another suitable mechanism, put the O-RU into a non-static configuration with the downlink and uplink configured as follows: Mu Law, 9-bit (then 14 bits)

###### Test Requirement (expected result)

Same as 3.2.5.3.7.

#### ![]({{site.baseurl}}/assets/images/0cadacbb96f7.png) TDD UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) Modulation- Compressed Format

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format.

This modulation compression format scenario is a non-static format scenario, based on 3.2.4.3.2 with some important differences

* + The purpose is to validate Radio Unit's correct interpretation of the Modulation compression parameters used in the Section Extension Type =4 and/or Section Extension Type 5, based on the radio support.

If the O-RU only supports section extension 4 on a given endpoint, then:

* + - Section extension 4 shall be used for all symbols containing PDSCH REs and for symbols containing both PDSCH and DMRS REs.

If the O-RU only supports section extension 5 on a given endpoint, then:

* + - Section extension 5 shall be used for all symbols containing PDSCH REs and for symbols containing both PDSCH and DMRS REs.

If the radio supports 4 and 5 on a given endpoint, then

* + - Section extension 4 shall be used for symbols containing only PDSCH REs .
    - Section extensions 5 shall be used for symbols containing DMRS + PDSCH REs.

![A screenshot of a graph  Description automatically generated]({{site.baseurl}}/assets/images/0dd3c40c2a0c.png)

###### Figure 3.2.5.3-4 Section Extension 4 and 5 signaling

* + The test will only verify DL correct encoding of IQ information, as the Modulation Compression model is not applicable for uplink
  + As the Modulation Compression model does not require IQ bit width to be setup, there is no need to run multiple compression tests for various IQ bit width.
  + The CUSM\_E must generate:

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-TDD-CMP-TST-NS-DL-UNC-16B | Non-Static Downlink Uncompressed (CU-plane) |
| NR-FR1-TDD-CMP-TST-NS-DL-MC | Non-Static Downlink Modulation Compression |

</div>

###### Table 3.2.5-13 Non-static Modulation compression

1. **Test Entrance Criteria**

Same as 3.2.5.3.7.

###### Test Methodology

Same as 3.2.5.3.7 with Static Modulation Compression test patterns

* + NR-FR1-TDD-CMP-TST-NS-DL-MC

Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink configured as follow: Modulation Compression

* + Validation only of the downlink measurements

###### Test Requirement (expected result)

All validation steps above are within expected ranges or correctly match the expected outcome.

#### ![]({{site.baseurl}}/assets/images/61597b5d1e36.png) TDD UC-Plane O-RU Scenario Class Compression Static Format (SF) Block Floating Point + Selective RE Format

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY and shall be performed if the O-RU supports this compression format

The Block Floating-Point+ Selective RE Format scenario is a static format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

For this test scenario, the compression test methodology will be based on the description in clause 3.2.5.3.1

However, on top of the test frame requirements from clause 3.2.5.3.1, this test scenario also requires a test frame that MUST include PRBs with a combination of allocated and empty Resource Elements in the same symbol, to verify if the O-RU properly interprets the sReMask value in the udCompParam field (user data compression parameter). The measurements must be performed on the symbols that include a combination of empty and allocated resource elements.

The recommended test frame is based on Type 2 DMRS with 2 DMRS CDM groups without data. The resource mapping model for the Resource Blocks is shown on the diagram below, where both symbols #2 and #11 include a combination of empty and allocated Resources.

![Chart  Description automatically generated]({{site.baseurl}}/assets/images/048224fe0900.png)

###### Figure 3.2.5.3-5 Recommended Frame ST BFP + Selective RE

The uncompressed and compressed test frames are listed in Table 3.2.5-14.

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| NR-FR1-TDD -CMP-TST -ST-DL-UNC-RE-16B | Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-TDD -CMP-TST -ST-UL-UNC-RE-16B | Static Uplink Uncompressed (C-plane only) with both empty and allocated RE in the same symbol |
| NR-FR1-TDD-CMP-TST-ST-DL-BRE-9B | Static Downlink Block Floating Point + Selective RE 9 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-DL-BRE-14B | Static Downlink Block Floating Point + Selective 14 Bits (CU-plane) |
| NR-FR1-TDD-CMP-TST-ST-UL-BRE-9B | Static Uplink Block Floating Point 9 Bits + Selective RE  (C-plane only) |
| NR-FR1-TDD-CMP-TST-ST-UL-BRE-14B | Static Uplink Block Floating Point 14 Bits + Selective RE (C-plane only) |

</div>

###### Table 3.2.5-14 Stimulus Files for ST BFP + Selective RE

1. **Test Entrance Criteria**

Same as 3.2.3.3.2 for static Block floating point + Selective RE formats.

###### Test Methodology

Same as 3.2.3.3.2 with Static Block Floating Point + Selective RE test patterns.

The uncompressed test frames used for this test are

* + NR-FR1-TDD -CMP-TST -ST-DL-UNC-RE-16B
  + NR-FR1-TDD -CMP-TST -ST-UL-UNC-RE-16B

The compressed test frames used for this test are

* + NR-FR1-TDD-CMP-TST-ST-DL-BRE-9B
  + NR-FR1-TDD-CMP-TST-ST-DL-BRE-14B
  + NR-FR1-TDD-CMP-TST-ST-UL-BRE-9B
  + NR-FR1-TDD-CMP-TST-ST-UL-BRE-14B

###### Test Requirement (expected result)

Same as 3.2.3.3.2.

#### ![]({{site.baseurl}}/assets/images/23602798cc0b.png) TDD UC-Plane O-RU Scenario Class Compression Static Format (SF) mod-compr + Selective RE Format

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format.

This modulation compression + Selective format scenario is a static format scenario, based on 3.2.3.3.2 with some important differences

* + The purpose is to validate Radio Unit's correct interpretation of the Modulation compression parameters used in the Section Extension Type =4
  + The test will only verify Downlink correct encoding of IQ information, as the Modulation Compression model is not applicable for uplink
  + As the Modulation Compression model does not require IQ bit width to be setup, there is no need to run multiple compression tests for various IQ bit widths.

On top of the test frame requirements described above , this test scenario requires a test frame that MUST include PRBs with a combination of allocated and empty Resource Elements in the same symbol, to verify if the O-RU properly interprets the sReMask value in the udCompParam field (user data compression parameter). The

measurements must be performed on the symbols that include a combination of empty and allocated resource elements.

The recommended test frame is based on Type 2 DMRS with 2 DMRS CDM groups without data. The resource mapping model for the Resource Blocks is shown on the diagram below, where both symbols #2 and #11 include a combination of empty and allocated Resources.

![Chart  Description automatically generated]({{site.baseurl}}/assets/images/048224fe0900.png)

###### Figure 3.2.5.3-6 Frame Format SF Mod-comp + Selective RE

The uncompressed and compressed test frames are listed in the table below

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Stimulus File Name | Description |
| NR-FR1-TDD -CMP-TST -ST-DL-UNC-RE-16B | Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| TDD-NR-FR1-CMP-TST-FRAME-ST-DL-MRE | Static Downlink Modulation Compression + Selective RE |

</div>

###### Table 3.2.5-15 Stimulus Files SF Mod-comp Selective RE

1. **Test Entrance Criteria**

Same as 3.2.5.3.2.

###### Test Methodology

Same as 3.2.3.3.2 with Static Modulation Compression test patterns

The uncompressed test frames used for this test are

* + TDD-NR-FR1-CMP-TST-FRAME-ST-DL-UNC-RE-16B

The compressed test frames used for this test are

* + TDD-NR-FR1-CMP-TST-FRAME-ST-DL-MRE

Via the M-Plane or another suitable mechanism, put the O-RU into a static configuration with the downlink configured as follow: Modulation Compression + Selective RE

###### Test Requirement (expected result)

Same as 3.2.3.3.2.

#### ![]({{site.baseurl}}/assets/images/66fcd5d635d3.png) TDD UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) Block Floating Point + Selective RE Format

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format.

This Block Floating-Point+ Selective RE Format scenario is a non-static format scenario that will verify DL and UL correct encoding of IQ information for 2 supported bit widths: 9 bits or 14 bits.

For this test scenario, the compression test methodology will be based on the description in clause 3.2.3.3.1

However, on top of the test frame requirements from clause 3.2.3.3.1, this test scenario also requires a test frame that MUST include PRBs with a combination of allocated and empty Resource Elements in the same symbol, to verify if the O-RU properly interprets the sReMask value in the udCompParam field (user data compression parameter). The measurements must be performed on the symbols that include a combination of empty and allocated resource elements.

A test frame example can be based on Type 2 DMRS with 2 DMRS CDM groups without data. The resource mapping model for the Resource Blocks is shown on the diagram below, where both symbols #2 and #11 include a combination of empty and allocated Resources.

![Chart  Description automatically generated]({{site.baseurl}}/assets/images/048224fe0900.png)

###### Figure 3.2.5.3-7 Frame Format Comp NS BFP + Selective RE

The uncompressed and compressed test frames are listed in the table below

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Stimulus File Name** | **Description** |
| TDD-NR-FR1-CMP-TST-FRAME-NS-DL-UNC-RE- 16B | Non-Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| TDD-NR-FR1-CMP-TST-FRAME-NS-UL-UNC-RE- 16B | Non-Static Uplink Uncompressed (C-plane only) with both empty and allocated RE in the same symbol |
| TDD-NR-FR1-CMP-TST-FRAME-NS-DL-BRE-9B | Non-Static Downlink Block Floating Point + Selective RE 9 Bits (CU-plane) |
| TDD-NR-FR1-CMP-TST-FRAME-NS-DL-BRE-14B | Non-Static Downlink Block Floating Point + Selective 14 Bits (CU-plane) |
| TDD-NR-FR1-CMP-TST-FRAME-NS-UL-BRE-9B | Non-Static Uplink Block Floating Point 9 Bits +  Selective RE (C-plane only) |
| TDD-NR-FR1-CMP-TST-FRAME-NS-UL-BRE-14B | Non-Static Uplink Block Floating Point 14 Bits + Selective RE (C-plane only) |

</div>

###### Table 3.2.5-16 Stimulus Files for Comp NS BFP + Selective RE

1. **Test Entrance Criteria**

Same as 3.2.5.3.7 for Non-Static Block floating point + Selective RE formats.

###### Test Methodology

Same as 3.2.3.3.2 with Non-Static Block Floating Point + Selective RE test patterns

The uncompressed test frames used for this test are

* + TDD-NR-FR1-CMP-TST-FRAME-NS-DL-UNC-BRE-16B
  + TDD-NR-FR1-CMP-TST-FRAME-NS-UL-UNC-BRE-16B

The compressed test frames used for this test are

* + TDD-NR-FR1-CMP-TST-FRAME-NS-DL-BRE-9B
  + TDD-NR-FR1-CMP-TST-FRAME-NS-DL-BRE-14B
  + TDD-NR-FR1-CMP-TST-FRAME-NS-UL-BRE-9B
  + TDD-NR-FR1-CMP-TST-FRAME-NS-UL-BRE-14B

###### Test Requirement (expected result)

Same as 3.2.3.3.2.

#### ![]({{site.baseurl}}/assets/images/c3a2c69d21c2.png) TDD UC-Plane O-RU Scenario Class Compression Non-Static Format (NS) mod-compr

+ Selective RE Format

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the O-RU supports this compression format.

This Modulation Compression + Selective RE Format scenario is a non-static format scenario that will verify DL correct encoding of IQ information.

This is the same as 3.2.5.3.13 with Non-Static test frames

The uncompressed and compressed test frames are listed in the table below

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Stimulus File Name | Description |
| NR-FR1-TDD -CMP-TST -NS-DL-UNC-RE-16B | Non Static Downlink Uncompressed (CU-plane) with both empty and allocated RE in the same symbol |
| NR-FR1-TDD -CMP-TST -NS-DL-MRE | Non Static Downlink Modulation Compression + Selective RE |

</div>

###### Table 3.2.5-17 Stimulus File NS Mod Comp Selective RE

1. **Test Entrance Criteria**

Same as 3.2.5.3.12 for non-static Modulation Compression + Selective RE formats.

###### Test Methodology

Same as 3.2.3.3.2 with Non-Static Block Floating Point + Selective RE test patterns

The uncompressed test frames used for this test are

* + NR-FR1-TDD -CMP-TST -NS-DL-UNC-RE-16B

The compressed test frames used for this test are

* + NR-FR1-TDD -CMP-TST -NS-DL-MRE

###### Test Requirement (expected result)

Same as 3.2.3.3.2.

### ![]({{site.baseurl}}/assets/images/62b4a562c68e.png) UC-Plane O-RU Scenario Class Delay Management (DLM)

The delay management tests for FR1 TDD Conducted are the same as the tests described in clause 3.2.3.4 UC-Plane O- RU Scenario Class Delay Management (DLM), except that the TDD waveforms are to be used as shown in 3.2.1.1.3. The tests for uplink and downlink may be executed independently as described in the corresponding FDD test case for Delay Management or the tester may choose to combine the uplink and downlink tests into a single test.

### ![]({{site.baseurl}}/assets/images/ec4d1f1bd6f9.png) UC-Plane O-RU Scenario Class Transport (TRN)

This test is for future study.

### ![]({{site.baseurl}}/assets/images/61cb06cfac69.png) UC-Plane O-RU Scenario Class LAA (LAA)

The LAA tests for FR1 TDD Conducted are the same as the tests described in clause 3.2.3.6.

### ![]({{site.baseurl}}/assets/images/b2e42188470a.png) UC-Plane O-RU Scenario Class LTE (LTE)

The LTE tests for FR1 TDD Conducted are the same as the tests described in clause 3.2.3.7. except that the TDD waveforms are to be used as shown in Figure 3.2.5.2-1 Combined DL and UL TDD 20 MHz 100 RB. The tests for uplink and downlink may be executed independently as described in the corresponding FDD test case for Delay Management or the tester may choose to combine the uplink and downlink tests into a single test.

### ![]({{site.baseurl}}/assets/images/5271473a48f2.png) UC-Plane O-RU Scenario Class Section Type 3 (ST3)

The Section Type 3 tests for FR1 TDD Conducted are the same as the tests described in clause 3.2.3.8.

### FR1 and FR2 TDD Non-conducted OTA Signal Tests

### ![]({{site.baseurl}}/assets/images/98047800e74d.png) UC-Plane O-RU Scenario Class NR testing Generic (NRG)

All TDD tests described in this clause will be combined UL and DL tests (i.e. a single test frame describing both uplink and downlink). The default test frame used in this clause is described in clause 3.2.1.1.3 of this document for FR1 radios and clause 3.2.1.1.4 for FR2 radios.

There are several variations on this test signal depending on the capabilities of the radio. If the radio does not support the numerology used in the example tests as reported in the M-plane it will be up to the test developer to modify their tests to adapt to the radio. This can usually be accomplished by using stock test patterns described above. The test is expected to follow the same spirit as the tests in this document but things like symbol numbers, number of PRBs, etc. may have to be changed.

#### ![]({{site.baseurl}}/assets/images/609a5cce525e.png) UC-Plane O-RU Scenario Class Base 3GPP DL/UL

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can meet the most basic uplink and downlink requirements for O- RAN fronthaul using a TDD signal. Subsequent tests will build on this to exercise additional capabilities of the Fronthaul.

Using the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2, the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the default signal.

The purpose of this test is to ensure the radio can transmit and receive a basic 3GPP, TDD test frame using the default parameters in clause 3.2.1.1.5 of this document (or a similar 3GPP waveform) except only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 for FR1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described by TM FR2-TM1.1 for FR2. It will be for 5G New Radio only.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer and signal source to the O-RU antenna ports and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 in the CUSM emulator. Built the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal.

Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and

uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer shall be the same as the signal described above. If it contains all the same PRB assignments and the PN23 sequence, the test passes.

#### ![]({{site.baseurl}}/assets/images/c50f2e49324f.png) UC-Plane O-RU Scenario Class Extended 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can meet the extended uplink and downlink requirements for O-RAN fronthaul using a TDD signal. This test modifies the previous test by using a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the default signal.

The purpose of this test is to ensure the radio can transmit and receive an extended 3GPP TDD test frame using the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document (or a similar 3GPP waveform) except only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 for FR1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described by TM FR2-TM1.1 for FR2. It will be for 5G New Radio only.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer shall be the same as the signal described above. If it contains all the same PRB assignments and the PN23 sequence, the test passes.

#### ![]({{site.baseurl}}/assets/images/89c78dd78233.png) UC-Plane O-RU Scenario Class Extended using SymInc parameter 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the SymInc parameter set, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with the SymInc parameter set.

This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using the SymInc bit in both uplink and downlink.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 for FR1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described by TM FR2-TM1.1 for FR2. It will be for 5G New Radio only.

The radio must support the SymInc Parameter as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** Every symbol should be described by a single type 1 section (DL- SCH and DCI) except symbols #5 and #6 which will be used for the SymInc test. The data in these sections must be a PN23 sequence using an initial seed of all ones. Each symbol should be a new PN23 sequence, that is PRB 0 should contain the data from a new PN23 sequence for each symbol. Symbols number 5 and 6 should be stock data sections type "E" as shown above. This stock data section consists of two adjacent symbols each containing two sections. The corresponding C-Plane message will contain 4 section IDs in a single C-Plane message describing symbols #5 and #6. The startSymbolId in the application header will be symbol #5. The second section ID for symbol #5 will have the SymInc bit set informing the O-RU that the next section will begin describing symbol #6. The corresponding U-Plane messages will be a new PN23 sequence for each symbol (5 and 6). Symbol #6 contains PTRS in TM FR2-TM1.1. The data payload should be mapped around the PTRS. Additional sections should be included to describe the DCI symbols as well as Reference Signals described in 38.141-1.

**For the uplink sections and symbols:** Load uplink test waveform on the RF signal source. Note this signal has a PN23 sequence as user data. Configure the source to generate a new PN23 sequence in symbols #5 and #6. Configure the signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that all C-Plane messages have been sent. Ensure the O-RU and source are synchronized so downlink slots do not conflict with uplink slots. Load C-Plane message sequence on Test Equipment O-RU (TER) - Only symbols #5 and #6 in each slot will be used in this test. All other symbols will contain either reference signals or data but will not be considered part of the test. These two symbols will be used to determine whether the radio properly increments the current symbol ID when the SymInc bit is set. The C-Plane message for symbol #5 should have the SymInc bit set. This message should have a second section describing symbol #6 (using the SymInc mechanism). All PRBs in each symbol will be requested (In the example waveform 51 PRBs).

###### Steps:

* + - Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
    - Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
    - Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.3 for FR1 or

3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.

* + - Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
    - Extract IQ information from the captured U-Plane messages
    - Extract IQ information from the signal analyzer for downlink slots
    - Extract Payload for both signals
    - Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and the correct PN23 data, the downlink test passes.
4. The test frame extracted from the uplink U-Plane messages should be the same as the uplink signal described above. If it contains all the same PRB assignments and correct PN23 data, the uplink test passes.

#### ![]({{site.baseurl}}/assets/images/1c0c8d80579e.png) UC-Plane O-RU Scenario Class Extended using reMask parameter 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the reMask parameter set, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with the reMask parameter set.

This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using the rb bit in both uplink and downlink.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 for FR1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described by TM FR2-TM1.1 for FR2. It will be for 5G New Radio only.

The radio must support the reMask Parameter as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* + 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** Symbol number 2 should be stock data Section Type "D" as shown in Figure 3.2.3.1-4. This test will only be using PRBs 1 through 5. The corresponding C-Plane message will contain a section IDs in a single C-Plane message describing symbol #6. The startSymbolId in the application header will be symbol #6. The C-Plane message will have one section with the reMask set to only the odd number resource elements. The number of PRBs will be 5. The start PRB will be 1.

The corresponding U-Plane message will be a new PN23 Sequence (initial seed is all ones) in PRBs 1 through 5 of symbol #2.

**For the uplink sections and symbols:** Load C-Plane message sequence on Test Equipment O-RU (TER) symbol #5 in each slot will be used to determine whether the radio properly transmits only every other

resource element when the reMask is set. No other symbols will be used in this test, however other symbols containing reference signals should be used to ensure the O-RU can synchronize with the TER. The TER will not request any other symbols from the O-RU in this test. The C-Plane message for symbol #5 should have the reMask set to tell the radio to send only every odd resource element. Only the PRBs 1 through 5 will be used in this section (matching stock data Section Type "D"). The number of PRBs will be 4 and the start PRB will be 1.

###### Steps:

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.3 for FR1 or

3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.

* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the downlink test passes.
4. The test frame extracted from the uplink U-Plane messages should be the same as the uplink signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the uplink test passes.

#### ![]({{site.baseurl}}/assets/images/ced6a8b41487.png) UC-Plane O-RU Scenario Class Extended using RB parameter 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with the rb parameter set, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with the rb parameter set. This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using the rb bit in both uplink and downlink.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 for FR1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described by TM FR2-TM1.1 for FR2. It will be for 5G New Radio only.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** Every allocated (see below) symbol should be described by a single section (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Symbol #3 of each downlink slot should be Stock data Section Type "D" as shown in section

3.2.1.1.5 above. The control plane message for symbol #3 will only include PRBs number 5 through 23. This C-Plane message will have the rb bit set to one for this section. All other DL-SCH symbols will not contain data except required reference signals needed to synchronize the signal analyzer. Encapsulate the IQ data in U-Plane messages. U-Plane data in symbol #3 will include a new PN23 sequence starting with an initial seed of all ones starting in PRB number 5. Additional sections should be included to describe the DCI symbols as well as Reference Signals described in TS 138.141-1.

**For the uplink sections and symbols:** Load uplink test waveform on the RF signal source. Note this signal has a PN23 sequence as user data. Configure the signal source to play the TDD test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that all C-Plane messages have been sent. Ensure the O-RU and source are synchronized so downlink slots do not conflict with uplink slots. Load C-Plane message sequence on Test Equipment O-RU (TER) - This C-Plane sequence should describe a single section per uplink symbol (51 RBs per symbol). The C-Plane message for uplink symbol #6 should have the rb bit set. All other sections should have the rb bit set to zero.

###### Steps:

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.3 for FR1 or

3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.

* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and PN23 sequence data, the downlink test passes.
4. The test frame extracted from the uplink U-Plane messages shall be the same as the uplink signal described above. If it contains all the same PRB assignments and PN23 sequence data, the uplink test passes.

#### ![]({{site.baseurl}}/assets/images/2362e984f6c1.png) UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with section extension 6, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with section extension 6. This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using section extension 6 in both uplink and downlink.

In this test stock data section definition C will be used to exercise the non-contiguous RB allocation, all 273 PRBs (51 in the uplink slots) or the max number of PRBs per symbol for the highest numerology the radio supports will be used in this test.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 for FR1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described by TM FR2-TM1.1 for FR2. It will be for 5G New Radio only.

The radio must support section extension 6 as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used

in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** Only symbols number 6 and 7 will be used in each slot. Symbol #6 contains PTRS in TM FR2-TM1.1. The data payload should be mapped around the PTRS. Other symbols may contain data including reference signals to ensure test equipment can synchronize with the signal. The starting PRB will be zero and number of PRBs will be chosen from one or more columns in Table 3.2.6-2 below. The resource block group size will be 16 based on ETSI TS 138.214 Table 5.1.2.2.1-1 as shown in Table 3.2.6-1 below using configuration 2.

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Bandwidth Part Size** | **Configuration 1** | **Configuration 2** |
| 1 - 36 | 2 | 4 |
| 37 - 72 | 4 | 8 |
| 73 - 144 | 8 | 16 |
| 145 - 275 | 16 | 16 |

</div>

###### Table 3.2.6-1 RBG Group Size

Using the calculations in the O-RAN CUS Specification [2], clause 7.7.6 for the FR1 test waveform described above, the ID of the last RBG will be 17, f(0) will be 16, f(n) will be 16 and f(lastRbgID) will be 1 (17 total RBGs), startPrbc will be zero and numPrbc will be 273. For the FR2 test waveform, the ID of the last RBG will be 8, f(0) will be 8, f(n) will be 8 and f(lastRbgID) will be 2 (8 total RBGs), startPrbc will be zero and numPrbc will be 66. If the radio does not support this numerology the following table will apply. The number of PRBs correspond to Table 3.2.3-2 Stock Data Sections:

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (11-79)** | | | | | | | | | | |
| max PRB/sym | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| numPRBc | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| rbgSize | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| lastRbgID | 2 | 5 | 6 | 7 | 6 | 6 | 6 | 8 | 8 | 4 |
| f(0) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(n) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(lastRbgID) | 3 | 4 | 1 | 4 | 2 | 3 | 4 | 1 | 2 | 15 |
| rbgMask (Hex) | 0000005 | 000003D | 000007D | 00000FD | 000007D | 000007D | 000007D | 00001FD | 00001FD | 000001D |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (100-273)** | | | | | | | | | | |
| max PRB/sym | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| numPRBc | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| rbgSize | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| lastRbgID | 6 | 6 | 6 | 8 | 8 | 8 | 10 | 13 | 16 | 17 |
| f(0) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(n) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(lastRbgID) | 4 | 10 | 11 | 4 | 5 | 7 | 2 | 9 | 14 | 1 |
| rbgMask (Hex) | 000007D | 000007D | 000007D | 00001FD | 00001FD | 00001FD | 00007FD | 0003FFD | 001FFFD | 003FFFD |

</div>

###### Table 3.2.6-2 Stock Data Sections

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal for FR1 or NR-FR2-TM1.1 for FR2 as described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C- Plane messages that describe the signal. Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols #6 and #7 which will be used for the section extension 6 test. The data in symbol #6 should be a new PN23 sequence starting in the first PRB and continuing to PRB 273 (RBG number 17) for FR1 and PRB 66 (RBG number 8) for FR2. Symbol #7 should be identical to symbol #6. The rbgMask value should be set to 0x3FFFD for FR1 or 0x1FD for FR2, and the symbolMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test.

The O-DU emulator will build a U-Plane message containing the PN23 IQ data for the first 16 PRBs (RBG 0), this message will have the section ID used in the C-Plane message described above. Another U-Plane message will be created using the same section ID but with the PN23 data for the rest of the RBGs except for RBG 1 in it. The same U-Plane messages will be used for symbol #7.

**For the uplink sections and symbols:** For this test symbols number 6 and 7 will be used in each slot. For the FR1 waveform, the starting PRB will be zero and number of PRBs will be 51. The resource block group size will be 8. Using the calculations in the O-RAN CUS Specification [2], clause 7.7.6, the ID of the last RBG will be 6, f(0) will be 8, f(n) will be 8 and f(lastRbgID) will be 3. For the FR2 waveform the parameters are similar to the downlink indicated above.

Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols #6 and #7 which will be used for the section extension 6 test. The data in symbol #6 is expected to be a new PN23 sequence starting in the first PRB and continuing to PRB 51 (RBG number 6) for FR1 or PRB 66 (RBG number 8 for FR2). Symbol #7 should be identical to symbol #6. The rbgMask value should be set to 0x7D for FR1 and 0x1FD for FR2, and the symbolMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test. If the radio only supports another numerology see the tables above in the downlink sections and symbols for appropriate modifications.

###### Steps:

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.3 for FR1 or

3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.

* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the downlink test passes.
4. The test frame extracted from the uplink U-Plane messages should be the same as the uplink signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the uplink test passes.

#### ![]({{site.baseurl}}/assets/images/ded783ceceb9.png) UC- Plane O-RU Scenario Class Extended 3GPP DL/UL - Resource Allocation - Coupling C and U plane via time and frequency

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can meet the extended uplink and downlink requirements for O-RAN fronthaul using a TDD signal. This test uses time and frequency to couple C-Plane and U-Plane messages.

Using the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the default signal.

The purpose of this test is to ensure the radio can transmit and receive an extended 3GPP TDD test frame using the default parameters in clause 3.2.1.1.3 of this document (or a similar 3GPP waveform) except only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence. The radio must report over the M-Plane that it supports C and U plane coupling via time and frequency.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described by TM FR2-TM1.1 for FR2. It will be for 5G New Radio only. The radio must report over the M-Plane that it supports C and U plane coupling via time and frequency.

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer and signal source. It must also support the default parameters defined in clause 3.2.1.1.1 above.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source. All section IDs in C-Plane messages and downlink U-Plane messages must be 4095.

C-Plane and Downlink U-Plane messages sent by the TER will have valid values in the following fields:

* + - EAxC ID
    - Datadirection bit
    - Frame ID, subframeID, slotID, startsymbolID, and NumSymbol
    - SectionID must have a value 4095
    - SymInc, rb reMask and section extension #6 are *not* used in this test

It is the responsibility of the TER to properly arrange uplink U-Plane messages using only time and frequency resources.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. All received U-Plane messages must have section ID equal to 4095
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and all zero data, the test passes.

#### ![]({{site.baseurl}}/assets/images/40d736a999e1.png) UC- Plane O-RU Scenario Class Extended 3GPP DL/UL - Coupling C and U plane via Time and Frequency and Section Description Priorities

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to test whether the radio can implement coupling U and C plane via time and frequency and section description priorities requirements for O-RAN fronthaul using a TDD signal. This test combines the FDD, uplink and downlink tests for these same features. Note, there are two versions of this feature: coupling C and U plane messages via frequency and time and Section Description Priorities and coupling C and U plane messages via frequency and time and Section Description Priorities (optimized). This test requires both tests to be performed if the radio supports both methods otherwise only one test is to be performed in the radio only supports one of these methods. These methods are listed under test methodology below.

Starting with the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the signals described below.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document and those specified below. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 for FR1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described by TM FR2-TM1.1 for FR2. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. It will be a TDD signal.

The O-RU must have a conducted antenna port (or TAB connector) to be connected to a signal analyzer and signal source. It must also support the default parameters defined in clause 3.2.1.1.1 above.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.

* 1. **Procedure for Coupling C and U plane messages via frequency and time with section priorities** Build an appropriate C and U plane signals for the signals described below in the CUSM emulator. Every slot used in the test should be described by a single C-Plane message with multiple sections (DL-SCH that are used for the test, DMRS and DCI) using a Section Type 1 message. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.
     + Downlink procedure:

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| # | Section ext 6 | priority | symbolMask | startPrbc | numPrbc | reMask | rbgMask | beamId | numSymbol | Note |
| 1 | yes | +1 | 00000000000100 | 0 | 273 | 101010101010 | 0xFFFFC00 | 1 | 1 | Reference signal (DMRS) |
| 2 | yes | +1 | 00100000000000 | 0 | 273 | 101010101010 | 0xFFFFC00 | 2 | 1 | Reference signal (DMRS) |
| 3 | no | 0 | 11111000000000  Not used in this section without section extension  6. Just shown for information | 0 | 273 | 111111111111 | N/A | 100 | 6 | UE1 |
| 4 | yes | 0 | 00000100000100 | 15 | 32 | 010101010101 | 0x6000000 | 200 | 2? | UE2 |
| 5 | no | 0 | 00000011111000  Not used in this section without section extension  6. Just shown for information | 31 | 48 | 111111111111 | N/A | 300 | 8 | UE3 |
| 6 | no | 0 | 00000000000001  Not used in this section without section extension  6. Just shown for information | 10 | 2 | 111111111111 | N/A | 3 | 1 | Special channel |

</div>

###### Table 3.2.6-3 Time and Frequency Coupling with Priority TDD DL

In this test the section configuration will be as shown in Table 3.2.6-3 above. The 6 sections will comprise one slot and this slot will be repeated continuously in the downlink slots in the TDD frame to synchronize the TER signal analyzer. The six sections will be sent on one C-Plane message using C and U plane coupling via time and frequency. The configuration above follows the example given in the CUSM specification.

The section numbers in the above table do not represent SectionID numbers but individual sections. Sections #1 and #2 describe hypothetical DMRS signals sent in symbols #2 and #11 in each slot. These signals have every other subcarrier masked by reMask. This is the same as shown above in the standard NR-FR1-TM1.1 test signal shown above for FR1 or 3.2.1.1.4 for FR2. The DMRS signals in symbol #2 have beam ID 1 and symbol #11 have beam ID 2. These sections use section extension 6 and contain a higher priority than all other sections.

Section #3 describes PN23 data sent to hypothetical UE #1 it overlaps REs in sections #1 and #2 but has a lower priority so sections #1 and #2 are valid. Since section #3 has contiguous symbols section extension 6 is not needed.

Section #4 is for hypothetical UE #2. It occupies the same symbols as the DMRS signals but uses a different reMask. Since the symbols are not contiguous it uses sections extension 6 but the priority is set to the default 0.

Section #5 is for hypothetical UE #3 and uses a contiguous set of symbols so section extension 6 is not needed. It does not overlap any other signals. This section is optional because it does not test Section Description Priority.

Section #6 is a hypothetical special channel using only one symbol and does not require section extension 6. This section is also optional.

U-Plane messages will contain:

* DMRS signals for every odd resource element as described by section #1 for symbol #11
* DMRS signals for every odd resource element as described by section #2 for symbol #2
* A new PN23 sequence in each of the first 5 symbols as described in section #3. Note that for symbol #2 the PN sequence will be pierced by the DMRS signals.
* A new PN23 sequence for symbol #6 as described by section #4 as well as a new PN sequence for symbol #11. These sequences are only 32 PRBs long and start in PRB 15. The sequence in symbol #11 will be pierced by DMRS signals.
* The user data for sections number #5 and #6 are standard PN23 sequences only for these symbols and PRBs described in the table above. Symbol #6 contains PTRS in TM FR2-TM1.1. The data payload should be mapped around the PTRS.
* Uplink Procedure:

Build the following Uplink C-Plane message.

Start with a standard as G-FR1-A1-5 for FR1 or G-FR2-A3-1 for FR2 waveform. Define the sections shown in table Table 3.2.6-4. These sections are described below.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| # | Section ext 6 | priority | symbolMask | startPrbc | numPrbc | reMask | rbgMask | beamId | numSymbol | Note |
| 1 | yes | +1 | 00000000000100 | 0 | 273 | 101010101010 | 0xFFFFC00 | 1 | 1 | Reference signal (DMRS) |
| 2 | yes | +1 | 00100000000000 | 0 | 273 | 101010101010 | 0xFFFFC00 | 2 | 1 | Reference signal (DMRS) |
| 3 | no | 0 | 11111000000000  Not used in this section without section extension  6. Just shown for information | 64 | 273 | 111111111111 | N/A | 100 | 6 | UE1 |
| 4 | yes | 0 | 00000100000100 | 64 | 273 | 010101010101 | 0x0FFFC00 | 200 | 2? | UE2 |
| 5 | no | 0 | 00000011111000  Not used in this section without section extension  6. Just shown for information | 31 | 48 | 111111111111 | N/A | 300 | 8 | UE3 |
| 6 | no | 0 | 00000000000001  Not used in this section without section extension  6. Just shown for information | 10 | 2 | 111111111111 | N/A | 3 | 1 | Special channel |

</div>

###### Table 3.2.6-4 Time and Frequency Coupling with Priority TDD UL

In this test the section configuration will be as shown in Table 3.2.6-4 above. The 6 sections will comprise one slot and this slot will be repeated to fill the entire frame (i.e. 20 times). The six sections will be sent on one C-Plane message using C and U plane coupling via time and frequency. The configuration above follows the example given in the CUSM specification.

* + The section numbers in the above table do not represent SectionID numbers but individual sections. Sections #1 and #2 describe hypothetical DMRS signals sent in symbols #2 and #11 in each slot. These signals have every other subcarrier masked by reMask. This is the same as shown above in

the standard G-FR1-A1-5 test signal shown above with the exception that the DMRS signals continue for all 273 RBs. The DMRS signals in symbol #2 have beam ID 1 and symbol #11 have beam ID 2. These sections use section extension 6 and contain a higher priority than all other sections.

* + Section #3 describes PN23 data sent to hypothetical UE #1 it overlaps REs in sections #1 and #2 but has a lower priority so sections #1 and #2 are valid. Since section #3 has contiguous symbols section extension 6 is not needed. Note it starts in PRM 64 (RBG 4) and continues for the remainder of the 273 RBs.
  + Section #4 is for hypothetical UE #2. It occupies the same symbols as the DMRS signals but uses a different reMask. Since the symbols are not contiguous it uses sections extension 6 but the priority is set to the default 0. It also starts in RBG 4 (RB 64) and continues to the rest of the 273 RBs.
  + Section #5 is for hypothetical UE #3 and uses a contiguous set of symbols so section extension 6 is not needed. It does not overlap any other signals. This section is optional because it does not test Section Description Priority.
  + Section #6 is a hypothetical special channel using only one symbol and does not require section extension 6. This section is also optional.
* Load the following waveform into the signal source:
  + DMRS signals for every odd resource element as described by section #1 for symbol #11
  + DMRS signals for every odd resource element as described by section #2 for symbol #2
  + A new PN23 sequence in each of the first 5 symbols as described in section #3. Note that for symbol #2 the PN sequence will be pierced by the DMRS signals.
  + A new PN23 sequence for symbol #6 as described by section #4 as well as a new PN sequence for symbol #11. These sequences start in PRB 64 and continue to PRB 273. The sequence in symbol #11 will be pierced by DMRS signals.
  + The user data for sections number #5 and #6 are standard PN23 sequences only for these symbols and PRBs described in the table above.
* Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent.
* Load C-Plane message described above on Test Equipment O-RU (TER). The C-Plane message will contain valid values in the following fields:
* EAxC ID
* Datadirection bit (Uplink)
* Frame ID, subframeID, slotID, startsymbolID, and NumSymbol
* SectionID must have a value 4095
* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the RF uplink frame after the C-Plane messages have been sent honoring timing windows
* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* TER will arrange U-Plane messages according to time and frequency
* Extract IQ information
* Extract Payload
* Compare payload binary sequences

###### Procedure for Coupling C and U plane messages via frequency and time with section priorities (optimized)

This test will be identical to the above test with the following exceptions:

* + - There will be two C-Plane messages describing the uplink and downlink signals to be sent.
    - The first two sections listed in the table above (those with higher priorities) will be repeated in both C- Plane messages and will have a section ID equal to a value between 0 and "max-highest-priority- sections-per-slot" as sent on the M-Plane.
    - The other sections will be divided between the two C-Plane messages and not repeated.
    - The repeated C-plane message will have the "repetition" bit set to one.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer must be the same as the signal described above. It must contain all the same PRB assignments and PN23 sequences.
3. The data received from the O-RU on the uplink U-Plane must match the uplink signal sent to the DUT including all the same PRB assignments and PN23 sequences.
4. The beamweights or magnitude and phase relation at the antenna ports (or TAB connectors) of the test signal that achieves the highest performance (i.e. best EVM, power, SNR, etc.) should match with the manufacturer's declaration of the beam under test. The procedures for test case 3.2.3.2.4 (UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Predefined-beam Beamforming) and test case 3.2.3.2.3 (UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming) should be used.
5. These expected results are applicable for either or both forms of this test.
6. If all of the above results are observed the test passes.

#### ![]({{site.baseurl}}/assets/images/4964107f6448.png) UC-Plane O-RU Scenario Class Extended using Non-contiguous PRB Allocation Section Extension using section extension 12 3GPP DL/UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can accurately interpret C-Plane resource allocation messages with section extension 12, transfer U-Plane data into the correct resource blocks and transmit this data accurately in the downlink and interpret and capture the correct resource blocks in the uplink with section extension 12. This test uses a PN23 sequence in all test PDSCH sections.

Using the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using section extension 12 in both uplink and downlink.

In this test stock data section definition C will be used to exercise the non-contiguous RB allocation, all 273 PRBs (48 of the 51 in the uplink slots) or the max number of PRBs per symbol for the highest numerology the radio supports will be used in this test.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All downlink user data in this test will be a PN23 sequence and all uplink user data will also be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by TM-FR1-TM1.1 for FR1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described by TM FR2-TM1.1 for FR2. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The radio must support section extension 12 as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build

the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** Only symbols number 6 and 7 will be used in each slot. Other symbols may contain data including reference signals to ensure test equipment can synchronize with the signal. The starting PRB will be zero and number of PRBs will be chosen from one or more columns in Table 3.2.6-6 below. The resource block group size will be 16 based on ETSI TS 138.214 Table 5.1.2.2.1- 1 as shown in Table 3.2.6-5**Table 3.2.6-6**below using configuration 2.

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Bandwidth Part Size** | **Configuration 1** | **Configuration 2** |
| 1 - 36 | 2 | 4 |
| 37 - 72 | 4 | 8 |
| 73 - 144 | 8 | 16 |
| 145 - 275 | 16 | 16 |

</div>

###### Table 3.2.6-5 Resource Block Group Size

Using the calculations in the O-RAN CUS Specification [2], clause 7.7.6, for the FR1 test waveform described above, the ID of the last RBG will be 17, f(0) will be 16, f(n) will be 16 and f(lastRbgID) will be 1 (17 total RBGs). StartPrbc will be zero and numPrbc will be 273. For the FR2 test waveform, the ID of the last RBG will be 8, f(0) will be 8, f(n) will be 8 and f(lastRbgID) will be 2 (8 total RBGs), startPrbc will be zero and numPrbc will be 66. If the radio does not support this numerology the following table will apply. The number of PRBs correspond to Table 3.2.3-2 Stock Data Sections:

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (11-79)** | | | | | | | | | | |
| max PRB/sym | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| numPRBc | 11 | 24 | 25 | 32 | 50 | 51 | 52 | 65 | 66 | 79 |
| rbgSize | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| lastRbgID | 2 | 5 | 6 | 7 | 6 | 6 | 6 | 8 | 8 | 4 |
| f(0) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(n) | 4 | 4 | 4 | 4 | 8 | 8 | 8 | 8 | 8 | 16 |
| f(lastRbgID) | 3 | 4 | 1 | 4 | 2 | 3 | 4 | 1 | 2 | 15 |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **# PRBs per Symbol (100-273)** | | | | | | | | | | |
| max PRB/sym | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| numPRBc | 100 | 106 | 107 | 132 | 133 | 135 | 162 | 217 | 270 | 273 |
| rbgSize | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| lastRbgID | 6 | 6 | 6 | 8 | 8 | 8 | 10 | 13 | 16 | 17 |
| f(0) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(n) | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 | 16 |
| f(lastRbgID) | 4 | 10 | 11 | 4 | 5 | 7 | 2 | 9 | 14 | 1 |

</div>

###### Table 3.2.6-6 Stock Data Sections

Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal for FR1 or NR-FR2-TM1.1 for FR2 as described above in the O-DU emulator. Use the O-DU emulator control interface to build the appropriate C- Plane messages that describe the signal. Every symbol should be described by a single type 1 section (DL-SCH

and DCI) except symbols #6 and #7 which will be used for the section extension 12 test. The data in symbol #6 should be a new PN23 sequence starting in the first PRB and continuing to PRB 273 (RBG number 17).

Symbol #6 contains PTRS in TM FR2-TM1.1. The data payload should be mapped around the PTRS. Symbol #7 should be identical to symbol #6. The symMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test. The relevant parameters for the downlink C-Plane message are shown in the diagram below:

![]({{site.baseurl}}/assets/images/6fdbfcba893d.jpg)

###### Figure 3.2.6.1-1 Downlink C-Plane Parameters

The O-DU emulator will build a U-Plane message containing the PN23 IQ data for the first 16 PRBs (RBG 0), this message will have the section ID used in the C-Plane message described above. Another U-Plane message will be created using the same section ID but with the PN23 data for RBGs 2-17 in it. The same U-Plane messages will be used for symbol #7.

**For the uplink sections and symbols:** For this test symbols number 6 and 7 will be used in each slot. The starting PRB will be zero and number of PRBs will be 48. The resource block group size will be 16. Using the calculations in the O-RAN CUS Specification [2], clause 7.7.6, the ID of the last RBG will be 17, f(0) will be 16, f(n) will be 16 and f(lastRbgID) will be 1.

Every symbol should be described by a single type 1 section (DL-SCH and DCI) except symbols #6 and #7 which will be used for the section extension 6 test. The data in symbol #6 is expected to be a new PN23 sequence starting in the first PRB and continuing to PRB 48 (RBG number 2). Symbol #7 should be identical to symbol #6. The symMask value should be set to 00000011000000b. No Section Type zero messages will be used for this test. If the radio only supports another numerology see the tables above in the downlink sections and symbols for appropriate modifications. The relevant parameters for the uplink C-Plane message are shown in the diagram below:

![]({{site.baseurl}}/assets/images/d205c17a6814.jpg)

###### Figure 3.2.6.1-2 Uplink C-Plane Parameters

**Steps:**

* Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
* Launch test to play the C-Plane messages and the downlink U-Plane messages and trigger the source to play the RF signal on a frame boundary.
* Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.3 for FR1 or

3.2.1.1.4 for FR2. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.

* Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
* Extract IQ information from the captured U-Plane messages
* Extract IQ information from the signal analyzer for downlink slots
* Extract Payload for both signals
* Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
3. The test frame received by the signal analyzer should be the same as the signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the downlink test passes.
4. The test frame extracted from the uplink U-Plane messages should be the same as the uplink signal described above. If it contains all the same PRB assignments and the correct PN23 sequence as data, the uplink test passes.

#### ![]({{site.baseurl}}/assets/images/573caa880052.png) UC-Plane O-RU Scenario Class Static SRS Allocation UL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the O-RU can support static SRS configuration through the M-Plane. This is an uplink only test so there is no corresponding downlink test for TDD. The O-RU must report through the M-Plane that it supports static configuration of SRS.

This test will use the standard TDD test frame described in clause 3.2.1.1 for FR1 or 3.2.1.1.4 for FR2. The test will have the CUSM emulator configure the O-RU, through the M-Plane, with a section of time/frequency resources reserved for static uplink SRS, these will be limited to the uplink slots of the TDD frame. The signal source will be programmed to send simulated SRS signals in a subset of those resources. The O-RU should receive this SRS signals and pass them through to the CUSM emulator using U-Plane messages. Note, there will be no C-Plane messages sent from the CUSM emulator and the O-RU. The signal generator will signal power levels at least 30 dB above Reference Sensitivity power Level described in TS 138.141-1 Table 7.2.5-1. This is to improve the likelihood that all data will be received by the radio correctly since we are not interested in testing receiver sensitivity but only the O-RAN protocol compliance. The placement of the time frequency resources is not specified in this test so it may be placed in any uplink slots of the TDD frame.

The TER (Test Equipment, O-RU) generates an uplink SRS signal on the antenna connector or TAB connector. The TER will capture the U-Plane messages generated by the DUT and validate whether the payload matches the uplink signal as well as beam characteristics. The metric used to validate that the signal received by the CUSM emulator matches the signal sent by the signal generator will be EVM as described in Annex H.7 of ETSI TS 138.141. While some 3GPP test documents (e.g. ETSI TS 138.521 clause 6.4.2.1.3) suggest treating the EVM requirements for physical Zadoff-Chu sequences such as PRACH the same as QPSK for EVM requirements, this document will decrease the required EVM to the level specified for 64 QAM. The purpose of this is to ensure that there is no chance of false positives where a random, mistaken signal sent by the O-RU closely mimics the test signal used by the TER. Since there are no impairments made to the uplink SRS signal this should be well within the capabilities of the O-RU.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The O-RU must indicate is supports static SRS allocation. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth for FR1 and 120 kHz subcarrier spacing and 100 MHz Bandwidth for FR2. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors. Note this signal may be changed to any of the 3GPP sensitivity test signals in ETSI TS 138.141-1 if the radio does not support the numerology and bandwidth used in this test. The test signal described in this section will be used if the radio supports that numerology and bandwidth.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required SRS test signal upon receiving a trigger signal from the CUSM-E. The signal source power level should be adjusted to at least 30 dB above the setting used in the 3GPP receiver sensitivity test.

Implicit in this Initial set up is statically configuring O-RU with a section of time/frequency resources for statis SRS signals.

.

###### Procedure

* + - Build an SRS signal in the signal generator that fits in the preconfigured time frequency resources set in the initial configuration.
    - Load the waveform into the signal source:
    - Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that signals the start of a frame boundary.
    - Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
    - Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port connected
    - TER will arrange U-Plane messages according to time and frequency
    - Start SRS waveform generation on the signal generator. Ensure the test frame is repeated enough times to generate a statistically significant number of SRS occasions. That is at least 10 occasions.
    - Extract IQ information
    - Calculate EVM of the SRS signal received by the CUSM emulator to the ideal signal generated by the signal source. Use the method described in ETSI TS 138.141 Annex H.7 to perform the calculation.

###### Test Requirement (expected result)

1. The verdict is "Test pass" if the calculated EVM is less than 8% as median EVM measured over the minimum number of SRS occasions of at least 10 occasions.
2. If any of the test conditions are not true, the verdict for the whole test is "Fail"

#### ![]({{site.baseurl}}/assets/images/c69b9dc82c54.png) UC Plane O-RU Base Class TDD Test UL - Static PRACH allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the O-RU can support static PRACH configuration through the M-Plane. This is an uplink only test so there is no corresponding downlink test for downlink slots. The O-RU must report through the M-Plane that it supports static configuration of PRACH. The concept is to repeat the spirit of test 3.2.3.8.1 (5GNR PRACH test) without sending any C-Plane type 3 messages and configuring the O-RU using only the M- Plane.

TER will setup the signal generator with a PRACH test waveform according to ETSI TS 138.141-1 clause 8.4.1 and A.6. The test waveform will contain the same preamble ID repeated by following the timing offset scheme specified in the figures 8.4.1.4.2-2 or 8.4.1.4.2-3 ETSI TS 138.141-1 depending on the selected PRACH format.

This is an example for FR1 - SCS=30 kHz - BW=100MHz - Format A3 configuration index 132 (From Table 6.3.3.2-3, unpaired spectrum), at each occasion the time offset of the same preamble index (selected according to table A.6-1 ETSI TS 138.141.1) is incremented by 100nsec starting from 0 up to 800nsec (9 occasions per frame). Each PRACH occasion is at the beginning of the first nine used sub-frames. The scheme is repeated every frame. The test must be conducted using a PRACH format and configuration index the radio has reported it supports

![]({{site.baseurl}}/assets/images/9b3c0445dd84.png)![]({{site.baseurl}}/assets/images/791e1ea5694e.png)

###### Figure 3.2.6.1-3 FR1 SCS 30Kz 100MHz Format A3, Unpaired Spectrum, configuration index 132

According to the PRACH waveform setting, the TER will generate a corresponding sequence of M-Plane messages which include the following parameters (According to the M-Plane specification and the PRACH configuration index supported):

grouping static-prach-configuration

* leaf pattern-period - "Period after which static PRACH patterns are repeated. Unit: number of frames."
* leaf guard-tone-low-re - "Number of REs occupied by the low guard tones."
* leaf num-prach-re - "Number of contiguous PRBs per data section description"
* leaf guard-tone-high-re - "Number of REs occupied by the high guard tones."
* leaf sequence-duration - "Duration of single sequence of the PRACH. Sequence may be considered as 'single PRACH symbol'"
* list prach-patterns - key prach-pattern-id - "Provides a PRACH pattern. Each record in the list represents a single PRACH occasion. Number of list entries cannot exceed max-prach-patterns"
  + leaf prach-pattern-id - "Supplementary parameter acting as key for prach-pattern list."
  + leaf number-of-repetitions - "This parameter defines number of PRACH repetitions in PRACH occasion, to which the section control is applicable
  + leaf number-of-occasions - "This parameter informs how many consecutive PRACH occasions is described by the PRACH Pattern"
  + leaf re-offset - "Offset between the start of the lowest-frequency RE of the lowest frequency PRB and the start of the lowest frequency RE belonging to the PRACH occasion. The re- offset is configured as number of PRACH REs.
  + list occasion-parameters - "list of cp-lengths, gp-lengths and beam-ids applicable per each PRACH occasion in PRACH pattern. NOTE: the number of records in this list MUST be equal to value of parameter number-of-occasions."
    - leaf occasion-id - "Supplementary parameter acting as key in 'occasion-parameters' list"
    - leaf cp-length - "Cyclic prefix length. See CUS-Plane specification for detailed description."
    - leaf gp-length - "Guard period length."
    - leaf beam-id - "This parameter defines the beam pattern to be applied to the U- Plane data. beamId = 0 means no beamforming operation will be performed."
  + leaf frame-number - "This parameter is an index inside the pattern-length, such that PRACH occasion is happening for SFN which fulfills following equation: [SFN mod pattern-length = frame-id]"
  + leaf sub-frame-id - "Identifier of sub-frame of the PRACH occasion. Value is interpreted in the same way as subframeId field in a section description of a C-Plane message."
  + leaf time-offset - "This parameter defines the time-offset from the start of the sub-frame to the start of the first Cyclic Prefix of PRACH pattern"

By the corresponding U-Plane messages in the uplink direction, the TER will try to detect the presence of the corresponding preamble at the expected timing offset and calculate the probability of detection Pd according to the definition in TS38.141-1 clause 8.4.1.1.

The signal will be exercised at only one O-RU port without adding any external AWGN power level or multipath fading profile and at a power level avoiding detection errors due to poor SNR (rule described in the sub-section C of this scenario class).

The test will have the CUSM emulator configure the O-RU, through the M-Plane, with a section of time/frequency resources reserved for static uplink PRACH. The default is the PRACH configuration described in 3GPP above, but the test may be conducted with changes if the radio does not support those exact configurations. The signal source will be programmed to send simulated PRACH signals in those resources. The O-RU should receive this PRACH signal and pass them through to the CUSM emulator using U-Plane messages. Note, there will be no C- Plane messages sent from the CUSM emulator and the O-RU.

###### Test Entrance Criteria

O-RU must have a conducted antenna port (FR1) or TAB connector.

By the M-plane or by manufacturer declaration, TER will detect all the supported SCSs, FFT sizes and carrier bandwidths by the O-RU. It is assumed that only one combination of the three above parameters supported by the

O-RU is enough to validate the test. TER shall generate M-Plane messages according to one of the PRACH formats in table A.6-1 ETSI TS 138.141. TER will choose the format either according to the manufacturer declaration item

D.103 "PRACH format and SCS" in ETSI TS 138.141-1 or according to the format information obtained by the M-plane in case O-RU implements this feature. If more formats are claimed, only one shall be selected to reduce the test time, preference will be given to a format specified in Table A.6.1 ETSI TS 138.141. It is assumed that the O-RU manufacturer will support at least one in that table. For the case of long preambles, it is assumed format 0 is always supported since this is the only one shown in the table A.6-1 ETSI TS 138.141.

###### Test Methodology a: Initial Conditions

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-

Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal source to the O-RU antenna port and configure the source to transmit the required PRACH test signal upon receiving a trigger signal from the CUSM-E.

Implicit in this Initial set up is statically configuring O-RU with a section of time/frequency resources for static PRACH signals.

###### b: Procedure

* + Set signal generator power by the following method:
    1. Select SNR from the scenario with two RX antennas and AWGN propagation condition in table 8.4.1.5- 1, 8.4.1.5-2 or 8.4.1.5-3 ETSI TS 138.141-1 depending on the selected SCS and PRACH format.
    2. Select the AWGN power level according to the configured SCS and channel bandwidth in table 8.4.1.4.2-1 ETSI TS 138.141-1 and 38.141-1and multiply by the PRACH signal bandwidth.
    3. The output power will be given by the formula (SNR+Noise power - 3dB) rounded to the first decimal digit. Extra 3dB are to compensate that SNR and noise power are selected from the two RX ports test case and this test procedure requires only one O-RU port.

For example, for the FR1 - SCS=30 kHz - BW=100MHz - Format A3 SNR is -13.5dB and noise level is -70.1dBm/98.28MHz. signal generator power = -13.5dB -70.1dBm/98.28MHz\*(139\*30 kHz)-3dB =- 19.5dBm.

* Set signal generator frequency offset to the central carrier frequency. PRACH will be mapped over frequency according to *msg1-FrequencyStart ( n*start *)* parameter equal to 0. PRACH format is set according to what TER has selected from the manufacturer declarations.

RA

* Start PRACH waveform generation on the signal generator. Ensure the test frame is repeated enough times

to generate a statistically significant number of PRACH occasions. That is at least 10 occasions.

* TER will perform PRACH detection per each PRACH occasion in each frame sent and compare the result with the expected preamble ID and the expected timing offset. Since the external AWGN and fading generator are not present the time error tolerance should be low, TER will use the time error tolerance in table 8.4.1.1-1 for AWGN case according to the corresponding PRACH format and PRACH SCS. A counter of successful detections is incremented at every matching. The probability of detection is given by the ratio between that counter and the number of the expected received PRACH occasions within the test time.
* Repeat the test procedure by setting *msg1-FrequencyStart ( n*start *)* parameter to the right edge of the configured carrier bandwidth in order to exercise a different frequency offset number

RA

###### Test Requirement (expected result)

1. Test is pass if the probability of detection is 100% determined across the minimum amount of at least 10 occasions.

#### ![]({{site.baseurl}}/assets/images/c38ad12dd667.png) UC Plane O-RU Scenario Class Extended using section extension 13 for frequency hopping UL/DL - Resource Allocation

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to validate the capability of the O-RU to correctly interpret section extension 13, frequency hopping, for the uplink. Note, since frequency hopping is only used in uplink in 5G NR this test will be limited to the uplink slots of the basic TDD signal.

Using the standard TDD test frame described in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate C-Plane and U-Plane messages that require the O-RU to transmit on the downlink and uplink the specified signal using section extension 13 in just the uplink downlink. The downlink portion of the test is not part of this test and may be any signal or no downlink signal at all.

In this test stock data section definition C will be used to exercise the non-contiguous RB allocation, all 273 PRBs (48 of the 51 in the uplink slots) or the max number of PRBs per symbol for the highest numerology the radio supports will be used in this test.

Only one spatial stream on one antenna will be used. This test is applicable for Category A and Category B radios (No precoding is required). All uplink user data will be a PN23 sequence.

###### Test Entrance Criteria

The O-RU must support the default parameters in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause 3.2.1.1.3 for FR1 and 120 kHz subcarrier spacing and 100 MHz bandwidth as described in clause 3.2.1.1.4 for FR2. It will be for 5G New Radio only. The radio must have conducted antenna ports (FR1) or TAB connectors.

The radio must support section extension 13 as notified by the M-Plane. The signal analyzer must have the ability to decode the downlink shared channel.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Connect the signal analyzer to the O-RU antenna port and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal. Connect the signal source to the O-RU antenna port and configure it as described below.

###### Procedure

Build an appropriate IQ signal as described above in clause 3.2.1.1.3 for FR1 or 3.2.1.1.4 for FR2 in the CUSM emulator. In this case use a PN23 sequence for the downlink shared channel. Build the appropriate test frame (uplink slots) for the signal source. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the uplink and downlink signals. Every symbol used in the test should be described by a single section (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U- Plane messages for downlink slots only. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame. It will be the responsibility of the TER's signal analyzer and source to coordinate downlink and uplink TDD transmissions. The CUSM Emulator of the TER is responsible for receiving uplink U-Plane messages, extracting IQ and decoding it to bits which can be compared to those sent by the signal source.

**For the downlink slots and symbols:** Any signal may be used if needed by the TER or no downlink signal may be used.

**For the uplink sections and symbols:** Load uplink test waveform (G-FR1-A1-5: SCS30k\_51RB for FR1 or G-FR2-A3-1: SCS120k\_66RB for FR2) on the RF signal source. Note this signal should contain a new PN23 sequence as user data in PRBs 0 through 50 for symbol 6 and PRBs 100 through 151 for symbol 7.

This will be copied for all uplink slots. The remainder of the test waveform is as described in 3GPP. Configure signal source to play test waveforms on 10ms frame boundaries starting when it receives a trigger signal from the O-DU emulator that C-Plane messages have been sent. Load a C-Plane message on Test Equipment O-RU (TER) - Use the O-DU emulator control interface to build the appropriate C-Plane message that describes this uplink signal. This section should have startSymbolId = 6, numPrbc = 51, and section extension 13 attached. The section extension should have nextSymbolId = 7 and nextStartPrbc = 100.

###### Steps:

* + - Arm Test Equipment O-RU (TER) to capture DUT fronthaul Messages
    - Launch test to play the C-Plane messages and the downlink U-Plane messages (if needed) and trigger the source to play the RF signal on a frame boundary.
    - Play messages to the O-RU respecting the timing windows described in clause 3.2.1.1.1. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the frame.
    - Record U-Plane messages from DUT for a complete frame and the eAxC corresponding to the Antenna port
    - Extract IQ information from the captured U-Plane messages
    - Extract IQ information from the signal analyzer for downlink slots (if needed)
    - Extract Payload for both signals
    - Compare payload binary sequences

###### Test Requirement (expected result)

1. The signal extracted by the U-Plane messages (uplink) should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The verdict is "Test pass" if the test frame received by the signal analyzer contains two U-Plane messages for this section ID one containing the PN23 sequence for the first 51 PRBs in symbol 6 and PRBs 100 through 151 for symbol #7 containing the PN23 sequence sent by the signal source for those PRBs.

### ![]({{site.baseurl}}/assets/images/272e042d9109.png) UC-Plane O-RU Scenario Class Beamforming (BFM)

This clause describes the beamforming conformance testing for O-RAN fronthaul interface. The tests do not aim to test the O-RU beamforming performance or capabilities but to test that the O-RU under test focuses the RF energy or sensitivity into a specific direction and with a specific granularity following the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) C-Plane messages.

Unless stated otherwise in a test case, the following statements apply to all the test cases defined in this clause:

* + It is based on Over-the-Air (OTA) testing with a setup such as described in clause 2.1 and it may be applied to any O-RU DUTs, whether the O-RU DUTs have conducted antenna ports or TAB connectors or not.
  + Clause 3.2.1.1.2 for scenario #2 non-conducted OTA FDD FR1 radios contains a description of test setups, as mentioned by ETSI TS 137.843 defines various radiated test systems. If not explicitly mentioned, scenario #4 non-conducted OTA TDD tests for FR1 and FR2 radios will inherit those descriptions.
  + Additional statements as per clause 3.2.3.2 of the present specification regarding applicability for O-RU Categories, LTE/5G New Radio, Analog Beamforming, Digital Beamforming, and multiple polarizations.
  + For a O-RU DUT that support LTE:
    - Downlink tests will use a standard 3GPP E-TM1.1 test frame for TDD, based on uplink/downlink configuration 3 and special subframe configuration 8 (clause 6.1.1.1 ETSI TS 136.141) with 20MHz bandwidth (100 RB) as shown in Figure 3.2.6.2-1.

![]({{site.baseurl}}/assets/images/1d0087fe4e7c.png)

###### Figure 3.2.6.2-1 E-TM1.1 TDD 20 MHz 100RB

If 20MHz is not supported by the O-RU DUT, then it will use the highest bandwidth supported by the O- RU DUT.

* + - Uplink test will use a standard 3GPP UL RMC Configuration definition for TDD (TS36.521-1 Annex A.2.3) and power levels at least 30dB above Reference Sensitivity power level with 20MHz bandwidth (100 RB) as shown in Figure 3.2.6.2-2.

![]({{site.baseurl}}/assets/images/20b3c17aa037.png)

![]({{site.baseurl}}/assets/images/5017e224508e.png)

###### Figure 3.2.6.2-2 UL RMC TDD 20 MHz 100 RB. ETSI TS 136.521-1 A.2.3.1.1

If 20MHz is not supported by the O-RU DUT, then it will use the highest bandwidth supported by the O- RU DUT.

* + For O-RU DUT that support 5G NR:
    - NR FR1 test models described in ETSI TS 138.141-1 are also applicable for *BS type 1-O* conformance testing. FR1 TDD downlink tests will use a standard 3GPP NR-FR1-TM1.1 test frame for TDD.
    - FR2 TDD downlink tests will use a standard 3GPP NR-FR2-TM1.1 test frame for TDD in (clause 4.9.2 ETSI TS 138.141-2) of the Radiated Transmitter Characteristic Test (clause 6 ETSI TS 138.141-2) as described in clause 3.2.1.1. The test numerology will be preferably 120kHz subcarrier

spacing and 100 MHz Bandwidth, or lower depending on DUT capability. If not supported, then it will use any other supported subcarrier spacing and the highest bandwidth of the O-RU DUT.

* + - NR FR1 test models described in ETSI TS 138.141-1 are also applicable for *BS type 1-O* conformance testing. FR1 TDD uplink tests will use a standard 3GPP G-FR1\_A1-5\_SCS30kHz\_51RB test frame for TDD.
    - FR2 TDD uplink tests will use a standard 3GPP Reference Sensitivity level definition (clause 7.2 and Annex A ETSI TS 138.141-2) of the Radiated Receiver Characteristic Test (clause 7 ETSI TS 138.141-2). The O-RU manufacturer declares a minimum EIS level for the considered OTA sensitivity direction declaration. The power levels inclining from the angle of arrival that should be tested (RoAoA) is at least 30dB above the OSDD EIS Reference Sensitivity power level. The test numerology will be preferably 120kHz subcarrier spacing and 100 MHz Bandwidth based on G-FR2- A1-3 in ETSI TS 138.141-2, or lower depending on DUT capability. Otherwise, it will use any available subcarrier spacing and the highest bandwidth supported by the O-RU DUT.
  + Radiated tests coordinate system is based on the coordinate system defined in O-RAN CUS Specification [2], clause 12.5.2.
  + The O-RU DUT must:
    - support the default parameters in clause 3.2.1.1.2 of this document.
    - have installed current release of shipping software.
    - be fully calibrated up to Radiated Interface Boundary (RIB) as defined in ETSI TS 138.141-2. It is expected to be calibrated by O-RU vendor prior to testing.
  + The TER must:
    - be capable of carrying out any signal processing required to generate and demodulate 3GPP compliant waveforms.
    - be able to calculate or extract the spherical beam direction via OTA measurements.
    - be able to generate and deliver signals with the required beam direction at the RIB point.
    - be fully calibrated up to the interface where it interacts with the DUT's RIB. For that, a known test signal might be either injected by the TER into the O-RU DUT, or internally generated by the O-RU DUT, and the O-RU DUT must not apply any digital or analog beam forming to apply a directional characteristic to the known test signal. One possible method to perform calibration uses injected C-Plane and U-Plane signals from TER into the O-RU and using C-Plane messages with beamID=0. Alternatively, calibration methods for radiated test setups that are described in ETSI TR 137.941 can be used.
  + The O-DU emulator of the TER requirements as per clause 3.2.3.2 of the present specification.
  + The TER might have a single test antenna if a single beam direction and polarization is measured and an optional positioning method to perform directional radiation measurements sequentially, or multiple test antennas to perform directional radiation measurements and/or polarizations at the same time.
  + It is up to the TER on how to extract the beam direction and beam properties at the DUT's RIB in order to match it with the manufacturer's declaration.
  + The user payload will be generated as PN23 with a seed of all ones.
  + It applies to the O-RAN CUS Specification [2] as per clause 3.2.3.2 of the present specification.

#### ![]({{site.baseurl}}/assets/images/9e187038da5a.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - No Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with no beamforming (beamId=0x000) and with one spatial stream (single eAxC).

###### Test Entrance Criteria

* + Manufacturers' declaration that defines list of beam directions when O-RU DUT is operating with no beamforming. This list serves as indication of the expected transmitted beam direction in below evaluation.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
   * Place the test antenna/s to a defined position within the OTA chamber as defined in clause 3.2.1.1.4 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in clause 3.2.1.1.4.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in clause 3.2.1.1.4.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 or NR-FR2-TM1.1 signal described above in the O-DU emulator.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.3.2.1.1.4.
4. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frame.
5. Measure any metric/s that allows for extracting the transmitted beam direction from a single measurement,

i.e. transform-based techniques, or take as many measurements of any metric/s from multiple angles, by

for example rotating the O-RU, that allows for extracting beam direction from multiple measurement, i.e. beam scanning.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer at the contemplated transmitted beam direction should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received at the contemplated transmitted beam direction by the signal analyzer should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
3. The extracted or measured beam direction is defined as the direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected transmitted beam direction for the expected no beamforming within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/3351a1d66131.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - No Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with no beamforming (beamId=0x000) and with one spatial stream (single eAxC).

###### Test Entrance Criteria

* + Manufacturers' declaration that defines list of beam directions when O-RU DUT is operating with no beamforming. This list serves as indication of the expected receive beam direction in below evaluation.

###### Test Methodology

1. **Initial Conditions**
   * Initial conditions as per clause 3.2.6.2.1 of the present specification

###### Procedure

1. Build an appropriate test signal described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial beam direction. This initial beam direction could be the boresight direction of the receiver antenna array, corresponding to the manufacturers declaration of the expected receive direction.
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL- SCH) using Section Type 1 messages. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.3.2.1.1.4 while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU.
6. Allow the O-DU to demodulate, decode and extract the payload and to measure and extract any required metric/s from the received signal that will be used later to determine what is the best received direction.
7. Repeat the previous steps but now in step b apply a different beam direction when injecting the test signal into the O-RU. Repeating the process for a number of different beam directions will exercise the reception of the test signal from different receive beam directions. This allows to determine if the O-RU is really focusing the sensitivity to the correct expected receive beam direction.

###### Test Requirement (expected result)

1. The test frame received at the contemplated receive beam direction by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The extracted or measured receive beam direction is defined as the direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected receive beam direction for the expected no beamforming within a tolerance defined by the manufacturer.

#### ![]({{site.baseurl}}/assets/images/1a5de34cbd91.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC).

The transmitted beam direction is measured for each indexed beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted beam direction is defined by extracting the beam direction from directional measurement samples.

Depending on the O-RU beamforming capabilities regarding the ability to generate "coarse", "fine" and/or "beam groups", as defined in O-RAN CUS Specification [2], clause 12.4.2.2.

The elevation ? and azimuth ? angles are defined in O-RAN CUS Specification [2], clause 12.4.2.2.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Predefined-beam Beamforming conformance test might include multiple test that the O-RU must comply:

###### "Coarse" beamIds test:

If O-RU supports and reports beamIds that are defined as coarse granularity (coarse beamIds) to the O-DU emulator, the test should include the following beams:

* + 1. A coarse beam with 0 degrees azimuth (?) and elevation (?) angles.
    2. A coarse beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
    3. A coarse beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
    4. A coarse beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
    5. A coarse beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles will be measured.

###### "Fine" beamIds test:

If O-RU supports and reports beamIds that are defined as fine granularity (fine beamIds) to the O-DU emulator, the test should include the following beams:

* + 1. A fine beam with 0 degrees azimuth (?) and elevation (?) angles.
    2. A fine beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
    3. A fine beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
    4. A fine beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
    5. A fine beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth or elevation angle, fewer than 5 beam angles will be measured.

###### "beam-group" beamIds test:

If O-RU supports and reports beamIds that belong to same and different beam-groups to the O-DU emulator, the test should include the following beams:

* + 1. All beams that belong to a beam-group with 0 degrees azimuth (?) or elevation (?) angles.
    2. All beams that belong to a beam-group with maximum supported azimuth angle (?).
    3. All beams that belong to a beam-group with minimum supported azimuth angle (?).
    4. All beams that belong to a beam-group with maximum supported elevation angle (?).
    5. All beams that belong to a beam-group with minimum supported elevation angle (?).

If the O-RU only supports one azimuth or elevation angle, fewer than 5 beam-groups will be measured.

###### Test Entrance Criteria

* Manufacturers' defined list of beam indices and their associated beam directions with antenna array characteristics. This list serves as indication of the expected transmitted beam direction in below evaluation.

###### Test Methodology

* 1. **Initial Conditions**

Initial conditions as per clause 3.2.6.2.1 of the present specification.

###### Procedure

Procedure as per clause 3.2.6.2.1 of the present specification.

###### Test Requirement (expected result)

Test Requirement as per clause 3.2.6.2.1 of the present specification .

#### ![]({{site.baseurl}}/assets/images/adf9e3b246fc.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Predefined-beam Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with predefined-beams beamforming (beamId!=0x000) and with one spatial stream (single eAxC).

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.6.2.3 applies, but instead it is related to the uplink direction.

###### Test Entrance Criteria

* + Manufacturers' defined list of beam indices and their associated beam directions with antenna array characteristics. This list serves as indication of the expected receive beam direction in below evaluation.

###### Test Methodology

1. **Initial Conditions**

Initial conditions as per clause 3.2.6.2.2 of the present specification

###### Procedure

Procedure as per clause 3.2.6.2.2 of the present specification

###### Test Requirement (expected result)

Test Requirement as per Section 3.2.6.2.2 of the present specification

#### ![]({{site.baseurl}}/assets/images/4a316d1b94c4.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with weight-based dynamic beamforming with one spatial stream (single eAxC).

The transmitted beam direction is measured for each weighted beam required in this measurement, see below. The measured transmitted direction is compared to manufacturer-designated direction. Transmitted beam direction is obtained by directly extracting the beam direction from the directional samples.

The elevation ? and azimuth ? angles are defined in O-RAN CUS Specification [2], clause 12.4.2.2.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight-based Dynamic Beamforming conformance test should evaluate the following beams for the O-RU to comply:

* 1. A weight-based beam with 0 degrees azimuth (?) and elevation (?) angles.
  2. A weight-based beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?).
  3. A weight-based beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?).
  4. A weight-based beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?).
  5. A weight-based beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?).

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles will be measured.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Weight--based Dynamic Beamforming conformance test should also evaluate the following compression methods for each of the supported beams described above (a. to e.) for the O-RU to comply:

1. No compression method applied to the beamforming weights.
2. Block floating point compression method applied to the beamforming weights with 14-bit mantissa.
3. Block scaling compression method applied to the beamforming weights with 14-bit scaler.
4. u-law compression method applied to the beamforming weights with 14-bit fixed width.
5. Beamspace compression method applied to the beamforming weights with 14-bit scaler.

If the O-RU does not support all the compression methods described above, fewer than 5 compression methods will be measured.

###### Test Entrance Criteria

Manufacturers' defined list of frequency domain (?) and/or time domain (?) weights and their associated beam directions with antenna array characteristics

###### Test Methodology

* 1. **Initial Conditions**

Initial conditions as per clause 3.2.6.2.1 of the present specification

###### Procedure

* + 1. Build an appropriate IQ signal as per clause 3.2.6.2.1 of the present specification.
    2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (DL-SCH and DCI) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x01 to convey the beam weights, it is not required that the next sections contain extension type 1 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
    3. Perform additional procedure steps c, d, and e as per clause 3.2.6.2.1 of the present specification.

###### Test Requirement (expected result)

Test Requirement as per Section 3.2.6.2.1 of the present specification

#### ![]({{site.baseurl}}/assets/images/19d104dd52ee.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Weight-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with weight-based beamforming and with one spatial stream (single eAxC).

The same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.5 but applies to the uplink direction.

###### Test Entrance Criteria

Manufacturers' defined list of frequency domain (?) and/or time domain (?) weights and their associated beam directions with antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**
     + Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
     + Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
     + Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.3.2.1.1.4 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
     + Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.3.2.1.1.4.
     + Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.3.2.1.1.4.
     + Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal related to either FR1 or FR2 described above in the signal source of the TER.
2. Inject the test signal into the O-RU with the application of an initial beam direction as fulfilling the expected spherical RoAoA .For example, initial beam direction could be the boresight of the receive antenna array.
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (UL-SCH) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x01 to convey the beam weights, it is not required that the next sections contain extension type 1 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
6. Repeat the previous steps but now in step b apply a different inclining beam direction or RoAoA. For example, repeating the process for a number of different beam directions. This allows to determine if the O- RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

Test Requirement as per clause 3.2.6.2.2 of the present specification.

#### ![]({{site.baseurl}}/assets/images/c2f80b0a80cf.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with attributed-based dynamic beamforming with one spatial stream (single eAxC).

If the O-RU DUT supports Attribute based Dynamic Beamforming, this test is mandatory for the O-RU DUT to be O-RAN conformant.

The transmitted beam direction and attributes are measured for each attributed beam required in this measurement, see below. The measured transmitted direction and attributes, i.e. pointing azimuth and elevation angles, beamwidths and sidelobe suppression, is compared to manufacturer-designated direction and attributes.

Transmitted direction and beam attributes are defined by the magnitude and phase relation between the antenna ports or TAB connectors under test, or by directly extracting the beam properties.

The elevation ? and azimuth ? angles are defined in O-RAN CUS Specification [2], clause 12.4.2.2.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Attribute-based Dynamic Beamforming conformance test should evaluate the following beams for the O-RU to comply:

* 1. An attribute-based beam with 0 degrees azimuth (?) and elevation (?) angles with any beamwidth and sidelobe suppression supported by the O-RU under this beam direction.
  2. An attribute-based beam with maximum supported azimuth angle (?) and maximum supported elevation angle (?) with the widest beamwidth and lowest sidelobe suppression supported for this specific beam direction.
  3. An attribute-based beam with maximum supported azimuth angle (?) and minimum supported elevation angle (?) with the narrowest beamwidth and highest sidelobe suppression supported for this specific beam direction.
  4. An attribute-based beam with minimum supported azimuth angle (?) and maximum supported elevation angle (?) with the widest beamwidth and lowest sidelobe suppression supported for this specific beam direction.
  5. An attribute-based beam with minimum supported azimuth angle (?) and minimum supported elevation angle (?) with the narrowest beamwidth and highest sidelobe suppression supported for this specific beam direction.

If the O-RU only supports one azimuth (?) or elevation angle (?), fewer than 5 beam angles and attribute configurations will be measured.

###### Test Entrance Criteria

Manufacturers' defined list of frequency domain (?) and/or time domain (?) weights and their associated beam directions with antenna array characteristics.

###### Test Methodology

* 1. **Initial Conditions**

Initial conditions as per clause 3.2.6.2.1 of the present specification.

###### Procedure

* + 1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 or NR-FR2-TM1.1 signal described above in the O-DU emulator.
    2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (DL-SCH and DCI) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x02 to convey the beam weights, it is not required that the next sections contain extension type 2 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
    3. Perform steps c, d, and e as per clause 3.2.6.2.1 of the present specification.

###### Test Requirement (expected result)

Test Requirement as per clause 3.2.6.2.1 of the present specification.

#### ![]({{site.baseurl}}/assets/images/33efa89a063a.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Attribute-based Dynamic Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with attribute-based beamforming with one spatial stream (single eAxC).

Same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.7 but considering uplink direction.

###### Test Entrance Criteria

Manufacturers' defined list of frequency domain (?) and/or time domain (?) weights and their associated beam directions with antenna array characteristics.

?

###### Test Methodology

* 1. **Initial Conditions**
     + Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
     + Ensure that the test antenna/s and TER equipment is calibrated within acceptable tolerance.
     + Place the test antenna/s to a defined position within the OTA chamber as defined in 3.2.1.1.3.2.1.1.4 and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
     + Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.3.2.1.1.4.
     + Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.3.2.1.1.4.
     + Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate test signal either related to FR1 or FR2, described above in the signal source of the TER.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by one or two sections (UL-SCH) using Section Type 1 messages, the sections in the first symbol of the slot will contain section extension extType=0x02 to convey the beam weights, it is not required that the next sections contain extension type 2 since the same beam IDs will not change along the slot. If O-RU does not support a field, then its value should be 0x0. No Section Type zero messages will be used for this test.
3. Play the C plane messages to the O-RU respecting timing windows described in section 3.2.1.1.1. while also triggering the signal source.
4. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.
5. Repeat the previous steps but now in step b apply a different inclining beam direction or RoAoA. For example, repeating the process for a number of different beam directions. This allows the tester to determine if the O-RU is really focusing the sensitivity to the correct beam direction.

###### Test Requirement (expected result)

1. The test frame received by the TER/O-DU should be the same as the signal described above and should contain all the same PRB assignments and all the original PN23 data.
2. The extracted or measured receive beam direction is defined as the direction where the best metric/s were measured (i.e. best EVM, power, SNR, etc.) and should match the expected receive beam direction for the beam under test within a tolerance defined by the manufacturer

#### ![]({{site.baseurl}}/assets/images/98c366faea3b.png) UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can transmit a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO).

For Category A radios, the test is for each polarization separately and consequently either different or same channel models can be defined for each of the polarization. For Category B, same channel might be used for both polarizations and the test might measure each polarization separately.

The transmitted beam direction is measured for each scenario required in this measurement. The measured transmitted direction is extracted from the decoded received signal in the TER. Transmitted direction is defined by properly receiving a data transmission between the O-RU and the target User Equipment while destroying or heavily attenuating the data transmission between the O-RU and the other User Equipment.

The UC-Plane O-RU Scenario Class Beamforming 3GPP DL - Channel-Information-based Beamforming conformance test should evaluate the following scenarios for the O-RU to comply and will rely on TER Channel Emulation capabilities as shown in **Figure 3.2.6.2-3**.

![Chart  Description automatically generated]({{site.baseurl}}/assets/images/7a1a18df3377.png)

###### Figure 3.2.6.2-3 TER with antennas representing multiple UEs

1. A scenario where two spatial streams, or eAxC flows, are generated for two users (one layer each) with M antennas ports or TAB connectors. The O-DU will report to the O-RU via C plane messages the channel

estimate H ? [h1, . . . , hM, h1, . . . , hM] ? C2xM, which is the effective channel as seen by the antennas

1 1 2 2

representing the multiple UEs, which are spaced sufficiently such that the O-RU can effectively equalize out the interference between the users. The O-RU will calculate and apply the beamweight matrix G ?

[g1, . . . , gM, g1, . . . , gM] ? CMx2 in such that the received signal at the users is the same as the generated in the

1 1 2 2

O-DU. It is up to the O-RU on how to calculate the beamforming weights, for example Zero-forcing, regularized zero-forcing / MMSE, etc.

If O-RU supports Analog Beamforming (Time Domain Beamforming), the test should not apply any analog beamforming or time domain beamforming. In this case, M is not the number of antennas ports or TAB connectors but the number of TRX channels supported by the O-RU.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with radiating antennas
  + The TER equipment must include 2 antennas with sufficient separation to emulate the 2 users such that the O- RU can equalize out the mutual interference of the users due to the effective MU-MIMO channel.
  + Manufacturers' defined list of number of TRX chains and what antennas are connected to each TRX chain

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antennas and TER equipment are calibrated within acceptable tolerance.
   * Place the test antennas within the OTA chamber as defined in 3.2.1.1.4 with sufficient separation for effective MU-MIMO beamforming and configure the analyzer ports with any setup information needed to synch and demodulate the MU-MIMO transmitted signal
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.4.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.4.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build an appropriate IQ signal describing the NR-FR1-TM1.1 signal described above in the O-DU emulator, with the data symbols for user 1 and user 2 fully overlapping in time and frequency, but with user data initialized using different seeds for the PN23 sequence.
2. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. Every symbol should be described by either one or two sections (DL-SCH and DCI) using Section Type 5 and 6 messages. No Section Type zero messages will be used for this test.
3. Encapsulate the IQ data in U-Plane messages. Play those messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
4. Capture the test signals and pass them through a channel emulator or apply the signal processing required to emulate the channel under test using the 2 test antennas.
5. Repeat the entire frame the number of times required to synch the signal analyzer and allow it to demodulate and decode the test frames for the 2 users.

###### Test Requirement (expected result)

1. The signal measured by the signal analyzer should satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received by the signal analyzer for the 2 users should be the same as the signal described above and should contain all the same PRB assignments and all the respective PN23 data.

#### ![]({{site.baseurl}}/assets/images/d73fdaa5f56f.png) UC-Plane O-RU Scenario Class Beamforming 3GPP UL - Channel-Information-based Beamforming

###### Test Description and Applicability

This Test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure the radio can receive a basic 3GPP test frame with channel-information-based beamforming with multiple spatial streams from multiple users (i.e. MU-MIMO).

Same description and criteria for selecting the beams to be tested applies as in clause 3.2.3.2.103.2.6.2.9 but considering the uplink direction.

###### Test Entrance Criteria

* + The O-RU must have at least two TRX chains with radiating sensing antennas
  + The TER equipment must include 2 antennas with sufficient separation to emulate the 2 users such that the O- RU can equalize out the mutual interference of the users due to the effective MU-MIMO channel.
  + The O-RU must have at least two TRX chains with conducted antenna ports (or TAB connectors) to be connected to a signal generator.
  + The TER equipment must include 2 antennas with sufficient separation to emulate the 2 users the O-RU need to be able to equalize out the mutual interference of the users due to the effective MU-MIMO channel. Manufacturers' defined list of number of TRX chains and what antennas are connected to each TRX chain.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   * Ensure that the test antennas and TER equipment are calibrated within acceptable tolerance.
   * Place the test antennas within the OTA chamber as defined in 3.2.1.1.4 with sufficient separation for effective MU-MIMO beamforming and configure the generator ports with any setup information needed to transmit the signals from the 2 UEs
   * Place the O-RU into a test calibrated point within the OTA chamber as defined in 3.2.1.1.4.
   * Align the O-RU to a default initial position, i.e. align the O-RU to the origin of coordinates of the declared coordinate reference point and orientation in the OTA chamber as defined in 3.2.1.1.4.
   * Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

1. Build the appropriate test signals for each of the 2 users as described above in the signal source of the TER using a different seed to initialize the PN23 data for each user.
2. Transmit the test signals over the air with sufficient transmit power according to 3.2.1.1.4
3. Use the O-DU emulator control interface to build the appropriate C-Plane messages that describe the signal and the beam under test. Every symbol should be described by either one or two sections (UL-SCH) using Section Type 5 and 6. No Section Type zero messages will be used for this test.
4. Play the C plane messages to the O-RU respecting timing windows described in clause 2.4. while also triggering the signal source.
5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U- plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload for each of the users.

###### Test Requirement (expected result)

The test frames received by the TER/O-DU should be the same as the signals described above and should contain all the same PRB assignments and all the original PN23 data of the 2 users.

### ![]({{site.baseurl}}/assets/images/c08b7dc437c0.png) UC-Plane O-RU Scenario Class Compression (CMP)

The compression tests for FR1 and FR2 TDD Non-conducted OTA are the same as the tests described in clause 3.2.5.3 for FR1. For FR2, similar test frames with 120 kHz SCS shall be used in the test Only the setup for the tests are different reflecting the difference between non-conductive and conductive mode testing.

### ![]({{site.baseurl}}/assets/images/2c2d6eb1e272.png) UC-Plane O-RU Scenario Class Delay Management (DLM)

The delay management tests for FR1 and FR2 TDD Non-conducted OTA are the same as the tests described in clause

3.2.5.4 for FR1. For FR2, similar test frames with 120 kHz SCS shall be used in the test. Only the setup for the tests are different reflecting the difference between non-conductive and conductive mode testing.

### ![]({{site.baseurl}}/assets/images/5210eb300622.png) UC-Plane O-RU Scenario Class Transport (TRN)

This test is for future study.

### ![]({{site.baseurl}}/assets/images/cf5874a70598.png) UC-Plane O-RU Scenario Class LAA (LAA)

The LAA tests for FR1TDD Non-conducted OTA are the same as the tests described in clause 3.2.5.6. Only the setup for the tests are different reflecting the difference between non-conductive and conductive mode testing. Note that LAA tests are not applicable for the FR2 spectrum.

### ![]({{site.baseurl}}/assets/images/c6e49d441c0d.png) UC-Plane O-RU Scenario Class LTE (LTE)

This test is for future study.

### ![]({{site.baseurl}}/assets/images/0ffe3d3ddb49.png) UC-Plane O-RU Scenario Class Section Type 3 (ST3)

The Section Type 3 tests for FR1 and FR2 TDD Non-conducted OTA are the same as the tests described in clause

3.2.5.8 for FR1. For FR2, similar test frames with 120 kHz SCS shall be used in the test. Only the setup for the tests are different reflecting the difference between non-conductive and conductive mode testing.

### Energy Savings

### ![]({{site.baseurl}}/assets/images/f0667d3079c6.png) C-Plane based TRX control

#### ![]({{site.baseurl}}/assets/images/3abf462c11a1.png) C-Plane based TRX Control (defined-duration sleep, guaranteed wake-up duration)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY

The purpose of this test is to ensure O-RU is capable of C-plane based TRX control.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| ? | 7.2.9 | Section Type 4: Slot Configuration Control |
| ? | 7.3.1 | Section Types |
| ? | 7.4.6 | Section Type 4 elements |
| ? | 7.5.2 | Application layer, common |
| ? | 16 | Energy-saving functionality |

</div>

following clause in [3]:

* + 20.3.1 TRX control - C-Plane controlled

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including C-Plane based TRX control (defined-duration sleep, guaranteed wake-up duration)
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test . The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept

inactive, "sleepMode" field to indicate sleep mode, "numSlots", "numSlotsExt" field for defined-duration sleep and "antMask" field with "0" in each array element that is to be made or kept inactive.

NOTE: Defined-duration sleep needs to be greater than the double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made. It is recommended to set at least half of the array elements off (0 indicates off) in the antenna mask to better observe power changes.

* 1. The TER waits for a sufficient duration to ensure some or all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing and user traffic are disabled for some or all of the O-RU's antenna array elements.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration , this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. After defined-duration sleep expiry the C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  4. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps mentioned in step 7 and step 9 are within expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/62232b949078.png) C-Plane based TRX Control (defined-duration sleep, minimum wake-up duration)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY

The purpose of this test is to ensure O-RU is capable of C-plane based TRX control.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| ? | 7.2.9 | Section Type 4: Slot Configuration Control |
| ? | 7.3.1 | Section Types |
| ? | 7.4.6 | Section Type 4 elements |
| ? | 7.4.10 | Section Type 8 elements |
| ? | 7.5.2 | Application layer, common |
| ? | 7.5.3.55 | ready |
| ? | 16 | Energy-saving functionality |

</div>

following clause in [3]:

* + 20.3.1 TRX control - C-Plane controlled

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including C-Plane based TRX control (defined-duration sleep, minimum wake-up duration)
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "symbolMask" field to 0x3FFF, "sleepMode" field to indicate sleep mode, "numSlots", "numSlotsExt" field for defined-duration sleep and "antMask" field with "0" in each array element that is to be made or kept inactive.

NOTE: Defined-duration sleep needs to be greater than double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made. It is recommended to set at least half of the array elements off (0 indicates off) in the antenna mask to better observe power changes.

* 1. The TER waits for a sufficient duration to ensure some or all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing and user traffic are disabled for some or all of the O-RU's antenna array elements.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The O-RU sends a "ready" message to the O-DU emulator to indicate termination of sleep, by setting ready bit to 1 in Section Type 8 command.
  4. After the slotId value mentioned in the Section Type 8 command , the C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  5. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps mentioned in step 7 and step 10 are within the expected power ranges as per the vendor product specifications. .

#### ![]({{site.baseurl}}/assets/images/a0eb35a8d3e2.png) C-Plane based TRX Control (undefined-duration sleep, guaranteed wake-up duration)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY

The purpose of this test is to ensure O-RU is capable of C-plane based TRX control.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| ? | 7.2.9 | Section Type 4: Slot Configuration Control |
| ? | 7.3.1 | Section Types |
| ? | 7.4.6 | Section Type 4 elements |
| ? | 7.5.2 | Application layer, common |
| ? | 16 | Energy-saving functionality |

</div>

following clause in [3]:

* + 20.3.1 TRX control - C-Plane controlled

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including C-Plane based TRX control (undefined-duration sleep, guaranteed wake-up duration)
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept inactive, "numSlots" and "numSlotsExt" fields to 0 to indicate undefined-duration sleep and "antMask" field to "0" in each array element that is to be made or kept inactive.

NOTE: It is recommended to set at least half of the array elements off (0 indicates off) in the antenna mask to better observe power changes.

* 1. The TER waits for a sufficient duration to ensure some or all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing and user traffic are disabled for some or all of the O-RU's antenna array elements.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The O-DU emulator issues a wake-up command by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x0000 to indicate all symbols in a slot made or kept active, "numSlots" and "numSlotsExt" fields to 0 to indicate undefined-duration sleep and "antMask" field to "1" in each array element that is to be made or kept active.

NOTE: It is recommended to issue wake-up command after a sufficient duration (for example greater than wake-up duration), allowing for the power consumption measurements to be made.

* 1. The TER waits for the time interval of wake-up duration.
  2. The C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  3. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps mentioned in step 7 and step 11 are within the expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/b3a14566f5a0.png) C-Plane based TRX Control (undefined-duration sleep, minimum wake-up duration)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY

The purpose of this test is to ensure O-RU is capable of C-plane based TRX control.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| ? | 7.2.9 | Section Type 4: Slot Configuration Control |
| ? | 7.3.1 | Section Types |
| ? | 7.4.6 | Section Type 4 elements |
| ? | 7.4.10 | Section Type 8 elements |
| ? | 7.5.2 | Application layer, common |
| ? | 7.5.3.55 | ready |
| ? | 16 | Energy-saving functionality |

</div>

following clause in [3]:

* + 20.3.1 TRX control - C-Plane controlled

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including C-Plane based TRX control (undefined-duration sleep, minimum wake-up duration)
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept inactive, "numSlots" and "numSlotsExt" fields to 0, to indicate undefined-duration sleep and "antMask" field to "0" in each array element that is to be made or kept inactive.

NOTE: It is recommended to set at least half of the array elements off (0 indicates off) in the antenna mask to better observe power changes.

* 1. The TER waits for a sufficient duration to ensure some or all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing and user traffic are disabled for some or all of the O-RU's antenna array elements.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The O-DU emulator issues a wake-up command by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x0000 to indicate all symbols in a slot made or kept active, "numSlots" and "numSlotsExt" fields to 0 to indicate undefined duration sleep and "antMask" field to "1" in each array element that is to be made or kept active.

NOTE: It is recommended to issue wake-up command after a sufficient duration (for example greater than wake-up duration), allowing for the power consumption measurements to be made.

* 1. The O-RU sends a "ready" message to the O-DU emulator to indicate termination of sleep, by setting ready bit to 1 in Section Type 8 command.
  2. After the slotId value mentioned in the Section Type 8 command, the C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  3. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps mentioned in step 7 and step 11 are within the expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/f356d08fde3d.png) C-Plane based TRX Control (sleep extension)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY

The purpose of this test is to ensure O-RU is capable of C-plane based TRX control that supports sleep extension. The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| ? | 7.2.9 | Section Type 4: Slot Configuration Control |
| ? | 7.3.1 | Section Types |
| ? | 7.4.6 | Section Type 4 elements |
| ? | 7.5.2 | Application layer, common |
| ? | 16 | Energy-saving functionality |

</div>

following clause in [3]:

* + 20.3.1 TRX control - C-Plane controlled

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |

</div>

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause 3GPP

38.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including C-Plane based TRX control (defined-duration sleep, guaranteed or minimum wake-up duration, sleep extension)
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "symbolMask" field to 0x3FFF, "sleepMode" field to indicate sleep mode, "numSlots", "numSlotsExt" field for defined-duration sleep and "antMask" field with "0" in each array element that is to be made or kept inactive.

NOTE: Defined-duration sleep needs to be greater than double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made. It is recommended to set at least half of the array elements off (0 indicates off) in the antenna mask to better observe power changes.

* 1. The TER waits for a sufficient duration to ensure some or all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing and user traffic are disabled for some or all of the O-RU's antenna array elements.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. At the start of wake-up duration, the O-DU emulator sends sleep extension command by signaling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "symbolMask" field to 0x3FFF, "sleepMode" field ( any supported sleepMode other than sleep mode 0) for indicating sleep mode, "numSlots", "numSlotsExt" field for defined-duration sleep and "antMask" field with "0" in each array element that is to be made or kept inactive.

NOTE: Defined-duration sleep needs to be greater than or equal to the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made. It is recommended to set at least half of the array elements off (0 indicates off) in the antenna mask to better observe power changes.

* 1. The TER waits for a sufficient duration to ensure some or all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing and user traffic are disabled for some or all of the O-RU's antenna array elements.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. After defined-duration sleep expiry , the C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  4. The power consumption should be greater than the previous one measured in the step 6 and step 10.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps mentioned in step 7, step 11 and step 13 are within the expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/106bd8a094e8.png) C-Plane based TRX Control (Emergency wake-up)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY

The purpose of this test is to ensure O-RU is capable to do Emergency wake-up from C-plane based TRX control. The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings and emergency wake-up.

This scenario corresponds to the following clause in [2]:

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| ? | 7.2.9 | Section Type 4: Slot Configuration Control |
| ? | 7.3.1 | Section Types |
| ? | 7.4.6 | Section Type 4 elements |
| ? | 7.5.2 | Application layer, common |
| ? | 16 | Energy-saving functionality |

</div>

following clause in [3]:

* + 20.3.1.3 Emergency wake-up procedure for TRX control

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause 3GPP

38.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including C-Plane based TRX control (defined-duration sleep, guaranteed wake-up duration, emergency wake-up)
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "symbolMask" field to 0x3FFF, "sleepMode" field to indicate sleep mode, "numSlots", "numSlotsExt" field for defined-duration sleep and "antMask" field with "0" in each array element that is to be made or kept inactive.

NOTE: Defined-duration sleep needs to be greater than the double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made. It is recommended to set at least half of the array elements off (0 indicates off) in the antenna mask to better observe power changes.

* 1. The TER waits for a sufficient duration to ensure some or all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing and user traffic are disabled for some or all of the O-RU's antenna array elements.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition. The

* 1. TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The TER NETCONF client sends a <emergency-wake-up> rpc. For Example,

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="101">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<config>

<emergency-wake-up/>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server responds with a <rpc-reply> message indicating successful completion of requested procedure.

For Example,

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="101">

<ok/>

</rpc-reply>

* 1. The TER NETCONF Client waits for emergency-wake-up-complete notification , to ensure wake up is complete, the C-Plane processing and user traffic are enabled.

For Example,

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<emergency-wake-up-complete/>

</notification>

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps mentioned in step 7 and step 12 are within the expected power ranges as per the vendor product specifications.

### ![]({{site.baseurl}}/assets/images/c93b7c7570ee.png) Advanced Sleep Mode

#### ![]({{site.baseurl}}/assets/images/b2cd784372f2.png) Advanced Sleep Mode (defined-duration sleep, guaranteed wake-up duration)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY

The purpose of this test is to ensure O-RU is capable of advanced sleep mode.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

* + 7.2.9 Section Type 4: Slot Configuration Control
  + 7.3.1 Section Types
  + 7.4.6 Section Type 4 elements
  + 7.5.2 Application layer, common
  + 16 Energy-saving functionality following clause in [3]:
  + 20.4 Advanced sleep modes for energy saving

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including advanced sleep mode for defined- duration sleep, guaranteed wake-up duration.
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports or TAB connectors within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling section type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept inactive, "sleepMode" field to indicate sleep mode, "numSlots" and "numSlotsExt" field for defined- duration sleep.

NOTE: Defined-duration sleep needs to be greater than the double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made.

NOTE: It is recommended to set the duration for defined-duration sleep to be greater than the double the wake-up duration. Setting longer sleep duration allows for more appropriate power consumption measurements to be made.

* 1. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the "wake-up duration". This ensures C-Plane processing and user traffic are disabled for all of the O-RU's antenna array elements.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. After defined-duration sleep expiry the C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  4. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All validation steps mentioned in step 7 and step 9 are within expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/db350f12fd96.png) Advanced Sleep Mode (defined-duration sleep, minimum wake-up duration)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY.

The purpose of this test is to ensure O-RU is capable of advanced sleep mode.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

* + 7.2.9 Section Type 4: Slot Configuration Control
  + 7.3.1 Section Types
  + 7.4.6 Section Type 4 elements
  + 7.4.10 Section Type 8 elements
  + 7.5.2 Application layer, common
  + 7.5.3.55 ready
  + 16 Energy-saving functionality following clause in [3]:
  + 20.4 Advanced sleep modes for energy saving

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O- RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including advanced sleep mode for defined- duration sleep, minimum wake-up duration.
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports or TAB connectors within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "symbolMask" field to 0x3FFF, "sleepMode" field to indicate sleep mode, "numSlots" and "numSlotsExt" field for defined-duration sleep.

NOTE: Defined-duration sleep needs to be greater than double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made.

* 1. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing and user traffic are disabled for all of the O-RU's antenna array elements.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The O-RU sends a "ready" message to the O-DU emulator to indicate termination of sleep, by setting ready bit to 1 in Section Type 8 command.
  4. After the slotId value mentioned in the Section Type 8 command, the C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  5. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. The validation steps mentioned in step 7 and step 10 are within the expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/ec6e1c9d09fd.png) Advanced Sleep Mode (undefined-duration sleep, guaranteed wake-up duration)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY

The purpose of this test is to ensure O-RU is capable of advanced sleep mode.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

* + 7.2.9 Section Type 4: Slot Configuration Control
  + 7.3.1 Section Types
  + 7.4.6 Section Type 4 elements
  + 7.5.2 Application layer, common
  + 16 Energy-saving functionality following clause in [3]:
  + 20.4 Advanced sleep modes for energy saving

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including advanced sleep mode for undefined- duration sleep, guaranteed wake-up duration.
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports or TAB connectors within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept inactive, "numSlots" and "numSlotsExt" fields to 0 to indicate undefined-duration sleep.
  5. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration. This assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The O-DU emulator issues a wake-up command by signalling Section Type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x0000 to indicate all symbols in a slot made or kept active, "numSlots" and "numSlotsExt" fields to 0 to indicate undefined-duration sleep.

NOTE: It is recommended to issue wake-up command after a sufficient duration (for example greater than wake-up duration), allowing for the power consumption measurements to be made.

* 1. The TER waits for the time interval of wake-up duration.
  2. The C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  3. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. The validation steps mentioned in step 7 and step 11 are within the expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/ad793647f74c.png) Advanced Sleep Mode (undefined-duration sleep, minimum wake-up duration)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY.

The purpose of this test is to ensure O-RU is capable of advanced sleep mode.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

* + 7.2.9 Section Type 4: Slot Configuration Control
  + 7.3.1 Section Types
  + 7.4.6 Section Type 4 elements
  + 7.4.10 Section Type 8 elements
  + 7.5.2 Application layer, common
  + 7.5.3.55 ready
  + 16 Energy-saving functionality following clause in [3]:
  + 20.4 Advanced sleep modes for energy saving

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including advanced sleep mode for undefined- duration sleep, minimum wake-up duration.
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports or TAB connectors within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept inactive, "numSlots" and "numSlotsExt" fields to 0, to indicate undefined-duration sleep.
  5. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The O-DU emulator issues a wake-up command by signalling Section Type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to

0x0000 to indicate all symbols in a slot made or kept active, "numSlots" and "numSlotsExt" fields to 0 to indicate undefined duration sleep.

NOTE: It is recommended to issue wake-up command after a sufficient duration (for example greater than wake-up duration), allowing for the power consumption measurements to be made.

* 1. The O-RU sends a "ready" message to the O-DU emulator to indicate termination of sleep, by setting ready bit to 1 in Section Type 8 command. This enables C-Plane processing and user traffic.
  2. After the slotId value mentioned in the Section Type 8 command, the C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  3. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. The validation steps mentioned in step 7 and step 11 are within the expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/100253e760d9.png) Advanced Sleep Mode (sleep extension)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY.

The purpose of this test is to ensure O-RU is capable of advanced sleep mode that supports sleep extension. The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

* + 7.2.9 Section Type 4: Slot Configuration Control
  + 7.3.1 Section Types
  + 7.4.6 Section Type 4 elements
  + 7.5.2 Application layer, common
  + 16 Energy-saving functionality following clause in [3]:
  + 20.4 Advanced sleep modes for energy saving

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including advanced sleep mode for defined- duration sleep, guaranteed or minimum wake-up duration, sleep extensions.
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports or TAB connectors within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling section type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "symbolMask" field to 0x3FFF, "sleepMode" field to indicate sleep mode, "numSlots" and "numSlotsExt" field for defined-duration sleep.

NOTE: Defined-duration sleep needs to be greater than double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made.

* 1. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. At the start of wake-up duration, the O-DU emulator sends sleep extension command by signaling section type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "symbolMask" field to 0x3FFF, "sleepMode" field (any supported sleepMode other than sleep mode 0) for indicating sleep mode, "numSlots" and "numSlotsExt" field for defined-duration

NOTE: Defined-duration sleep needs to be greater than or equal to the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made.

* 1. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. After defined-duration sleep expiry, the C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  4. The power consumption should be greater than the previous one measured in the step 6 and step 10.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. The validation steps mentioned in step 7, step 11 and step 13 are within the expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/1d753079850d.png) Advanced Sleep Mode (Emergency wake-up)

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY

The purpose of this test is to ensure O-RU is capable to do Emergency wake-up from advanced sleep mode. The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings and emergency wake-up.

This scenario corresponds to the following clause in [2]:

* + 7.2.9 Section Type 4: Slot Configuration Control
  + 7.3.1 Section Types
  + 7.4.6 Section Type 4 elements
  + 7.5.2 Application layer, common
  + 16 Energy-saving functionality following clause in [3]:
  + 20.4.2 Emergency wake-up procedure for ASM

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |

</div>

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including advanced sleep mode for defined- duration sleep, guaranteed wake-up duration, emergency wake-up.
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports or TAB connectors within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling section type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "symbolMask" field to 0x3FFF, "sleepMode" field to indicate sleep mode, "numSlots" and "numSlotsExt" field for defined-duration sleep.

NOTE: Defined-duration sleep needs to be greater than double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made.

* 1. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The TER NETCONF client sends a <emergency-wake-up> rpc. For Example,

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="101">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<config>

<emergency-wake-up/>

</config>

</edit-config>

</rpc>

* 1. The O-RU NETCONF Server responds with a <rpc-reply> message indicating successful completion of requested procedure.

For Example,

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="101">

<ok/>

</rpc-reply>

* 1. The TER NETCONF Client waits for emergency-wake-up-complete notification, to ensure wake up is complete, the C-Plane processing and user traffic are enabled.

For Example,

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:MM:SS.FZ</eventTime>

<emergency-wake-up-complete/>

</notification>

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be greater than the previous one measured in the step 6.

###### Test Requirement (expected result)

1. Test steps above are performed successfully.
2. All The validation steps mentioned in step 7 and step 12 are within the expected power ranges as per the vendor product specifications.

### ![]({{site.baseurl}}/assets/images/e6a532edeb89.png) Mixed Sleep Modes and Overlapping Commands

#### ![]({{site.baseurl}}/assets/images/77180ebd3523.png) ASM Overlapping Commands

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY.

The purpose of this test is to ensure O-RU is capable of ASM commands.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

* + 7.2.9 Section Type 4: Slot Configuration Control
  + 7.3.1 Section Types
  + 7.4.6 Section Type 4 elements
  + 7.5.2 Application layer, common
  + 16 Energy-saving functionality following clause in [3]:
  + 20.4 Advanced sleep modes for energy saving

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including advanced sleep mode overlapping commands.
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports (or TAB connectors) within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept inactive, "numSlots" and "numSlotsExt" fields to 0 to indicate undefined-duration sleep.
  5. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The O-DU emulator sends another ASM command by signalling Section Type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept inactive, "sleepMode" field to indicate sleep mode, "numSlots" and "numSlotsExt" field for defined- duration sleep. Figure 3.2.7.3.1-1 provides an example of overlapping ASM commands.

NOTE: Defined-duration sleep needs to be greater than double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made.

* 1. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the "wake-up duration". This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.

NOTE: This ensures that reception of the new ASM command does not wake up the O-RU but has replaced the previous ASM command sent in step 4.

* 1. After defined-duration sleep expiry, the C-Plane processing and user traffic are enabled. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be greater than the previous one measured in the step 6 and step 10.

![A diagram of a diagram  Description automatically generated]({{site.baseurl}}/assets/images/84a5ec795b23.png)

###### Figure 3.2.7.3.1-1 Example of overlapping ASM commands

1. **Test Requirement (expected result)**
2. Test steps above are performed successfully.
3. The validation steps mentioned in step 7, step 11 and step 13 are within the expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/fb93f015ccef.png) C-Plane based TRX Control overlapping sleep mode

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY.

The purpose of this test is to ensure O-RU is capable of C-plane based TRX control sleep modes.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| ? | 7.2.9 | Section Type 4: Slot Configuration Control |
| ? | 7.3.1 | Section Types |
| ? | 7.4.6 | Section Type 4 elements |
| ? | 7.5.2 | Application layer, common |
| ? | 16 | Energy-saving functionality |

</div>

following clause in [3]:

* + 20.3.1 TRX control - C-Plane controlled

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including C-Plane based TRX control overlapping sleep modes commands.
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports or TAB connectors within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept inactive, "numSlots" and "numSlotsExt" fields to 0 to indicate

undefined-duration sleep and "antMask" field to "0" for all array elements to place the whole antenna panel to sleep.

* 1. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the wake-up duration. This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The O-DU emulator issues a wake-up command to turn on portions of the O-RU's antenna array (for example, top half of the O-RU's antenna array) by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "symbolMask" field to 0x0000 to indicate all symbols in a slot made or kept active, "sleepMode" field to indicate sleep mode, "numSlots" and "numSlotsExt" field to 0 to indicate undefined-duration sleep and "antMask" field to "1" in each array element for portions (for example, top half) of the O-RU's antenna array that is to be made or kept active. This ensures the C-Plane processing and user traffic are enabled for portions (for example, top half) of the O-RU's antenna array.

NOTE: It is recommended to issue wake-up command after sufficient duration (for example greater than wake-up duration), allowing for the power consumption measurements to be made.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be greater than the previous one measured in the step 6.
  3. The O-DU emulator issues a wake-up command to turn on remaining portions of the O-RU's antenna array (for example, bottom half of the O-RU's antenna array) by signalling Section Type 4 (st4CmdType

= 3 for TRX\_CONTROL) by setting "symbolMask" field to 0x0000 to indicate all symbols in a slot made or kept active, "sleepMode" field to indicate sleep mode, "numSlots" and "numSlotsExt" field to 0 to indicate undefined-duration sleep and "antMask" field to "1" in each array element for remaining portions (for example, bottom half) of the O-RU's antenna array that is to be made or kept active. This ensures the C-Plane processing and user traffic are enabled for remaining portions (for example, bottom half) of the O-RU's antenna array. Figure 3.2.7.3.2-1 provides an example of overlapping C-Plane based TRX control commands.

NOTE: It is recommended to issue wake-up command after sufficient duration (for example greater than wake-up duration), allowing for the power consumption measurements to be made.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be greater than the previous one measured in the step 6 and step 9.

![]({{site.baseurl}}/assets/images/06b8d5ed7ea7.png)

###### Figure 3.2.7.3.2-2 Example of overlapping C-Plane based TRX control commands

1. **Test Requirement (expected result)**
2. Test steps above are performed successfully.
3. The validation steps mentioned in step 7, step 10 and step 13 are within the expected power ranges as per the vendor product specifications.

#### ![]({{site.baseurl}}/assets/images/e0cade3f1c61.png) ASM and C-Plane based TRX control overlapping commands

###### Test Description and Applicability

This scenario is CONDITIONAL MANDATORY.

The purpose of this test is to ensure O-RU is capable of ASM and C-Plane based TRX control commands.

The test scenario is intentionally limited in scope to be applicable to any O-RU hardware design that supports Energy Savings.

This scenario corresponds to the following clause in [2]:

* + 7.2.9 Section Type 4: Slot Configuration Control
  + 7.3.1 Section Types
  + 7.4.6 Section Type 4 elements
  + 7.5.2 Application layer, common
  + 16 Energy-saving functionality following clause in [3]:
  + 20.3.1 TRX Control - C-Plane controlled
  + 20.4 Advanced sleep modes for energy saving

###### Test Entrance Criteria

* + The O-RU shall support the default parameters of at least one of the scenarios given below,

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Scenario | Default parameters |
| FR1 FDD Conducted-Signal Tests | clause 3.2.1.1.1 |
| FR1 FDD Non-conducted OTA Signal Tests | clause 3.2.1.1.2 |
| FR1 TDD Conducted Signal Tests | clause 3.2.1.1.3 |
| FR1 TDD Non-conducted OTA Signal Tests | clause 3.2.1.1.4 |

</div>

* + The test numerology is 30 kHz subcarrier spacing and 100 MHz Bandwidth as described in clause ETSI TS

138.141 -1 NR-FR1-TM1.1. If the O-RU does not support this numerology, any other numerology that the O- RU supports can be used.

* + The O-RU shall have a conducted antenna port (or TAB connector) to be connected to a signal analyzer, if the O-RU capabilities matches scenario defined in clause 3.2.1.1.1 or clause 3.2.1.1.3.

###### Test Methodology

1. **Initial Conditions**
   1. Configure the O-RU which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1.
   2. The O-RU exposes the capability to support energy savings including ASM and C-Plane based TRX control overlapping sleep modes commands.
   3. Ensure that the RF connections and cables are calibrated so there is phase coherence between the antenna ports or TAB connectors within acceptable tolerance.
   4. Connect the signal generator to the O-RU antenna ports or TAB connectors that belong to the scenario under test and configure the analyzer with any set-up information needed to allow it to synch and demodulate the transmitted signal.
   5. Let the DUT and TER to warm to the normal operating temperature within specified range.

###### Procedure

* 1. Build an appropriate IQ signal as described above in clause B. Test Entrance Criteria in the CUSM emulator.
  2. Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal and the scenario under test. The C-Plane processing and user traffic are enabled.
  3. The TER measures the AC or DC power consumption of the O-RU using power meter.
  4. The O-DU emulator enables energy savings by signalling section type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "symbolMask" field to 0x3FFF, "sleepMode" field to indicate sleep mode, "numSlots", "numSlotsExt" field for defined-duration sleep and "antMask" field with "0" in half of array element to make half of antenna panel to sleep.

NOTE: Defined-duration sleep needs to be greater than double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made. It is recommended to set at least half of the array elements off (0 indicates off) in the antenna mask to better observe power changes.

* 1. The TER waits for a sufficient duration to ensure some of the O-RU's antenna array have reached sleep condition, for example a duration greater than the "wake-up duration". This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. At the start of wake-up duration, the O-DU emulator sends sleep extension command by signalling section type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "symbolMask" field to 0x3FFF, "sleepMode" field to indicate sleep mode, "numSlots", "numSlotsExt" fields to 0 for indicating undefined-duration sleep and "antMask" field with "0" in each array element that is to be made or kept inactive.

NOTE: It is recommended to set at least half of the array elements off (0 indicates off) in the antenna mask to better observe power changes.

* 1. The TER waits for a sufficient duration to ensure some of the O-RU's antenna array have reached sleep condition, for example a duration greater than the "wake-up duration". This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration. This assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3.
  3. The O-DU emulator enables energy savings by signalling Section Type 4 (st4CmdType = 4 for Advanced Sleep Mode) by setting "symbolMask" field to 0x3FFF to indicate all symbols in a slot made or kept inactive, "sleepMode" field to indicate sleep mode, "numSlots" and "numSlotsExt" field for defined- duration sleep.

NOTE: Defined-duration sleep needs to be greater than the double the wake-up duration. It is recommended to set longer sleep duration, allowing for the power consumption measurements to be made.

* 1. The TER waits for a sufficient duration to ensure all of the O-RU's antenna array elements have reached sleep condition, for example a duration greater than the "wake-up duration". This ensures C-Plane processing is halted and there is no possibility of user traffic.

NOTE: Since go-to-sleep duration is unknown and wake-up duration includes go-to-sleep duration, this assures the power measurement is done after all of the O-RU's antenna array elements have reached sleep condition.

* 1. The TER performs the DC or AC power consumption measurement with the power meter.
  2. The power consumption should be smaller than the previous one measured in the step 3, step 6 and step 10.
  3. After defined-duration sleep expiry, the half of antenna array elements become active. i.e. , the C-Plane processing and user traffic are enabled for half of antenna array elements.
  4. The TER performs the DC or AC power consumption measurement with the power meter.
  5. The power consumption should be smaller than the previous one measured in the step 3, and greater than the step 14.
  6. The O-DU emulator disables energy savings by issuing a wake-up command by signalling Section Type 4 (st4CmdType = 3 for TRX\_CONTROL) by setting "sleepMode" field to indicate sleep mode, "symbolMask" field to 0x0000 to indicate all symbols in a slot made or kept active, "numSlots" and "numSlotsExt" fields to 0 to indicate undefined-duration sleep and "antMask" field to "1" in each array element that is to be made or kept active. Figure 3.2.7.3.3-1 provides an example of overlapping C-Plane based TRX control commands and ASM command.
  7. The TER waits for the time interval of wake-up duration. This ensures the C-Plane processing and user traffic are enabled.
  8. TER performs the DC or AC power consumption measurement with the power meter.
  9. The power consumption should be greater than the previous one measured in the step 6, step 14 and step 17.

![]({{site.baseurl}}/assets/images/7afc6e2bd28c.jpg)

###### Figure 3.2.7.3.3-3 Example of overlapping C-Plane based TRX control commands and ASM command

1. **Test Requirement (expected result)**
2. Test steps above are performed successfully.
3. The validation steps mentioned in step 7, step 11, step 15, step 18 and step 21 are within the expected power ranges as per the vendor product specifications.

### S-Plane Conformance Tests

This clause describes tests that are used to validate S-Plane functional and performance conformance of network elements using the O-RAN WG4 fronthaul interface defined in [2] and the O-RAN WG4 M-Plane interface defined in [3]. This version of the conformance specification defines both O-DU and O-RU conformance tests. Future versions of this specification will describe additional S-Plane functional and performance conformance tests of other clocks used in the front haul, e.g. PRTC/T-GM, etc.

S-Plane functionality of the O-RU is determined based on status retrieved from the O-RU using the M-Plane or SMO as appropriate, whereas, S-Plane performance is determined by over-the-air (OTA) or conductive (i.e. a cabled electrical connection to the DUT's radio interface) measurements of O-RU synchronization signal.

S-Plane functionality of the O-DU is determined based on status retrieved from the O-DU using the SMO. SMO methods to configure the O-DU and retrieve status from the O-DU can be any method supported by the O-DU including CLI, NM or WG5 specified protocols.

The performance of O-DU is determined by time/frequency error measurements on output signals (such as 1PPS, or fronthaul SyncE+PTP master ports in LLS-C1 and LLS-C2). When applicable, O-DU tests are based on ITU-T G.8275.1 [5] profile. ITU-T G.8275.2 [6] is not specifically supported in this document version because this standard does not specify performance criteria and is left for further study.

O-DU tests consider both local and remote PRTC connections, as shown in Figure 3.3.1-1. The connection type is relevant for performance tests because the input conditions applied to DUT depends on connection types supported:

An embedded PRTC (e.g. using embedded GNSS receiver, Figure 3.3.1-1a) has no exposed direct O-DU interface, so test stimulus is applied to the Time Reference input (e.g. GNSS RF).

A local PRTC is collocated with the O-DU and may communicate to O-DU via either a 1PPS and serial link (e.g. ITU- T G.8271 [31] or similar interface, Figure 3.3.1-1b), or an Ethernet interface (PTP and PLFS, Figure 3.3.1-1c).

A remote PRTC is located anywhere in the network (backhaul or fronthaul) and communicates to O-DU via an Ethernet interface (PTP and PLFS, Figure 3.3.1-1d).

PRTC + T/GM

Time Reference (e.g. GNSS)

E

No

exposed timing interface

PRTC

DUT

(O-DU)

Time Reference

(e.g. GNSS)

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Time Reference  (e.g. GNSS) | |
| PRTC | |
| G.703,  G.8271  ex A, or  rietary |  |

</div>

Ann wi

Prop

![]({{site.baseurl}}/assets/images/fe725d8f7310.png)

Switched/ Routed Network

Ethernet with PTP/SyncE

![]({{site.baseurl}}/assets/images/fe725d8f7310.png)![]({{site.baseurl}}/assets/images/fe725d8f7310.png)

DUT (O-DU)

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| Time Reference  (e.g. GNSS) | |
| PRTC + T/GM | |
| Direct thernet th PTP/ SyncE |  |

</div>

DUT

(O-DU)

DUT

(O-DU)

(a) Embedded PRTC

(b)

Local PRTC using

1PPS/10MHz/ToD

interface

(c)

Local PRTC using direct Ethernet connection

(d)

Remote PRTC using networked Ethernet connection

###### Figure 3.3.1-1 Methods to connect PRTC to O-DU

Both functional and performance tests require the provision of a test equipment i.e. provision of a test setup that includes a CUSM-E which delivers the necessary stimuli as described in clause 3.3.1.

The S-Plane conformance test suite assumes that the vendor's equipment is conformant and has been tested to meet the requirements of ITU-T G.8275.1 [5] and IEEE1588v2 [32] and other relevant S-Plane standards. Therefore, this document does not attempt to duplicate tests for these standards.

The below clauses of bullets summarize the test scope in order to validate conformance to the synchronization plane specification referenced by [2] clause 9.

* General points which apply to testing of both functional and performance aspects of the O-DU and O-RU:
  + The tests apply to both 4G (LTE/E-UTRA) and 5G (NR) and are applicable to all O-RAN IOT profiles listed in Annex A
  + A CUSM-E is needed to generate the necessary M-plane and S-Plane traffic that includes PTP and possibly SyncE SSM over ESMC. It is synchronized to a time reference. For the O-RU testing a CUSM-E must also generate CU-Plane background traffic.
  + Shall be done in the lab at constant temperature
  + The CUS specification [2] may in the future support different kinds of Physical Layer Frequency Support (PLFS), however the only fully specified PLFS by the current edition of [2] is SyncE. Thus, these S-Plane tests are defined to include SyncE when required.
  + Testing of SyncE is optional and is only valid when the SyncE device which can be driven by a master (e.g. O- RU) makes use of it. Therefore, the related SyncE test cases are optional.
* The following bulleted points apply specifically to functional tests of the O-RU in addition to the general points above,
  + For validation of S-Plane, the following are used:
    - A CUSM-E sends and receives synchronization information over the fronthaul interface.
    - A Measurement Equipment to perform frequency/phase/time measurements from any available synchronization interface.
    - DUT's S-Plane reports its state over M-Plane.
  + The acceptance criterion for these tests is to comply with specification [2].
* The following bullets points apply specifically to functional test of the O-DU in addition to the general points above:
  + On its input ports, O-DU end application like O-RU may optionally use SyncE along with PTP. However, in the case of an LLS-C1/C2 O-DU acting as ITU-T G.8275.1 [5] SyncE+PTP master, SyncE emission is mandatory on the fronthaul for validation of S-plane:
  + The acceptance criterion for these tests is to comply with specification [2].
  + The CUSM-E also provides local time source input signals to the O-DU:
    - GNSS RF signals, delivered by a GNSS generator referenced to the local time reference
    - PRTC output signals (1PPS + serial link)
* The following bulleted points apply specifically to performance tests for O-RU and O-DU in addition to the general points above.
  + These tests are not defined to fully stress the DUT. Rather they are intended to stress the DUT enough to determine that it can properly operate via the defined front haul protocol.
    - The thermal profile is not defined. The tests are defined to be run at a constant temperature, but the thermal profile choice and range is left as a decision for the vendor.
    - The variable C/U-Plane profile (for example similar to test case 13 shown in figure VI.11 of ITU-T G.8261 [10]) will be defined as part of the work on the future performance tests.
    - All performance tests described in this clause assume the following two components in the procedure (test methodology clauses):
      * Establishing the necessary M-plane session to bring up the O-RU or if applicable the O-DU and make it ready for transmission of a measurement signal.
      * For the O-RU in addition to the M-plane session, the transmission of a test signal necessitates the provision of a CU plane test vector. The test vector needs to have enough information to set up a synchronization channel within the radio frame transmitted over the air.
      * For O-DU performance tests the test cannot be executed unless the O-DU provides an Ethernet port with sync master function and/or a 1PPS output signal.
  + The acceptance criterion for the performance tests is to satisfy the 3GPP OTA TAE limits specified in ETSI TS 136.141 [18] for 4G (LTE) and 38.141-2 [20] for 5G (NR), and summarized in eCPRI [11] and ITU-T G.8271 [31]. The conditions applicable to each test will be set out in the relevant clauses below (future work

item). OTA TAE limits for MIMO/Tx Diversity is outside the scope of this document because they apply between endpoints belonging to the same O-RU.

Synchronization/Reference Clock

1PPS out, 10MHz out, and/or PTP

* + The CUS Specification [2] which follows eCPRI [11] and IEEE802.1 CM [33] recommendation, defines two examples of O-RU types, but these are not strict classes like the T-BC classes specified in ITU-T G.8273.2 [26].

### Test Environment

The following describes the necessary functions and capabilities of the test equipment in order to perform O-RU or O- DU conformance tests. A diagram of the O-RU test set up shown in Figure 3.3.1-2, and a similar diagram of the O-DU test set up is shown in Figure 3.3.1-3.

Referring to Figure 3.3.1-2, the stimulus is applied to the O-RU via an Ethernet interface which simulates an O-RAN CUS-Plane protocols by using equipment to generate an O-DU and/or front haul time reference. This interface carries the PTP and SyncE stimulus to test the O-RU and carries M-Plane information to configure DUT and as needed C- Plane and U-Plane information to generate a test signal to measure time accuracy. Performance measurements are made at the radio output. These measurements can be made either over the air (called a non-conductive measurement), or via a cable connection from the radio interface (called conductive measurement).

Figure 3.3.1-2 applies to LLS-C1/C2/C3 topologies. LLS-C4 topology is for further study.

###### Figure 3.3.1-2 O-RU LLS-C1/C2/C3 Conformance Test Set Up

![]({{site.baseurl}}/assets/images/928b4fc7ca9d.png)![]({{site.baseurl}}/assets/images/577411e842cb.png)![]({{site.baseurl}}/assets/images/dda07b72195f.png)![]({{site.baseurl}}/assets/images/981586f51e7b.png)![]({{site.baseurl}}/assets/images/939910b800ae.png)![]({{site.baseurl}}/assets/images/220666c16a90.png)![]({{site.baseurl}}/assets/images/4be406af651f.png)![]({{site.baseurl}}/assets/images/e6ad7108fb9b.png)

RU Test

Equipment, (R-TE)

CUSM-Plane Emulator (CUSM-E)

Optional SMO

Direct Front

Haul Ethernet

Test Port

DUT (O-RU)

PTP/SyncE

path

Radio

Interface

extract 1PPS & extract freq.

O-RAN

Protocol

PTP/

SyncE Gen. (T-GM)

Time Ref- erence

Signal Extractor

Performance Measurement

RF

Clock/Time Reference

1PPS out Note 1

**NOTE 1:** The optional 1 Pulse Per Second (PPS) out signal shown in figure 3.3.1-2 is used only for diagnostic purposes. The 1 PPS signal is not used for a measurement in this conformance test.

As shown in Figure 3.3.1-3, the O-DU the setup is similar to the O-RU. In addition to the option to supply timing using PTP via Ethernet (like the O-RU), the input stimulus may be applied to the DUT from a directly connected Time Reference which delivers frequency (e.g. SyncE, 10MHz, 1PPS), phase (e.g.1PPS, 10ms frame boundary) and time (e.g. ToD, PTP) signals. Directly connecting the Time Reference time via a Local Sync Port simulates topology with

an O-DU using a Local PRTC Time Reference. Using PTP via an Ethernet Test Port simulates a topology using a Remote PRTC.

For the O-DU LLS C1/C2 performance tests, the quality of the DUT timing output is measured via the DUT Fronthaul Ethernet Port, which propagates the time and optionally frequency information from the DUT using PTP and optionally SyncE.

For the O-DU LLS-C3/C4 performance tests the quality of the DUTs timing is measured via a spare Master PTP/SyncE Ethernet Port (if available) or the 1 PPS output (if available). If no spare Master PTP/SyncE Ethernet Port or 1 PPS output port is available, then performance test cannot be executed for LLS-C3/C4 configuration for the O-DU.

Typically, in LLS-C3/C4, using a 1PPS measurement interface may avoid having to configure an Ethernet port as PTP master for measurement purpose.

\* For O-DU S-Plane testing the CUSM emulator need not implement

![]({{site.baseurl}}/assets/images/220666c16a90.png)![]({{site.baseurl}}/assets/images/8d9c2d875db7.png)![]({{site.baseurl}}/assets/images/220666c16a90.png)![]({{site.baseurl}}/assets/images/024bf8a3e3f1.png)![]({{site.baseurl}}/assets/images/8d9c2d875db7.png)![]({{site.baseurl}}/assets/images/220666c16a90.png)![]({{site.baseurl}}/assets/images/220666c16a90.png)![]({{site.baseurl}}/assets/images/220666c16a90.png)![]({{site.baseurl}}/assets/images/3ba867346f14.png)![]({{site.baseurl}}/assets/images/536c73dfa313.png)![]({{site.baseurl}}/assets/images/536c73dfa313.png)![]({{site.baseurl}}/assets/images/a78b42c1a916.png)

CUSM-Plane Emulator (CUSM-E)\*

GNSS Local Ethernet Manage-

a RF b Sync c Test ment Signal Port d Port Interface

DUT (O-DU)

Clock / Time

Reference

Ethernet

Measure- ment Port

extract 1PPS & extract freq.

1PPS out

(optional)

GNSS

Rcvr/

PRTC

PTP/SyncE

Generator (T-GM)

PRTC

Emulator

GNSS

Emulator

Time Reference

Optional NMS/SMO or WG5

M-Plane Interface

DU Test Equipment, (D-TE)

Sync Tester

(PTP/SyncE and/or 1pps Time

Measurement)

Reference Clock/Synchronization

1pps out, 10MHz out, and/or PTP

WG4 C-Plane or U-Plane Protocols.

Embedded PRTC GNSS radio interface.

![]({{site.baseurl}}/assets/images/4e9e29874af7.png)![]({{site.baseurl}}/assets/images/98f6d0a51dc1.png)![]({{site.baseurl}}/assets/images/41c0e818c372.png)![]({{site.baseurl}}/assets/images/dbc03b2a2149.png)

a b c

d

Local PRTC using Local Sync Port (for example ITU-T G.8271 Annex A)

Local PRTC using PTP and PLFS Remote PRTC using PTP and PLFS

###### Figure 3.3.1-3 O-DU LLS-C1/C2/C3/C4 Conformance Test Set Up with an a) Embedded PRTC, b) Local Sync Port PRTC, c) PRTC over PTP/SyncE

**CUSM-Plane Emulator:** This function implements various planes (C, U, S, M) to simulate a front haul/transport network connecting to DUT (i.e. O-RU, O-DU). It should be capable of testing S-Plane performance under stress with various noise profiles. S-Plane signals sent to DUT and measurement equipment are traceable to reference signals

received from the master time reference. Emulator should generate noise free reference signal for Measurement Equipment and (when required) a noise profile for the DUT. The CUSM-Plane emulator may be composed of multiple components or could be a single component containing all the capabilities listed below. When O-RU is the DUT UC- Plane is needed for O-RU to generate a radio information required to measure timing. For O-DU, CU-Plane functionality is not used since timing is measured directly from an Ethernet or 1PPS test port.

**Time Reference/S-Plane:** This equipment is the frequency and time reference. It delivers frequency (e.g. SyncE, 10MHz, 1PPS), phase (e.g.1PPS, 10ms frame boundary) and time (e.g. ToD, PTP) signals to the Sync Tester equipment and to the various simulators/generators listed below. PRTC specified by ITU-T G.8272 [35] is one example in terms of performance. The level of performance for these reference signals should be significantly (by an order of magnitude) better than the 3GPP synchronization requirements when absolute limits are measured against the reference clock. The time reference function with the CUSM-Plane emulator is traceable to UTC. The time output is used to synchronize the signal analyzer or Test Equipment performing time error measurements. The phase output is used to synchronize the signal analyzer or Test Equipment performing time error measurements.

**PRTC/T-GM:** for testing an O-DU from either local or remote PRTC over Ethernet. It includes a PTP master clock and, when applicable, a SyncE master function that propagate the Time reference and allow adding configured noise patterns.

**GNSS Emulator:** for testing an O-DU with integrated local PRTC. The GNSS emulator will provide an RF signal to the O-DU. The RF signal emulates a signal received by a GNSS antenna and allows adding configured noise patterns. As an alternative to a GNSS emulator following case is acceptable: the test environment provides the capability to access a GNSS antenna mounted at a suitable location inside the building with line of sight to sufficient number of GNSS satellites (>4).

**PRTC Emulator:** for testing an O-DU with integrated T-GM, but without an integrated local PRTC: in this case, the test setup needs to provide the following signals to the O-DU: 1PPS (according to ITU-T G.703 [34]), 10MHz, and serial link carrying ToD and PRTC status. There are different ToD formats such as ITU-T G.8271 [31] Annex A and NMEA. The ToD format of the test setup needs to deliver the ToD format supported by the O-DU. This interface allows adding configured noise patterns.

**SMO:** Responsible for configuring CUSM Plane emulator to send configuration to DUT for the defined conformance tests.

**M-Plane:** Translate the SMO configuration into the proper M-Plane messages to correctly configure and report status from the DUT. For O-RU testing this is implemented using WG4 M-Plane protocol. For O-DU this is implemented by either using a Network Management System (SMO) which is compatible with the DUT or using a WG5 M-Plane emulator.

**UC-Plane:** S-Plane tests require the transmission of UC-Plane traffic over the fronthaul, the emulator shall implement the O-RAN UC-Plane protocol and shall send a stock data frame defined in clause 3.2.1.1.5 and shown in Figure 3.2.1.1-2 as UC-Plane messages to DUT O-RU.

The emulator shall merge all traffic types for transmission over the fronthaul without degrading performance of S- Plane.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| **O-DU Input Time Source** | **Topology and Master Output Time** | | | |
| **LLS-C1** | **LLS-C2** | **LLS-C3** | **LLS-C4** |
| PTP+SyncE Master from Mid Haul (either Local or Remote PRTC) | Yes - Front Haul | Yes - Front Haul | Yes - None | Yes - None |
| PTP+SyncE Master from Front Haul (Remote PRTC) | NA | NA | Yes - None | Yes - None |
| Local time source, either GNSS RF signals or 1PPS+TOD from  PRTC | Yes - Front Haul | Yes - Front Haul | Yes - None | Yes - None |

</div>

###### Table 3.3.1-1 O-DU LLS-C1/C2/C3 Input Source and Output Source Options

**Measurement Equipment:** This equipment is responsible for extracting the desired synchronization information from the test signal transmitted by the DUT, and then measuring this information to determine if the performance is within limits. This could be a single piece of test equipment containing all the capabilities listed below, or it may be created by interconnecting a separate signal analyzer and performance measurement system.

For O-RU testing the following measurement equipment is needed.

**Signal Extractor:** This equipment demodulates the time reference signal from the O-RU's downlink radio interface. It receives RF signals from the DUT over air or via coaxial interface.

**Performance Measurement Equipment:** This equipment performs error measurements of the timing and frequency output signals from the Signal Extractor. It uses standard metrics to validate if the measured signal meets the defined limits.

For O-DU testing the following measurement equipment is used.

**PTP/SyncE/1pps Measurement Equipment:** This equipment is responsible for extracting the desired synchronization information from the Master PTP/SyncE Ethernet port (e.g. decoding the PTP and/or SyncE sent from DUT master port) or 1PPS output from the DUT (LLS-C3/C4 only),then measuring this information to determine if the performance of the DUT is within limits.

### Functional test of O-RU using ITU-T G.8275.1 profile (LLS-C1/C2/C3)

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to validate that an O-RU is correctly synchronizing to a CUSM Emulator delivering both PTP and (optionally) SyncE using ITU-T G.8275.1 [5] profile and that the O-RU correctly reports its status to the CUSM Emulator based on the nominal or degraded synchronization conditions generated by CUSM Emulator.

###### Test Entrance Criteria

O-RU is connected to CUSM Emulator directly.

O-RU must be operating with the respective SMO or M-Plane properly (as defined in 3.2.1.1.5).

###### Test Methodology

* 1. **Initial Conditions**

This test uses the O-RU (DUT), a CUSM-Plane emulator with SMO features to generate stimulus for the O- RU (DUT) and signal analyzer to measure the radio interface timing.

###### Procedure

Three conditions must be tested:

**Startup:** CUSM-Plane Emulator is configured to act as a clock, with PTP and SyncE ports in passive state (no messages sent)

**Nominal:** CUSM-E is configured to start acting as a PTP master compliant with the ITU-T G.8275.1 [5] profile advertising LOCKED status with nominal clockClass and clockAccuracy. If SyncE is to be tested CUSM-Plane Emulator is configured to act as a clock, with SyncE ports in master state, compliant to ITU-T G.8264 [36] profile advertising nominal SSM value as specified by ITU-T G.8275.1 [5].

**Degraded:** There are two levels of degraded conditions for both PTP and SyncE that can be configured to the CUSM-Emulator.

The first degradation level is where the CUSM-E is configured to act as a clock, with PTP and SyncE ports in master state, compliant to ITU-T G.8275.1 [5] profile, and sending configured clockClass and/or SSM values within the O-RU's configured accepted limits via the M-plane.

The second degradation level is where the same clockClass and/or SSM values are sent by CUSM-E outside the O-RU's configured accepted limits via the M-plane.

To cover the all the relevant scenarios the test sequence listed in Table 3.3.2-1 steps through the Startup/Nominal/Degraded states in a sequence. The steps in this table and Table 3.3.2-2 are intended to be exercised in sequential order. Since SyncE is optional, there are two columns, one for PTP status and a second for SyncE. Each of the status items corresponds the conditions defined above.

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Step** | **PTP Status:** | **SyncE Status (if applicable): SSM** |
| 1. | Startup: no clockclass | Startup: no SSM/QL |
| 2. | Nominal clockclass=6 | Nominal QL= (see Note 1) |
| 3. | Degraded clockclass but within the O-RU's configured accepted range. | Nominal QL= (see Note 1) |
| 4. | Degraded clockclass outside the O-RU's configured accepted range. | Nominal QL= (see Note 1) |
| 5. | Degraded clockclass outside the O-RU's configured accepted range. | Degraded QL outside the O-RU's configured accepted range. |
| 6. | Nominal clockclass=6 | Nominal QL= (see Note 1) |
| 7. | Nominal clockclass=6 | Degraded QL but within the O-RU's configured accepted range. |
| 8. | Nominal clockclass=6 | Degraded QL outside the O-RU's configured accepted range. |
| 9. | Nominal clockclass=6 | Nominal QL = (see Note1) |
| 10. | S-Plane lost, no message | S-Plane lost, no message |

</div>

**Note 1:** For SyncE, Nominal QL is what is determined as the best acceptable configured value by the O-RU

###### Table 3.3.2-1 O-RU LLS-C1/C2/C3 Functional Conformance Test Steps

1. **Pass Fail Criteria (expected results)**

The acceptance criterion is that the status reported by the O-RU for the steps defined in above procedure matches the results described in Table 3.3.2-2 for PTP only and Table 3.3.2-3 for PTP and SyncE. The left column indicates the steps defined in Table 3.3.2-1 . The second column summarizes the O-RU status from Table 3.3.2-1. The right two columns list the M-plane ptp status parameters that are queried from the test O-RU and their desired value. For PTP clockClass and optional SyncE SSM quality level, the "Received Value" is the one received by the O-RU (except in Startup mode when there is no such received value and the default one is reported). In Table 3.3.2-2 and Table 3.3.2-3, the table's "ptp clock-class" is obtained from the O-RU by reading the YANG list "sources" (in "sync/ptp-status"), finding the first port with a YANG "state" that matches the corresponding "ptp state" in the table, and returning the YANG "clock-class" of that found port. If no port is found, or if the YANG "state" of the found port is DISABLED, return 255. The clockClass value 255 is not a valid value that can be received from the CUSM-E.

The O-RU Sync-state, PTP lock state, PTP state, PTP clock-class, SyncE lock-state, SyncE state, SyncE quality- level are defined in the M-Plane specification [3] (chapter 13 Synchronization Aspects) and relevant YANG models.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- |
| **Step** | **O-RU PTP Status** | **sync -state** | **ptp lock-state** | **ptp state** | **ptp clock-class** |
| 1. | Startup | FREE-RUN | UNLOCKED | DISABLED | 255 |
| 2. | Nominal | LOCKED | LOCKED | PARENT | Rcvd Value |
| 3. | Degraded, within range | LOCKED | LOCKED | PARENT | Rcvd Value |
| 4. - 5. | Degraded, outside range. | HOLDOVER (Note 1)  then FREERUN | (Note 2) | NOK | Rcvd Value |
| 6. - 9. | Nominal | LOCKED | LOCKED | PARENT | Rcvd Value |
| 10. | None (disconnected) | HOLDOVER (Note 1)  then FREERUN | UNLOCKED | DISABLED | 255 |

</div>

**Note 1**: If HOLDOVER is not implemented by O-RU, then O-RU goes directly to FREERUN.

**Note 2**: According to IEEE1588 [32]an O-RU embedded PTP clock is specified to be LOCKED. However according to M-Plane specification [3] it could be in either LOCKED or UNLOCKED states.

###### Table 3.3.2-2 O-RU LLS-C1/C2/C3 Functional Conformance Test Results without SyncE

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Step** | **O-RU PTP**  **and SyncE Status** | **sync-state** | **ptp**  **lock-state** | **ptp state** | **ptp**  **clock-class** | **synce lock-state** | **synce state** | **synce quality- level** |
| 1. | Startup | FREE-RUN | UNOCKED | DISABLED | 255 | UN- LOCKED | DIS- ABLED | Note 1 |
| 2. | PTP: Nominal SyncE: Nominal | LOCKED | LOCKED | PARENT | Rcvd Value | LOCKED | PARENT  or OK | Rcvd Value |
| 3. | PTP: Degraded, within range SyncE: Nominal | LOCKED | LOCKED | PARENT | Rcvd Value | LOCKED | PARENT  or OK | Rcvd Value |
| 4. | PTP: Degraded, outside range. SyncE: Nominal | HOLDOVER  (Note 2) then FREERUN  (Note 3) | (Note 4) | NOK | Rcvd Value | LOCKED | PARENT | Rcvd Value |
| 5. | PTP: Degraded, outside range. SyncE: Degraded, outside range. | HOLDOVER  (Note 2) then FREERUN  (Note 3) | (Note 4) | NOK | Rcvd Value | Note 1 | NOK | Note 1 |
| 6. | PTP: Nominal SyncE: Nominal | LOCKED | LOCKED | PARENT | Rcvd Value | LOCKED | PARENT  or OK | Rcvd Value |
| 7. | PTP: Nominal SyncE: Degraded, within range. | LOCKED | LOCKED | PARENT | Rcvd Value | LOCKED | PARENT  or OK | Rcvd Value |
| 8. | PTP: Nominal SyncE: Degraded, outside range. | Imple- mentation Specific (Note 3) | LOCKED | PARENT | Rcvd Value | Note 1 | NOK | Note 1 |
| 9. | PTP: Nominal SyncE: Nominal | LOCKED | LOCKED | PARENT | Rcvd Value | LOCKED | PARENT  or OK | Rcvd Value |
| 10. | PTP: None (disconnected)  SyncE: None (disconnected) | HOLDOVER  (Note 2) then FREERUN  (Note 3) | UNLOCKED | DISABLED | 255 | UN- LOCKED | DIS- ABLED | Note 1 |

</div>

**NOTE 1**: This is not specified by CUS-Plane and is implementation dependent.

**NOTE 2**: If HOLDOVER (either assisted by SyncE or relying on local oscillator) is not implemented by O- RU, then O-RU goes directly to FREERUN.

**NOTE 3**: Depending on O-RU implementation the Sync-state may be LOCKED or HOLDOVER then FREERUN.

**NOTE 4**: According to IEEE1588 [32] an O-RU embedded PTP clock is specified to be LOCKED. However according to M-Plane specification [3] it could be in either LOCKED or UNLOCKED states.

**Table 3.3.2-3 O-RU LLS-C1/C2/C3 Functional Conformance Test Results with SyncE**

### Performance test of O-RU using ITU-T G.8275.1 Profile (LLS-C1/C2/C3)

###### Test Description and Applicability

This test is MANDATORY.

This test validates that an O-RU is synchronizing from a CUSM-plane Emulator delivering configured (ideal and normal operating conditions) PTP and (optionally) SyncE. Frequency and time error generated by the O-RU shall be within specified limits.

Note, when O-RUs implement cascaded O-RU mode see also 3.3.9.

CUS -plane spec lists two classes of O-DU (class A has +-15 ppb frequency error limit; class B has +-5 ppb limit). This test applies to the strictest one from O-RU perspective and therefore considers Class A O-DU for LLS-C1, and

the worst-case maximum of O-DU class A and B for LLS-C2. The class of O-DU is not a factor in the O-RU input limit for LLS-C3 (see CUS-Plane Specification [2] clause 11.3.2.2), therefore it is not considered.

###### Test Entrance Criteria

O-RU is connected to CUSM-Plane Emulator via direct fiber link(s). Conformance Functional test 3.3.2 is successfully passed.

It is the vendor's responsibility to make sure that limits defined in the test are also met in worse-case field conditions. Thermal testing, PTP PDV tolerance and SyncE jitter/wander tolerance are beyond the scope of this test.

O-RU shall be operating with the respective SMO or M-Plane properly. (as defined in 3.2.1.1.5)

###### Test Methodology

* 1. **Initial Conditions**

These tests use the O-RU DUT and a CUSM-Plane emulator with SMO features.

Frequency and time error are measured on the Air interface at the O-RU output. This is accomplished by utilizing the CUSM-Plane emulator to generate the basic downlink signal according to the "UC-Plane O-RU Scenario Class Base 3GPP DL" applicable to the O-RU under test, i.e. 3.2.3.1.1, 3.2.4.1, 3.2.5.1.1, or 3.2.6.1.1; and the signal analyzer performing the appropriate frequency and time error measurements.

CUSM-Plane Emulator is configured to act as a clock, with PTP ports in master state, compliant to ITU-T G.8275.1 [5] profile advertising LOCKED status with nominal clockClass and clockAccuracy.

CUSM-Plane Emulator is configured to act as a clock, with SyncE ports in master state, compliant to ITU-T G.8264 [36] profile advertising nominal SSM value.

The DUT shall have achieved frequency and phase lock prior to starting the test.

###### Procedure:

Unlike the functional test defined in clause 3.3.2, where start-up / nominal / degraded scenarios are tested, only nominal scenarios with ideal and normal operation input noise are tested in this clause.

* + 1. **Ideal:** PTP and SyncE (if used) provide "ideal" O-RU input synchronization with no added noise.
    2. **Normal Operation:** PTP and SyncE (if used) provide "Within normal operating limits" O-RU inputs as specified in CUS-Plane Specification [2].

<div class="table-wrapper" markdown="block">

The CUS requirements and subsequent PTP test patterns specify absolute value for constant time error (|cTE|). Dynamic time error (dTE) implicitly varies positive/negative, but cTE does not. It is possible that an O-RU can pass the test with positive cTE, and fail with negative cTE (or vice versa). Therefore, regardless of which method is used for the PTP test pattern, this test shall be performed twice: once with the CUSM-Plane Emulator generating positive cTE in the PTP test pattern, and again with the CUSM- Plane Emulator generating negative cTE in the PTP test pattern. The pass/fail criteria are the same for both tests.

</div>

###### For LLS-C1 PTP is required to simultaneously meet two limits:

<div class="table-wrapper" markdown="block">

* + - * 1. max|TEL|: 1420 ns,

</div>
        2. Maximum frequency error (0.1Hz low pass filtered): +-15 ppb

###### For LLS-C2 PTP is required to simultaneously meet two limits:

<div class="table-wrapper" markdown="block">

* + - * 1. max|TEL|: 1420 ns

</div>
        2. Maximum frequency error as result of the input noise as per CUS-Plane Specification [2] Table 11.3.2.1-1 expressed as MTIE in Table H.2.4-3, Table H.2.4-4 and Figure H.2.4-4 (MTIE limit at the input to an O-RU, maximum of O-DU class A and B limits, as worst case)

###### For LLS-C3 PTP is required to simultaneously meet two limits:

<div class="table-wrapper" markdown="block">

* + - * 1. max|TEL|: +- 1100 ns, according to max|TEL =600 ns specified in ITU-T G.8271.1 [7] clause 7.3.2 (see NOTE 4 in CUS-Plane Specification [2] Table 11.3.2.2-1), increased by 500 ns (also 0.1Hz low-pass filtered) to account for the short holdover period

</div>
        2. Frequency error budget allocation according to CUS-Plane Specification [2] Table 11.3.2.2-1, noise input to the O-RU is 126 ns dTE plus 2 ppb. This can be expressed in terms of unfiltered MTIE as shown in Table H.2.5-4 and Figure H.2.5-4 of the CUS-Plane Specification [2]. NOTE: Longer holdover periods resulting in a larger MTIE limit for larger observation intervals, might be considered in networks where the time error in normal operation (e.g. due to cTE) is smaller than assumed by ITU-T G.8271.1 [7].

###### For SyncE the following applies:

* + - * 1. For LLS-C2 and LLS-C3, the noise at the input of the O-RU in Normal Operation is as per ITU-T G.8262 [29] clause 9.1.
        2. If the O-RU implementation supports ITU-T G.8262.1 [30] Level 1 only, the noise at the input of the O-RU would be as per ITU-T G.8262.1 [30] clause 9.1. This is acceptable for cases where the O-RU is expected to be deployed in enhanced synchronous Ethernet networks only.
        3. For the case of LLS-C1 configuration, the synchronous Ethernet wander can be based on the O- DU output, i.e. signal with 15ppb frequency error (that is the worst case as related to class A O- DU).

NOTE: The CUSM-Plane Emulator may be configured to generate the time and frequency error of PTP and SyncE, either simultaneously or sequence. Presenting noise at SyncE and PTP inputs simultaneously represents a more realistic option to verify expected performance in a real network, so this set up is recommended. In this case, the additional noise on SyncE stimulus is expected to not increase the PTP stimulus noise above the specified time error limits.

i.e.NOTE: CU and M plane messages do not need to be modified. It has no impact if they are delayed by the time and frequency error applied in this test.

Two methods are proposed to define the PTP test patterns

1. In the first method, the time error added to the input signal shall follow a sinusoidal waveform with amplitude (A) and frequency (f). Three such signal frequencies are specified for the test, but intermediate ones can be used for testing.

<div class="table-wrapper" markdown="block">

For LLS-C1 they need to maintain the following relationship between amplitude and frequency: A[ns] = 15[ppb]/(2\*pi\*f[Hz]) and simultaneously meet the 2a conditions above. An additional constant time error may be added to the sinusoidal waveform for each frequency, so that the max|TEL| reaches the maximum value of 1420 ns: cTE[ns] = 1420[ns] - A[ns].

</div>

<div class="table-wrapper" markdown="block">

For LLS-C2 they need to meet the conditions in 2b above for MTIE. An additional constant time error may be added to the sinusoidal waveform for each frequency, so that the max|TEL| reaches the maximum value of 1420ns: cTE[ns] = 1420[ns] - A[ns].

</div>

For LLS-C3 they need to generate the worst-case conditions in 2c above for MTIE. An additional constant time error may be added to the sinusoidal waveform for each frequency, so that the maximum time error reaches the maximum value of 1100ns: cTE[ns] = 1100[ns] - A[ns].

Testing any higher frequency input noise than the ITU cut-off frequency (0.1Hz) would require considering filtered and unfiltered limits. It is therefore outside the scope of this document and such performance must be validated by vendors and documented in test reports.

The following table and graph show the three sinusoidal time error waveforms to be used for testing each configuration:

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- |
| **Frequency [Hz]** | **LLS-C1** | | **LLS-C2** | | **LLS-C3** | | **Test**  **duration [s]** |
| **Sine wave amplitude [ns]** | **Constant Time Error**  **[ns]** | **Sine wave amplitude [ns]** | **Constant Time Error**  **[ns]** | **Sine wave amplitude [ns]** | **Constant Time Error**  **[ns]** |  |
| 0.003362 | 710 | 710 | 833 | 587 | 187 | 913 | 595 (2 periods) |
| 0.010 | 239 | 1181 | 328 | 1092 | 108 | 992 | 500 (5 periods) |
| 0.100 | 24 | 1396 | 78 | 1342 | 68 | 1032 | 50 (5 periods) |
| **NOTE:** The sine wave amplitudes are zero to peak values. Dynamic time error values (dTE) are peak-to-peak values and equal two times the given sine wave amplitude. | | | | | | | |

</div>

###### Table 3.3.3-1 Sine wave amplitude and Time Error Limits for Test Signal

![]({{site.baseurl}}/assets/images/f15685ca0c08.png)![]({{site.baseurl}}/assets/images/dd5b96c906ee.png)![]({{site.baseurl}}/assets/images/ee8275ff7c00.png)![]({{site.baseurl}}/assets/images/f509643a2cdc.png)![]({{site.baseurl}}/assets/images/fc326bb87327.png)![]({{site.baseurl}}/assets/images/7057e6af9890.png)

O-RU input sine wave amplitude vs. frequency

833

1000

710

328

239

187

78

100

108

68

24

10

0.001

0.01

0.1

1

Frequency [Hz]

LLS-C1 LLS-C2 LLS-C3

Sine wave amplitude [ns]

**Figure 3.3.3-1 Graph of sine wave amplitude limits for Test Signal**

The transition between the sinusoidal waveforms shall not cause the input noise to exceed the limits defined for the test case.

1. An alternative and more representative method for the O-RU input is to apply a noise pattern that meets the applicable O-DU output or network limit mask.

For LLS-C1 the noise pattern must meet the conditions in 2a above. This can be expressed in terms of unfiltered MTIE as shown in Table H.2.4.1 and Figure H.2.4-2 ( O-DU Output Class A LLS-C1 (unfiltered) from CUS-Plane specification [2]

For LLS-C2 the noise pattern must meet the conditions in 2b above. For LLS-C3 the noise pattern must meet the conditions in 2c above.

The method to generate the noise patterns is described in ITU-T G.8273.2 [26]Appendix IX. The advantage of this method is that it is more representative of real network conditions and transients, and therefore a more effective test of the O-RU under emulated network conditions. The pattern can be constructed to include both dTE and cTE consistent with the limits for maximum time error at the input to the O-RU.

###### Pass/Fail Criteria (expected results)

The results as measured for conducted or non-conducted (OTA) on the Air interface from the two (ideal and normal) conditions specified above shall be less than or equal to these values:

1. Ideal Case:

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Requirement** | **Metric** | **LLS-C1 & LLS-C2 Limit** | **LLS-C3 Limit** |
| a | Maximum frequency error | +-35 ppb (see Note 1) | +-48 ppb (see Note 3) |
| b | Maximum time error | +/**-**80ns (see Note 2) | +/**-**80ns (see Note 4) |
| NOTE 1: 3GPP limit 50 ppb - 15ppb = 35 ppb, where 15ppb is the error of a class A O-DU (worst-case).  NOTE 2: 3GPP limit 1500 ns - CUS spec 1420ns = 80 ns, where 1420ns is the error allocated to the O-DU for LLS-C1 and LLS C2  NOTE 3: 50ppb - 2ppb PRTC holdover = 48ppb (PRTC holdover allowance is removed because the ideal case is not a holdover scenario). At high frequencies, error is mostly generated by the O-RU clock.  NOTE 4: 80ns is the time error budget allocation for the O-RU in CUS specification Table 11.3.2.2-1. | | | |

</div>

1. Normal Operation Case:

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Requirement** | **Metric** | **LLS-C1 & LLS-C2 Limit** | **LLS-C3 Limit** |
| a | Maximum  frequency error | +-50 ppb (3GPP limit) | +-50 ppb (3GPP limit) |
| b | Maximum time  error | +-1500ns (3GPP limit) | +-1180 ns (see Note 1 and Note 2) |
| NOTE 1: +-1180 ns limit is based on ITU-T G.8273.2 [26]. Clause 7.3.2, including short holdover periods.  NOTE 2: Use of the remaining budget (e.g. for O-RU holdover or longer network holdover) between this limit and the 3GPP limit of 1500 ns is not within scope of this conformance test. | | | |

</div>

As multiple O-RUs are not tested, there is no distinction between relative and absolute time error measurement.

**NOTE:** This test as currently defined does not provide any allowances for measurement error. It is left to the tester to factor in any errors based on the test equipment used. Defining the allowed measurement error is for future study.

When the 1 PPS output is available, an optional diagnostic test can be performed on this interface. This test's results provide an indication of the overall O-RU performance by more easily measuring the capabilities of the O- RU's synchronization implementation. For this test example reference target requirements for the 1PPS output during the two conditions (ideal and normal) have been provided in the following sections.

1. Ideal Case:

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Requirement** | **Metric** | **LLS-C1 & LLS-C2 Limit** | **LLS-C3 Limit** |
| a | Maximum frequency error | +-21 ppb (see Note 1) | +-21 ppb (see Note 3) |
| b | Maximum time error | +/-60ns (see Note 2) | +/-60ns (see Note 2) |
| NOTE 1: This case may require further analysis; a conservative value is currently considered. For the ideal operation case, the RMS accumulation of the MTIE and of the high frequency noise specified in ITU-T G.8273.2 [26]. class B clock (40 ns and 70 ns respectively) is used to define the 81 ns plateau. This is then combined with a 21 ppb slope on the shorter observation intervals.  NOTE 2: (3GPP limit 1500 ns - CUS spec 1420ns -20 ns = 60 ns, where 1420ns is the error allocated at the input of the O-RU for LLS-C1 and LLS-C2 (in case of regular O-RU), and 20ns is the time error assumed for the radio part of the O-RU (RF)).  NOTE 3: This is the same value used for LLS-C1 and LLS-C2 (the test set up is identical in the ideal case and it should be possible to assume the same implementation of the O-RU is used for LLS-C3 and LLC1/LLS-C2). In principle a worst case value could be based on Table H.2.5-3 (30ppb), but removing the contribution from the network, that would not be far from the value of 21ppb. Due to that and considering the diagnostic purpose of this test, 21ppb can be applied to LLS-C3. The same limits can also be used when applying the alternative method to verify the maximum frequency accuracy for the normal and ideal operation (see Figure  3.3.3-2, Table 3.3.3-2, Table 3.3.3-3). | | | |

</div>

1. Normal Operation Case:

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **Requirement** | **Metric** | **LLS-C1 & LLS-C2 Limit** | **LLS-C3 Limit** |
| a | Maximum frequency error | +-36 ppb (see Note 1) | +-32 ppb (see Note 3) |
| b | Maximum time error | +-1480ns (see Note 2) | +-1160 ns (see Note 4) |
| NOTE 1: ((3GPP limit 50 ppb - 14ppb = 36 ppb, where 14ppb is the error assumed for the radio part of the O-RU (RF))  NOTE 2: (3GPP limit - 20 ns allocated to the RF).  NOTE 3: 50 ppb - 18 ppb = 32 ppb (where 18 ppb is the error assumed for the radio part of the O-RU (RF), see table H.2.5-3).  NOTE 4: 1180ns - 20 ns = 1160 ns (where 20 ns is allocated to the RF and 1080 ns is the output in case of Normal operation case). | | | |

</div>

**NOTE:** An example method to verify the maximum frequency accuracy of the 1PPS output for the normal and ideal operation is to ensure that the MTIE of the output is below the masks described in Figure 3.3.3-2, Table 3.3.2-2, Table 3.3.3-3, Table 3.3.3-4 and Table 3.3.3.-5.

![]({{site.baseurl}}/assets/images/85efb1aeb55c.png)

**MTIE (ns)**

10000

1000

100

10

1

0.1

**?** **(s)**

0.1 1 10 100 1000

Ideal operation

LLS-C2 normal operation

LLS-C1 normal operation

LLS-C3 normal operation

**Figure 3.3.3-2 1PPS output MTIE, normal and ideal operation case (measured on the unfiltered signal)**

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Observation Interval (s)** | **MTIE limit unfiltered (ns) LLS-C1, LLS-C2 and LLS-C3** |
| ? ? ? <= 3.8 | 21 ? |
| ? > 3.8 | 81 (NOTE 1) |
| NOTE 1: The limit is derived assuming a class B T-TSC in the O-RU with  2 2 2 2  dTE=sqrt(dTEL +dTEH )=sqrt(40 +70 )=81ns | |

</div>

**Table 3.3.3-2: 1PPS output MTIE, Ideal operation (measured on the unfiltered signal)**

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Observation Interval (s)** | **MTIE limit unfiltered (ns) LLS-C1** |
| ? ? ? <= 82.5 | 36 ? |
| ? > 82.5 | 2969 (NOTE 1) |
| NOTE 1: The limit is derived from CUS-Plane Specification [2]**.**Table H.2.4-1 unfiltered LLS-C1 mask adding an assumed class B T-TSC in the O-  2 2 2 2  RU with dTE=sqrt(dTEL +dTEH )=sqrt(40 +70 )=81ns | |

</div>

**Table 3.3.3-3 LLS-C1 1PPS output MTIE limit, Normal operation (measured on the unfiltered signal)**

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Observation Interval (s)** | **MTIE limit unfiltered (ns) LLS-C2** |
| ? ? ? <= 79 | 36 ? |
| ? > 79 | 2845 (NOTE 1) |
| NOTE 1: The limit is derived from CUS-Plane Specification [2]**.**Table H.2.4-4 adding an assumed class B T-TSC in the O-RU with  2 2 2 2  dTE=sqrt(dTEL +dTEH )=sqrt(40 +70 )=81ns | |

</div>

**Table 3.3.3-4 LLS-C2 1PPS output MTIE limit, Normal operation (measured on the unfiltered signal)**

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Observation Interval (s)** | **MTIE limit unfiltered (ns) LLS-C3** |
| ? ? ? <= 6.9 s | 32 ? |
| 6.9 s ? ? <= 500 s | 207 + 2 ? |
| ? > 500 s | 1207 |
| NOTE 1: The limit is derived from CUS-Plane Specification [2]**.**Table H.2.5-4 adding an assuming a class B T-TSC in the O-RU with  2 2 2 2  dTE=sqrt(dTEL +dTEH )=sqrt(40 +70 )=81ns | |

</div>

**Table 3.3.3-5 LLS-C3 1PPS output MTIE limit, Normal operation (measured on the unfiltered signal)**

The diagnostic test can be considered passed if values are within these limits.

The diagnostic test should be considered not passed when the measured values are too close to the pass / fail criteria applicable at the air interface as defined above (point 1 and 2 of the Pass/Fail criteria). The actual criteria should be defined case by case depending on the characteristics of the O-RU under test. O-RU vendors should provide indication on a target performance in this case.

### Performance test of O-RU using LLS-C4

Testing of the O-RU in an LLS-C4 topology is for future study.

### Functional test of O-DU Synchronized from ITU-T G.8275.1 profile PRTC/T- GM (LLS-C1/C2/C3/C4)

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to validate that an O-DU is correctly synchronizing to a timing reference delivering by PTP (and optionally SyncE) when using ITU-T G.8275.1 [5] profile and that the O-DU correctly reports its status based on the nominal or degraded synchronization conditions generated by CUSM Emulator.

This test covers all cases where O-DU is synchronized using the Ethernet interface, whether the PRTC/T-GM is:

* 1. Local (direct link from a co-located equipment): case c in Figure 3.3.1-1
  2. Remote (network connection from a distant equipment): case d in Figure 3.3.1-1

These O-DU functional tests do not consider configurations which have multiple sources. It is assumed the O-DU has only a single synchronization source. Multiple sources such as a Multiport PTP/SyncE are for further study.

###### Test Entrance Criteria

O-DU is connected to the sync stimuli directly as shown in Figure 3.3.1-3 via the Ethernet Test Port.

###### Test Methodology

1. **Initial Conditions**

This test uses the O-DU (DUT), a sync tester setup to generate stimulus for the O-DU (DUT) and retrieve its sync status. For LLS-C1/C2 the fronthaul ports must be enabled as ITU-T G.8275.1 [5] synchronization master.

###### Procedure

Three conditions must be tested:

**Startup:** The CUSM-E is configured to act as a clock, with PTP and SyncE ports in passive state (no messages sent).

**Nominal:** The CUSM-E is configured to start acting as either a PTP master compliant with the ITU-T G.8275.1 [5] profile advertising LOCKED status with nominal clockClass and clockAccuracy. If SyncE is to be tested CUSM-E is configured to act as a clock, with SyncE ports in master state, compliant to ITU-T G.8264 [36] profile advertising nominal SSM value as specified by ITU-T G.8275.1 [5].

**Degraded:** There are two levels of degraded conditions for both PTP and SyncE that the CUSM-E can be configured to.

* 1. The first degradation level is where the CUSM-E is configured to act as a clock, with PTP and SyncE ports in master state, compliant to ITU-T G.8275.1 [5] profile, and sending configured clockClass and/or SSM values within the O-DU's configured accepted limits via the M-plane.
  2. The second degradation level is where the same clockClass and/or SSM values are sent by CUSM-E outside the O-DU's configured accepted limits.

To cover the all the relevant PTP functional scenarios the test sequence listed in Table 3.3.5-1 steps through the Startup/Nominal/Degraded states in a sequence. Since SyncE is optional, there are two columns, one for PTP status and a second for SyncE. In this table each of the status items (Startup, Nominal, Degraded) correspond to the conditions defined above.

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **Step** | **PTP Status:** | **SyncE Status (if applicable): SSM** |
| 1. | Startup: no clockclass | Startup: no SSM/QL |
| 2. | Nominal clockclass=6 | Nominal QL= (see Note 1) |
| 3. | Degraded clockclass but within the O-DU's configured accepted range. | Nominal QL= (see Note 1) |
| 4. | Degraded clockclass outside the O-DU's configured accepted range. | Nominal QL= (see Note 1) |
| 5. | Degraded clockclass outside the O-DU's configured accepted range. | Degraded QL outside the O-RU's configured accepted range. |
| 6. | Nominal clockclass=6 | Nominal QL= (see Note 1) |
| 7. | Nominal clockclass=6 | Degraded QL but within the O-DU's configured accepted range. |
| 8. | Nominal clockclass=6 | Degraded QL outside the O-DU's configured accepted range. |
| 9. | Nominal clockclass=6 | Nominal QL = (see Note1) |
| 10. | S-Plane lost, no message | S-Plane lost, no message |

</div>

**Note 1**: For SyncE, Nominal QL is what is determined as the best acceptable configured value by the O-DU

###### Table 3.3.5-1 O-DU Functional Conformance Test Steps with PTP and SyncE Reference

1. **Pass Fail Criteria (expected results)**

The acceptance criterion is that the status reported by the O-DU for the steps defined in above procedure matches the results described in the 2 tables which follow, Table 3.3.5-2 and Table 3.3.5-3. The tables cover 2 different use cases. 1) PTP without SyncE, and 2) PTP with SyncE. The test engineer should choose the appropriate table(s) based on the equipment's intended application(s).

Each of the tables are formatted similarly. The left two columns indicate the procedural steps as defined in Table 3.3.5-1. The right columns list the O-DU status parameters that are defined in the M-Plane specification [3] (chapter 13 Synchronization Aspects) and WG5 YANG Model [27] (o-ran-synchronization yang model). These parameters are queried from the test O-DU and their values should match those listed in the tables.

When an O-DU's selected time source is PTP and optional SyncE, the parameters to be checked are: Sync-state, PTP sync-source-status, PTP clock-class, SyncE sync-source-status, SyncE quality-level.

In LLS-C1 and LLS-C2 and regardless of the selected time source, the PTP Master sync-source-status, PTP Master clock class, SyncE Master sync-source-status, and SyncE Master Quality Level shall also be monitored.

For PTP master clock-class, optional SyncE quality-level and master quality-level, the "Rcvd Value" table entry indicates that the value read should be the same as the one received by the O-DU (except in Startup and Disconnected modes when there is no such received value and the default one is reported).

In case of local failure in the O-DU then O-DU should use FREERUN mode.

These tests do not consider configurations which have multiple sources. This is for further study.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Step** | **O-DU PTP Status** | **PTP Input Parameters** | | | **PTP/SyncE Output Parameters (Note 5)** | | | |
| **sync -state** | **ptp**  **sync-source-status** | **ptp clock-class** | **ptp master**  **sync-source-status** | **ptp master clock-class** | **synce master**  **sync-source-status** | **synce master quality-level** |
| 1. | Startup | FREERUN | NOT\_ USABLE | 248 or 255 | NOT\_ USABLE | 248 | NOT\_ USABLE | Note 1 |
| 2. | Nominal | LOCKED | IN\_USE | Rcvd Value | IN\_USE | Rcvd Value | IN\_USE | PRC |
| 3. | Degraded, within range | LOCKED | IN\_USE | Rcvd Value | IN\_USE | Rcvd Value | IN\_USE | Note 1 |
| 4. - 5. | Degraded, outside range. | HOLDOVER  (Note 2) then FREERUN | NOT\_ USABLE | Rcvd Value | IN\_USE  (Note 2) then NOT\_ USABLE | Notes 1, 4 | IN\_USE (Note 2) then NOT\_ USABLE | Note 1 |
| 6. - 9. | Nominal | LOCKED | IN\_USE | Rcvd Value | IN\_USE | Rcvd Value | IN\_USE | PRC |
| 10. | None (disconnected) | HOLDOVER  (Note 2) then FREERUN | NOT\_ IN\_USE | Notes 1, 4 | IN\_USE  (Note 2) then  NOT\_ USABLE | Notes 1, 4 | IN\_USE (Note 2) then NOT\_ USABLE | Note 1 |

</div>

**NOTE 1**: This is not specified by CUS-Plane and is implementation dependent.

**NOTE 2**: HOLDOVER mode is optional and depends on internal O-DU design. After HOLDOVER (either assisted by SyncE or relying on local oscillator) expires, then the O-DU goes to FREERUN. In CUS- Plane specification [2] the FREERUN state is defined to occur at start up prior to O-DU acquiring LOCK, and it also occurs when O-DU is in HOLDOVER and the reference is no longer within specification.

**NOTE 3**: in case of local failure inside the O-DU.

**NOTE 4**: as per ITU-T G.8275.1 [5], degraded clockclass values in HOLDOVER may be either, (a) 7, then 140 or150 or 160, for an O-DU acting as a Grandmaster clock, or (b) 135, then 165 for an O-DU behaving as a Boundary clock.

**NOTE 5**: PTP/SyncE output parameters are optional for LLS-C3\C4. SyncE output parameters are optional for LLS-C1 in the case where O-RU does not use SyncE. For LLS-C2 PTP/SyncE Output Parameters are required.

###### Table 3.3.5-2 O-DU LLS-C1/C2/C3/C4 Functional Conformance Test Results with PTP Reference without SyncE Assistance

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Step** | **O-DU PTP and SyncE Status** | **PTP/SyncE Input Parameters** | | | | | **PTP/SyncE Output Parameters (Note 6)** | | | |
| **sync -state** | **ptp sync-source-status** | **ptp clock-class** | **synce sync-source- status** | **synce quality-level** | **ptp master sync- source-status** | **ptp master clock-class** | **synce master sync- source-status** | **synce master quality- level** |
| 1. | Startup | FREERUN | NOT\_ USABLE | 248 or  255 | NOT\_ USABLE | Note 1 | NOT\_ USABLE | 248 | NOT\_ USABLE | Note 1 |
| 2. | PTP: Nominal SyncE: Nominal | LOCKED | IN\_USE | Rcvd Value | IN\_USE or USABLE | Rcvd Value | IN\_USE | Rcvd Value | IN\_USE | Rcvd Value |
| 3. | PTP: Degraded, in range  SyncE: Nominal | LOCKED | IN\_USE | Rcvd Value | IN\_USE or USABLE | Rcvd Value | IN\_USE | Rcvd Value | IN\_USE | Rcvd Value |
| 4. | PTP: Degraded, outside range. SyncE: Nominal | HOLD OVER  (Note 2) then FREERUN | NOT\_ USABLE | Rcvd Value | IN\_USE | Rcvd Value | IN\_USE  (Note 2) then NOT\_  USABLE | Notes 1, 4 | IN\_USE  then NOT\_ USABLE | Rcvd Value |
| 5. | PTP: Degraded, outside range. SyncE: Degraded, outside range. | HOLD OVER  (Note 2) then FREERUN | NOT\_ USABLE | Rcvd Value | NOT\_ USABLE | Rcvd Value | IN\_USE  (Note 2) then NOT\_ USABLE | Notes 1, 4 | IN\_USE  then NOT\_ USABLE | Rcvd Value |
| 6. | PTP: Nominal SyncE: Nominal | LOCKED | IN\_USE | Rcvd Value | IN\_USE or USABLE | Rcvd Value | IN\_USE | Rcvd Value | IN\_USE | Rcvd Value |
| 7. | PTP: Nominal SyncE: Degraded, in range. | LOCKED | IN\_USE | Rcvd Value | IN\_USE or USABLE | Rcvd Value | IN\_USE | Rcvd Value | IN\_USE | Rcvd Value |
| 8. | PTP: Nominal SyncE: Degraded, outside range. | Implementati on Specific (Note 5) | IN\_USE | Rcvd Value | NOT\_ USABLE | Note 1 | IN\_USE or (Note 2) NOT\_ USABLE | Rcvd Value | Note 1 | Note 1 |
| 9. | PTP: Nominal SyncE: Nominal | LOCKED | IN\_USE | Rcvd Value | IN\_USE or USABLE | Rcvd Value | IN\_USE | Rcvd Value | IN\_USE | Rcvd Value |
| 10. | PTP: None (disconnected) SyncE: None (disconnected) | HOLDOVE R  (Note 2) then FREERUN | NOT\_ IN\_USE | Notes 1, 4 | NOT\_ IN\_USE | Note 1 | IN\_USE  (Note 2) then NOT\_ USABLE | Notes 1, 4 | IN\_USE  then NOT\_ USABLE | Note 1 |

</div>

**NOTE 1**: This is not specified by CUS-Plane and is implementation dependent.

**NOTE 2**: HOLDOVER mode is optional and depends on internal O-DU design. After HOLDOVER (either assisted by SyncE or relying on local oscillator) expires, then the O-DU goes to FREERUN. In CUS- Plane specification [2] the FREERUN state is defined to occur at start up prior to O-DU acquiring LOCK, and it also occurs when O-DU is in HOLDOVER and the reference is no longer within specification.

**NOTE 3**: in case of local failure inside the O-DU.

**NOTE 4**: As per ITU-T G.8275.1 [5], degraded clockclass values in HOLDOVER may be either, (a) 7, then 140 or150 or 160, for an O-DU acting as a Grandmaster clock, or (b) 135, then 165 for an O-DU behaving as a Boundary clock.

**NOTE 5**: Depending on O-DU implementation the Sync-state may be LOCKED or "HOLDOVER (Note 2) then FREERUN."

**NOTE 6**: PTP/SyncE output parameters are optional for LLS-C3\C4. SyncE output parameters are optional for LLS-C1, in the case where O-RU does not make use of SyncE. For LLS-C2 PTP/SyncE Output Parameters are required.

**Table 3.3.5-3 O-DU LLS-C1/C2/C3/C4 Functional Conformance Test Results with PTP Reference With SyncE Assistance**

### Functional test of O-DU Synchronized from Embedded or Local non-PTP PRTC (LLS-C1/C2/C3/C4)

###### Test Description and Applicability

This test is CONDITIONAL-MANDATORY. This test is mandatory if the DUT contains:

* 1. Either an O-DU with an embedded local PRTC using a GNSS receiver (see case a in Figure 3.3.1-1)
  2. Or an O-DU connected by a 1PPS + serial interface (e.g. ITU-T G.8271 [31], see case b in Figure 3.3.1-1) to a co-located PRTC provided by the test setup.

The purpose of this test is to validate that an O-DU is correctly synchronizing to a non-PTP local time source and that the O-DU correctly reports its status based on the nominal or degraded synchronization conditions generated by CUSM Emulator.

This O-DU functional test does not consider configurations which have multiple time sources.

###### Test Entrance Criteria

O-DU is connected to the time sync stimuli directly as shown in Figure 3.3.1-3 via the GNSS RF signal or local PRTC output signals.

###### Test Methodology

1. **Initial Conditions**

This test uses a time reference, synchronization tester setup and SMO/M-Plane functions to generate stimulus for the O-DU (DUT) and then retrieves the O-DU's sync status. For LLS-C1/C2 the fronthaul ports must be enabled as an ITU-T G.8275.1 [5] synchronization master.

###### Procedure

Three conditions must be tested:

**Startup:** The CUSM-E is configured to act as a clock, with its output signals (either GNSS RF or PRTC ones) not started sending time information to DUT.

**Nominal:** The CUSM-E is configured to start delivering output signals (either GNSS RF or PRTC ones) in LOCKED status with optimal time and state information.

**Degraded:** The degraded conditions for GNSS receiver's or PRTC output are not well defined. There are no defined "slightly degraded" or "severely degraded" signal indications. Thus, the indication of a degraded state may be implementation specific. Further, a degraded GNSS scenario is the only condition which causes the O-DU to lose its locked status.

For GNSS RF signals, one proposal is to simulate the reception of a single satellite with a low signal level. However, all GNSS receivers may not offer the same sensitivity and robustness to this scenario.

For GNSS-based PRTC output signals, one proposal is to advertise an alarm on poor signal status, but every protocol may have its own alarm mapping

To cover the all the relevant functional scenarios the test sequence listed in Table 3.3.6-1 steps through the Startup/Nominal/Degraded states in order. In this table each of the status items corresponds to the conditions defined above.

<div class="table-wrapper" markdown="block">

|  |  |
| --- | --- |
| **Step** | **GNSS RF or PRTC output Status** |
| 1. | Startup Status (and GNSS Acquiring Mode if implemented) Note 1. |
| 2. | Nominal |
| 3. | Degraded, |
| 4. | Nominal |
| 5. | Failed (no signal) |

</div>

**Note 1:** After a power cycle it may take some time for GNSS receiver or PRTC to complete self-survey and progress to Nominal mode.

###### Table 3.3.6-1 O-DU Functional Conformance Test Steps with GNSS Reference

1. **Pass Fail Criteria (expected results)**

The acceptance criterion when the O-DU uses GNSS is that the status reported by the O-DU for the steps defined in the above procedure in Table 3.3.6-1 matches the results described in Table 3.3.6-2. The left column of this table indicates the procedural step numbers as defined in Table 3.3.2-8. The second column summarizes the O-DU status for each step. The right 7 columns list the O-DU status parameters as they are defined in the M-Plane specification [3] (chapter 13 Synchronization Aspects) and relevant YANG models. These columns show the required values of the parameters queried from the test O-DU under test.

When an O-DU's selected time source is GNSS and optional SyncE, the input parameters to be queried are: Sync- state, GNSS sync-source-status, GNSS sync-status.

Regardless of the selected time source the output parameters which are monitored are the PTP Master sync-source- status, PTP Master clock-class, SyncE Master sync-source-status, and SyncE Master quality-level. Specifically, for LLS-C1 configuration the emission of SyncE by O-DU is only mandatory if O-RU requires it.

SyncE assistance for GNSS is not considered in this test case and is left for future study.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **Step** | **O-DU GNSS, Status** | **GNSS Input Parameters** | | | **PTP/SyncE Output Parameters** | | | |
| **sync -state** | **gnss sync-source-status** | **gnss sync-status** | **ptp master sync- source-status** | **ptp master clock-class** | **synce master**  **sync-source-status** | **synce master quality-level** |
| 1. | Startup | FREERUN | USABLE | ACQUIRING- SYNC | NOT\_ USABLE | 248 | NOT\_ USABLE | Note 1 |
| 2. | Nominal | LOCKED | IN\_USE | SYNCH- RONIZED | IN\_USE | 6 | IN\_USE | PRC |
| 3. | Degraded | HOLDOVER  (Note 2) then FREERUN | NOT\_  IN\_USE then NOT\_  USABLE | SYNCH- RONIZED | NOT\_ IN\_USE  (Note 2) then NOT\_  USABLE | (Notes 1, 3) | NOT\_ IN\_USE  (Note 2) then NOT\_  USABLE | Note 1 |
| 4. | Nominal | LOCKED | IN\_USE | SYNCH- RONIZED | IN\_USE | 6 | IN\_USE | PRC |
| 5. | Failed (no signal) | HOLDOVER  (Note 2) then FREERUN | NOT\_ IN\_USE | ANTENNA- DISCON- NECTED | NOT\_ IN\_USE  (Note 2) then NOT\_ USABLE | (Notes 1, 3) | NOT\_ IN\_USE  (Note 2) then NOT\_ USABLE | Note 1 |

</div>

**Note 1**: This is not specified by CUS-Plane and is implementation dependent.

**Note 2**: After HOLDOVER (relying on local oscillator) expires, then O-DU goes to FREERUN. In CUS-Plane specification the FREERUN state is defined to occur at start up prior to O-DU acquiring LOCK, and it also occurs when O-DU is in HOLDOVER and the reference is no longer within specification.

**Note 3:** As per ITU-T G.8275.1 [5], degraded clockclass values in HOLDOVER may be 7, then 140 or 150 or 160, for an O-DU acting as a Grandmaster clock.

**Table 3.3.6-2 O-DU LLS-C1/C2/C3/C4 Functional Conformance Test Results with GNSS Reference**

### Performance test of O-DU Synchronized from either Local or Remote PRTC using ITU-T G.8275.1 PTP Profile (LLS-C1/C2/C3/C4)

###### Test Description and Applicability

This test scope is relevant to LLS-C1 to LLS-C4.

This test is CONDITIONAL-MANDATORY for O-DUs which support LLS-C1, LLS-C2 and do not only derive their timing information from an embedded PRTC.

This test is OPTIONAL for O-DUs that only support LLS-C3 or LLS-C4 topology and is dependent on the availability of a measurement point. For equipment that only supports LLS-C3 or LLS-C4, if the measurement point is not available, then the O-DU shall document that this conformance test cannot be performed.

This test validates that an O-DU correctly synchronizes to incoming S-Plane timing information, from a CUSM- plane Emulator which is emulating:

* 1. Either a local PRTC (using 1PPS+ serial link interface, e.g. ITU-T G.8271 [31], see case b in Figure 3.3.1-1) or local PRTC/T-GM (PTP and optionally SyncE, see case c in Figure 3.3.1-1) and meeting ITU-T G.8271.1

[7] reference point B network limits.

* 1. Or a remote PRTC/T-GM (PTP and optionally SyncE, see case d in Figure 3.3.1-1) meeting ITU-T G.8271.1

[7] reference point C network limits. The CUSM-E may be configured to inject normal operating condition noise into the S-Plane timing information. Frequency and time error measured at the output of the O-DU must be within specified limits, which may differ between LLS-C1-C4 configurations.

As an example, the local reference link may use ITU-T G.8271 [31] Annex A "1PPS+ToD" protocol.

This test covers the two classes defined by CUS -plane spec for PTP and SyncE for LLS -C1 and LLS -C2 (class A has +-15 ppb frequency error limit; class B has +-5 ppb limit).

Additional tests may be required to verify the capability to support all possible fronthaul network SyncE architectures as per Recommendation ITU-T G.8261 [10] (e.g., for the case of an O-DU clock part of an ITU-T G.803 [37] synchronization reference chain, wander accumulation should be controlled to guarantee that the applicable network limits are met along the chain). The present tests in this subclause do not address these details.

This test is defined assuming a Full Timing Support (FTS) profile used on all PTP ports of the O-DU. Partial timing support is left for further study.

The test intent is to exercise S-Plane performance under typical/normal operating condition. The test is not intended to exercise worst case conditions. It is the vendor's responsibility to make sure that limits defined in the test are also met in worse-case field conditions. Variable temperature, PTP PDV tolerance and SyncE jitter/wander tolerance, holdover and transients are beyond the scope of the CUS-Plane specification [2].

###### Test Entrance Criteria

Conformance Functional test 3.3.5 has successfully passed.

O-DU is connected to CUSM-Plane Emulator's time reference output interface.

###### Test Methodology

1. **Initial Conditions**

These tests configure the DUT (O-DU) using any available method. The O-DU configuration depends on which LLS-C1-C4 topologies are to be tested and also it depends on whether the PRTC is local or remote.

For LLS-C1 and LLS-C2 configuration, the test is set up to measure frequency and time error on one of the Ethernet master fronthaul ports of the DUT.

For LLS-C3 and LLS-C4 configuration, the test is configured to measure time error on a measurement port of the O-DU, typically a 1PPS signal if available or an unused Ethernet port.

CUSM-Plane Emulator is configured to act as a clock, with PTP ports in master state, compliant to ITU-T G.8275.1 [5] profile advertising LOCKED status with nominal clockClass and clockAccuracy.

CUSM-Plane Emulator is configured to act as a clock, with SyncE ports in master state, compliant to ITU-T G.8264 [36] profile advertising nominal SSM value.

CUSM-Plane Emulator is configured to deliver 1PPS and act as a PRTC advertising LOCKED status over its serial link with nominal quality level (whatever protocol is used, ITU-T G.8271 [31] or proprietary).

Once the DUT has been configured, the DUT shall have achieved frequency and phase lock prior to starting the test.

###### Procedure:

Unlike the functional test defined in clause 3.3.5, where start-up / nominal / degraded scenarios are tested, only nominal scenarios with *normal* operation input noise are tested in this section.

* + **Normal Operation:** The CUSM-Plane Emulator provides an input stimulus with some added noise that is "within normal operating limits." O-DU inputs as specified in CUS-Plane Specification [2].

<div class="table-wrapper" markdown="block">

The CUS requirements and subsequent PTP test patterns specify absolute value for constant time error (|cTE|). Dynamic time error (dTE) implicitly varies positive/negative, but cTE does not. It is possible that an O-DU can pass the test with positive cTE, and fail with negative cTE (or vice versa). Therefore, regardless of which method is used for the PTP test pattern, this test shall be performed twice: once with the CUSM-Plane Emulator generating positive cTE in the PTP test pattern, and again with the CUSM-Plane Emulator generating negative cTE in the PTP test pattern. The pass/fail criteria are the same for both tests.

</div>

If SyncE is used for the input stimulus (Figure 3.3.1-1 (c) and (d)), the following applies:

* + The noise is as per ITU-T G.8262 clause 9.1 [29].
  + If the O-DU implementation supports ITU-T G.8262.1 Level 1 only, the noise is as per ITU-T G.8262.1 clause 9.1 [30]. This is acceptable for cases where the O-DU is expected to be deployed in enhanced synchronous Ethernet networks only.

**NOTE:** The CUSM-Plane Emulator may be configured to generate time and frequency noise on PTP and SyncE, either simultaneously or sequence. Presenting noise at SyncE and PTP inputs simultaneously represents a more realistic option to verify expected performance in a real network, so this set up is recommended. In this case, the additional noise on SyncE stimulus should not increase the PTP stimulus noise above the specified time error limits.

Two methods are proposed to define the PTP test patterns:

<div class="table-wrapper" markdown="block">

1. In the first method, the TEL stimulus is split between dynamic (|dTEL|) and constant (|cTE|) and is shown in Table 3.3.7-1. The maximum absolute time error (max|TEL|) is

</div>
   * 1100ns at ITU-T G.8271.1 [7] clause 7.3 reference point C (for remote PRTC/T-GM over PTP) .
   * 100ns at ITU-T G.8271.1 [7] clause 7.2 reference point B (for both local PRTC/T-GM over PTP, and PRTC over 1PPS+ serial link interface)

The time error added to the input signal shall follow a sinusoidal waveform with amplitude (A) and frequency (f) as specified in Table 3.3.7-1. Three such signal frequencies are specified for this test, but intermediate ones can be used for testing as well.

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- |
| **Frequency [Hz]** | **At Reference Point C** | | | **At Reference Point B** | | | **Test Duration [s]** |
| **Sine wave amplitude [ns]** | **Dynamic Time Error [ns] (Note 1)** | **Constant Time Error [ns]** | **Sine wave amplitude [ns]** | **Dynamic Time Error [ns] (Note 2)** | **Constant Time Error [ns]** |
| 0.003362 | 214 | 428 | 886 | 30 | 60 | 70 | 595 (2 periods) |
| 0.010 | 165 | 330 | 935 | 19 | 38 | 81 | 500 (5 periods) |
| 0.100 | 141 | 282 | 959 | 13 | 26 | 87 | 50 (5 periods) |

</div>

###### Table 3.3.7-1 Remote Timing Input Error Limits for Normal Operation Test (Note 3)

**NOTE 1:** The dynamic time error values for Point C are derived from the limits defined in ITU-T G.8271.1

[7] Table 7-1 and Figure 7-2.

**NOTE 2:** The dynamic time error values for Point B are derived from the limits defined in ITU-T G.8272 [35], Figure 1.

**NOTE 3:** The dynamic time error values in the table are given as peak-to-peak values. The sine wave amplitudes are zero to peak values.

###### 3.3.7-1 Graph of sine wave amplitude limits for test signal

![]({{site.baseurl}}/assets/images/f15685ca0c08.png)![]({{site.baseurl}}/assets/images/c0c69e9004f5.png)![]({{site.baseurl}}/assets/images/dab987885546.png)![]({{site.baseurl}}/assets/images/108df83cc872.png)![]({{site.baseurl}}/assets/images/ee8275ff7c00.png)![]({{site.baseurl}}/assets/images/d46c89985786.png)![]({{site.baseurl}}/assets/images/af18a057d406.png)

O-DU input sine wave amplitude vs. frequency

1000

214

165

141

100

30

19

13

10

0.001

0.01

0.1

1

Frequency [Hz]

Sine wave amplitude Point C

Sine wave amplitude Point B

Amplitude [ns]

1. An alternative and more representative method for reference point C is to apply a noise pattern that meets the network limit mask defined in ITU-T G.8271.1 [7], Table 7-1/Figure 7-2. This method is described in ITU-T G.8273.2 [26] Appendix IX. The advantage of this is that it is more representative of real network conditions and transients, and therefore a more effective test of the

O-DU under emulated network conditions. The pattern can be constructed to include both dTE and cTE consistent with the limits for maximum time error at the input to the O-DU.

###### Pass/Fail Criteria (expected results)

The measured results for Normal Operation shall be less than or equal to these values:

* 1. Maximum 0.1Hz low pass filtered frequency error for LLS-C1 and LLS-C2 on PTP and SyncE (see Note 1)

+-15 ppb for class A O-DU

+-5 ppb for class B O-DU

* 1. Maximum 0.1Hz low pass filtered time error (see Note 1)

+-1420ns for LLS-C1 on PTP.

+-1325ns for LLS-C2 on PTP.

+-1500ns for LLS-C3 and LLS-C4 on the measurement point (optional) (see Note 5).

If O-DU acts as PLFS synchronization master, frequency error shall be validated for SyncE output from the O-DU. For information on requirements, refer to 11.3.2 of [2].

**NOTE 1:** An example method to verify this for PTP is to ensure the MTIE of the output is below the masks described in Table H.2.4-1 and Figure H.2.4-2 (for a Class A O-DU) or Table H.2.4-2 and Figure H.2.4-3 (for a Class B O-DU) of [2]

**NOTE 2:** This test as currently defined does not provide any allowances for measurement error. It is left to the tester to factor in any errors based on the test equipment used. Defining the allowed measurement error is for future study.

**NOTE 3:** If the test for Normal Operation fails, it can be helpful for the CUSM-Plane Emulator to provide an optional diagnostic test for Ideal Operation. The diagnostic test for Ideal Operation provides an ideal O-DU synchronization input, with no implicitly added dynamic or constant time error. Since noise is removed from the input, noise will be removed from the O-DU synchronization output. Removal of the noise can help to diagnose whether the Normal Operation failure was due to the noise, or other factors. The present CUS-Plane specification

[2] does not specify requirements for O-DU performance under Ideal Operation. This present document does not specify reference target requirements (i.e. pass/fail criteria) for Ideal Operation.

**NOTE 4**: To meet the above requirements on PTP and SyncE a clock with a specific filtering and noise generation capability is required, better than Recommendation ITU-T G.8273.2 [26] and Recommendation ITU-T G.8262 [29]

/ Recommendation ITU-T G.8262.1 [30] respectively.

**NOTE 5**: In addition, in the special LLS-C3 case were the O-DU is part of the LLS-C3 sync chain towards the O- RU, the time error at the O-DU fronthaul ports need to stay inside a suitable portion of the 1100 ns network limits, and the related O-DU clock as per CUS specification [2] is required to comply with ITU-T G.8273.2 [26]. This scenario is not covered in this subclause.

### Performance test of O-DU Synchronized from Embedded GNSS receiver (LLS-C1/C2/C3/C4)

###### Test Description and Applicability

This test scope is relevant to LLS-C1 to LLS-C4.

This test is CONDITIONAL-MANDATORY. This test is mandatory if the DUT contains an O-DU with an embedded local PRTC using a GNSS receiver (see case a in Figure 3.3.1-1).

This test validates that an O-DU correctly synchronizes to incoming timing information, from a CUSM-plane Emulator which is emulating a GNSS transmitter's RF signal. The DUT shall contain a GNSS receiver, either embedded within the O-DU, or directly connected to the O-DU. The CUSM-E may be configured to inject either ideal or normal operating condition noise into the timing information. Frequency and time error measured at the output of the O-DU must be within specified limits, which may differ between LLS-C1-C4 configurations.

NOTE: Configuring the CUSM-E to inject normal operating condition noise is for further study.

This test covers the two classes defined by CUS -plane spec for LLS -C1 and LLS -C2 (class A has +-15 ppb frequency error limit; class B has +-5 ppb limit).

The test intent is to exercise S-Plane performance under ideal and a typical/normal operating condition. The test is not intended to exercise worst case conditions. It is the vendor's responsibility to make sure that limits defined in the test are also met in worse-case field conditions. Variable temperature, degraded GNSS reception (degraded sky view, multipath, jamming, spoofing etc.), holdover and transients are beyond the scope of the CUS-Plane specification [2].

This test is defined assuming a Full Timing Support (FTS) profile on all PTP ports. Partial timing support is left for further study.

###### Test Entrance Criteria

Conformance Functional test 3.3.6 has successfully passed.

O-DU is connected to CUSM-Plane Emulator's GNSS time reference RF interface.

###### Test Methodology

* 1. **Initial Conditions**

These tests configure the DUT (O-DU) using the using any available method. The O-DU configuration depends on which LLS-C1-C4 topologies are to be tested.

For LLS-C1 and LLS-C2 configuration, the test is set up to measure frequency and time error on one of the Ethernet master fronthaul ports of the DUT.

For LLS-C3 and LLS-C4 configuration, the test is configured to measure time error on a measurement port of the O-DU, typically a 1PPS signal if available or an unused Ethernet port configured as a PTP master.

CUSM-Plane Emulator is configured to act as a GNSS transmitter, with time reference which is traceable to UTC.

Once the DUT has been configured, the DUT shall have achieved frequency and phase lock prior to starting the test.

###### Procedure:

Unlike the functional test defined in clause 3.3.2, where start-up / nominal / degraded scenarios are tested, only nominal scenarios with *ideal* and *normal* operation input noise are tested. The test procedure is the same for both ideal and normal scenarios, the only difference is the noise settings for the timing source.

* + **Ideal Operation:** The time source provides "ideal" O-DU synchronization input with no implicitly added dynamic or constant time error.
  + **Normal Operation:** This test is for further study

###### Pass/Fail Criteria (expected results)

The measured results for Ideal and Normal Operation Cases shall be less than or equal to these values:

1. Maximum 0.1Hz low pass filtered frequency error for LLS-C1 and LLS-C2

+-15 ppb for class A O-DU

+-5 ppb for class B O-DU

1. Maximum 0.1Hz low pass filtered time error

+-1420ns for LLS-C1.

+-1325ns for LLS-C2.

+-1500ns for LLS-C3 and LLS-C4.

NOTE: This test as currently defined does not provide any allowances for measurement error. It is left to the tester to factor in any errors based on the test equipment used. Defining the allowed measurement error is for future study.

### Performance test of O-RU using ITU-T G.8275.1 Profile (LLS-C1/C2/C3), additional tests for cascaded O-RUs

In addition to tests described in clause 3.3.3, the full validation of an O-RU that is deployed in the synchronization path in cascaded O-RU mode requires the implementation of additional tests. In particular, as per 11.2.2.2 of O-RAN CUS Specification [2], if deployed in this mode, the O-RU shall also implement Recommendation ITU-T G.8273.2 [26], T- BC or Recommendation ITU-T G.8273.3 [28]T-TC. Therefore, further performance testing to ensure conformance to either or both of those recommendations shall be performed in addition to this performance test.

Details of the additional tests are not yet specified. Until details of the test case to be used are specified in the present document, the tester shall verify proper T-BC and/or T-TC functionality according to ITU-T G.8273.2 [26]and/or ITU- T G.8273.3 [28] utilizing additional test cases that can verify compliance with these Recommendations. These measurement results along with details of the test executed shall be documented in the test report.

### UC-Plane Measurements O-DU

### UC-Plane Tests

This clause describes conformance test scenarios for O-DU equipment implementing the U-Plane and C-Plane O-RAN option 7.2x protocols. In these set of tests, the device under test (DUT) is either a stand-alone O-DU, or a combined O- CU + O-DU from a single vendor. Throughout this clause, we may refer to the DUT generically as the O-DU for brevity, keeping in mind that there are these two potential DUT variants.

### UC-Plane Standard Test Definitions

Clause 2.2 outlines the test configuration for the O-DU tests in this clause and provides an overview of the Test Equipment O-DU (TED) required to conduct the tests. The following are the generic test steps to be used, although specific tests may deviate from this general procedure:

1. Configure the Test Equipment, O-DU (TED) for test execution, which may include defining the specific test to execute. This includes configuring the various components comprising the TED:
   1. Configure the Core Emulator (and O-CU Emulator in the case of a stand-alone O-DU DUT) and the X2 signalling emulator for NSA mode such that it is ready to communicate with the DUT via the appropriate interfaces for the specific test scenario
   2. Configure the O-RU + UE Emulator such that it is ready to communicate to the DUT over the CUSM-planes of the open fronthaul interface for the specific test scenario, which may include configuring the O-RU emulator to emulate a certain type of O-RU, e.g. CAT-A, CAT-B, TDD, FDD;

and configuring the UE emulator appropriately such that it can connect to the network for the specific test scenario

1. Configure the O-DU DUT via the O1 (if available) or EMS interface to provision the DUT in order to place it into the appropriate modes to exercise the specific scenario and features under test. Note that these should not be special test modes but are instead production modes that are used for provisioning the commercial O-DU to support various deployment configurations
2. Instruct the UE Emulator to initiate a connection with the O-DU DUT through the O-RU emulator via the open fronthaul interface and on to the rest of the emulated network via the F1 interface
3. Observe that the UE Emulator successfully attaches to the network and has successful data communications in both the downlink and uplink
4. Perform detailed observation and analysis of the front haul data stream of the O-DU DUT in order to ascertain compliance to the specifications.

### Minimum Capabilities of the TED for U-Plane and C-Plane Tests

Since many features of the O-RAN protocol rely on the O-DU instructing the O-RU to put data in specific resource blocks using a specific compression method it is imperative that the test equipment support features that allow detailed observation and analysis of the front haul data stream. Furthermore, since the O-DU is meant to support various classes of O-RU with different feature sets, e.g. CAT-A or CAT-B, FR1 or FR2, different beamforming methods to multiple UEs, different compression schemes, etc., it is important that the TED has the flexibility to effectively emulate the various scenarios in a robust and repeatable manner in order to test the various features. As noted in Sec 2.2, this specification does not preclude the use of the commercial equivalent elements instead of emulators, but must support a level of configurability and repeatability to ensure that the required features in the O-DU front-haul are effectively and repeatably exercised. With use of either node emulators or commercial equivalents, the required test outcomes and reports must be effectively and repeatably reproduced. The rest of this clause shall assume emulators are used for brevity of description.

### ![]({{site.baseurl}}/assets/images/8c768642666b.png) Core + O-CU Emulator for Testing a Stand-alone O-DU DUT

* Must have the capability of emulating and observing the appropriate signals at the F1 interface that enables the O-DU DUT to support connecting with the UE Emulator through the O-RU Emulator via the open front haul
* Must have the capability of supporting the various modes that the O-DU DUT shall be provisioned to via the O1 or EMS interface for the various test cases and scenarios

### ![]({{site.baseurl}}/assets/images/5e9ddcf98b7b.png) Core Emulator for Testing a Combined O-CU + O-DU DUT

* Must have the capability of emulating an EPC (NSA/LTE) or NGC (SA) and observing the appropriate signals at the NG (SA) or S1 (NSA) interface that enables the O-DU DUT to support connecting with the UE Emulator through the O-RU Emulator via the open front haul
* Must have the capability of supporting the various modes that the O-DU DUT shall be provisioned to via the O1 or EMS interface for the various test cases and scenarios

### ![]({{site.baseurl}}/assets/images/cbb8e2a65c8d.png) X2 Signalling Emulator for NSA

* Must have the capability of emulating the signalling over the X2 interface to the O-CU Emulator for the case of testing a Stand-alone O-DU DUT, or to the actual O-CU for the case of testing combined O-CU+O-DU DUT, in order to support an NSA connection
* Must have the capability of supporting the various modes that the O-DU DUT shall be provisioned to via the O1 or EMS interface for the various test cases and scenarios

### ![]({{site.baseurl}}/assets/images/56fa4181fc09.png) O-RU Emulator

* Must have the capability of emulating various types of O-RUs in order to exercise the various features of the open front haul of the O-DU DUT
* Must be able to be synchronized with the O-DU DUT to ensure proper timing of uplink C-Plane and U-Plane messages
* Must be able to observe and analyze the front haul data stream of the O-DU DUT in order to ascertain compliance to the specifications of the specific test scenario

### ![]({{site.baseurl}}/assets/images/080776a71d9d.png) UE Emulator

* Must have the capability of emulating a UE (or multiple UEs in the case of beamforming tests) that can successfully complete a connection with the O-DU DUT all the way through to the Core Emulator
* Must be able to connect with the O-RU Emulator through a digital or RF interface
* Must be able to observe and analyze the state of the connection and the uplink and downlink throughput in order to ascertain the successful connection with the network through the O-DU DUT

### ![]({{site.baseurl}}/assets/images/14e6522d580d.png) Test Configurator through O1 or EMS Interface

* Must be able to interface with the O1 (if available) or EMS interface of the O-DU DUT
* Must be able to setup test scenarios and coordinate the entities in the TED to perform the required test scenarios

### UC-Plane O-DU Test Scenarios

### ![]({{site.baseurl}}/assets/images/0f9091055199.png) UC-Plane O-DU Scenario Class NR testing Generic (NRG)

The purpose of the tests in this clause are to ensure that the O-DU DUT supports the mandatory open front haul features of the specification as defined in the O-RAN CUS Specification [2], Table 10.2-1.

#### ![]({{site.baseurl}}/assets/images/411d11ab7a65.png) UC-Plane O-DU Scenario Class Base CAT-A O-RU

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure that the O-DU can meet the most basic requirements of the O-RAN fronthaul to support connecting with a CAT-A O-RU with no beamforming and 16-bit fixed point IQ format.

###### Test Entrance Criteria

The O-DU DUT must be provisioned to connect with a CAT-A O-RU for 5G New Radio and be able to synchronize with the O-RU emulator of the TED. The O-DU DUT could use any of the NR profiles for CAT-A O- RU as specified in the Fronthaul Interoperability Test Specification [25] in Annex A.2 (except using 16-bit fixed point IQ format), or any other suitable profile that satisfies the test scenario.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-DU DUT such that it is ready to accept a UE connection through its interfaces with the appropriate entities in the TED. Configure the O-RU Emulator to be a CAT-A O-RU with no beamforming and 16-bit fixed point IQ format.

###### Procedure

* + 1. Instruct the UE Emulator to initiate a connection with the O-DU DUT through the O-RU emulator
    2. Initiate data transmission on both the downlink and uplink
    3. Log and analyze the open front haul data stream between the O-DU DUT and O-RU Emulator including used Section Types and section extensions

###### Test Requirement (expected result)

* 1. Non-zero data throughput in both uplink and downlink is observed
  2. Log of Section Types and section extensions successfully used

#### ![]({{site.baseurl}}/assets/images/b717ec643c93.png) UC-Plane O-DU Scenario Class Base CAT-B O-RU

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure that the O-DU can meet the most basic requirements of the O-RAN fronthaul to support connecting with a CAT-B O-RU with beam-index based beamforming and 16-bit fixed point IQ format.

###### Test Entrance Criteria

The O-DU DUT must be provisioned to connect with a CAT-B O-RU for 5G New Radio and be able to synchronize with the O-RU emulator of the TED. The O-DU DUT could use any of the NR profiles for a CAT-B O-RU as specified in the Fronthaul Interoperability Test Specification [25], e.g. Annex A.2 (except using 16-bit fixed point IQ format), or any other suitable profile that satisfies the test scenario.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-DU DUT such that it is ready to accept a UE connection through its interfaces with the appropriate entities in the TED. Configure the O-RU Emulator to be a CAT-B O-RU with beam-index based beamforming and 16-bit fixed point IQ format.

###### Procedure

* + 1. Instruct the UE Emulator to initiate a connection with the O-DU DUT through the O-RU emulator
    2. Initiate data transmission on both the downlink and uplink
    3. Log and analyze the open front haul data stream between the O-DU DUT and O-RU Emulator including used Section Types and section extensions

###### Test Requirement (expected result)

1. Non-zero data throughput in both uplink and downlink is observed
2. Log of Section Types and section extensions successfully used

### ![]({{site.baseurl}}/assets/images/5a3daa33f8b0.png) UC-Plane O-DU Scenario Class Beamforming (BFM)

This clause describes beamforming conformance tests for O-RAN fronthaul interface on the O-DU. The tests do not aim to test the O-DU beamforming performance or general capabilities. The conformance tests are designed to validate that the O-DU correctly describes the Beamforming methods via C-plane messages according to the O-RAN Fronthaul interface spec. The tests are configured following the outline in the clause 2.2 description of the TED.

As noted earlier in clause 2.2, the O-DU is assumed to be a commercial product that may support a limited set of configurations. Therefore, these beamforming tests will present a suggested method for evaluating protocol

conformance. The tester may choose other configurations which also clearly evaluate the conformance of the O-DU to the same protocol syntax and semantics.

#### ![]({{site.baseurl}}/assets/images/16598a95e48a.png) UC-Plane O-DU Scenario Class Beamforming 3GPP - Predefined-beam Beamforming

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to validate the basic operation of the O-DU DUT when configured to use predefined-beams in a O-RU.

###### Test Entrance Criteria

The O-DU DUT must be provisioned to connect with an O-RU for 5G New Radio and be able to synchronize to a common sync source with the O-RU emulator of the TED. The O-DU DUT could use any of the NR BF profiles for O- RU as specified in the Fronthaul Interoperability Test Specification [25] in Annex A.2 (except using 16-bit fixed point IQ format), or any other suitable profile that satisfies the test scenario.

The O-DU DUT must exercise at least two different beams to serve at least two SS Blocks (SSBs) and beam sweeping. The two beams under test, i.e. beam=A and beam=B, can have neither a vector size of one (i.e. only contains a single beam weight value) nor have identical beam weight values (i.e. no beamforming). Additionally, O-DU DUT cannot assign beamId=0x0000 (i.e. no beamforming) to any of the two beams when sending beamforming information to the O-RU emulator. The O-DU might retrieve a list of O-RU beam capabilities to be able to generate beam weight vectors supported by the O-RU emulator. The O-DU DUT will use at least any two set of beam weight vectors to converge beamforming information to the O-RU emulator along with the test vectors (IQ data) containing SSB.

The O-RU emulator must be configured to report support for weight-based beamforming in the M-Plane capabilities to allow the O-DU DUT to use weight-based beamforming. It is assumed that the O-DU can be configured in some way to force the use of dynamic weight-based beamforming.

###### Test Methodology

* 1. Initial Conditions

Configure the O-DU DUT such that it carries out the use of SSBs and beam sweeping through its interfaces with the appropriate entities in the TED. Configure the O-RU Emulator with weight-based beamforming and 16-bit fixed point IQ format.

* 1. Procedure
     1. O-DU DUT starts broadcasting procedure and beam sweeping
     2. Log and analyze the open front haul data stream between the O-DU DUT and O-RU Emulator including used Section Types and section extensions

###### Test Requirement (expected result)

* 1. Successful decoding of SSBs
  2. Log of at least two different assigned beamIds (i.e. beamId=A and beamId=B) are used and none of them are beamId=0x0000
  3. Log of at least two different assigned beam weight vectors are used for beam=A and beam=B.

#### ![]({{site.baseurl}}/assets/images/a0da831b2b7f.png) UC-Plane O-DU Scenario Class Beamforming 3GPP - Weight-based Beamforming

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY.

The purpose of this test is to ensure that the O-DU can meet the most basic requirements of the O-RAN fronthaul to support connecting with a O-RU emulator with weight-based beamforming. This test exercises the beamId field found in the C-plane section descriptions as well as section extension = 1 to converge beamforming information to the O-RU emulator of TED.

###### Test Entrance Criteria

The O-DU DUT must be provisioned to connect with an O-RU for 5G New Radio and is synchronized with the O-RU emulator of the TED. The O-DU DUT could use any of the NR BF profiles for O-RU as specified in the Fronthaul

Interoperability Test Specification [25] in Annex A.2 (except using 16-bit fixed point IQ format), or any other suitable profile that satisfies the test scenario.

The O-DU must exercise at least two different DL beams. In matrix form, the column dimension of the beam weights, as defined in Section Extension Type 1 defined in the O-RAN CUS Specification [2] clause 7.7.1., corresponds to the number of beamIds, and the row dimension to the number of TRXs of the O-RU emulator. The number of beamIds must be greater than or equal to 2. Additionally, O-DU DUT cannot assign beamId=0x0000 (i.e. no beamforming) to any of the two beams when sending beamforming information to the O-RU emulator.

The O-DU might retrieve a list of O-RU beam capabilities to be able to generate beam weight vectors (i.e. columns of the beam weight matrix) supported by the O-RU emulator. The O-DU DUT will use at least two beam weight vectors to convey beamforming information to the O-RU emulator along with the test vectors (IQ data).

The O-RU emulator must be configured to report support for weight-based beamforming in the M-Plane capabilities to allow the O-DU DUT to use weight-based beamforming. It is assumed that the O-DU can be configured in some way to force the use of dynamic weight-based beamforming.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-DU DUT such that it carries out the broadcasting of common control channels (e.g. SSB) through its interfaces with the appropriate entities in the TED. Configure the O-RU Emulator with weight- based beamforming and 16-bit fixed point IQ format.

###### Procedure

* + 1. O-DU DUT starts broadcasting procedure and beam sweeping
    2. Log and analyze the open front haul data stream between the O-DU DUT and O-RU Emulator including used Section Types and section extensions

###### Test Requirement (expected result)

1. Successful decoding of one or more SSBs
2. Log of at least two different assigned beamIds (i.e. beamId=A and beamId=B) are used and none of them are beamId=0x0000
3. Log of at least two different assigned beam weight vectors are used for beam=A and beam=B.

#### 3.4.4.2.3UC-Plane O-DU Scenario Class Beamforming 3GPP - DMRS-BF-NEQ

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY for DMRS-BF capable O-DU.

The purpose of this test is to ensure that the O-DU can meet protocol conformance on the O-RAN fronthaul to support DMRS-based beamforming without equalization in the O-RU (DMRS-BF-NEQ). It will exercise all the mandatory C-plane section types and extensions required for supporting DMRS-BF-NEQ. An overview of the TED for DMRS-BF is provided in figure 3.4.4.2.3-1.

The O-RU emulator simulates NEQ and EQ outputs when acting as NEQ O-RU and EQ O-RU. It is expected that NEQ O-RU and EQ O-RU outputs are different.

![A diagram of a software system  Description automatically generated]({{site.baseurl}}/assets/images/09d92f12fc16.png)

###### Figure 3.4.4.2.3-1 TED for DMRS-BF

1. **Test Entrance Criteria**

The O-DU DUT is provisioned to connect with an O-RU emulator for 5G New Radio and is synchronized with the O-RU emulator of the TED. A single UE emulator which can support at least 2 layers is attached to or included within the O-RU emulator. The O-RU emulator supports DMRS-BF-NEQ in the M-Plane capabilities and establishes conditions that will increase the likelihood of the O-DU DUT choosing to enter DMRS-BF mode (e.g. high UL data rate).

When operating in DMRS-BF mode, the O-DU DUT will convey user group scheduling and multiple port configuration to the O-RU emulator using ST5 and SE10 respectively, where SE10 uses beamGroupType 10b or 11b. The O-DU DUT will convey the DMRS configuration using SE24. The O-RU emulator validates the DMRS configuration sent by the O-DU DUT against the DMRS configuration of the UE emulator.

If configured, the O-DU DUT may send an ST11 RRM measurement request to the O-RU emulator and receive an ST10 measurement report in response from the O-RU emulator. The O-RU emulator captures and logs the ST10 packets that it sends out in response to the SE24 M-Plane configuration that it receives.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-DU DUT such that it is ready to accept a UE connection through its interfaces with the appropriate entities in the TED

Configure the O-RU emulator for DMRS-BF-NEQ

###### Procedure

* + 1. Start the O-DU DUT and O-RU emulator M-plane setup (advertise and configure)
    2. O-DU DUT sends C-plane data request with scheduling decision for each user group (ST5) along with DMRS (SE24) and multiple port configuration (SE10)
    3. O-RU emulator receives PUSCH from UE emulator and sends U-Plane data to the O-DU
    4. Log and analyze the open fronthaul data stream between the O-DU DUT and O-RU emulator including the used section types and section extensions

###### Test Requirement (expected result)

1. O-DU DUT successfully decodes PUSCH transmissions (PN9 data payload), verified by NDI bit toggle and no retransmission requests to the UE emulator attached to the O-RU emulator
2. O-RU emulator reports valid DMRS configurations from the O-DU DUT that match the UE emulator configurations
3. All the logged C-plane messages and measurement reports are captured and valid

#### 3.4.4.2.4UC-Plane O-DU Scenario Class Beamforming 3GPP - DMRS-BF-EQ

###### Test Description and Applicability

This test is CONDITIONAL MANDATORY for DMRS-BF capable O-DU.

The purpose of this test is to ensure that the O-DU can meet protocol conformance on the O-RAN fronthaul to support DMRS-based beamforming with equalization in the O-RU (DMRS-BF-EQ). It will exercise all the mandatory C-plane section types and extensions required for supporting DMRS-BF-EQ. An overview of the TED for DMRS-BF is provided in figure 3.4.4.2.3-1.

The O-RU emulator simulates NEQ and EQ outputs when acting as NEQ O-RU and EQ O-RU. It is expected that NEQ O-RU and EQ O-RU outputs are different.

###### Test Entrance Criteria

The O-DU DUT is provisioned to connect with an O-RU emulator for 5G New Radio and is synchronized with the O-RU emulator of the TED. A single UE emulator which can support at least 2 layers is attached to or included within the O-RU emulator. The O-RU emulator reports support for both DMRS-BF-EQ in the M-Plane capabilities and establishes conditions that will increase the likelihood of the O-DU DUT choosing to enter DMRS-BF mode (e.g. high UL data rate).

The O-DU DUT will convey user group scheduling and multiple port configuration to the O-RU emulator using ST5 and SE10 respectively, where SE10 uses beamGroupType 10b or 11b. The O-DU DUT will convey the DMRS configuration and any RRM requests (excluding unallocated IPN) using SE24. The O-RU validates the DMRS configuration sent by the O-DU DUT against the DMRS configuration of the UE emulator.

If configured, the O-DU DUT sends ST11 RRM measurement requests to the O-RU emulator and receives ST10 measurement reports in response. The O-RU captures and logs the ST10 packets that it sends out in response to the SE24 or ST11 packets that it receives.

The O-DU DUT can request either SINR reports or port reduced DMRS; as such, the O-RU logs and captures either the SINR data sent via ST9 or the port reduced DMRS data. The O-DU DUT will receive ST9 SINR reports as per the configured M-plane cadence. The tester will select channel conditions for the TED that ensure successful decoding of PUSCH transmissions at the O-DU DUT.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-DU DUT such that it is ready to accept a UE connection through its interfaces with the appropriate entities in the TED

Configure the O-RU emulator for DMRS-BF-EQ

###### Procedure

* + 1. Start the O-DU DUT and O-RU emulator M-plane setup (advertise and configure)
    2. O-DU DUT sends C-plane data request with scheduling decision for each user group (ST5) along with DMRS and RRM measurement requests (SE24) and multiple port configuration (SE10)
    3. O-DU DUT triggers unallocated IPN RRM requests via ST11, if configured, and correctly receives ST10 and ST9 responses
    4. O-RU emulator receives PUSCH from UE emulator and sends U-Plane data to the O-DU
    5. Log and analyze the open fronthaul data stream between the O-DU DUT and O-RU emulator including the used section types and section extensions

###### Test Requirement (expected result)

1. O-DU DUT successfully decodes PUSCH transmissions (PN9 data payload) from the UE emulator, verified by NDI bit toggle and no retransmission requests to the UE attached to the O-RU emulator.
2. O-RU emulator reports valid DMRS configurations from the O-DU DUT that match the UE configurations.
3. All the logged C-plane messages and measurement reports are captured and valid.

### ![]({{site.baseurl}}/assets/images/d948a4381fda.png) UC-Plane O-DU Scenario Class Compression (CMP)

This clause validates the correct implementation of mandatory and conditional mandatory IQ data compression formats in [2].

It applies to the following O-RAN CUS Specification [2].

* Clause 7.4 for layout of C-Plane message, in particular Section Type 1
* Clause 7.5.2.10 for applicability of "udCompHdr" and "reserved" fields
* Clause 8.3.2 for layout of DL/UL Data
* Clause 8.3.3.13/14/15 for applicability of udCompParam

The objective is to test the mandatory and conditional mandatory compression capabilities of a O-RAN compliant O- DU. These include:

* Mandatory: Static Fixed-Point Uncompressed 16-bit IQ
* Conditional Mandatory: Static Block floating point compression - 9, 12 & 14-bit mantissa

###### Overview of Compression Test Methodology

For both downlink and uplink testing, the test will validate that non-zero user data throughput is achieved in both directions and that the section headers for CU plane in the downlink are consistent with the specification [2].

To maximise coverage on the compressed IQ mantissa value, the test frame will use the highest possible modulation supported by the O-DU. The preferred value is 256 QAM modulation for downlink and uplink.

**Presence/Absence of CU-Plane Header measurements (downlink only)**: Validate that the fields udCompHdr, and "reserved" are absent in downlink U-Plane. For Static Block Floating Point Compression, only udCompParam is present in downlink U-Plane. For downlink C-Plane, validate that the udCompHdr is set to 0.

#### ![]({{site.baseurl}}/assets/images/1520f9a281fe.png) Static Format Fixed-Point (FP) Uncompressed

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to:

* + Validate correct format of Control Plane Section Header
    - udCompHdr set to 0x0
  + Validate that in the data section header, udCompHdr, "reserved", and udCompParam fields are not present
  + Validate correct encoding/decoding of IQ data
    - Fixed point 16 Bit IQ data format
    - Uplink / downlink

The purpose of this test is to ensure that the O-DU can meet the mandatory requirements of the O-RAN fronthaul to support compression.

###### Test Entrance Criteria

The O-DU DUT must be provisioned to connect with a O-RU for 5G New Radio and be able to synchronize with the O-RU emulator or real O-RU. The O-DU DUT could use any of the NR profiles as specified in the Fronthaul Interoperability Test Specification [25], Annex A.2. Compression is further adjusted as described below.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-DU DUT such that it is ready to accept a UE connection through its interfaces with the appropriate entities in the TED.
   * Configure O-DU for 16-bit fixed point IQ format.
   * Configure the O-RU Emulator with 16-bit fixed point IQ format.

###### Procedure

1. Instruct the UE Emulator or UE to initiate a connection with the O-DU DUT through the O-RU emulator or O-RU
2. Initiate data transmission on both the downlink and uplink.
3. Record the total throughput in each direction for comparison in additional test cases.
4. Note any errors reported by the O-RU emulator for downlink compression. Alternatively, using the log information from the O-RU emulator, analyze the open front haul data stream between the O-DU DUT

and O-RU Emulator to confirm proper transmission of the downlink U-Plane data with 16-bit fixed point format.

1. Analyze any C-Plane errors reported by the O-RU emulator related to compression or sample the log file to validate compression header information.

###### Test Requirement (expected result)

1. Validate that the Control Plane Section Header has udCompHdr set to 0x0
2. Validate that udCompHdr, "reserved" and udCompParam fields are absent in Downlink Data Section Header
3. Non-zero data throughput in both uplink and downlink is observed
4. There are no errors in step 4 of the procedure

#### ![]({{site.baseurl}}/assets/images/389f1d05d8d7.png) UC-Plane O-DU Scenario Class Compression (CMP) Static Format Block Floating Point

###### Test Description and Applicability

This test is CONDITIONALMANDATORY and shall be performed if the emulated O-RU or real O-RU supports this compression format.

The static format test scenario for Block Floating Point Format will verify DL and UL correct encoding of IQ information for 3 supported bit widths: 9, 14 or 12 bits.

The purpose of this test is to:

* + Validate correct format of Control Plane Section Header
    - udCompHdr set to 0x00
  + Validate that in the data section header, udCompHdr and "reserved" fields are not present
  + Validate correct encoding/decoding of IQ data
    - 9 bits IQ Data
    - 14 bits IQ Data
    - 12 bits IQ Data
    - Uplink / downlink

###### Test Entrance Criteria

The O-DU DUT must be provisioned to connect with a O-RU for 5G New Radio and be able to synchronize with the O-RU emulator or real O-RU. The O-DU DUT could use any of the NR profiles as specified in the Fronthaul Interoperability Test Specification [25], Annex A.2. Compression is further adjusted as described below.

###### Test Methodology

1. **Initial Conditions**
   * Configure the O-DU DUT such that it is ready to accept a UE connection through its interfaces with the appropriate entities in the TED.

###### Procedure

1. Configure O-DU for 14-bit Static Format BFP Compression.
2. Configure the O-RU for 14-bit Static Format BFP Compression.
3. Instruct the UE Emulator or UE to initiate a connection with the O-DU DUT through the O-RU emulator or O-RU
4. Initiate data transmission on both the downlink and uplink.
5. Record the total throughput in each direction and validate that user data throughput is non-zero.
6. Note any errors reported by the O-RU emulator for downlink compression. Alternatively, using the log information from the O-RU emulator, analyze the open front haul data stream between the O-DU DUT and O-RU Emulator to confirm proper transmission of the downlink U-Plane data.
7. Analyze any C-Plane errors reported by the O-RU emulator related to compression or sample the log file to validate compression header information.
8. Repeat steps 1- 7 with the configuration set to 9 bit Static Format Block Floating Point
9. Repeat steps 1- 7 with the configuration set to 12 bit Static Format Block Floating Point

###### Test Requirement (expected result)

1. Step 5 in each repetition meet the expected results
2. Steps 6 and 7 for each repetition do not show any errors

### ![]({{site.baseurl}}/assets/images/b77e6cdadbc0.png) UC-Plane O-DU Scenario Class Delay Management (DLM)

#### ![]({{site.baseurl}}/assets/images/92f06cf450f0.png) Delay Management On-time arrival

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to ensure that the O-DU can meet basic requirements of the O-RAN fronthaul to support configured delay management parameters for transmissions from the O-DU to the O-RU for the C-Plane and U- Plane protocol. To exercise both the downlink O-DU adherence to the configured delay management and the required counters on the O-DU related to delay management in the uplink, a UE in connected mode is required.

###### Test Entrance Criteria

The O-DU DUT must be provisioned to connect with a O-RU for 5G New Radio and be able to synchronize with the O-RU emulator or real O-RU. The O-DU DUT could use any of the NR profiles as specified in the Fronthaul Interoperability Test Specification [25], Annex A.2. The counters defined in the O-RAN CUS Specification [2], Table 9.1-1, for on-time reception on the O-DU must be supported and accessible.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-DU DUT such that it is ready to accept a UE connection through its interfaces with the appropriate entities in the TED. Configure the O-RU emulator per the parameters of the chosen IOT profile. Using the M-Plane or other manual methods, configure the delay parameters in the O-RAN CUS Specification [2], Table 4.4.3-1 to achieve proper timing on the O-RU emulator.

###### Procedure

* + 1. Clear the O-DU delay management receive counters or note the current value.
    2. Instruct the UE Emulator to initiate a connection with the O-DU DUT through the O-RU emulator
    3. Initiate data transmission on both the downlink and uplink
    4. Validate that the O-DU adheres to the downlink delay management parameters using the O-RU emulator receive counters for on-time, early and late arrival for the C-Plane and the U-Plane for each configured eAxC.
    5. Validate that the O-DU receive counters for on-time arrival for the C-Plane and the U-Plane for each configured eAxC increment as expected and that early and late counters remain unchanged (e.g. 0 if the test started with these counters at 0).

###### Test Requirement (expected result)

1. O-DU receive (uplink) counters (RX\_ON\_TIME, RX\_EARLY, RX\_LATE, RX\_ON\_TIME) for each configured eAxC for the U-Plane are observed. Only RX\_ON\_TIME should show non-zero values or changed values if the counters could not be cleared.
2. O-RU emulator (downlink) receive counters report that only on-time PDUs are received. No early or late PDUs are received.

#### ![]({{site.baseurl}}/assets/images/0488afb8da4d.png) Delay Management Early Arrival and Late Arrival

###### Test Description and Applicability

This test is MANDATORY.

The purpose of this test is to validate the operation of the O-DU delay management receive counters for the C- Plane and U-Plane protocol . To exercise these counters, a UE in connected mode is required.

###### Test Entrance Criteria

The O-DU DUT must be provisioned to connect with a O-RU for 5G New Radio and be able to synchronize with the O-RU emulator or real O-RU. The O-DU DUT could use any of the NR profiles as specified in the Fronthaul Interoperability Test Specification [25], Annex A.2. The counters in the O-RAN CUS Specification [2], Table 9.1-1 for on-time reception on the O-DU must be supported and accessible.

###### Test Methodology

* 1. **Initial Conditions**

Configure the O-DU DUT such that it is ready to accept a UE connection through its interfaces with the appropriate entities in the TED. Configure the O-RU emulator per the parameters of the chosen IOT profile. Using the M-Plane or other manual methods, for the appropriate step below, configure the delay parameters in the O-RAN CUS Specification [2], Table 4.4.3-1 to force early or late PDU transmission of the U-Plane PDUs to the O-DU.

###### Procedure

* + 1. Clear the O-DU delay management receive counters or note the current value
    2. Force the O-RU emulator to send U-Plane PDUs to the O-DU "early" such that they arrive at the O-DU outside the receive window.
    3. Instruct the UE Emulator to initiate a connection with the O-DU DUT through the O-RU emulator.
    4. Initiate data transmission on both the downlink and uplink
    5. Validate that the O-DU counters for RX\_EARLY for U-Plane for each configured eAxC are incrementing.
    6. Clear the O-DU delay management receive counters or note the current value
    7. Force the O-RU emulator to send U-Plane PDUs to the O-DU "late" such that they arrive at the O-DU outside the receive window.
    8. Instruct the UE Emulator to initiate a connection with the O-DU DUT through the O-RU emulator.
    9. Initiate data transmission on both the downlink and uplink
    10. Validate that the O-DU counters for RX\_LATE for U-Plane for each configured eAxC are incrementing.

###### Test Requirement (expected result)

Steps 5 and 10 show the expected counter(s) incremented

### Shared-Cell Test Scenarios

This clause describes conformance test scenarios for devices supporting Shared-Cell as defined in [2]. In the present document, only devices supporting the Fronthaul Multiplexor (FHM) mode are considered.

### FHM mode Tests

In this set of tests for Shared Cell, the device under test (DUT) is FHM and is connected to Test Equipment Fronthaul Multiplexor (TEM) with multiple O-RU capabilities as described in clause 2.3.

### ![]({{site.baseurl}}/assets/images/f993252058f0.png) FHM M-Plane Tests

FHM uses the same architecture model defined in clause 5.1.2 of [3]. Therefore, many tests described in this clause are references to previously defined tests in clause 3.1. Table 3.5.1.1-1 summarize all M-Plane tests for the FHM. The table also indicates if the specific test case is a reference to existing tests defined in clause 3.1 and if the target NETCONF server is on the FHM or on a south node.

**Table 3.5.1.1-1**

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| **Test Clause** | **Clause**  **3.1 Test Case** | **FHM Test Requirement Status** | **M-**  **Plane Server** | **Test Description** |
| **3.5.1.1.1** | 3.1.1.1 | CONDITIONAL MANDATORY | FHM | Transport and Handshake in IPv4/SSH Environment (positive case) |
| **3.5.1.1.2** | 3.1.1.2 | CONDITIONAL MANDATORY | FHM | Transport and Handshake in IPv4/SSH Environment (negative case) |
| **3.5.1.1.3** | 3.1.1.3 | CONDITIONAL MANDATORY | FHM | Transport and Handshake in IPv6/SSH Environment (positive case) |
| **3.5.1.1.4** | 3.1.1.4 | CONDITIONAL MANDATORY | FHM | Transport and Handshake in IPv6/SSH Environment (negative case) |
| **3.5.1.1.5** | 3.1.1.5 | CONDITIONAL MANDATORY | FHM | Transport and Handshake in IPv4/TLS Environment (positive case) |
| **3.5.1.1.6** | 3.1.1.6 | CONDITIONAL MANDATORY | FHM | Transport and Handshake in IPv4/TLS Environment (negative case) |
| **3.5.1.1.7** | 3.1.1.7 | CONDITIONAL MANDATORY | FHM | Transport and Handshake in IPv6/TLS Environment (positive case) |
| **3.5.1.1.8** | 3.1.1.8 | CONDITIONAL MANDATORY | FHM | Transport and Handshake in IPv6/TLS Environment (negative case) |
| **3.5.1.1.9** | N/A | MANDATORY | FHM | Retrieval of FHM Information (positive case) |
| **3.5.1.1.10** | N/A | MANDATORY | FHM | Retrieval of FHM Information (negative case) |
| **3.5.1.1.11** | N/A | MANDATORY | FHM | U-Plane Configuration and Shared Cell Configuration |
| **3.5.1.1.12** | N/A | MANDATORY | South- Node | MPlane Passthrough Uplane Configuration for South Node RU(positive case) |
| **3.5.1.1.13** | N/A | MANDATORY | South- Node | MPlane Passthrough Uplane Configuration for South Node RU(negative case) |
| **3.5.1.1.14** | N/A | MANDATORY | FHM | Performance Management |
| **3.5.1.1.15** | N/A | MANDATORY | FHM | Delay Management |
| **3.5.1.1.16** | 3.1.6.1 | MANDATORY | FHM | Software Update (positive case) |
| **3.5.1.1.17** | 3.1.6.2 | MANDATORY | FHM | Software Update (negative case) |

</div>

<div class="table-wrapper" markdown="block">

|  |  |  |  |  |
| --- | --- | --- | --- | --- |
| **Test Clause** | **Clause**  **3.1 Test Case** | **FHM Test Requirement Status** | **M-**  **Plane Server** | **Test Description** |
| **3.5.1.1.18** | 3.1.7.1 | MANDATORY | FHM | Software Activation without Reset |
| **3.5.1.1.19** | 3.1.7.2 | MANDATORY | FHM | Supplemental Reset after Software Activation |
| **3.5.1.1.20** | N/A | MANDATORY | FHM | File Management Operation: Upload |
| **3.5.1.1.21** | N/A | MANDATORY | FHM | File Management Operation: Retrieve the list |
| **3.5.1.1.22** | N/A | MANDATORY | FHM | File Management Operation: Download |
| **3.5.1.1.23** | 3.1.2 | MANDATORY | FHM | Subscription to Notifications |
| **3.5.1.1.24** | 3.1.5.1 | MANDATORY | FHM | O-RU Alarm Notification Generation |
| **3.5.1.1.25** | 3.1.5.2 | MANDATORY | FHM | Retrieval of Active Alarm List |
| **3.5.1.1.26** | 3.1.3.1 | CONDITIONAL MANDATORY | FHM | M-Plane Connection Supervision (positive case) |
| **3.5.1.1.27** | 3.1.3.2 | CONDITIONAL MANDATORY | FHM | M-Plane Connection Supervision (negative case) |
| **3.5.1.1.28** | 3.1.8.1 | CONDITIONAL MANDATORY | FHM | Sudo on Hybrid M-plane Architecture (positive case) |
| **3.5.1.1.29** | 3.1.8.2 | CONDITIONAL MANDATORY | FHM | Access Control Sudo (negative case) |
| **3.5.1.1.30** | 3.1.8.3 | CONDITIONAL MANDATORY | FHM | Access Control NMS (negative case) |
| **3.5.1.1.31** | 3.1.8.4 | CONDITIONAL MANDATORY | FHM | Access Control FM-PM (negative case) |
| **3.5.1.1.32** | 3.1.8.5 | CONDITIONAL MANDATORY | FHM | Access Control SWM (negative case) |
| **3.5.1.1.33** | 3.1.8.6 | CONDITIONAL MANDATORY | FHM | Sudo on Hierarchical M-plane architecture (positive case) |
| **3.5.1.1.34** | 3.1.8.7 | CONDITIONAL MANDATORY | FHM | Access Control SMO (negative case) |
| **3.5.1.1.35** | 3.1.8.8 | CONDITIONAL MANDATORY | FHM | Access Control Hybrid-ODU (negative case) |

</div>

#### ![]({{site.baseurl}}/assets/images/f6356aaa6711.png) Transport and Handshake in IPv4/SSH Environment (positive case)

This test is CONDITIONAL MANDATORY for a FHM that declares support for IPv4 and SSH. Refer to clause 3.1.1.1 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/0496fc1f1ed8.png) Transport and Handshake in IPv4/SSH Environment (negative case)

This test is CONDITIONAL MANDATORY for a FHM that declares support for IPv4 and SSH. Refer to clause 3.1.1.2 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/bca7f1950b61.png) Transport and Handshake in IPv6/SSH Environment (positive case)

This test is CONDITIONAL MANDATORY for a FHM that declares support for IPv6 and SSH. Refer to clause 3.1.1.3 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/16079be3c3a0.png) Transport and Handshake in IPv6/SSH Environment (negative case)

This test is CONDITIONAL MANDATORY for a FHM that declares support for IPv6 and SSH. Refer to clause 3.1.1.4 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/67e849018216.png) Transport and Handshake in IPv4/TLS Environment (positive case)

This test is CONDITIONAL MANDATORY for a FHM that declares support for IPv4 and TLS. Refer to clause 3.1.1.5 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/337d67b39129.png) Transport and Handshake in IPv4/TLS Environment (negative case)

This test is CONDITIONAL MANDATORY for a FHM that declares support for IPv4 and TLS. Refer to clause 3.1.1.6 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/a7b37c8efa75.png) Transport and Handshake in IPv6/TLS Environment (positive case)

This test is CONDITIONAL MANDATORY for a FHM that declares support for IPv6 and TLS. Refer to clause 3.1.1.7 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/b75c2d57b406.png) Transport and Handshake in IPv6/TLS Environment (negative case)

This test is CONDITIONAL MANDATORY for a FHM that declares support for IPv6 and TLS. Refer to clause 3.1.1.8 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/538a309b1754.png) Retrieval of FHM Information (positive case)

###### Test-Description and Applicability

This scenario is MANDATORY for FHM tests.

This scenario corresponds to the following clause in [3]:

* + 17.6.3 Start-up and Installation

###### Test-Entrance Criteria

The minimum functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the FHM.

###### Test-Methodology

1. **Initial Condition**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed

###### Procedure

* 1. The TEM NETCONF Client triggers <rpc><get> on ietf-yang-library towards FHM.

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter xmlns:yanglib="urn:ietf:params:xml:ns:yang:ietf-yang-library type="xpath" select="/yanglib:\*//."/>

</get>

* 1. The FHM NETCONF Server responds with <rpc-reply><data> where <data> contains all the yang modules supported by FHM NETCONF server

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="3">

<data xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<yang-library xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-library">

<module-set>

<name>Lib</name>

<module>

<name>o-ran-shared-cell</name>

<revision>2021-12-01</revision>

<namespace>urn:o-ran:shared-cell:1.0</namespace>

<feature>FHM</feature>

</module>

</module-set>

</yang-library>

</data>

</rpc-reply>

* 1. The TEM NETCONF Client triggers <rpc><get> on shared-cell-module towards the FHM NETCONF

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter xmlns:o-ran-sc="urn:o-ran:shared-cell:1.0" type="xpath" select="/yanglib:\*//."/>

</get>

* 1. The FHM NETCONF Server responds with <rpc-reply><data> where <data> contains all elements that the FHM NETCONF Server is able to expose.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="3">

<data xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<shared-cell>

<shared-cell-module-cap>

<t-copy>300</t-copy>

<t-combine>300</t-combine>

<ta3-prime-max-upper-range>300</ta3-prime-max-upper-range>

<max-number-node-copy-and-combine></max-number-node-copy-and-combine>

<max-number-eaxcid-copy>11</max-number-eaxcid-copy>

<max-number-eaxcid-combine>11</max-number-eaxcid-combine>

</shared-cell-module-cap>

</shared-cell>

</data>

</rpc-reply>

###### Test Requirement (expected result)

1. The fetched yang library contains o-ran-shared-cell module indicating that O-RU supports copy and combine function and FHM feature is defined
2. The shared-cell-module-cap container is present in the response from O-RU NETCONF server containing delay management parameters t-copy, t-combine, ta3-prime-max-upper-range, max-number-node-copy-and-combine, max-number-eaxcid-copy, max-number-eaxcid-combine, compression-method-supported.

#### ![]({{site.baseurl}}/assets/images/a2357cb83604.png) Retrieval of FHM Information (negative case)

###### Test-Description and Applicability

This scenario is MANDATORY for FHM tests. Since FHM doesn't have the capability for transmission and reception of radio signals, Some YANG models are not applicable for FHM, including:

* 1. o-ran-ald module
  2. o-ran-ald-port module
  3. o-ran-laa-operations module
  4. o-ran-laa module
  5. o-ran-module-cap module
  6. o-ran-beamforming module
  7. o-ran-uplane-conf module

The testcases corresponding to these 7 YANG models can be skipped as it is not applicable to FHM. The <get-rpc> to the mentioned module will return rpc-error. One example for module-cap is discussed in this testcase.

This scenario corresponds to the following clause in [3]:

* + - 17.6.3 Start-up and Installation

###### Test-Entrance Criteria

The minimum functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the FHM.

###### Test-Methodology

1. **Initial Condition**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed

###### Procedure

* 1. The TEM NETCONF Client triggers <rpc><get> on urn:o-ran:module-cap towards FHM.

<get xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<filter xmlns:o-ran-module-cap="urn:o-ran:module-cap:1.0" type="xpath"

select="/o-ran-module-cap:\*//."/>

<with-defaults xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-with- defaults">report-all</with-defaults>

</get>

* 1. The FHM NETCONF Server throws error <rpc-error><data> where <data> contains all the yang modules supported by FHM NETCONF server

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message id="11">

<rpc-error>

<error-type>Module-not-supported</error-type>

<error-tag>Module not supported</error-tag>

<error-severity>error</error-severity>

</rpc-error>

</rpc-reply>

###### Test Requirement (expected result)

* 1. Test Step 2 is performed successfully.

#### ![]({{site.baseurl}}/assets/images/841a10a79d54.png) U-Plane Configuration and Shared Cell Configuration

###### Test-Description and Applicability

This scenario is MANDATORY for FHM tests.

This scenario corresponds to the following clause in [3]:

* + 17.6.4 U-Plane Configuration for FHM

###### Test-Entrance Criteria

The minimum functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the FHM.

###### Test-Methodology

1. **Initial Conditions**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed.

###### Procedure

* 1. The TEM NETCONF Client configures the FHM NETCONF Server with a vlan-id for the C-Plane and U-Plane interfaces on the north interface and south interface (with same vlan id value).
  2. The TEM NETCONF Client configures a transport-flow in the FHM north node processing element: a combination of VLAN identity, North node MAC address and FHM MAC address.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="16">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<processing-elements xmlns="urn:o-ran:processing-element:1.0">

<transport-session-type>SHARED-CELL-ETH-INTERFACE</transport-session-type>

<ru-elements>

<name>XXX\_north\_node\_FHM\_processing-element01</name>

<transport-flow>

<interface-name>XXX\_if\_xyz\_vlan1</interface-name>

<north-eth-flow>

<ru-mac-address>A0:CE:C8:17:7A:41</ru-mac-address>

<vlan-id>1</vlan-id>

<north-node-mac-address>0a:00:27:00:00:09</o-du-mac-address>

</north-eth-flow>

</transport-flow>

</ru-elements>

</processing-elements>

</config>

</edit-config>

</rpc>

* 1. The TEM NETCONF Client configures a transport-flow in the FHM south node processing element: a combination of VLAN identity, South MAC address and FHM MAC address. This step shall be repeated for as any south node O-RUs in the setup with same M-Plane configuration.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="16">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<processing-elements xmlns="urn:o-ran:processing-element:1.0">

<transport-session-type>SHARED-CELL-ETH-INTERFACE</transport-session-type>

<ru-elements>

<name>XXX\_south\_node\_FHM\_processing-element01</name>

<transport-flow>

<interface-name>XXX\_if\_xyz\_vlan1</interface-name>

<south-eth-flow>

<ru-mac-address>A0:CE:C8:17:7A:41</ru-mac-address>

<vlan-id>1</vlan-id>

<south-node-mac-address>0a:00:27:00:01:10</o-du-mac-address>

</south-eth-flow>

</transport-flow>

</ru-elements>

</processing-elements>

</config>

</edit-config>

</rpc>

* 1. The TEM NETCONF Client configures the FHM with the unique eaxc-id value in the shared-cell-copy and shared-cell-combine module of FHM.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="16">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<shared-cell xmlns="urn:o-ran:shared-cell:1.0">

<shared-cell-config>

<shared-cell-copy-entities>

<name>XXX\_shared\_copy\_set01</name>

<north-node-processing-element>XXX\_north\_node\_FHM\_processing-element01

</north-node-processing-element>

<south-node-processing-element>XXX\_south\_node\_FHM\_processing- element01</south-node-processing-element>

<shared-cell-copy-uplane-config>

<tx-eaxc-id>

<eaxc-id>1</eaxc-id>

</tx-eaxc-id>

<downlink-radio-frame-offset>0 </downlink-radio-frame-offset>

<downlink-sfn-offset>0</downlink-sfn-offset>

<rx-eaxc-id>

<eaxc-id>1</eaxc-id>

</rx-eaxc-id>

</shared-cell-copy-uplane-config>

</shared-cell-copy-entities>

<shared-cell-combine-entities>

<name>XXX\_shared\_combine\_set01</name>

<north-node-processing-element>XXX\_north\_node\_FHM\_processing- element0</north-node-processing-element>

<south-node-processing-element>XXX\_south\_node\_FHM\_processing- element01</south-node-processing-element>

<shared-cell-combine-uplane-config>

<rx-eaxc-id>

<eaxc-id>2</eaxc-id>

</rx-eaxc-id>

<compression-method>

<compression-type> STATIC </compression-type>

<bitwidth> 14 </bitwidth>

<exponent> 4 </exponent>

</compression-method>

<downlink-radio-frame-offset>0 </downlink-radio-frame-offset>

<downlink-sfn-offset>0</downlink-sfn-offset>

<n-ta-offset>0</<n-ta-offset>>

</shared-cell-combine-uplane-config>

</shared-cell-combine-entities>

</shared-cell-config>

</config>

</edit-config>

</rpc>

* 1. Enable CU plane monitoring

###### Test Requirement (expected result)

1. The FHM NETCONF Server confirms the operations for the above transactions
2. Verify that carrier is activated in southern node TEM NETCONF server and C/U plane data flows have commenced.

#### ![]({{site.baseurl}}/assets/images/cd1afecace85.png) M-Plane Passthrough U-Plane Configuration for South Node RU (positive case)

###### Test-Description and Applicability

This scenario is CONDITIONAL MANDATORY for FHM tests with M-Plane Passthrough.

###### Test-Entrance Criteria

The minimum functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the South Node

###### Test-Methodology

* 1. **Initial Conditions**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed

###### Procedure

* + 1. The TEM Netconf-Server (which act as O-RU) will initiate the test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) and completed successfully.
    2. The TEM Netconf Client initiates the test procedure described in clause 3.1.10.1 towards the TEM Netconf Server and completed successfully.

###### Test Requirement (expected result)

Test Scenario step 2 is performed successfully.

#### ![]({{site.baseurl}}/assets/images/0238c9619e18.png) M-Plane Passthrough U-Plane Configuration for South Node RU (negative case)

###### Test-Description and Applicability

This scenario is CONDITIONAL MANDATORY for FHM tests with M-Plane Passthrough.

###### Test-Entrance Criteria

The minimum functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the South Node

###### Test-Methodology

* 1. **Initial Conditions**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed

##### Procedure

* + 1. The TEM Netconf-Server (which act as ORU) will initiate the test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) and completed successfully.
    2. The TEM Netconf Client initiates the test procedure described in clause 3.1.10.2 towards the TEM Netconf Server and completed successfully.

###### Test Requirement (expected result)

Test Scenario step 2 is performed successfully.

#### ![]({{site.baseurl}}/assets/images/546a20193f24.png) Performance Management

###### Test-Description and Applicability

This scenario is MANDATORY for FHM tests.

This clause defines specific part of Performance Measurement of shared cell

This scenario corresponds to the following clause in [3]:

* + 17.4 Performance Management

###### Test-Entrance Criteria

The minimum functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the FHM

###### Test-Methodology

1. **Initial Conditions**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed

###### Procedure

* 1. The TEM NETCONF Client establishes a connection with the FHM NETCONF Server
  2. The TEM NETCONF Client sends edit config for transceiver-measurement-object and epe-stats-object.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="4">

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<performance-measurement-objectsxmlns="urn:o-ran:performance- management:1.0"><enable-SFTP-upload>False</enable-SFTP-upload>

<enable-random-file-upload>TRUE</enable-random-file-upload>

<remote-SFTP-uploads>

<remote-SFTP-upload-path>sftp://oranuser@192.168.56.1:22/log</remote-SFTP- upload-path>

<password>

<password>oranuser</password>

</password>

</remote-SFTP-uploads>

<transceiver-measurement-interval>300</transceiver-measurement-interval>

<epe-measurement-interval>300</epe-measurement-interval>

<notification-interval>1200</notification-interval>

<transceiver-measurement-objects>

<measurement-object>TX\_BIAS\_COUNT</measurement-object>

<active>true</active>

<report-info>MAXIMUM</report-info>

<report-info>MINIMUM</report-info>

<report-info>FIRST</report-info>

<report-info>LATEST</report-info>

<object-unit>PORT\_NUMBER</object-unit>

<function>LOG\_10</function>

<bin-count>2</bin-count>

</transceiver-measurement-objects>

<epe-measurement-objects>

<measurement-object>RX\_ON\_TIME</measurement-object>

<active>true</active>

<object-unit>RU</object-unit>

<report-info>COUNT</report-info>

</epe-measurement-objects>

</performance-measurement-objects>

</config>

</edit-config>

</rpc>

* 1. The FHM sends notification message

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:mm:ss</eventTime>

<measurement-result-stats xmlns="urn:o-ran:performance-management:1.0">

<transceiver-stats>

<measurement-object>TEMPERATURE</measurement-object>

<start-time>YYYY-MM-DDTHH:mm:ss</start-time>

<end-time>YYYY-MM-DDTHH:mm:ss</end-time>

<transceiver-measurement-result>

<object-unit-id>PORT1</object-unit-id>

<min>

<value>1</value>

<time>YYYY-MM-DDTHH:mm:ss</time>

</min>

<max>

<value>3</value>

<time>YYYY-MM-DDTHH:mm:ss</time>

</max>

</transceiver-measurement-result>

</transceiver-stats>

<epe-statistics>

<measurement-object>TEMPERATURE</measurement-object>

<start-time>YYYY-MM-DDTHH:mm:ss</start-time>

<end-time>YYYY-MM-DDTHH:mm:ss</end-time>

<epe-measurement-result>

<object-unit-id>O-RAN-HARDWARE</object-unit-id>

<min>24</min>

<max>42</max>

</epe-measurement-result>

</epe-statistics>

<epe-statistics>

</measurement-result-stats>

</notification>

###### Test Requirement (expected result)

The rpc is sent successfully with required parameters and validated via TEM.

#### ![]({{site.baseurl}}/assets/images/c6a19b83bbcc.png) Delay Management

###### Test-Description and Applicability

This scenario is MANDATORY for FHM tests.

This test verifies the delay operation between O-DU and furthest (southern-most) O-RU.

This scenario corresponds to the following clause in [3]:

* + 17.5 Delay Management

###### Test-Entrance Criteria

The minimum functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the FHM

###### Test-Methodology

1. **Initial Conditions**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed

##### Procedure

* 1. The TEM NETCONF Client establishes a connection with the FHM NETCONF Server
  2. The TEM NETCONF Client retrieve delay profile using o-ran-delay-management.yang from TEM NETCONF Server.
  3. The TEM NETCONF Client send a <edit-config> with ta3-prime-max value of shared-cell-combine container.

<edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">

<target>

<running/>

</target>

<default-operation>merge</default-operation>

<config>

<shared-cell xmlns="urn:o-ran:shared-cell:1.0">

<shared-cell-combine-entities>

<name>XXX\_shared\_combine\_set01</name>

<ta3-prime-max>300</ta3-prime-max>

</shared-cell-combine-entities>

</config>

</edit-config>

* 1. The FHM will respond with the OK reply to the TEM NETCONF Client.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="1">

<ok/>

</rpc-reply>

###### Test Requirement (expected result)

Test Scenario step 4 is performed successfully.

#### ![]({{site.baseurl}}/assets/images/30194b783837.png) Software Update (positive case)

This test is MANDATORY for a FHM. Refer to clause 3.1.6.1 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/f0b0248d72eb.png) Software Update (negative case)

This test is MANDATORY for a FHM. Refer to clause 3.1.6.2 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/1cc63fa91b0c.png) Software Activation without Reset

This test is MANDATORY for a FHM. Refer to clause 3.1.7.1 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/453950317375.png) Supplemental Reset after Software Activation

This test is MANDATORY for a FHM. Refer to clause 3.1.7.2 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/099b3b9dd28e.png) File Management Operation: Upload

###### Test-Description and Applicability

This scenario is MANDATORY for FHM tests.

This test verifies the file management operation of the FHM.

This scenario corresponds to the following clause in [3]:

* + 12.3 File Management Operation: Upload

###### Test-Entrance Criteria

The functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the FHM

###### Test-Methodology

1. **Initial Conditions**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed.

##### Procedure

* 1. The TEM NETCONF Client establishes a connection with the FHM NETCONF Server
  2. The TEM NETCONF Client uploads a file using the o-ran-file-management YANG model from the TEM NETCONF Server.
  3. The TEM NETCONF Client send <rpc><file-upload> towards NETCONF Server

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="3">

<file-upload xmlns="urn:o-ran:file-management:1.0">

<local-logical-file-path>latest.log</local-logical-file-path>

<remote-file-path>sftp://guest@192.168.2.2:22/</remote-file-path>

<password>

<password>guest</password>

</password>

</file-upload>

</rpc>

* 1. The FHM will respond with the status reply to the TEM NETCONF Client.

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="3">

<status xmlns="urn:o-ran:file-management:1.0">SUCCESS</status>

</rpc-reply>

* 1. The NETCONF Server sends notification.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:mm:ss</eventTime>

<file-upload-notification xmlns="urn:o-ran:file-management:1.0">

<local-logical-file-path>latest.log</local-logical-file-path>

<remote-file-path>sftp://guest@192.168.2.2:22/</remote-file-path>

<status>SUCCESS</status>

</file-upload-notification>

</notification>

###### Test Requirement (expected result)

Test Scenario step 4 is performed successfully.

#### ![]({{site.baseurl}}/assets/images/0825ac404081.png) File Management Operation: Retrieve the list

###### Test-Description and Applicability

This scenario is MANDATORY for FHM tests.

This test verifies the file management operation of the FHM.

This scenario corresponds to the following clause in [3]:

* + 12.4 File Management Operation: Retrieve the list

###### Test-Entrance Criteria

The minimum functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the FHM

###### Test-Methodology

1. **Initial Conditions**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed.

##### Procedure

* 1. The TEM NETCONF Client establishes a connection with the FHM NETCONF Server
  2. The TEM NETCONF Client retrieves the file from TEM NETCONF Server. One or multiple 6 files' information can be retrieved by one retrieve file list operation (use of wildcard is allowed).

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="5">

<retrieve-file-list xmlns="urn:o-ran:file-management:1.0">

<logical-path>.</logical-path>

<file-name-filter>\*</file-name-filter>

</retrieve-file-list>

</rpc>

* 1. The FHM will respond with the status reply to the TEM NETCONF Client whether the TEM NETCONF Server accepts the retrieve-file-list request or rejects due to some reason is replied. If rejected, 2 the human readable reject reason is also replied

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="3">

<status xmlns="urn:o-ran:file-management:1.0">SUCCESS</status>

</rpc-reply>

###### Test Requirement (expected result)

Test Scenario step 4 is performed successfully.

#### ![]({{site.baseurl}}/assets/images/b66701947ba3.png) File Management Operation: Download

###### Test-Description and Applicability

This scenario is MANDATORY for FHM tests.

This test verifies the file management operation of the FHM.

This scenario corresponds to the following clause in [3]:

* + 12.5 File Management Operation: Download

###### Test-Entrance Criteria

The minimum functions of the TEM described in clause 2.3 that support validation of the M-Plane are operational, configured and connected to the FHM

###### Test-Methodology

1. **Initial Conditions**

The test procedure described in clause 3.1.1.1 (IPv4/SSH) or 3.1.1.3 (IPv6/SSH) or 3.1.1.5 (IPv4/TLS) or 3.1.1.7 (IPv6/TLS) is successfully completed

###### Procedure

* 1. The TEM NETCONF Client establishes a connection with the FHM NETCONF Server
  2. The TEM NETCONF Client sends file download request to TEM NETCONF Server.

<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="4">

<file-download xmlns="urn:o-ran:file-management:1.0">

<local-logical-file-path>.</local-logical-file-path>

<remote-file- path>sftp://guest@192.168.2.2:22/mplane\_user\_Guide.docx</remote-file-path>

<password> <password>guest</password></password>

</file-download>

</rpc>

* 1. The FHM will respond with the status reply to the TEM NETCONF Client

<rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="3">

<status xmlns="urn:o-ran:file-management:1.0">SUCCESS</status>

</rpc-reply>

* 1. The NETCONF Server sends notification.

<notification xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0">

<eventTime>YYYY-MM-DDTHH:mm:ss</eventTime>

<file-download-notification xmlns="urn:o-ran:file-management:1.0">

<local-logical-file-path>latest.log</local-logical-file-path>

<remote-file-path>sftp://guest@192.168.2.2:22/</remote-file-path>

<status>SUCCESS</status>

</file-upload-notification>

</notification>

###### Test Requirement (expected result)

Test Scenario step 4 is performed successfully.

#### ![]({{site.baseurl}}/assets/images/72988c238c6e.png) Subscription to Notifications

This test is MANDATORY for a FHM. Refer to clause 3.1.2 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/b6ad435b8fee.png) O-RU Alarm Notification Generation

This test is MANDATORY for a FHM. Refer to clause 3.1.5.1 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/b5b44b1e0eb1.png) Retrieval of Active Alarm List

This test is MANDATORY for a FHM. Refer to clause 3.1.5.1 for the test procedure

#### ![]({{site.baseurl}}/assets/images/cfd56f89474e.png) M-Plane Connection Supervision (positive case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.3.1 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/1a41421f78b8.png) M-Plane Connection Supervision (negative case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.3.2 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/6c635759f3a2.png) Sudo on Hybrid M-plane Architecture (positive case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.8.1 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/1f63eb6fa246.png) Access Control Sudo (negative case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.8.2 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/19d74faa3085.png) Access Control NMS (negative case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.8.3 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/6113b8d0a328.png) Access Control FM-PM (negative case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.8.4 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/f43a1709c9cd.png) Access Control SWM (negative case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.8.5 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/e10ad9bf04d5.png) Sudo on Hierarchical M-plane architecture (positive case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.8.6 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/a9bb7f6fea4c.png) Access Control SMO (negative case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.8.7 for the test procedure.

#### ![]({{site.baseurl}}/assets/images/9592fe40e9b3.png) Access Control Hybrid-ODU (negative case)

This test is CONDITIONAL MANDATORY for a FHM. Refer to clause 3.1.8.8 for the test procedure.

### ![]({{site.baseurl}}/assets/images/07f16aaf1c39.png) FHM UC-Plane Tests

#### ![]({{site.baseurl}}/assets/images/7af4b64e2a84.png) UC-Plane FHM Scenario Class Base 3GPP DL Same Cell Scenario

###### Test Description and Applicability

The test is MANDATORY for FHM.

The purpose of the test is to ensure the FHM can meet the requirement of the DL copy function to retrieve eCPRI messages coming from the north-node as payload of Ethernet frames, copy them (the entire eCPRI message including eCPRI header and eCPRI payload) without any modifications as payload into Ethernet frames and send them towards all of the south-nodes that are configured.

The FHM is connected to TEM emulating at least two O-RUs as south-nodes that operate as same cell. Each south- node emulated O-RUs must have at least one UE attached to it.

Using the standard TDD or FDD test frame described in clause 3.2.1.1.3 or 3.2.1.1.1 for FR1 or 3.2.1.1.4 for FR2, the O-DU emulator (i.e. north bound interface of the FHM described in clause 2.3) generates downlink C-Plane and U-Plane messages that require the FHM to transmit towards the south-nodes. This configuration corresponds to stock data section A in all symbols that do not contain PDCCH channels. The remainder of this test description assumes the FR1 TDD FHM. While the FHM DUT is generally agnostic to the Frequency Range and other similar radio frame configuration, the FHM tests can be conducted using any of the above test frames.

###### Test Entrance Criteria

South-node O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz Bandwidth as described by NR-FR1-TM1.1 in downlink direction, appropriate SSB signal shall also be transmitted for UEs in emulated O-RUs to synchronize and decode PDSCH properly. If the O-RU does not support this bandwidth, another 3GPP FRC can be selected. In the test frame, all PDSCH data is set to all zeros. It will be for 5G New Radio only.

###### Test Methodology

* 1. **Initial Conditions**

Configure the south-node emulated O-RUs which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Configure UEs in each emulated O-RUs with appropriate parameters that are needed to allow them to synch and demodulate the downlink signal.

The O-DU emulator has determined the topology (adjacency relationships) of O-RUs for the shared cell through topology discovery procedure. Then configure the FHM with appropriate shared-cell-copy-uplane- config parameters using M-Plane commands.

###### Procedure

Build an appropriate IQ signal describing the signal described above in clause 3.2.1.1.3in the CUSM emulator Use the CUSM emulator control interface to build the appropriate C-Plane messages that describe the signal. Every symbol other than the ones used in the test shall either be allocated with user data or left unallocated (empty). If allocated with user data, they be described by either a single or multiple sections (DL-SCH that are used for the test, DMRS and DCI) using Section Type 1 messages. No Section Type zero messages will be used for this test. Encapsulate the IQ data in U-Plane messages for downlink slots only. Play those messages to the FHM respecting timing windows described in clause 3.2.1.1.3. Repeat the entire frame the number of times required for emulated UE to synch to the SSB and allow it to demodulate and decode the test frame.

###### Test Requirement (expected result)

1. The signal measured from the UEs in each south-node emulated O-RU shall satisfy a basic 3GPP signal performance requirement for this radio category (i.e. EVM).
2. The test frame received in downlink direction by the UEs shall be the same as the signal described above. If it contains all the same PRB assignments and all zero data, the test passes.

#### ![]({{site.baseurl}}/assets/images/fe5f5a0f15ba.png) UC-Plane FHM Scenario Class Base 3GPP UL

###### Test Description and Applicability

The test is MANDATORY for FHM.

The purpose of the test is to ensure the FHM can meet the requirement for the UL combine function to combine IQ data corresponding to the same radio resource element from each south-node O-RU to eCPRI messages for UL U- Plane towards north-node O-DU.

The FHM will be connected to TEM emulating at least two O-RUs as south-nodes that operate as same cell. Each south-node emulated O-RUs must have at least two UEs attached to it.

Using the standard TDD or FDD test frame described in clause 3.2.1.1.3, the O-DU emulator (i.e. O-RAN interface of the TER described in clause 2.1) will generate uplink C-Plane that require the FHM to transmit towards the south-nodes. Appropriate SSB signal shall also be transmitted in downlink U plane for UEs supported by emulated O-RUs to synchronize and transmit uplink signals properly.

For each O-RU, it needs to transmit 2 UL signals in same slot, one PUSCH signal from one UE and one PUCCH signal from the other UE. The definition of the signal can be found from Table 3.5.1.2-1 and Table 3.5.1.2-2 below, the value from both tables can be referred to ETSI TS 138.141 clause 8, Table 8.2.1.4.2-2 and Table 8.3.2.1.4.2-2 with slight changes in accommodation for the purpose of this test. The reason for using PUSCH and PUCCH signals in this test is to exercise UL combine function with different scenarios, i.e. PUSCH from each O-RU does not overlap while PUCCH overlaps.

<div class="table-wrapper" markdown="block">

|  |  |  |  |
| --- | --- | --- | --- |
| **PUSCH Parameters** | | **Value for O-RU 1** | **Value for O-RU 2** |
| Transform precoding | | Disabled | |
| C-RNTI | | 0 | 1 |
| Default TDD UL-DL pattern (Note 1) | | 30 kHz SCS:  3D1S1U, S=10D:2G:2U  30 kHz SCS:  7D1S2U, S=6D:4G:4U | |
| HARQ | Maximum number of HARQ transmissions | 4 | |
| RV sequence | 0, 2, 3, 1 | |
| DM-RS | DM-RS configuration type | 1 | |
| DM-RS duration | single-symbol DM-RS | |
| Additional DM-RS position | pos1 | |
| Number of DM-RS CDM group(s) without data | 2 | |
| Ratio of PUSCH EPRE to DM-RS EPRE | -3 dB | |
| DM-RS port(s) | {0}, {0, 1} | |
| DM-RS sequence generation | 0  NID =0, nSCID =0 | |
| Time domain resource assignment | PUSCH mapping type | A, B | |
| Start symbol | 0 | |
| Allocation length | 14 | |
| Frequency domain resource assignment | RB assignment | 1 - 51 | 52 - 102 |
| Frequency hopping | Disabled | |
| TPMI index for 2Tx two layer spatial multiplexing transmission | | 0 | |
| Code block group based PUSCH transmission | | Disabled | |
| NOTE 1: The same requirements are applicable to FDD and TDD with different UL-DL patterns.  NOTE 2: If other combinations of numerology and bandwidth are required to be tested, appropriate PUSCH PRB length and location needs to be selected with the following principles: a) PUSCH from O-RU1 and O-RU2 has the same PRB length, which is between 1/5 and 1/4 of the total bandwidth. b) PUSCH from O-RU1 starts from PRB#1, PUSCH from O-RU1 and O-RU2 needs to be adjacent. | | | |

</div>

**Table 3.5.1.2-1 PUSCH Parameters for HFM UL Test**

<div class="table-wrapper" markdown="block">

|  |  |  |
| --- | --- | --- |
| **PUCCH Parameters** | **Value for O-RU1** | **Value for O-RU2** |
| C-RNTI | 2 | 3 |
| PUCCH format | 1 | |
| Number of information bits | 2 | |
| Number of PRBs | 1 | |
| Number of symbols | 14 | |
| First PRB prior to frequency hopping | 0 | |
| Intra-slot frequency hopping | Enabled | |
| First PRB after frequency hopping | The largest PRB index - (nrofPRBs -1) | |
| Group and sequence hopping | Neither | |
| Hopping ID | 0 | |
| Initial cyclic shift | 0 | |
| First symbol | 0 | |
| Index of orthogonal cover code (*timeDomainOCC*) | 0 | 1 |

</div>

**Table 3.5.1.2-2 PUCCH Parameters for HFM UL Test**

In this case, PUSCH from each O-RU are using different PRB resource in same slot while PUCCH from each O- RU are using same PRB resource but with different OCC.

###### Test Entrance Criteria

The south-node O-RU must support the default parameters in clause 3.2.1.1.3 of this document. The test numerology will be 30 kHz subcarrier spacing and 100 MHz. If the O-RU does not support this bandwidth another 3GPP FRC can be selected. In the test frame, all PUSCH data is set to all zeros. It will be for 5G New Radio only.

###### Test Methodology

* 1. **Initial Conditions**

Configure the south-node emulated O-RUs which includes collecting O-RU capabilities, configuring the O-RU for operation using M-Plane commands, and synchronizing the O-RU using G.8275.1. Configure UEs in each emulated O-RUs with appropriate parameters that needed to allow them to synch and transmit uplink signal.

The O-DU emulator has determined the topology (adjacency relationships) of O-RUs for the shared cell through topology discovery procedure. Then configure the FHM with appropriate shared-cell-combine-uplane- config parameters using M-Plane commands.

###### Procedure

* + 1. Build appropriate test signal for each south-node O-RU as described above in the signal source of the TER.
    2. Use the O-DU emulator control interface to build the appropriate C-Plane messages for downlink SSB and describe the uplink signal. For uplink, every symbol shall be described by either one or two sections (UL-SCH) using Section Type 1 messages. No Section Type zero messages will be used for this test.
    3. Play the C plane messages to the O-RU respecting timing windows described in clause 3.2.1.1.1.
    4. Upon synchronizing to SSB, UE in each emulated O-RU shall transmit uplink signal defined above.
    5. Repeat the entire frame the number of times required to synch the DUT, allow it to create and send the U-plane messages to the O-DU and for the O-DU to demodulate, decode and extract the payload.

###### Test Requirement (expected result)

1. The test frame received by the TEM/O-DU shall be the same as the signal described above from two O-RUs.
2. Both PUSCH and PUCCH from 2 south-node O-RUs can be decoded correctly from TEM/O-DU U-Plane extracted IQ with expected payload.
---

- View in [GitHub Mode]({{site.github_page_url}}/O-RAN.WG4.TS.CONF.0-R004-v12.00.docx.md).
- Go back to [Table of Contents]({{site.baseurl}}/).
- Download the [Original Document]({{site.download_url}}/O-RAN.WG4.TS.CONF.0-R004-v12.00.docx).
